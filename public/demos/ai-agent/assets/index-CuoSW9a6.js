const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CyberdromeScene-BQrFv4Qf.js","assets/with-selector-SQ-W3dkg.js","assets/HistoryView-BYWyb74U.js","assets/useQuery-1-ZV3XJR.js","assets/HistoryView-Cu23DcIM.css","assets/TimelineView-MiOUD8Sn.js","assets/Charts.module-0qO_SaXE.js","assets/Charts-BN9-_lNy.css","assets/AnalyticsView-DF_oyewB.js","assets/QueueView-B2w77nDK.js","assets/QueueView-QjjiV10n.css"])))=>i.map(i=>d[i]);
function Dk(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var Ik=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dy={exports:{}},lh={};var Kx;function Lk(){if(Kx)return lh;Kx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return lh.Fragment=e,lh.jsx=t,lh.jsxs=t,lh}var Yx;function Bk(){return Yx||(Yx=1,dy.exports=Lk()),dy.exports}var N=Bk(),fy={exports:{}},qt={};var Xx;function zk(){if(Xx)return qt;Xx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=m&&P[m]||P["@@iterator"],typeof P=="function"?P:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function b(P,Z,V){this.props=P,this.context=Z,this.refs=S,this.updater=V||x}b.prototype.isReactComponent={},b.prototype.setState=function(P,Z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Z,"setState")},b.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function v(){}v.prototype=b.prototype;function _(P,Z,V){this.props=P,this.context=Z,this.refs=S,this.updater=V||x}var E=_.prototype=new v;E.constructor=_,w(E,b.prototype),E.isPureReactComponent=!0;var R=Array.isArray;function M(){}var D={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function L(P,Z,V){var _e=V.ref;return{$$typeof:n,type:P,key:Z,ref:_e!==void 0?_e:null,props:V}}function j(P,Z){return L(P.type,Z,P.props)}function X(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function G(P){var Z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(V){return Z[V]})}var H=/\/+/g;function $(P,Z){return typeof P=="object"&&P!==null&&P.key!=null?G(""+P.key):Z.toString(36)}function Q(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(M,M):(P.status="pending",P.then(function(Z){P.status==="pending"&&(P.status="fulfilled",P.value=Z)},function(Z){P.status==="pending"&&(P.status="rejected",P.reason=Z)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Y(P,Z,V,_e,we){var De=typeof P;(De==="undefined"||De==="boolean")&&(P=null);var le=!1;if(P===null)le=!0;else switch(De){case"bigint":case"string":case"number":le=!0;break;case"object":switch(P.$$typeof){case n:case e:le=!0;break;case p:return le=P._init,Y(le(P._payload),Z,V,_e,we)}}if(le)return we=we(P),le=_e===""?"."+$(P,0):_e,R(we)?(V="",le!=null&&(V=le.replace(H,"$&/")+"/"),Y(we,Z,V,"",function(xe){return xe})):we!=null&&(X(we)&&(we=j(we,V+(we.key==null||P&&P.key===we.key?"":(""+we.key).replace(H,"$&/")+"/")+le)),Z.push(we)),1;le=0;var ee=_e===""?".":_e+":";if(R(P))for(var Me=0;Me<P.length;Me++)_e=P[Me],De=ee+$(_e,Me),le+=Y(_e,Z,V,De,we);else if(Me=y(P),typeof Me=="function")for(P=Me.call(P),Me=0;!(_e=P.next()).done;)_e=_e.value,De=ee+$(_e,Me++),le+=Y(_e,Z,V,De,we);else if(De==="object"){if(typeof P.then=="function")return Y(Q(P),Z,V,_e,we);throw Z=String(P),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return le}function te(P,Z,V){if(P==null)return P;var _e=[],we=0;return Y(P,_e,"","",function(De){return Z.call(V,De,we++)}),_e}function re(P){if(P._status===-1){var Z=P._result;Z=Z(),Z.then(function(V){(P._status===0||P._status===-1)&&(P._status=1,P._result=V)},function(V){(P._status===0||P._status===-1)&&(P._status=2,P._result=V)}),P._status===-1&&(P._status=0,P._result=Z)}if(P._status===1)return P._result.default;throw P._result}var U=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},B={map:te,forEach:function(P,Z,V){te(P,function(){Z.apply(this,arguments)},V)},count:function(P){var Z=0;return te(P,function(){Z++}),Z},toArray:function(P){return te(P,function(Z){return Z})||[]},only:function(P){if(!X(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return qt.Activity=f,qt.Children=B,qt.Component=b,qt.Fragment=t,qt.Profiler=r,qt.PureComponent=_,qt.StrictMode=i,qt.Suspense=u,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,qt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return D.H.useMemoCache(P)}},qt.cache=function(P){return function(){return P.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(P,Z,V){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var _e=w({},P.props),we=P.key;if(Z!=null)for(De in Z.key!==void 0&&(we=""+Z.key),Z)!O.call(Z,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Z.ref===void 0||(_e[De]=Z[De]);var De=arguments.length-2;if(De===1)_e.children=V;else if(1<De){for(var le=Array(De),ee=0;ee<De;ee++)le[ee]=arguments[ee+2];_e.children=le}return L(P.type,we,_e)},qt.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},qt.createElement=function(P,Z,V){var _e,we={},De=null;if(Z!=null)for(_e in Z.key!==void 0&&(De=""+Z.key),Z)O.call(Z,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(we[_e]=Z[_e]);var le=arguments.length-2;if(le===1)we.children=V;else if(1<le){for(var ee=Array(le),Me=0;Me<le;Me++)ee[Me]=arguments[Me+2];we.children=ee}if(P&&P.defaultProps)for(_e in le=P.defaultProps,le)we[_e]===void 0&&(we[_e]=le[_e]);return L(P,De,we)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(P){return{$$typeof:o,render:P}},qt.isValidElement=X,qt.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:re}},qt.memo=function(P,Z){return{$$typeof:h,type:P,compare:Z===void 0?null:Z}},qt.startTransition=function(P){var Z=D.T,V={};D.T=V;try{var _e=P(),we=D.S;we!==null&&we(V,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(M,U)}catch(De){U(De)}finally{Z!==null&&V.types!==null&&(Z.types=V.types),D.T=Z}},qt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},qt.use=function(P){return D.H.use(P)},qt.useActionState=function(P,Z,V){return D.H.useActionState(P,Z,V)},qt.useCallback=function(P,Z){return D.H.useCallback(P,Z)},qt.useContext=function(P){return D.H.useContext(P)},qt.useDebugValue=function(){},qt.useDeferredValue=function(P,Z){return D.H.useDeferredValue(P,Z)},qt.useEffect=function(P,Z){return D.H.useEffect(P,Z)},qt.useEffectEvent=function(P){return D.H.useEffectEvent(P)},qt.useId=function(){return D.H.useId()},qt.useImperativeHandle=function(P,Z,V){return D.H.useImperativeHandle(P,Z,V)},qt.useInsertionEffect=function(P,Z){return D.H.useInsertionEffect(P,Z)},qt.useLayoutEffect=function(P,Z){return D.H.useLayoutEffect(P,Z)},qt.useMemo=function(P,Z){return D.H.useMemo(P,Z)},qt.useOptimistic=function(P,Z){return D.H.useOptimistic(P,Z)},qt.useReducer=function(P,Z,V){return D.H.useReducer(P,Z,V)},qt.useRef=function(P){return D.H.useRef(P)},qt.useState=function(P){return D.H.useState(P)},qt.useSyncExternalStore=function(P,Z,V){return D.H.useSyncExternalStore(P,Z,V)},qt.useTransition=function(){return D.H.useTransition()},qt.version="19.2.4",qt}var Zx;function M0(){return Zx||(Zx=1,fy.exports=zk()),fy.exports}var K=M0();const Rh=nd(K),OV=Dk({__proto__:null,default:Rh},[K]);var py={exports:{}},ch={},my={exports:{}},gy={};var Jx;function Pk(){return Jx||(Jx=1,(function(n){function e(Y,te){var re=Y.length;Y.push(te);e:for(;0<re;){var U=re-1>>>1,B=Y[U];if(0<r(B,te))Y[U]=te,Y[re]=B,re=U;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var te=Y[0],re=Y.pop();if(re!==te){Y[0]=re;e:for(var U=0,B=Y.length,P=B>>>1;U<P;){var Z=2*(U+1)-1,V=Y[Z],_e=Z+1,we=Y[_e];if(0>r(V,re))_e<B&&0>r(we,V)?(Y[U]=we,Y[_e]=re,U=_e):(Y[U]=V,Y[Z]=re,U=Z);else if(_e<B&&0>r(we,re))Y[U]=we,Y[_e]=re,U=_e;else break e}}return te}function r(Y,te){var re=Y.sortIndex-te.sortIndex;return re!==0?re:Y.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();n.unstable_now=function(){return l.now()-o}}var u=[],h=[],p=1,f=null,m=3,y=!1,x=!1,w=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function E(Y){for(var te=t(h);te!==null;){if(te.callback===null)i(h);else if(te.startTime<=Y)i(h),te.sortIndex=te.expirationTime,e(u,te);else break;te=t(h)}}function R(Y){if(w=!1,E(Y),!x)if(t(u)!==null)x=!0,M||(M=!0,G());else{var te=t(h);te!==null&&Q(R,te.startTime-Y)}}var M=!1,D=-1,O=5,L=-1;function j(){return S?!0:!(n.unstable_now()-L<O)}function X(){if(S=!1,M){var Y=n.unstable_now();L=Y;var te=!0;try{e:{x=!1,w&&(w=!1,v(D),D=-1),y=!0;var re=m;try{t:{for(E(Y),f=t(u);f!==null&&!(f.expirationTime>Y&&j());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var B=U(f.expirationTime<=Y);if(Y=n.unstable_now(),typeof B=="function"){f.callback=B,E(Y),te=!0;break t}f===t(u)&&i(u),E(Y)}else i(u);f=t(u)}if(f!==null)te=!0;else{var P=t(h);P!==null&&Q(R,P.startTime-Y),te=!1}}break e}finally{f=null,m=re,y=!1}te=void 0}}finally{te?G():M=!1}}}var G;if(typeof _=="function")G=function(){_(X)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,$=H.port2;H.port1.onmessage=X,G=function(){$.postMessage(null)}}else G=function(){b(X,0)};function Q(Y,te){D=b(function(){Y(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var re=m;m=te;try{return Y()}finally{m=re}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(Y,te){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var re=m;m=Y;try{return te()}finally{m=re}},n.unstable_scheduleCallback=function(Y,te,re){var U=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?U+re:U):re=U,Y){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=re+B,Y={id:p++,callback:te,priorityLevel:Y,startTime:re,expirationTime:B,sortIndex:-1},re>U?(Y.sortIndex=re,e(h,Y),t(u)===null&&Y===t(h)&&(w?(v(D),D=-1):w=!0,Q(R,re-U))):(Y.sortIndex=B,e(u,Y),x||y||(x=!0,M||(M=!0,G()))),Y},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(Y){var te=m;return function(){var re=m;m=te;try{return Y.apply(this,arguments)}finally{m=re}}}})(gy)),gy}var Qx;function Fk(){return Qx||(Qx=1,my.exports=Pk()),my.exports}var yy={exports:{}},Wi={};var eS;function Uk(){if(eS)return Wi;eS=1;var n=M0();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,h,p){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:u,containerInfo:h,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Wi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Wi.createPortal=function(u,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,p)},Wi.flushSync=function(u){var h=l.T,p=i.p;try{if(l.T=null,i.p=2,u)return u()}finally{l.T=h,i.p=p,i.d.f()}},Wi.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(u,h))},Wi.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},Wi.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var p=h.as,f=o(p,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:f,integrity:m,fetchPriority:y}):p==="script"&&i.d.X(u,{crossOrigin:f,integrity:m,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Wi.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=o(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(u)},Wi.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,f=o(p,h.crossOrigin);i.d.L(u,p,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Wi.preloadModule=function(u,h){if(typeof u=="string")if(h){var p=o(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(u)},Wi.requestFormReset=function(u){i.d.r(u)},Wi.unstable_batchedUpdates=function(u,h){return u(h)},Wi.useFormState=function(u,h,p){return l.H.useFormState(u,h,p)},Wi.useFormStatus=function(){return l.H.useHostTransitionStatus()},Wi.version="19.2.4",Wi}var tS;function uC(){if(tS)return yy.exports;tS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),yy.exports=Uk(),yy.exports}var nS;function jk(){if(nS)return ch;nS=1;var n=Fk(),e=M0(),t=uC();function i(s){var c="https://react.dev/errors/"+s;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var c=s,d=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,(c.flags&4098)!==0&&(d=c.return),s=c.return;while(s)}return c.tag===3?d:null}function l(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function o(s){if(s.tag===31){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(i(188))}function h(s){var c=s.alternate;if(!c){if(c=a(s),c===null)throw Error(i(188));return c!==s?null:s}for(var d=s,g=c;;){var A=d.return;if(A===null)break;var T=A.alternate;if(T===null){if(g=A.return,g!==null){d=g;continue}break}if(A.child===T.child){for(T=A.child;T;){if(T===d)return u(A),s;if(T===g)return u(A),c;T=T.sibling}throw Error(i(188))}if(d.return!==g.return)d=A,g=T;else{for(var F=!1,J=A.child;J;){if(J===d){F=!0,d=A,g=T;break}if(J===g){F=!0,g=A,d=T;break}J=J.sibling}if(!F){for(J=T.child;J;){if(J===d){F=!0,d=T,g=A;break}if(J===g){F=!0,g=T,d=A;break}J=J.sibling}if(!F)throw Error(i(189))}}if(d.alternate!==g)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?s:c}function p(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s;for(s=s.child;s!==null;){if(c=p(s),c!==null)return c;s=s.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=X&&s[X]||s["@@iterator"],typeof s=="function"?s:null)}var H=Symbol.for("react.client.reference");function $(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===H?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case b:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case M:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case _:return s.displayName||"Context";case v:return(s._context.displayName||"Context")+".Consumer";case E:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return c=s.displayName||null,c!==null?c:$(s.type)||"Memo";case O:c=s._payload,s=s._init;try{return $(s(c))}catch{}}return null}var Q=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},U=[],B=-1;function P(s){return{current:s}}function Z(s){0>B||(s.current=U[B],U[B]=null,B--)}function V(s,c){B++,U[B]=s.current,s.current=c}var _e=P(null),we=P(null),De=P(null),le=P(null);function ee(s,c){switch(V(De,c),V(we,s),V(_e,null),c.nodeType){case 9:case 11:s=(s=c.documentElement)&&(s=s.namespaceURI)?yx(s):0;break;default:if(s=c.tagName,c=c.namespaceURI)c=yx(c),s=_x(c,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(_e),V(_e,s)}function Me(){Z(_e),Z(we),Z(De)}function xe(s){s.memoizedState!==null&&V(le,s);var c=_e.current,d=_x(c,s.type);c!==d&&(V(we,s),V(_e,d))}function Ze(s){we.current===s&&(Z(_e),Z(we)),le.current===s&&(Z(le),rh._currentValue=re)}var Le,_t;function Pe(s){if(Le===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);Le=c&&c[1]||"",_t=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+s+_t}var je=!1;function ze(s,c){if(!s||je)return"";je=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Re){var ke=Re}Reflect.construct(s,[],Fe)}else{try{Fe.call()}catch(Re){ke=Re}s.call(Fe.prototype)}}else{try{throw Error()}catch(Re){ke=Re}(Fe=s())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Re){if(Re&&ke&&typeof Re.stack=="string")return[Re.stack,ke.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),F=T[0],J=T[1];if(F&&J){var ae=F.split(`
`),Ae=J.split(`
`);for(A=g=0;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;for(;A<Ae.length&&!Ae[A].includes("DetermineComponentFrameRoot");)A++;if(g===ae.length||A===Ae.length)for(g=ae.length-1,A=Ae.length-1;1<=g&&0<=A&&ae[g]!==Ae[A];)A--;for(;1<=g&&0<=A;g--,A--)if(ae[g]!==Ae[A]){if(g!==1||A!==1)do if(g--,A--,0>A||ae[g]!==Ae[A]){var Ne=`
`+ae[g].replace(" at new "," at ");return s.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",s.displayName)),Ne}while(1<=g&&0<=A);break}}}finally{je=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?Pe(d):""}function Ue(s,c){switch(s.tag){case 26:case 27:case 5:return Pe(s.type);case 16:return Pe("Lazy");case 13:return s.child!==c&&c!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return ze(s.type,!1);case 11:return ze(s.type.render,!1);case 1:return ze(s.type,!0);case 31:return Pe("Activity");default:return""}}function st(s){try{var c="",d=null;do c+=Ue(s,d),d=s,s=s.return;while(s);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Rt=Object.prototype.hasOwnProperty,bt=n.unstable_scheduleCallback,Dt=n.unstable_cancelCallback,rn=n.unstable_shouldYield,Ut=n.unstable_requestPaint,Bt=n.unstable_now,wn=n.unstable_getCurrentPriorityLevel,Ee=n.unstable_ImmediatePriority,He=n.unstable_UserBlockingPriority,dt=n.unstable_NormalPriority,St=n.unstable_LowPriority,It=n.unstable_IdlePriority,On=n.log,zt=n.unstable_setDisableYieldValue,zn=null,Un=null;function qn(s){if(typeof On=="function"&&zt(s),Un&&typeof Un.setStrictMode=="function")try{Un.setStrictMode(zn,s)}catch{}}var Je=Math.clz32?Math.clz32:ta,Fi=Math.log,Zn=Math.LN2;function ta(s){return s>>>=0,s===0?32:31-(Fi(s)/Zn|0)|0}var nt=256,Cs=262144,As=4194304;function Ai(s){var c=s&42;if(c!==0)return c;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function oe(s,c,d){var g=s.pendingLanes;if(g===0)return 0;var A=0,T=s.suspendedLanes,F=s.pingedLanes;s=s.warmLanes;var J=g&134217727;return J!==0?(g=J&~T,g!==0?A=Ai(g):(F&=J,F!==0?A=Ai(F):d||(d=J&~s,d!==0&&(A=Ai(d))))):(J=g&~T,J!==0?A=Ai(J):F!==0?A=Ai(F):d||(d=g&~s,d!==0&&(A=Ai(d)))),A===0?0:c!==0&&c!==A&&(c&T)===0&&(T=A&-A,d=c&-c,T>=d||T===32&&(d&4194048)!==0)?c:A}function Ie(s,c){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&c)===0}function it(s,c){switch(s){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ot(){var s=As;return As<<=1,(As&62914560)===0&&(As=4194304),s}function gn(s){for(var c=[],d=0;31>d;d++)c.push(s);return c}function hn(s,c){s.pendingLanes|=c,c!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ft(s,c,d,g,A,T){var F=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var J=s.entanglements,ae=s.expirationTimes,Ae=s.hiddenUpdates;for(d=F&~d;0<d;){var Ne=31-Je(d),Fe=1<<Ne;J[Ne]=0,ae[Ne]=-1;var ke=Ae[Ne];if(ke!==null)for(Ae[Ne]=null,Ne=0;Ne<ke.length;Ne++){var Re=ke[Ne];Re!==null&&(Re.lane&=-536870913)}d&=~Fe}g!==0&&lt(s,g,0),T!==0&&A===0&&s.tag!==0&&(s.suspendedLanes|=T&~(F&~c))}function lt(s,c,d){s.pendingLanes|=c,s.suspendedLanes&=~c;var g=31-Je(c);s.entangledLanes|=c,s.entanglements[g]=s.entanglements[g]|1073741824|d&261930}function at(s,c){var d=s.entangledLanes|=c;for(s=s.entanglements;d;){var g=31-Je(d),A=1<<g;A&c|s[g]&c&&(s[g]|=c),d&=~A}}function Qt(s,c){var d=c&-c;return d=(d&42)!==0?1:jn(d),(d&(s.suspendedLanes|c))!==0?0:d}function jn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ur(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function is(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:jx(s.type))}function rs(s,c){var d=te.p;try{return te.p=s,c()}finally{te.p=d}}var Fr=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Fr,Jn="__reactProps$"+Fr,Di="__reactContainer$"+Fr,Ts="__reactEvents$"+Fr,Dl="__reactListeners$"+Fr,Ji="__reactHandles$"+Fr,Uo="__reactResources$"+Fr,Qi="__reactMarker$"+Fr;function Ha(s){delete s[Tn],delete s[Jn],delete s[Ts],delete s[Dl],delete s[Ji]}function xi(s){var c=s[Tn];if(c)return c;for(var d=s.parentNode;d;){if(c=d[Di]||d[Tn]){if(d=c.alternate,c.child!==null||d!==null&&d.child!==null)for(s=Cx(s);s!==null;){if(d=s[Tn])return d;s=Cx(s)}return c}s=d,d=s.parentNode}return null}function En(s){if(s=s[Tn]||s[Di]){var c=s.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return s}return null}function Ui(s){var c=s.tag;if(c===5||c===26||c===27||c===6)return s.stateNode;throw Error(i(33))}function Ti(s){var c=s[Uo];return c||(c=s[Uo]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Qn(s){s[Qi]=!0}var ss=new Set,Ur={};function vr(s,c){Ge(s,c),Ge(s+"Capture",c)}function Ge(s,c){for(Ur[s]=c,s=0;s<c.length;s++)ss.add(c[s])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yt={},dn={};function Kn(s){return Rt.call(dn,s)?!0:Rt.call(Yt,s)?!1:mt.test(s)?dn[s]=!0:(Yt[s]=!0,!1)}function At(s,c,d){if(Kn(c))if(d===null)s.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(c);return}}s.setAttribute(c,""+d)}}function ji(s,c,d){if(d===null)s.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttribute(c,""+d)}}function Ii(s,c,d,g){if(g===null)s.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(c,d,""+g)}}function Cn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Si(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function jo(s,c,d){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,c);if(!s.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var A=g.get,T=g.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return A.call(this)},set:function(F){d=""+F,T.call(this,F)}}),Object.defineProperty(s,c,{enumerable:g.enumerable}),{getValue:function(){return d},setValue:function(F){d=""+F},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function na(s){if(!s._valueTracker){var c=Si(s)?"checked":"value";s._valueTracker=jo(s,c,""+s[c])}}function qa(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var d=c.getValue(),g="";return s&&(g=Si(s)?s.checked?"true":"false":s.value),s=g,s!==d?(c.setValue(s),!0):!1}function pn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ia=/[\n"\\]/g;function hi(s){return s.replace(ia,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function jr(s,c,d,g,A,T,F,J){s.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.type=F:s.removeAttribute("type"),c!=null?F==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+Cn(c)):s.value!==""+Cn(c)&&(s.value=""+Cn(c)):F!=="submit"&&F!=="reset"||s.removeAttribute("value"),c!=null?ks(s,F,Cn(c)):d!=null?ks(s,F,Cn(d)):g!=null&&s.removeAttribute("value"),A==null&&T!=null&&(s.defaultChecked=!!T),A!=null&&(s.checked=A&&typeof A!="function"&&typeof A!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?s.name=""+Cn(J):s.removeAttribute("name")}function as(s,c,d,g,A,T,F,J){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),c!=null||d!=null){if(!(T!=="submit"&&T!=="reset"||c!=null)){na(s);return}d=d!=null?""+Cn(d):"",c=c!=null?""+Cn(c):d,J||c===s.value||(s.value=c),s.defaultValue=c}g=g??A,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=J?s.checked:!!g,s.defaultChecked=!!g,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(s.name=F),na(s)}function ks(s,c,d){c==="number"&&pn(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function ii(s,c,d,g){if(s=s.options,c){c={};for(var A=0;A<d.length;A++)c["$"+d[A]]=!0;for(d=0;d<s.length;d++)A=c.hasOwnProperty("$"+s[d].value),s[d].selected!==A&&(s[d].selected=A),A&&g&&(s[d].defaultSelected=!0)}else{for(d=""+Cn(d),c=null,A=0;A<s.length;A++){if(s[A].value===d){s[A].selected=!0,g&&(s[A].defaultSelected=!0);return}c!==null||s[A].disabled||(c=s[A])}c!==null&&(c.selected=!0)}}function Ho(s,c,d){if(c!=null&&(c=""+Cn(c),c!==s.value&&(s.value=c),d==null)){s.defaultValue!==c&&(s.defaultValue=c);return}s.defaultValue=d!=null?""+Cn(d):""}function os(s,c,d,g){if(c==null){if(g!=null){if(d!=null)throw Error(i(92));if(Q(g)){if(1<g.length)throw Error(i(93));g=g[0]}d=g}d==null&&(d=""),c=d}d=Cn(c),s.defaultValue=d,g=s.textContent,g===d&&g!==""&&g!==null&&(s.value=g),na(s)}function wt(s,c){if(c){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=c;return}}s.textContent=c}var Il=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(s,c,d){var g=c.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="":g?s.setProperty(c,d):typeof d!="number"||d===0||Il.has(c)?c==="float"?s.cssFloat=d:s[c]=(""+d).trim():s[c]=d+"px"}function yn(s,c,d){if(c!=null&&typeof c!="object")throw Error(i(62));if(s=s.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var A in c)g=c[A],c.hasOwnProperty(A)&&d[A]!==g&&Et(s,A,g)}else for(var T in c)c.hasOwnProperty(T)&&Et(s,T,c[T])}function Ms(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ls=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function er(s){return wi.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Qe(){}var ht=null;function Pt(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var en=null,$t=null;function ei(s){var c=En(s);if(c&&(s=c.stateNode)){var d=s[Jn]||null;e:switch(s=c.stateNode,c.type){case"input":if(jr(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),c=d.name,d.type==="radio"&&c!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+hi(""+c)+'"][type="radio"]'),c=0;c<d.length;c++){var g=d[c];if(g!==s&&g.form===s.form){var A=g[Jn]||null;if(!A)throw Error(i(90));jr(g,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<d.length;c++)g=d[c],g.form===s.form&&qa(g)}break e;case"textarea":Ho(s,d.value,d.defaultValue);break e;case"select":c=d.value,c!=null&&ii(s,!!d.multiple,c,!1)}}}var cs=!1;function Rs(s,c,d){if(cs)return s(c,d);cs=!0;try{var g=s(c);return g}finally{if(cs=!1,(en!==null||$t!==null)&&(tf(),en&&(c=en,s=$t,$t=en=null,ei(c),s)))for(c=0;c<s.length;c++)ei(s[c])}}function ra(s,c){var d=s.stateNode;if(d===null)return null;var g=d[Jn]||null;if(g===null)return null;d=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(i(231,c,typeof d));return d}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gu=!1;if(ki)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){gu=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{gu=!1}var Hr=null,Ll=null,Va=null;function Wa(){if(Va)return Va;var s,c=Ll,d=c.length,g,A="value"in Hr?Hr.value:Hr.textContent,T=A.length;for(s=0;s<d&&c[s]===A[s];s++);var F=d-s;for(g=1;g<=F&&c[d-g]===A[T-g];g++);return Va=A.slice(s,1<g?1-g:void 0)}function $a(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function qo(){return!0}function fd(){return!1}function di(s){function c(d,g,A,T,F){this._reactName=d,this._targetInst=A,this.type=g,this.nativeEvent=T,this.target=F,this.currentTarget=null;for(var J in s)s.hasOwnProperty(J)&&(d=s[J],this[J]=d?d(T):T[J]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?qo:fd,this.isPropagationStopped=fd,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),c}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=di(sa),Os=f({},sa,{view:0,detail:0}),zl=di(Os),Vo,yu,Wo,Pl=f({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Wo&&(Wo&&s.type==="mousemove"?(Vo=s.screenX-Wo.screenX,yu=s.screenY-Wo.screenY):yu=Vo=0,Wo=s),Vo)},movementY:function(s){return"movementY"in s?s.movementY:yu}}),Fl=di(Pl),_u=f({},Pl,{dataTransfer:0}),pd=di(_u),Ul=f({},Os,{relatedTarget:0}),Ga=di(Ul),jl=f({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),md=di(jl),wm=f({},sa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ka=di(wm),bu=f({},sa,{data:0}),Hl=di(bu),vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $o(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=Mi[s])?!!c[s]:!1}function aa(){return $o}var gd=f({},Os,{key:function(s){if(s.key){var c=vu[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=$a(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?xu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(s){return s.type==="keypress"?$a(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?$a(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ql=di(gd),yd=f({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=di(yd),Vl=f({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),wu=di(Vl),oa=f({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eu=di(oa),Cu=f({},Pl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Wl=di(Cu),Au=f({},sa,{newState:0,oldState:0}),_d=di(Au),Em=[9,13,27,32],Go=ki&&"CompositionEvent"in window,Ns=null;ki&&"documentMode"in document&&(Ns=document.documentMode);var Cm=ki&&"TextEvent"in window&&!Ns,$l=ki&&(!Go||Ns&&8<Ns&&11>=Ns),Gl=" ",bd=!1;function Tu(s,c){switch(s){case"keyup":return Em.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vd(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var la=!1;function xd(s,c){switch(s){case"compositionend":return vd(c);case"keypress":return c.which!==32?null:(bd=!0,Gl);case"textInput":return s=c.data,s===Gl&&bd?null:s;default:return null}}function Am(s,c){if(la)return s==="compositionend"||!Go&&Tu(s,c)?(s=Wa(),Va=Ll=Hr=null,la=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return $l&&c.locale!=="ko"?null:c.data;default:return null}}var Sd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kl(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!Sd[s.type]:c==="textarea"}function ku(s,c,d,g){en?$t?$t.push(g):$t=[g]:en=g,c=cf(c,"onChange"),0<c.length&&(d=new Bl("onChange","change",null,d,g),s.push({event:d,listeners:c}))}var Ya=null,Ko=null;function Tm(s){hx(s,0)}function Yl(s){var c=Ui(s);if(qa(c))return s}function Yo(s,c){if(s==="change")return c}var qr=!1;if(ki){var Vn;if(ki){var Xa="oninput"in document;if(!Xa){var ca=document.createElement("div");ca.setAttribute("oninput","return;"),Xa=typeof ca.oninput=="function"}Vn=Xa}else Vn=!1;qr=Vn&&(!document.documentMode||9<document.documentMode)}function wd(){Ya&&(Ya.detachEvent("onpropertychange",Xl),Ko=Ya=null)}function Xl(s){if(s.propertyName==="value"&&Yl(Ko)){var c=[];ku(c,Ko,s,Pt(s)),Rs(Tm,c)}}function Ed(s,c,d){s==="focusin"?(wd(),Ya=c,Ko=d,Ya.attachEvent("onpropertychange",Xl)):s==="focusout"&&wd()}function ua(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Yl(Ko)}function Mu(s,c){if(s==="click")return Yl(c)}function Za(s,c){if(s==="input"||s==="change")return Yl(c)}function Ds(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var qi=typeof Object.is=="function"?Object.is:Ds;function C(s,c){if(qi(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var d=Object.keys(s),g=Object.keys(c);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var A=d[g];if(!Rt.call(c,A)||!qi(s[A],c[A]))return!1}return!0}function k(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function I(s,c){var d=k(s);s=0;for(var g;d;){if(d.nodeType===3){if(g=s+d.textContent.length,s<=c&&g>=c)return{node:d,offset:c-s};s=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=k(d)}}function z(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?z(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function q(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var c=pn(s.document);c instanceof s.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href=="string"}catch{d=!1}if(d)s=c.contentWindow;else break;c=pn(s.document)}return c}function W(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}var ne=ki&&"documentMode"in document&&11>=document.documentMode,ie=null,ue=null,be=null,he=!1;function ce(s,c,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;he||ie==null||ie!==pn(g)||(g=ie,"selectionStart"in g&&W(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),be&&C(be,g)||(be=g,g=cf(ue,"onSelect"),0<g.length&&(c=new Bl("onSelect","select",null,c,d),s.push({event:c,listeners:g}),c.target=ie)))}function pe(s,c){var d={};return d[s.toLowerCase()]=c.toLowerCase(),d["Webkit"+s]="webkit"+c,d["Moz"+s]="moz"+c,d}var ge={animationend:pe("Animation","AnimationEnd"),animationiteration:pe("Animation","AnimationIteration"),animationstart:pe("Animation","AnimationStart"),transitionrun:pe("Transition","TransitionRun"),transitionstart:pe("Transition","TransitionStart"),transitioncancel:pe("Transition","TransitionCancel"),transitionend:pe("Transition","TransitionEnd")},de={},fe={};ki&&(fe=document.createElement("div").style,"AnimationEvent"in window||(delete ge.animationend.animation,delete ge.animationiteration.animation,delete ge.animationstart.animation),"TransitionEvent"in window||delete ge.transitionend.transition);function Se(s){if(de[s])return de[s];if(!ge[s])return s;var c=ge[s],d;for(d in c)if(c.hasOwnProperty(d)&&d in fe)return de[s]=c[d];return s}var Te=Se("animationend"),ve=Se("animationiteration"),Oe=Se("animationstart"),qe=Se("transitionrun"),et=Se("transitionstart"),tt=Se("transitioncancel"),Ve=Se("transitionend"),ct=new Map,rt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rt.push("scrollEnd");function We(s,c){ct.set(s,c),vr(c,[s])}var ut=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Lt=[],tn=0,vt=0;function Ht(){for(var s=tn,c=vt=tn=0;c<s;){var d=Lt[c];Lt[c++]=null;var g=Lt[c];Lt[c++]=null;var A=Lt[c];Lt[c++]=null;var T=Lt[c];if(Lt[c++]=null,g!==null&&A!==null){var F=g.pending;F===null?A.next=A:(A.next=F.next,F.next=A),g.pending=A}T!==0&&Is(d,A,T)}}function Nn(s,c,d,g){Lt[tn++]=s,Lt[tn++]=c,Lt[tn++]=d,Lt[tn++]=g,vt|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function Vi(s,c,d,g){return Nn(s,c,d,g),Ja(s)}function kn(s,c){return Nn(s,null,null,c),Ja(s)}function Is(s,c,d){s.lanes|=d;var g=s.alternate;g!==null&&(g.lanes|=d);for(var A=!1,T=s.return;T!==null;)T.childLanes|=d,g=T.alternate,g!==null&&(g.childLanes|=d),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(A=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,A&&c!==null&&(A=31-Je(d),s=T.hiddenUpdates,g=s[A],g===null?s[A]=[c]:g.push(c),c.lane=d|536870912),T):null}function Ja(s){if(50<Zu)throw Zu=0,Bg=null,Error(i(185));for(var c=s.return;c!==null;)s=c,c=s.return;return s.tag===3?s.stateNode:null}var Zl={};function gT(s,c,d,g){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(s,c,d,g){return new gT(s,c,d,g)}function km(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ha(s,c){var d=s.alternate;return d===null?(d=xr(s.tag,c,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=c,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&65011712,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,c=s.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function Gb(s,c){s.flags&=65011714;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=c,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,c=d.dependencies,s.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),s}function Cd(s,c,d,g,A,T){var F=0;if(g=s,typeof s=="function")km(s)&&(F=1);else if(typeof s=="string")F=xk(s,d,_e.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=xr(31,d,c,A),s.elementType=L,s.lanes=T,s;case w:return Xo(d.children,A,T,c);case S:F=8,A|=24;break;case b:return s=xr(12,d,c,A|2),s.elementType=b,s.lanes=T,s;case R:return s=xr(13,d,c,A),s.elementType=R,s.lanes=T,s;case M:return s=xr(19,d,c,A),s.elementType=M,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:F=10;break e;case v:F=9;break e;case E:F=11;break e;case D:F=14;break e;case O:F=16,g=null;break e}F=29,d=Error(i(130,s===null?"null":typeof s,"")),g=null}return c=xr(F,d,c,A),c.elementType=s,c.type=g,c.lanes=T,c}function Xo(s,c,d,g){return s=xr(7,s,g,c),s.lanes=d,s}function Mm(s,c,d){return s=xr(6,s,null,c),s.lanes=d,s}function Kb(s){var c=xr(18,null,null,0);return c.stateNode=s,c}function Rm(s,c,d){return c=xr(4,s.children!==null?s.children:[],s.key,c),c.lanes=d,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}var Yb=new WeakMap;function Vr(s,c){if(typeof s=="object"&&s!==null){var d=Yb.get(s);return d!==void 0?d:(c={value:s,source:c,stack:st(c)},Yb.set(s,c),c)}return{value:s,source:c,stack:st(c)}}var Jl=[],Ql=0,Ad=null,Ru=0,Wr=[],$r=0,Qa=null,Ls=1,Bs="";function da(s,c){Jl[Ql++]=Ru,Jl[Ql++]=Ad,Ad=s,Ru=c}function Xb(s,c,d){Wr[$r++]=Ls,Wr[$r++]=Bs,Wr[$r++]=Qa,Qa=s;var g=Ls;s=Bs;var A=32-Je(g)-1;g&=~(1<<A),d+=1;var T=32-Je(c)+A;if(30<T){var F=A-A%5;T=(g&(1<<F)-1).toString(32),g>>=F,A-=F,Ls=1<<32-Je(c)+A|d<<A|g,Bs=T+s}else Ls=1<<T|d<<A|g,Bs=s}function Om(s){s.return!==null&&(da(s,1),Xb(s,1,0))}function Nm(s){for(;s===Ad;)Ad=Jl[--Ql],Jl[Ql]=null,Ru=Jl[--Ql],Jl[Ql]=null;for(;s===Qa;)Qa=Wr[--$r],Wr[$r]=null,Bs=Wr[--$r],Wr[$r]=null,Ls=Wr[--$r],Wr[$r]=null}function Zb(s,c){Wr[$r++]=Ls,Wr[$r++]=Bs,Wr[$r++]=Qa,Ls=c.id,Bs=c.overflow,Qa=s}var Li=null,Wn=null,un=!1,eo=null,Gr=!1,Dm=Error(i(519));function to(s){var c=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ou(Vr(c,s)),Dm}function Jb(s){var c=s.stateNode,d=s.type,g=s.memoizedProps;switch(c[Tn]=s,c[Jn]=g,d){case"dialog":an("cancel",c),an("close",c);break;case"iframe":case"object":case"embed":an("load",c);break;case"video":case"audio":for(d=0;d<Qu.length;d++)an(Qu[d],c);break;case"source":an("error",c);break;case"img":case"image":case"link":an("error",c),an("load",c);break;case"details":an("toggle",c);break;case"input":an("invalid",c),as(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":an("invalid",c);break;case"textarea":an("invalid",c),os(c,g.value,g.defaultValue,g.children)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||c.textContent===""+d||g.suppressHydrationWarning===!0||mx(c.textContent,d)?(g.popover!=null&&(an("beforetoggle",c),an("toggle",c)),g.onScroll!=null&&an("scroll",c),g.onScrollEnd!=null&&an("scrollend",c),g.onClick!=null&&(c.onclick=Qe),c=!0):c=!1,c||to(s,!0)}function Qb(s){for(Li=s.return;Li;)switch(Li.tag){case 5:case 31:case 13:Gr=!1;return;case 27:case 3:Gr=!0;return;default:Li=Li.return}}function ec(s){if(s!==Li)return!1;if(!un)return Qb(s),un=!0,!1;var c=s.tag,d;if((d=c!==3&&c!==27)&&((d=c===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||Zg(s.type,s.memoizedProps)),d=!d),d&&Wn&&to(s),Qb(s),c===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Wn=Ex(s)}else if(c===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Wn=Ex(s)}else c===27?(c=Wn,go(s.type)?(s=ny,ny=null,Wn=s):Wn=c):Wn=Li?Yr(s.stateNode.nextSibling):null;return!0}function Zo(){Wn=Li=null,un=!1}function Im(){var s=eo;return s!==null&&(pr===null?pr=s:pr.push.apply(pr,s),eo=null),s}function Ou(s){eo===null?eo=[s]:eo.push(s)}var Lm=P(null),Jo=null,fa=null;function no(s,c,d){V(Lm,c._currentValue),c._currentValue=d}function pa(s){s._currentValue=Lm.current,Z(Lm)}function Bm(s,c,d){for(;s!==null;){var g=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),s===d)break;s=s.return}}function zm(s,c,d,g){var A=s.child;for(A!==null&&(A.return=s);A!==null;){var T=A.dependencies;if(T!==null){var F=A.child;T=T.firstContext;e:for(;T!==null;){var J=T;T=A;for(var ae=0;ae<c.length;ae++)if(J.context===c[ae]){T.lanes|=d,J=T.alternate,J!==null&&(J.lanes|=d),Bm(T.return,d,s),g||(F=null);break e}T=J.next}}else if(A.tag===18){if(F=A.return,F===null)throw Error(i(341));F.lanes|=d,T=F.alternate,T!==null&&(T.lanes|=d),Bm(F,d,s),F=null}else F=A.child;if(F!==null)F.return=A;else for(F=A;F!==null;){if(F===s){F=null;break}if(A=F.sibling,A!==null){A.return=F.return,F=A;break}F=F.return}A=F}}function tc(s,c,d,g){s=null;for(var A=c,T=!1;A!==null;){if(!T){if((A.flags&524288)!==0)T=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var F=A.alternate;if(F===null)throw Error(i(387));if(F=F.memoizedProps,F!==null){var J=A.type;qi(A.pendingProps.value,F.value)||(s!==null?s.push(J):s=[J])}}else if(A===le.current){if(F=A.alternate,F===null)throw Error(i(387));F.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(s!==null?s.push(rh):s=[rh])}A=A.return}s!==null&&zm(c,s,d,g),c.flags|=262144}function Td(s){for(s=s.firstContext;s!==null;){if(!qi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qo(s){Jo=s,fa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Bi(s){return ev(Jo,s)}function kd(s,c){return Jo===null&&Qo(s),ev(s,c)}function ev(s,c){var d=c._currentValue;if(c={context:c,memoizedValue:d,next:null},fa===null){if(s===null)throw Error(i(308));fa=c,s.dependencies={lanes:0,firstContext:c},s.flags|=524288}else fa=fa.next=c;return d}var yT=typeof AbortController<"u"?AbortController:function(){var s=[],c=this.signal={aborted:!1,addEventListener:function(d,g){s.push(g)}};this.abort=function(){c.aborted=!0,s.forEach(function(d){return d()})}},_T=n.unstable_scheduleCallback,bT=n.unstable_NormalPriority,fi={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pm(){return{controller:new yT,data:new Map,refCount:0}}function Nu(s){s.refCount--,s.refCount===0&&_T(bT,function(){s.controller.abort()})}var Du=null,Fm=0,nc=0,ic=null;function vT(s,c){if(Du===null){var d=Du=[];Fm=0,nc=Hg(),ic={status:"pending",value:void 0,then:function(g){d.push(g)}}}return Fm++,c.then(tv,tv),c}function tv(){if(--Fm===0&&Du!==null){ic!==null&&(ic.status="fulfilled");var s=Du;Du=null,nc=0,ic=null;for(var c=0;c<s.length;c++)(0,s[c])()}}function xT(s,c){var d=[],g={status:"pending",value:null,reason:null,then:function(A){d.push(A)}};return s.then(function(){g.status="fulfilled",g.value=c;for(var A=0;A<d.length;A++)(0,d[A])(c)},function(A){for(g.status="rejected",g.reason=A,A=0;A<d.length;A++)(0,d[A])(void 0)}),g}var nv=Y.S;Y.S=function(s,c){F1=Bt(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&vT(s,c),nv!==null&&nv(s,c)};var el=P(null);function Um(){var s=el.current;return s!==null?s:Pn.pooledCache}function Md(s,c){c===null?V(el,el.current):V(el,c.pool)}function iv(){var s=Um();return s===null?null:{parent:fi._currentValue,pool:s}}var rc=Error(i(460)),jm=Error(i(474)),Rd=Error(i(542)),Od={then:function(){}};function rv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sv(s,c,d){switch(d=s[d],d===void 0?s.push(c):d!==c&&(c.then(Qe,Qe),c=d),c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,ov(s),s;default:if(typeof c.status=="string")c.then(Qe,Qe);else{if(s=Pn,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=c,s.status="pending",s.then(function(g){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=g}},function(g){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw s=c.reason,ov(s),s}throw nl=c,rc}}function tl(s){try{var c=s._init;return c(s._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(nl=d,rc):d}}var nl=null;function av(){if(nl===null)throw Error(i(459));var s=nl;return nl=null,s}function ov(s){if(s===rc||s===Rd)throw Error(i(483))}var sc=null,Iu=0;function Nd(s){var c=Iu;return Iu+=1,sc===null&&(sc=[]),sv(sc,s,c)}function Lu(s,c){c=c.props.ref,s.ref=c!==void 0?c:null}function Dd(s,c){throw c.$$typeof===m?Error(i(525)):(s=Object.prototype.toString.call(c),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s)))}function lv(s){function c(ye,me){if(s){var Ce=ye.deletions;Ce===null?(ye.deletions=[me],ye.flags|=16):Ce.push(me)}}function d(ye,me){if(!s)return null;for(;me!==null;)c(ye,me),me=me.sibling;return null}function g(ye){for(var me=new Map;ye!==null;)ye.key!==null?me.set(ye.key,ye):me.set(ye.index,ye),ye=ye.sibling;return me}function A(ye,me){return ye=ha(ye,me),ye.index=0,ye.sibling=null,ye}function T(ye,me,Ce){return ye.index=Ce,s?(Ce=ye.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(ye.flags|=67108866,me):Ce):(ye.flags|=67108866,me)):(ye.flags|=1048576,me)}function F(ye){return s&&ye.alternate===null&&(ye.flags|=67108866),ye}function J(ye,me,Ce,Be){return me===null||me.tag!==6?(me=Mm(Ce,ye.mode,Be),me.return=ye,me):(me=A(me,Ce),me.return=ye,me)}function ae(ye,me,Ce,Be){var xt=Ce.type;return xt===w?Ne(ye,me,Ce.props.children,Be,Ce.key):me!==null&&(me.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===O&&tl(xt)===me.type)?(me=A(me,Ce.props),Lu(me,Ce),me.return=ye,me):(me=Cd(Ce.type,Ce.key,Ce.props,null,ye.mode,Be),Lu(me,Ce),me.return=ye,me)}function Ae(ye,me,Ce,Be){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=Rm(Ce,ye.mode,Be),me.return=ye,me):(me=A(me,Ce.children||[]),me.return=ye,me)}function Ne(ye,me,Ce,Be,xt){return me===null||me.tag!==7?(me=Xo(Ce,ye.mode,Be,xt),me.return=ye,me):(me=A(me,Ce),me.return=ye,me)}function Fe(ye,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=Mm(""+me,ye.mode,Ce),me.return=ye,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case y:return Ce=Cd(me.type,me.key,me.props,null,ye.mode,Ce),Lu(Ce,me),Ce.return=ye,Ce;case x:return me=Rm(me,ye.mode,Ce),me.return=ye,me;case O:return me=tl(me),Fe(ye,me,Ce)}if(Q(me)||G(me))return me=Xo(me,ye.mode,Ce,null),me.return=ye,me;if(typeof me.then=="function")return Fe(ye,Nd(me),Ce);if(me.$$typeof===_)return Fe(ye,kd(ye,me),Ce);Dd(ye,me)}return null}function ke(ye,me,Ce,Be){var xt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return xt!==null?null:J(ye,me,""+Ce,Be);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return Ce.key===xt?ae(ye,me,Ce,Be):null;case x:return Ce.key===xt?Ae(ye,me,Ce,Be):null;case O:return Ce=tl(Ce),ke(ye,me,Ce,Be)}if(Q(Ce)||G(Ce))return xt!==null?null:Ne(ye,me,Ce,Be,null);if(typeof Ce.then=="function")return ke(ye,me,Nd(Ce),Be);if(Ce.$$typeof===_)return ke(ye,me,kd(ye,Ce),Be);Dd(ye,Ce)}return null}function Re(ye,me,Ce,Be,xt){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return ye=ye.get(Ce)||null,J(me,ye,""+Be,xt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case y:return ye=ye.get(Be.key===null?Ce:Be.key)||null,ae(me,ye,Be,xt);case x:return ye=ye.get(Be.key===null?Ce:Be.key)||null,Ae(me,ye,Be,xt);case O:return Be=tl(Be),Re(ye,me,Ce,Be,xt)}if(Q(Be)||G(Be))return ye=ye.get(Ce)||null,Ne(me,ye,Be,xt,null);if(typeof Be.then=="function")return Re(ye,me,Ce,Nd(Be),xt);if(Be.$$typeof===_)return Re(ye,me,Ce,kd(me,Be),xt);Dd(me,Be)}return null}function pt(ye,me,Ce,Be){for(var xt=null,_n=null,yt=me,Xt=me=0,cn=null;yt!==null&&Xt<Ce.length;Xt++){yt.index>Xt?(cn=yt,yt=null):cn=yt.sibling;var bn=ke(ye,yt,Ce[Xt],Be);if(bn===null){yt===null&&(yt=cn);break}s&&yt&&bn.alternate===null&&c(ye,yt),me=T(bn,me,Xt),_n===null?xt=bn:_n.sibling=bn,_n=bn,yt=cn}if(Xt===Ce.length)return d(ye,yt),un&&da(ye,Xt),xt;if(yt===null){for(;Xt<Ce.length;Xt++)yt=Fe(ye,Ce[Xt],Be),yt!==null&&(me=T(yt,me,Xt),_n===null?xt=yt:_n.sibling=yt,_n=yt);return un&&da(ye,Xt),xt}for(yt=g(yt);Xt<Ce.length;Xt++)cn=Re(yt,ye,Xt,Ce[Xt],Be),cn!==null&&(s&&cn.alternate!==null&&yt.delete(cn.key===null?Xt:cn.key),me=T(cn,me,Xt),_n===null?xt=cn:_n.sibling=cn,_n=cn);return s&&yt.forEach(function(xo){return c(ye,xo)}),un&&da(ye,Xt),xt}function kt(ye,me,Ce,Be){if(Ce==null)throw Error(i(151));for(var xt=null,_n=null,yt=me,Xt=me=0,cn=null,bn=Ce.next();yt!==null&&!bn.done;Xt++,bn=Ce.next()){yt.index>Xt?(cn=yt,yt=null):cn=yt.sibling;var xo=ke(ye,yt,bn.value,Be);if(xo===null){yt===null&&(yt=cn);break}s&&yt&&xo.alternate===null&&c(ye,yt),me=T(xo,me,Xt),_n===null?xt=xo:_n.sibling=xo,_n=xo,yt=cn}if(bn.done)return d(ye,yt),un&&da(ye,Xt),xt;if(yt===null){for(;!bn.done;Xt++,bn=Ce.next())bn=Fe(ye,bn.value,Be),bn!==null&&(me=T(bn,me,Xt),_n===null?xt=bn:_n.sibling=bn,_n=bn);return un&&da(ye,Xt),xt}for(yt=g(yt);!bn.done;Xt++,bn=Ce.next())bn=Re(yt,ye,Xt,bn.value,Be),bn!==null&&(s&&bn.alternate!==null&&yt.delete(bn.key===null?Xt:bn.key),me=T(bn,me,Xt),_n===null?xt=bn:_n.sibling=bn,_n=bn);return s&&yt.forEach(function(Nk){return c(ye,Nk)}),un&&da(ye,Xt),xt}function Ln(ye,me,Ce,Be){if(typeof Ce=="object"&&Ce!==null&&Ce.type===w&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:e:{for(var xt=Ce.key;me!==null;){if(me.key===xt){if(xt=Ce.type,xt===w){if(me.tag===7){d(ye,me.sibling),Be=A(me,Ce.props.children),Be.return=ye,ye=Be;break e}}else if(me.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===O&&tl(xt)===me.type){d(ye,me.sibling),Be=A(me,Ce.props),Lu(Be,Ce),Be.return=ye,ye=Be;break e}d(ye,me);break}else c(ye,me);me=me.sibling}Ce.type===w?(Be=Xo(Ce.props.children,ye.mode,Be,Ce.key),Be.return=ye,ye=Be):(Be=Cd(Ce.type,Ce.key,Ce.props,null,ye.mode,Be),Lu(Be,Ce),Be.return=ye,ye=Be)}return F(ye);case x:e:{for(xt=Ce.key;me!==null;){if(me.key===xt)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){d(ye,me.sibling),Be=A(me,Ce.children||[]),Be.return=ye,ye=Be;break e}else{d(ye,me);break}else c(ye,me);me=me.sibling}Be=Rm(Ce,ye.mode,Be),Be.return=ye,ye=Be}return F(ye);case O:return Ce=tl(Ce),Ln(ye,me,Ce,Be)}if(Q(Ce))return pt(ye,me,Ce,Be);if(G(Ce)){if(xt=G(Ce),typeof xt!="function")throw Error(i(150));return Ce=xt.call(Ce),kt(ye,me,Ce,Be)}if(typeof Ce.then=="function")return Ln(ye,me,Nd(Ce),Be);if(Ce.$$typeof===_)return Ln(ye,me,kd(ye,Ce),Be);Dd(ye,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,me!==null&&me.tag===6?(d(ye,me.sibling),Be=A(me,Ce),Be.return=ye,ye=Be):(d(ye,me),Be=Mm(Ce,ye.mode,Be),Be.return=ye,ye=Be),F(ye)):d(ye,me)}return function(ye,me,Ce,Be){try{Iu=0;var xt=Ln(ye,me,Ce,Be);return sc=null,xt}catch(yt){if(yt===rc||yt===Rd)throw yt;var _n=xr(29,yt,null,ye.mode);return _n.lanes=Be,_n.return=ye,_n}}}var il=lv(!0),cv=lv(!1),io=!1;function Hm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qm(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ro(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function so(s,c,d){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(An&2)!==0){var A=g.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),g.pending=c,c=Ja(s),Is(s,null,d),c}return Nn(s,g,c,d),Ja(s)}function Bu(s,c,d){if(c=c.updateQueue,c!==null&&(c=c.shared,(d&4194048)!==0)){var g=c.lanes;g&=s.pendingLanes,d|=g,c.lanes=d,at(s,d)}}function Vm(s,c){var d=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var A=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var F={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};T===null?A=T=F:T=T.next=F,d=d.next}while(d!==null);T===null?A=T=c:T=T.next=c}else A=T=c;d={baseState:g.baseState,firstBaseUpdate:A,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=c}var Wm=!1;function zu(){if(Wm){var s=ic;if(s!==null)throw s}}function Pu(s,c,d,g){Wm=!1;var A=s.updateQueue;io=!1;var T=A.firstBaseUpdate,F=A.lastBaseUpdate,J=A.shared.pending;if(J!==null){A.shared.pending=null;var ae=J,Ae=ae.next;ae.next=null,F===null?T=Ae:F.next=Ae,F=ae;var Ne=s.alternate;Ne!==null&&(Ne=Ne.updateQueue,J=Ne.lastBaseUpdate,J!==F&&(J===null?Ne.firstBaseUpdate=Ae:J.next=Ae,Ne.lastBaseUpdate=ae))}if(T!==null){var Fe=A.baseState;F=0,Ne=Ae=ae=null,J=T;do{var ke=J.lane&-536870913,Re=ke!==J.lane;if(Re?(ln&ke)===ke:(g&ke)===ke){ke!==0&&ke===nc&&(Wm=!0),Ne!==null&&(Ne=Ne.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var pt=s,kt=J;ke=c;var Ln=d;switch(kt.tag){case 1:if(pt=kt.payload,typeof pt=="function"){Fe=pt.call(Ln,Fe,ke);break e}Fe=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=kt.payload,ke=typeof pt=="function"?pt.call(Ln,Fe,ke):pt,ke==null)break e;Fe=f({},Fe,ke);break e;case 2:io=!0}}ke=J.callback,ke!==null&&(s.flags|=64,Re&&(s.flags|=8192),Re=A.callbacks,Re===null?A.callbacks=[ke]:Re.push(ke))}else Re={lane:ke,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ne===null?(Ae=Ne=Re,ae=Fe):Ne=Ne.next=Re,F|=ke;if(J=J.next,J===null){if(J=A.shared.pending,J===null)break;Re=J,J=Re.next,Re.next=null,A.lastBaseUpdate=Re,A.shared.pending=null}}while(!0);Ne===null&&(ae=Fe),A.baseState=ae,A.firstBaseUpdate=Ae,A.lastBaseUpdate=Ne,T===null&&(A.shared.lanes=0),uo|=F,s.lanes=F,s.memoizedState=Fe}}function uv(s,c){if(typeof s!="function")throw Error(i(191,s));s.call(c)}function hv(s,c){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)uv(d[s],c)}var ac=P(null),Id=P(0);function dv(s,c){s=wa,V(Id,s),V(ac,c),wa=s|c.baseLanes}function $m(){V(Id,wa),V(ac,ac.current)}function Gm(){wa=Id.current,Z(ac),Z(Id)}var Sr=P(null),Kr=null;function ao(s){var c=s.alternate;V(li,li.current&1),V(Sr,s),Kr===null&&(c===null||ac.current!==null||c.memoizedState!==null)&&(Kr=s)}function Km(s){V(li,li.current),V(Sr,s),Kr===null&&(Kr=s)}function fv(s){s.tag===22?(V(li,li.current),V(Sr,s),Kr===null&&(Kr=s)):oo()}function oo(){V(li,li.current),V(Sr,Sr.current)}function wr(s){Z(Sr),Kr===s&&(Kr=null),Z(li)}var li=P(0);function Ld(s){for(var c=s;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||ey(d)||ty(d)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ma=0,Gt=null,Dn=null,pi=null,Bd=!1,oc=!1,rl=!1,zd=0,Fu=0,lc=null,ST=0;function ri(){throw Error(i(321))}function Ym(s,c){if(c===null)return!1;for(var d=0;d<c.length&&d<s.length;d++)if(!qi(s[d],c[d]))return!1;return!0}function Xm(s,c,d,g,A,T){return ma=T,Gt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Y.H=s===null||s.memoizedState===null?Xv:hg,rl=!1,T=d(g,A),rl=!1,oc&&(T=mv(c,d,g,A)),pv(s),T}function pv(s){Y.H=Hu;var c=Dn!==null&&Dn.next!==null;if(ma=0,pi=Dn=Gt=null,Bd=!1,Fu=0,lc=null,c)throw Error(i(300));s===null||mi||(s=s.dependencies,s!==null&&Td(s)&&(mi=!0))}function mv(s,c,d,g){Gt=s;var A=0;do{if(oc&&(lc=null),Fu=0,oc=!1,25<=A)throw Error(i(301));if(A+=1,pi=Dn=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}Y.H=Zv,T=c(d,g)}while(oc);return T}function wT(){var s=Y.H,c=s.useState()[0];return c=typeof c.then=="function"?Uu(c):c,s=s.useState()[0],(Dn!==null?Dn.memoizedState:null)!==s&&(Gt.flags|=1024),c}function Zm(){var s=zd!==0;return zd=0,s}function Jm(s,c,d){c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~d}function Qm(s){if(Bd){for(s=s.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}Bd=!1}ma=0,pi=Dn=Gt=null,oc=!1,Fu=zd=0,lc=null}function tr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Gt.memoizedState=pi=s:pi=pi.next=s,pi}function ci(){if(Dn===null){var s=Gt.alternate;s=s!==null?s.memoizedState:null}else s=Dn.next;var c=pi===null?Gt.memoizedState:pi.next;if(c!==null)pi=c,Dn=s;else{if(s===null)throw Gt.alternate===null?Error(i(467)):Error(i(310));Dn=s,s={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},pi===null?Gt.memoizedState=pi=s:pi=pi.next=s}return pi}function Pd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uu(s){var c=Fu;return Fu+=1,lc===null&&(lc=[]),s=sv(lc,s,c),c=Gt,(pi===null?c.memoizedState:pi.next)===null&&(c=c.alternate,Y.H=c===null||c.memoizedState===null?Xv:hg),s}function Fd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Uu(s);if(s.$$typeof===_)return Bi(s)}throw Error(i(438,String(s)))}function eg(s){var c=null,d=Gt.updateQueue;if(d!==null&&(c=d.memoCache),c==null){var g=Gt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),d===null&&(d=Pd(),Gt.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(s),g=0;g<s;g++)d[g]=j;return c.index++,d}function ga(s,c){return typeof c=="function"?c(s):c}function Ud(s){var c=ci();return tg(c,Dn,s)}function tg(s,c,d){var g=s.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=d;var A=s.baseQueue,T=g.pending;if(T!==null){if(A!==null){var F=A.next;A.next=T.next,T.next=F}c.baseQueue=A=T,g.pending=null}if(T=s.baseState,A===null)s.memoizedState=T;else{c=A.next;var J=F=null,ae=null,Ae=c,Ne=!1;do{var Fe=Ae.lane&-536870913;if(Fe!==Ae.lane?(ln&Fe)===Fe:(ma&Fe)===Fe){var ke=Ae.revertLane;if(ke===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Fe===nc&&(Ne=!0);else if((ma&ke)===ke){Ae=Ae.next,ke===nc&&(Ne=!0);continue}else Fe={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ae===null?(J=ae=Fe,F=T):ae=ae.next=Fe,Gt.lanes|=ke,uo|=ke;Fe=Ae.action,rl&&d(T,Fe),T=Ae.hasEagerState?Ae.eagerState:d(T,Fe)}else ke={lane:Fe,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ae===null?(J=ae=ke,F=T):ae=ae.next=ke,Gt.lanes|=Fe,uo|=Fe;Ae=Ae.next}while(Ae!==null&&Ae!==c);if(ae===null?F=T:ae.next=J,!qi(T,s.memoizedState)&&(mi=!0,Ne&&(d=ic,d!==null)))throw d;s.memoizedState=T,s.baseState=F,s.baseQueue=ae,g.lastRenderedState=T}return A===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function ng(s){var c=ci(),d=c.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=s;var g=d.dispatch,A=d.pending,T=c.memoizedState;if(A!==null){d.pending=null;var F=A=A.next;do T=s(T,F.action),F=F.next;while(F!==A);qi(T,c.memoizedState)||(mi=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),d.lastRenderedState=T}return[T,g]}function gv(s,c,d){var g=Gt,A=ci(),T=un;if(T){if(d===void 0)throw Error(i(407));d=d()}else d=c();var F=!qi((Dn||A).memoizedState,d);if(F&&(A.memoizedState=d,mi=!0),A=A.queue,sg(bv.bind(null,g,A,s),[s]),A.getSnapshot!==c||F||pi!==null&&pi.memoizedState.tag&1){if(g.flags|=2048,cc(9,{destroy:void 0},_v.bind(null,g,A,d,c),null),Pn===null)throw Error(i(349));T||(ma&127)!==0||yv(g,c,d)}return d}function yv(s,c,d){s.flags|=16384,s={getSnapshot:c,value:d},c=Gt.updateQueue,c===null?(c=Pd(),Gt.updateQueue=c,c.stores=[s]):(d=c.stores,d===null?c.stores=[s]:d.push(s))}function _v(s,c,d,g){c.value=d,c.getSnapshot=g,vv(c)&&xv(s)}function bv(s,c,d){return d(function(){vv(c)&&xv(s)})}function vv(s){var c=s.getSnapshot;s=s.value;try{var d=c();return!qi(s,d)}catch{return!0}}function xv(s){var c=kn(s,2);c!==null&&mr(c,s,2)}function ig(s){var c=tr();if(typeof s=="function"){var d=s;if(s=d(),rl){qn(!0);try{d()}finally{qn(!1)}}}return c.memoizedState=c.baseState=s,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:s},c}function Sv(s,c,d,g){return s.baseState=d,tg(s,Dn,typeof g=="function"?g:ga)}function ET(s,c,d,g,A){if(qd(s))throw Error(i(485));if(s=c.action,s!==null){var T={payload:A,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){T.listeners.push(F)}};Y.T!==null?d(!0):T.isTransition=!1,g(T),d=c.pending,d===null?(T.next=c.pending=T,wv(c,T)):(T.next=d.next,c.pending=d.next=T)}}function wv(s,c){var d=c.action,g=c.payload,A=s.state;if(c.isTransition){var T=Y.T,F={};Y.T=F;try{var J=d(A,g),ae=Y.S;ae!==null&&ae(F,J),Ev(s,c,J)}catch(Ae){rg(s,c,Ae)}finally{T!==null&&F.types!==null&&(T.types=F.types),Y.T=T}}else try{T=d(A,g),Ev(s,c,T)}catch(Ae){rg(s,c,Ae)}}function Ev(s,c,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){Cv(s,c,g)},function(g){return rg(s,c,g)}):Cv(s,c,d)}function Cv(s,c,d){c.status="fulfilled",c.value=d,Av(c),s.state=d,c=s.pending,c!==null&&(d=c.next,d===c?s.pending=null:(d=d.next,c.next=d,wv(s,d)))}function rg(s,c,d){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=d,Av(c),c=c.next;while(c!==g)}s.action=null}function Av(s){s=s.listeners;for(var c=0;c<s.length;c++)(0,s[c])()}function Tv(s,c){return c}function kv(s,c){if(un){var d=Pn.formState;if(d!==null){e:{var g=Gt;if(un){if(Wn){t:{for(var A=Wn,T=Gr;A.nodeType!==8;){if(!T){A=null;break t}if(A=Yr(A.nextSibling),A===null){A=null;break t}}T=A.data,A=T==="F!"||T==="F"?A:null}if(A){Wn=Yr(A.nextSibling),g=A.data==="F!";break e}}to(g)}g=!1}g&&(c=d[0])}}return d=tr(),d.memoizedState=d.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tv,lastRenderedState:c},d.queue=g,d=Gv.bind(null,Gt,g),g.dispatch=d,g=ig(!1),T=ug.bind(null,Gt,!1,g.queue),g=tr(),A={state:c,dispatch:null,action:s,pending:null},g.queue=A,d=ET.bind(null,Gt,A,T,d),A.dispatch=d,g.memoizedState=s,[c,d,!1]}function Mv(s){var c=ci();return Rv(c,Dn,s)}function Rv(s,c,d){if(c=tg(s,c,Tv)[0],s=Ud(ga)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Uu(c)}catch(F){throw F===rc?Rd:F}else g=c;c=ci();var A=c.queue,T=A.dispatch;return d!==c.memoizedState&&(Gt.flags|=2048,cc(9,{destroy:void 0},CT.bind(null,A,d),null)),[g,T,s]}function CT(s,c){s.action=c}function Ov(s){var c=ci(),d=Dn;if(d!==null)return Rv(c,d,s);ci(),c=c.memoizedState,d=ci();var g=d.queue.dispatch;return d.memoizedState=s,[c,g,!1]}function cc(s,c,d,g){return s={tag:s,create:d,deps:g,inst:c,next:null},c=Gt.updateQueue,c===null&&(c=Pd(),Gt.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=s.next=s:(g=d.next,d.next=s,s.next=g,c.lastEffect=s),s}function Nv(){return ci().memoizedState}function jd(s,c,d,g){var A=tr();Gt.flags|=s,A.memoizedState=cc(1|c,{destroy:void 0},d,g===void 0?null:g)}function Hd(s,c,d,g){var A=ci();g=g===void 0?null:g;var T=A.memoizedState.inst;Dn!==null&&g!==null&&Ym(g,Dn.memoizedState.deps)?A.memoizedState=cc(c,T,d,g):(Gt.flags|=s,A.memoizedState=cc(1|c,T,d,g))}function Dv(s,c){jd(8390656,8,s,c)}function sg(s,c){Hd(2048,8,s,c)}function AT(s){Gt.flags|=4;var c=Gt.updateQueue;if(c===null)c=Pd(),Gt.updateQueue=c,c.events=[s];else{var d=c.events;d===null?c.events=[s]:d.push(s)}}function Iv(s){var c=ci().memoizedState;return AT({ref:c,nextImpl:s}),function(){if((An&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}function Lv(s,c){return Hd(4,2,s,c)}function Bv(s,c){return Hd(4,4,s,c)}function zv(s,c){if(typeof c=="function"){s=s();var d=c(s);return function(){typeof d=="function"?d():c(null)}}if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function Pv(s,c,d){d=d!=null?d.concat([s]):null,Hd(4,4,zv.bind(null,c,s),d)}function ag(){}function Fv(s,c){var d=ci();c=c===void 0?null:c;var g=d.memoizedState;return c!==null&&Ym(c,g[1])?g[0]:(d.memoizedState=[s,c],s)}function Uv(s,c){var d=ci();c=c===void 0?null:c;var g=d.memoizedState;if(c!==null&&Ym(c,g[1]))return g[0];if(g=s(),rl){qn(!0);try{s()}finally{qn(!1)}}return d.memoizedState=[g,c],g}function og(s,c,d){return d===void 0||(ma&1073741824)!==0&&(ln&261930)===0?s.memoizedState=c:(s.memoizedState=d,s=j1(),Gt.lanes|=s,uo|=s,d)}function jv(s,c,d,g){return qi(d,c)?d:ac.current!==null?(s=og(s,d,g),qi(s,c)||(mi=!0),s):(ma&42)===0||(ma&1073741824)!==0&&(ln&261930)===0?(mi=!0,s.memoizedState=d):(s=j1(),Gt.lanes|=s,uo|=s,c)}function Hv(s,c,d,g,A){var T=te.p;te.p=T!==0&&8>T?T:8;var F=Y.T,J={};Y.T=J,ug(s,!1,c,d);try{var ae=A(),Ae=Y.S;if(Ae!==null&&Ae(J,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Ne=xT(ae,g);ju(s,c,Ne,Ar(s))}else ju(s,c,g,Ar(s))}catch(Fe){ju(s,c,{then:function(){},status:"rejected",reason:Fe},Ar())}finally{te.p=T,F!==null&&J.types!==null&&(F.types=J.types),Y.T=F}}function TT(){}function lg(s,c,d,g){if(s.tag!==5)throw Error(i(476));var A=qv(s).queue;Hv(s,A,c,re,d===null?TT:function(){return Vv(s),d(g)})}function qv(s){var c=s.memoizedState;if(c!==null)return c;c={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:re},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:d},next:null},s.memoizedState=c,s=s.alternate,s!==null&&(s.memoizedState=c),c}function Vv(s){var c=qv(s);c.next===null&&(c=s.alternate.memoizedState),ju(s,c.next.queue,{},Ar())}function cg(){return Bi(rh)}function Wv(){return ci().memoizedState}function $v(){return ci().memoizedState}function kT(s){for(var c=s.return;c!==null;){switch(c.tag){case 24:case 3:var d=Ar();s=ro(d);var g=so(c,s,d);g!==null&&(mr(g,c,d),Bu(g,c,d)),c={cache:Pm()},s.payload=c;return}c=c.return}}function MT(s,c,d){var g=Ar();d={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},qd(s)?Kv(c,d):(d=Vi(s,c,d,g),d!==null&&(mr(d,s,g),Yv(d,c,g)))}function Gv(s,c,d){var g=Ar();ju(s,c,d,g)}function ju(s,c,d,g){var A={lane:g,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(qd(s))Kv(c,A);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var F=c.lastRenderedState,J=T(F,d);if(A.hasEagerState=!0,A.eagerState=J,qi(J,F))return Nn(s,c,A,0),Pn===null&&Ht(),!1}catch{}if(d=Vi(s,c,A,g),d!==null)return mr(d,s,g),Yv(d,c,g),!0}return!1}function ug(s,c,d,g){if(g={lane:2,revertLane:Hg(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},qd(s)){if(c)throw Error(i(479))}else c=Vi(s,d,g,2),c!==null&&mr(c,s,2)}function qd(s){var c=s.alternate;return s===Gt||c!==null&&c===Gt}function Kv(s,c){oc=Bd=!0;var d=s.pending;d===null?c.next=c:(c.next=d.next,d.next=c),s.pending=c}function Yv(s,c,d){if((d&4194048)!==0){var g=c.lanes;g&=s.pendingLanes,d|=g,c.lanes=d,at(s,d)}}var Hu={readContext:Bi,use:Fd,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useLayoutEffect:ri,useInsertionEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useSyncExternalStore:ri,useId:ri,useHostTransitionStatus:ri,useFormState:ri,useActionState:ri,useOptimistic:ri,useMemoCache:ri,useCacheRefresh:ri};Hu.useEffectEvent=ri;var Xv={readContext:Bi,use:Fd,useCallback:function(s,c){return tr().memoizedState=[s,c===void 0?null:c],s},useContext:Bi,useEffect:Dv,useImperativeHandle:function(s,c,d){d=d!=null?d.concat([s]):null,jd(4194308,4,zv.bind(null,c,s),d)},useLayoutEffect:function(s,c){return jd(4194308,4,s,c)},useInsertionEffect:function(s,c){jd(4,2,s,c)},useMemo:function(s,c){var d=tr();c=c===void 0?null:c;var g=s();if(rl){qn(!0);try{s()}finally{qn(!1)}}return d.memoizedState=[g,c],g},useReducer:function(s,c,d){var g=tr();if(d!==void 0){var A=d(c);if(rl){qn(!0);try{d(c)}finally{qn(!1)}}}else A=c;return g.memoizedState=g.baseState=A,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:A},g.queue=s,s=s.dispatch=MT.bind(null,Gt,s),[g.memoizedState,s]},useRef:function(s){var c=tr();return s={current:s},c.memoizedState=s},useState:function(s){s=ig(s);var c=s.queue,d=Gv.bind(null,Gt,c);return c.dispatch=d,[s.memoizedState,d]},useDebugValue:ag,useDeferredValue:function(s,c){var d=tr();return og(d,s,c)},useTransition:function(){var s=ig(!1);return s=Hv.bind(null,Gt,s.queue,!0,!1),tr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,c,d){var g=Gt,A=tr();if(un){if(d===void 0)throw Error(i(407));d=d()}else{if(d=c(),Pn===null)throw Error(i(349));(ln&127)!==0||yv(g,c,d)}A.memoizedState=d;var T={value:d,getSnapshot:c};return A.queue=T,Dv(bv.bind(null,g,T,s),[s]),g.flags|=2048,cc(9,{destroy:void 0},_v.bind(null,g,T,d,c),null),d},useId:function(){var s=tr(),c=Pn.identifierPrefix;if(un){var d=Bs,g=Ls;d=(g&~(1<<32-Je(g)-1)).toString(32)+d,c="_"+c+"R_"+d,d=zd++,0<d&&(c+="H"+d.toString(32)),c+="_"}else d=ST++,c="_"+c+"r_"+d.toString(32)+"_";return s.memoizedState=c},useHostTransitionStatus:cg,useFormState:kv,useActionState:kv,useOptimistic:function(s){var c=tr();c.memoizedState=c.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=ug.bind(null,Gt,!0,d),d.dispatch=c,[s,c]},useMemoCache:eg,useCacheRefresh:function(){return tr().memoizedState=kT.bind(null,Gt)},useEffectEvent:function(s){var c=tr(),d={impl:s};return c.memoizedState=d,function(){if((An&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}},hg={readContext:Bi,use:Fd,useCallback:Fv,useContext:Bi,useEffect:sg,useImperativeHandle:Pv,useInsertionEffect:Lv,useLayoutEffect:Bv,useMemo:Uv,useReducer:Ud,useRef:Nv,useState:function(){return Ud(ga)},useDebugValue:ag,useDeferredValue:function(s,c){var d=ci();return jv(d,Dn.memoizedState,s,c)},useTransition:function(){var s=Ud(ga)[0],c=ci().memoizedState;return[typeof s=="boolean"?s:Uu(s),c]},useSyncExternalStore:gv,useId:Wv,useHostTransitionStatus:cg,useFormState:Mv,useActionState:Mv,useOptimistic:function(s,c){var d=ci();return Sv(d,Dn,s,c)},useMemoCache:eg,useCacheRefresh:$v};hg.useEffectEvent=Iv;var Zv={readContext:Bi,use:Fd,useCallback:Fv,useContext:Bi,useEffect:sg,useImperativeHandle:Pv,useInsertionEffect:Lv,useLayoutEffect:Bv,useMemo:Uv,useReducer:ng,useRef:Nv,useState:function(){return ng(ga)},useDebugValue:ag,useDeferredValue:function(s,c){var d=ci();return Dn===null?og(d,s,c):jv(d,Dn.memoizedState,s,c)},useTransition:function(){var s=ng(ga)[0],c=ci().memoizedState;return[typeof s=="boolean"?s:Uu(s),c]},useSyncExternalStore:gv,useId:Wv,useHostTransitionStatus:cg,useFormState:Ov,useActionState:Ov,useOptimistic:function(s,c){var d=ci();return Dn!==null?Sv(d,Dn,s,c):(d.baseState=s,[s,d.queue.dispatch])},useMemoCache:eg,useCacheRefresh:$v};Zv.useEffectEvent=Iv;function dg(s,c,d,g){c=s.memoizedState,d=d(g,c),d=d==null?c:f({},c,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var fg={enqueueSetState:function(s,c,d){s=s._reactInternals;var g=Ar(),A=ro(g);A.payload=c,d!=null&&(A.callback=d),c=so(s,A,g),c!==null&&(mr(c,s,g),Bu(c,s,g))},enqueueReplaceState:function(s,c,d){s=s._reactInternals;var g=Ar(),A=ro(g);A.tag=1,A.payload=c,d!=null&&(A.callback=d),c=so(s,A,g),c!==null&&(mr(c,s,g),Bu(c,s,g))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var d=Ar(),g=ro(d);g.tag=2,c!=null&&(g.callback=c),c=so(s,g,d),c!==null&&(mr(c,s,d),Bu(c,s,d))}};function Jv(s,c,d,g,A,T,F){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,T,F):c.prototype&&c.prototype.isPureReactComponent?!C(d,g)||!C(A,T):!0}function Qv(s,c,d,g){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(d,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(d,g),c.state!==s&&fg.enqueueReplaceState(c,c.state,null)}function sl(s,c){var d=c;if("ref"in c){d={};for(var g in c)g!=="ref"&&(d[g]=c[g])}if(s=s.defaultProps){d===c&&(d=f({},d));for(var A in s)d[A]===void 0&&(d[A]=s[A])}return d}function e1(s){ut(s)}function t1(s){console.error(s)}function n1(s){ut(s)}function Vd(s,c){try{var d=s.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function i1(s,c,d){try{var g=s.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function pg(s,c,d){return d=ro(d),d.tag=3,d.payload={element:null},d.callback=function(){Vd(s,c)},d}function r1(s){return s=ro(s),s.tag=3,s}function s1(s,c,d,g){var A=d.type.getDerivedStateFromError;if(typeof A=="function"){var T=g.value;s.payload=function(){return A(T)},s.callback=function(){i1(c,d,g)}}var F=d.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(s.callback=function(){i1(c,d,g),typeof A!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var J=g.stack;this.componentDidCatch(g.value,{componentStack:J!==null?J:""})})}function RT(s,c,d,g,A){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=d.alternate,c!==null&&tc(c,d,A,!0),d=Sr.current,d!==null){switch(d.tag){case 31:case 13:return Kr===null?nf():d.alternate===null&&si===0&&(si=3),d.flags&=-257,d.flags|=65536,d.lanes=A,g===Od?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([g]):c.add(g),Fg(s,g,A)),!1;case 22:return d.flags|=65536,g===Od?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([g]):d.add(g)),Fg(s,g,A)),!1}throw Error(i(435,d.tag))}return Fg(s,g,A),nf(),!1}if(un)return c=Sr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,g!==Dm&&(s=Error(i(422),{cause:g}),Ou(Vr(s,d)))):(g!==Dm&&(c=Error(i(423),{cause:g}),Ou(Vr(c,d))),s=s.current.alternate,s.flags|=65536,A&=-A,s.lanes|=A,g=Vr(g,d),A=pg(s.stateNode,g,A),Vm(s,A),si!==4&&(si=2)),!1;var T=Error(i(520),{cause:g});if(T=Vr(T,d),Xu===null?Xu=[T]:Xu.push(T),si!==4&&(si=2),c===null)return!0;g=Vr(g,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,s=A&-A,d.lanes|=s,s=pg(d.stateNode,g,s),Vm(d,s),!1;case 1:if(c=d.type,T=d.stateNode,(d.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ho===null||!ho.has(T))))return d.flags|=65536,A&=-A,d.lanes|=A,A=r1(A),s1(A,s,d,g),Vm(d,A),!1}d=d.return}while(d!==null);return!1}var mg=Error(i(461)),mi=!1;function zi(s,c,d,g){c.child=s===null?cv(c,null,d,g):il(c,s.child,d,g)}function a1(s,c,d,g,A){d=d.render;var T=c.ref;if("ref"in g){var F={};for(var J in g)J!=="ref"&&(F[J]=g[J])}else F=g;return Qo(c),g=Xm(s,c,d,F,T,A),J=Zm(),s!==null&&!mi?(Jm(s,c,A),ya(s,c,A)):(un&&J&&Om(c),c.flags|=1,zi(s,c,g,A),c.child)}function o1(s,c,d,g,A){if(s===null){var T=d.type;return typeof T=="function"&&!km(T)&&T.defaultProps===void 0&&d.compare===null?(c.tag=15,c.type=T,l1(s,c,T,g,A)):(s=Cd(d.type,null,g,c,c.mode,A),s.ref=c.ref,s.return=c,c.child=s)}if(T=s.child,!wg(s,A)){var F=T.memoizedProps;if(d=d.compare,d=d!==null?d:C,d(F,g)&&s.ref===c.ref)return ya(s,c,A)}return c.flags|=1,s=ha(T,g),s.ref=c.ref,s.return=c,c.child=s}function l1(s,c,d,g,A){if(s!==null){var T=s.memoizedProps;if(C(T,g)&&s.ref===c.ref)if(mi=!1,c.pendingProps=g=T,wg(s,A))(s.flags&131072)!==0&&(mi=!0);else return c.lanes=s.lanes,ya(s,c,A)}return gg(s,c,d,g,A)}function c1(s,c,d,g){var A=g.children,T=s!==null?s.memoizedState:null;if(s===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((c.flags&128)!==0){if(T=T!==null?T.baseLanes|d:d,s!==null){for(g=c.child=s.child,A=0;g!==null;)A=A|g.lanes|g.childLanes,g=g.sibling;g=A&~T}else g=0,c.child=null;return u1(s,c,T,d,g)}if((d&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},s!==null&&Md(c,T!==null?T.cachePool:null),T!==null?dv(c,T):$m(),fv(c);else return g=c.lanes=536870912,u1(s,c,T!==null?T.baseLanes|d:d,d,g)}else T!==null?(Md(c,T.cachePool),dv(c,T),oo(),c.memoizedState=null):(s!==null&&Md(c,null),$m(),oo());return zi(s,c,A,d),c.child}function qu(s,c){return s!==null&&s.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function u1(s,c,d,g,A){var T=Um();return T=T===null?null:{parent:fi._currentValue,pool:T},c.memoizedState={baseLanes:d,cachePool:T},s!==null&&Md(c,null),$m(),fv(c),s!==null&&tc(s,c,g,!0),c.childLanes=A,null}function Wd(s,c){return c=Gd({mode:c.mode,children:c.children},s.mode),c.ref=s.ref,s.child=c,c.return=s,c}function h1(s,c,d){return il(c,s.child,null,d),s=Wd(c,c.pendingProps),s.flags|=2,wr(c),c.memoizedState=null,s}function OT(s,c,d){var g=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,s===null){if(un){if(g.mode==="hidden")return s=Wd(c,g),c.lanes=536870912,qu(null,s);if(Km(c),(s=Wn)?(s=wx(s,Gr),s=s!==null&&s.data==="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Qa!==null?{id:Ls,overflow:Bs}:null,retryLane:536870912,hydrationErrors:null},d=Kb(s),d.return=c,c.child=d,Li=c,Wn=null)):s=null,s===null)throw to(c);return c.lanes=536870912,null}return Wd(c,g)}var T=s.memoizedState;if(T!==null){var F=T.dehydrated;if(Km(c),A)if(c.flags&256)c.flags&=-257,c=h1(s,c,d);else if(c.memoizedState!==null)c.child=s.child,c.flags|=128,c=null;else throw Error(i(558));else if(mi||tc(s,c,d,!1),A=(d&s.childLanes)!==0,mi||A){if(g=Pn,g!==null&&(F=Qt(g,d),F!==0&&F!==T.retryLane))throw T.retryLane=F,kn(s,F),mr(g,s,F),mg;nf(),c=h1(s,c,d)}else s=T.treeContext,Wn=Yr(F.nextSibling),Li=c,un=!0,eo=null,Gr=!1,s!==null&&Zb(c,s),c=Wd(c,g),c.flags|=4096;return c}return s=ha(s.child,{mode:g.mode,children:g.children}),s.ref=c.ref,c.child=s,s.return=c,s}function $d(s,c){var d=c.ref;if(d===null)s!==null&&s.ref!==null&&(c.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(s===null||s.ref!==d)&&(c.flags|=4194816)}}function gg(s,c,d,g,A){return Qo(c),d=Xm(s,c,d,g,void 0,A),g=Zm(),s!==null&&!mi?(Jm(s,c,A),ya(s,c,A)):(un&&g&&Om(c),c.flags|=1,zi(s,c,d,A),c.child)}function d1(s,c,d,g,A,T){return Qo(c),c.updateQueue=null,d=mv(c,g,d,A),pv(s),g=Zm(),s!==null&&!mi?(Jm(s,c,T),ya(s,c,T)):(un&&g&&Om(c),c.flags|=1,zi(s,c,d,T),c.child)}function f1(s,c,d,g,A){if(Qo(c),c.stateNode===null){var T=Zl,F=d.contextType;typeof F=="object"&&F!==null&&(T=Bi(F)),T=new d(g,T),c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=fg,c.stateNode=T,T._reactInternals=c,T=c.stateNode,T.props=g,T.state=c.memoizedState,T.refs={},Hm(c),F=d.contextType,T.context=typeof F=="object"&&F!==null?Bi(F):Zl,T.state=c.memoizedState,F=d.getDerivedStateFromProps,typeof F=="function"&&(dg(c,d,F,g),T.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(F=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),F!==T.state&&fg.enqueueReplaceState(T,T.state,null),Pu(c,g,T,A),zu(),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(s===null){T=c.stateNode;var J=c.memoizedProps,ae=sl(d,J);T.props=ae;var Ae=T.context,Ne=d.contextType;F=Zl,typeof Ne=="object"&&Ne!==null&&(F=Bi(Ne));var Fe=d.getDerivedStateFromProps;Ne=typeof Fe=="function"||typeof T.getSnapshotBeforeUpdate=="function",J=c.pendingProps!==J,Ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(J||Ae!==F)&&Qv(c,T,g,F),io=!1;var ke=c.memoizedState;T.state=ke,Pu(c,g,T,A),zu(),Ae=c.memoizedState,J||ke!==Ae||io?(typeof Fe=="function"&&(dg(c,d,Fe,g),Ae=c.memoizedState),(ae=io||Jv(c,d,ae,g,ke,Ae,F))?(Ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(c.flags|=4194308)):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=Ae),T.props=g,T.state=Ae,T.context=F,g=ae):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{T=c.stateNode,qm(s,c),F=c.memoizedProps,Ne=sl(d,F),T.props=Ne,Fe=c.pendingProps,ke=T.context,Ae=d.contextType,ae=Zl,typeof Ae=="object"&&Ae!==null&&(ae=Bi(Ae)),J=d.getDerivedStateFromProps,(Ae=typeof J=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F!==Fe||ke!==ae)&&Qv(c,T,g,ae),io=!1,ke=c.memoizedState,T.state=ke,Pu(c,g,T,A),zu();var Re=c.memoizedState;F!==Fe||ke!==Re||io||s!==null&&s.dependencies!==null&&Td(s.dependencies)?(typeof J=="function"&&(dg(c,d,J,g),Re=c.memoizedState),(Ne=io||Jv(c,d,Ne,g,ke,Re,ae)||s!==null&&s.dependencies!==null&&Td(s.dependencies))?(Ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,Re,ae),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,Re,ae)),typeof T.componentDidUpdate=="function"&&(c.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof T.componentDidUpdate!="function"||F===s.memoizedProps&&ke===s.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&ke===s.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Re),T.props=g,T.state=Re,T.context=ae,g=Ne):(typeof T.componentDidUpdate!="function"||F===s.memoizedProps&&ke===s.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||F===s.memoizedProps&&ke===s.memoizedState||(c.flags|=1024),g=!1)}return T=g,$d(s,c),g=(c.flags&128)!==0,T||g?(T=c.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:T.render(),c.flags|=1,s!==null&&g?(c.child=il(c,s.child,null,A),c.child=il(c,null,d,A)):zi(s,c,d,A),c.memoizedState=T.state,s=c.child):s=ya(s,c,A),s}function p1(s,c,d,g){return Zo(),c.flags|=256,zi(s,c,d,g),c.child}var yg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _g(s){return{baseLanes:s,cachePool:iv()}}function bg(s,c,d){return s=s!==null?s.childLanes&~d:0,c&&(s|=Cr),s}function m1(s,c,d){var g=c.pendingProps,A=!1,T=(c.flags&128)!==0,F;if((F=T)||(F=s!==null&&s.memoizedState===null?!1:(li.current&2)!==0),F&&(A=!0,c.flags&=-129),F=(c.flags&32)!==0,c.flags&=-33,s===null){if(un){if(A?ao(c):oo(),(s=Wn)?(s=wx(s,Gr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(c.memoizedState={dehydrated:s,treeContext:Qa!==null?{id:Ls,overflow:Bs}:null,retryLane:536870912,hydrationErrors:null},d=Kb(s),d.return=c,c.child=d,Li=c,Wn=null)):s=null,s===null)throw to(c);return ty(s)?c.lanes=32:c.lanes=536870912,null}var J=g.children;return g=g.fallback,A?(oo(),A=c.mode,J=Gd({mode:"hidden",children:J},A),g=Xo(g,A,d,null),J.return=c,g.return=c,J.sibling=g,c.child=J,g=c.child,g.memoizedState=_g(d),g.childLanes=bg(s,F,d),c.memoizedState=yg,qu(null,g)):(ao(c),vg(c,J))}var ae=s.memoizedState;if(ae!==null&&(J=ae.dehydrated,J!==null)){if(T)c.flags&256?(ao(c),c.flags&=-257,c=xg(s,c,d)):c.memoizedState!==null?(oo(),c.child=s.child,c.flags|=128,c=null):(oo(),J=g.fallback,A=c.mode,g=Gd({mode:"visible",children:g.children},A),J=Xo(J,A,d,null),J.flags|=2,g.return=c,J.return=c,g.sibling=J,c.child=g,il(c,s.child,null,d),g=c.child,g.memoizedState=_g(d),g.childLanes=bg(s,F,d),c.memoizedState=yg,c=qu(null,g));else if(ao(c),ty(J)){if(F=J.nextSibling&&J.nextSibling.dataset,F)var Ae=F.dgst;F=Ae,g=Error(i(419)),g.stack="",g.digest=F,Ou({value:g,source:null,stack:null}),c=xg(s,c,d)}else if(mi||tc(s,c,d,!1),F=(d&s.childLanes)!==0,mi||F){if(F=Pn,F!==null&&(g=Qt(F,d),g!==0&&g!==ae.retryLane))throw ae.retryLane=g,kn(s,g),mr(F,s,g),mg;ey(J)||nf(),c=xg(s,c,d)}else ey(J)?(c.flags|=192,c.child=s.child,c=null):(s=ae.treeContext,Wn=Yr(J.nextSibling),Li=c,un=!0,eo=null,Gr=!1,s!==null&&Zb(c,s),c=vg(c,g.children),c.flags|=4096);return c}return A?(oo(),J=g.fallback,A=c.mode,ae=s.child,Ae=ae.sibling,g=ha(ae,{mode:"hidden",children:g.children}),g.subtreeFlags=ae.subtreeFlags&65011712,Ae!==null?J=ha(Ae,J):(J=Xo(J,A,d,null),J.flags|=2),J.return=c,g.return=c,g.sibling=J,c.child=g,qu(null,g),g=c.child,J=s.child.memoizedState,J===null?J=_g(d):(A=J.cachePool,A!==null?(ae=fi._currentValue,A=A.parent!==ae?{parent:ae,pool:ae}:A):A=iv(),J={baseLanes:J.baseLanes|d,cachePool:A}),g.memoizedState=J,g.childLanes=bg(s,F,d),c.memoizedState=yg,qu(s.child,g)):(ao(c),d=s.child,s=d.sibling,d=ha(d,{mode:"visible",children:g.children}),d.return=c,d.sibling=null,s!==null&&(F=c.deletions,F===null?(c.deletions=[s],c.flags|=16):F.push(s)),c.child=d,c.memoizedState=null,d)}function vg(s,c){return c=Gd({mode:"visible",children:c},s.mode),c.return=s,s.child=c}function Gd(s,c){return s=xr(22,s,null,c),s.lanes=0,s}function xg(s,c,d){return il(c,s.child,null,d),s=vg(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function g1(s,c,d){s.lanes|=c;var g=s.alternate;g!==null&&(g.lanes|=c),Bm(s.return,c,d)}function Sg(s,c,d,g,A,T){var F=s.memoizedState;F===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:A,treeForkCount:T}:(F.isBackwards=c,F.rendering=null,F.renderingStartTime=0,F.last=g,F.tail=d,F.tailMode=A,F.treeForkCount=T)}function y1(s,c,d){var g=c.pendingProps,A=g.revealOrder,T=g.tail;g=g.children;var F=li.current,J=(F&2)!==0;if(J?(F=F&1|2,c.flags|=128):F&=1,V(li,F),zi(s,c,g,d),g=un?Ru:0,!J&&s!==null&&(s.flags&128)!==0)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&g1(s,d,c);else if(s.tag===19)g1(s,d,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(A){case"forwards":for(d=c.child,A=null;d!==null;)s=d.alternate,s!==null&&Ld(s)===null&&(A=d),d=d.sibling;d=A,d===null?(A=c.child,c.child=null):(A=d.sibling,d.sibling=null),Sg(c,!1,A,d,T,g);break;case"backwards":case"unstable_legacy-backwards":for(d=null,A=c.child,c.child=null;A!==null;){if(s=A.alternate,s!==null&&Ld(s)===null){c.child=A;break}s=A.sibling,A.sibling=d,d=A,A=s}Sg(c,!0,d,null,T,g);break;case"together":Sg(c,!1,null,null,void 0,g);break;default:c.memoizedState=null}return c.child}function ya(s,c,d){if(s!==null&&(c.dependencies=s.dependencies),uo|=c.lanes,(d&c.childLanes)===0)if(s!==null){if(tc(s,c,d,!1),(d&c.childLanes)===0)return null}else return null;if(s!==null&&c.child!==s.child)throw Error(i(153));if(c.child!==null){for(s=c.child,d=ha(s,s.pendingProps),c.child=d,d.return=c;s.sibling!==null;)s=s.sibling,d=d.sibling=ha(s,s.pendingProps),d.return=c;d.sibling=null}return c.child}function wg(s,c){return(s.lanes&c)!==0?!0:(s=s.dependencies,!!(s!==null&&Td(s)))}function NT(s,c,d){switch(c.tag){case 3:ee(c,c.stateNode.containerInfo),no(c,fi,s.memoizedState.cache),Zo();break;case 27:case 5:xe(c);break;case 4:ee(c,c.stateNode.containerInfo);break;case 10:no(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Km(c),null;break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(ao(c),c.flags|=128,null):(d&c.child.childLanes)!==0?m1(s,c,d):(ao(c),s=ya(s,c,d),s!==null?s.sibling:null);ao(c);break;case 19:var A=(s.flags&128)!==0;if(g=(d&c.childLanes)!==0,g||(tc(s,c,d,!1),g=(d&c.childLanes)!==0),A){if(g)return y1(s,c,d);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),V(li,li.current),g)break;return null;case 22:return c.lanes=0,c1(s,c,d,c.pendingProps);case 24:no(c,fi,s.memoizedState.cache)}return ya(s,c,d)}function _1(s,c,d){if(s!==null)if(s.memoizedProps!==c.pendingProps)mi=!0;else{if(!wg(s,d)&&(c.flags&128)===0)return mi=!1,NT(s,c,d);mi=(s.flags&131072)!==0}else mi=!1,un&&(c.flags&1048576)!==0&&Xb(c,Ru,c.index);switch(c.lanes=0,c.tag){case 16:e:{var g=c.pendingProps;if(s=tl(c.elementType),c.type=s,typeof s=="function")km(s)?(g=sl(s,g),c.tag=1,c=f1(null,c,s,g,d)):(c.tag=0,c=gg(null,c,s,g,d));else{if(s!=null){var A=s.$$typeof;if(A===E){c.tag=11,c=a1(null,c,s,g,d);break e}else if(A===D){c.tag=14,c=o1(null,c,s,g,d);break e}}throw c=$(s)||s,Error(i(306,c,""))}}return c;case 0:return gg(s,c,c.type,c.pendingProps,d);case 1:return g=c.type,A=sl(g,c.pendingProps),f1(s,c,g,A,d);case 3:e:{if(ee(c,c.stateNode.containerInfo),s===null)throw Error(i(387));g=c.pendingProps;var T=c.memoizedState;A=T.element,qm(s,c),Pu(c,g,null,d);var F=c.memoizedState;if(g=F.cache,no(c,fi,g),g!==T.cache&&zm(c,[fi],d,!0),zu(),g=F.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:F.cache},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){c=p1(s,c,g,d);break e}else if(g!==A){A=Vr(Error(i(424)),c),Ou(A),c=p1(s,c,g,d);break e}else for(s=c.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Wn=Yr(s.firstChild),Li=c,un=!0,eo=null,Gr=!0,d=cv(c,null,g,d),c.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zo(),g===A){c=ya(s,c,d);break e}zi(s,c,g,d)}c=c.child}return c;case 26:return $d(s,c),s===null?(d=Mx(c.type,null,c.pendingProps,null))?c.memoizedState=d:un||(d=c.type,s=c.pendingProps,g=uf(De.current).createElement(d),g[Tn]=c,g[Jn]=s,Pi(g,d,s),Qn(g),c.stateNode=g):c.memoizedState=Mx(c.type,s.memoizedProps,c.pendingProps,s.memoizedState),null;case 27:return xe(c),s===null&&un&&(g=c.stateNode=Ax(c.type,c.pendingProps,De.current),Li=c,Gr=!0,A=Wn,go(c.type)?(ny=A,Wn=Yr(g.firstChild)):Wn=A),zi(s,c,c.pendingProps.children,d),$d(s,c),s===null&&(c.flags|=4194304),c.child;case 5:return s===null&&un&&((A=g=Wn)&&(g=lk(g,c.type,c.pendingProps,Gr),g!==null?(c.stateNode=g,Li=c,Wn=Yr(g.firstChild),Gr=!1,A=!0):A=!1),A||to(c)),xe(c),A=c.type,T=c.pendingProps,F=s!==null?s.memoizedProps:null,g=T.children,Zg(A,T)?g=null:F!==null&&Zg(A,F)&&(c.flags|=32),c.memoizedState!==null&&(A=Xm(s,c,wT,null,null,d),rh._currentValue=A),$d(s,c),zi(s,c,g,d),c.child;case 6:return s===null&&un&&((s=d=Wn)&&(d=ck(d,c.pendingProps,Gr),d!==null?(c.stateNode=d,Li=c,Wn=null,s=!0):s=!1),s||to(c)),null;case 13:return m1(s,c,d);case 4:return ee(c,c.stateNode.containerInfo),g=c.pendingProps,s===null?c.child=il(c,null,g,d):zi(s,c,g,d),c.child;case 11:return a1(s,c,c.type,c.pendingProps,d);case 7:return zi(s,c,c.pendingProps,d),c.child;case 8:return zi(s,c,c.pendingProps.children,d),c.child;case 12:return zi(s,c,c.pendingProps.children,d),c.child;case 10:return g=c.pendingProps,no(c,c.type,g.value),zi(s,c,g.children,d),c.child;case 9:return A=c.type._context,g=c.pendingProps.children,Qo(c),A=Bi(A),g=g(A),c.flags|=1,zi(s,c,g,d),c.child;case 14:return o1(s,c,c.type,c.pendingProps,d);case 15:return l1(s,c,c.type,c.pendingProps,d);case 19:return y1(s,c,d);case 31:return OT(s,c,d);case 22:return c1(s,c,d,c.pendingProps);case 24:return Qo(c),g=Bi(fi),s===null?(A=Um(),A===null&&(A=Pn,T=Pm(),A.pooledCache=T,T.refCount++,T!==null&&(A.pooledCacheLanes|=d),A=T),c.memoizedState={parent:g,cache:A},Hm(c),no(c,fi,A)):((s.lanes&d)!==0&&(qm(s,c),Pu(c,null,null,d),zu()),A=s.memoizedState,T=c.memoizedState,A.parent!==g?(A={parent:g,cache:g},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),no(c,fi,g)):(g=T.cache,no(c,fi,g),g!==A.cache&&zm(c,[fi],d,!0))),zi(s,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function _a(s){s.flags|=4}function Eg(s,c,d,g,A){if((c=(s.mode&32)!==0)&&(c=!1),c){if(s.flags|=16777216,(A&335544128)===A)if(s.stateNode.complete)s.flags|=8192;else if(W1())s.flags|=8192;else throw nl=Od,jm}else s.flags&=-16777217}function b1(s,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Ix(c))if(W1())s.flags|=8192;else throw nl=Od,jm}function Kd(s,c){c!==null&&(s.flags|=4),s.flags&16384&&(c=s.tag!==22?Ot():536870912,s.lanes|=c,fc|=c)}function Vu(s,c){if(!un)switch(s.tailMode){case"hidden":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function $n(s){var c=s.alternate!==null&&s.alternate.child===s.child,d=0,g=0;if(c)for(var A=s.child;A!==null;)d|=A.lanes|A.childLanes,g|=A.subtreeFlags&65011712,g|=A.flags&65011712,A.return=s,A=A.sibling;else for(A=s.child;A!==null;)d|=A.lanes|A.childLanes,g|=A.subtreeFlags,g|=A.flags,A.return=s,A=A.sibling;return s.subtreeFlags|=g,s.childLanes=d,c}function DT(s,c,d){var g=c.pendingProps;switch(Nm(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(c),null;case 1:return $n(c),null;case 3:return d=c.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),pa(fi),Me(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(ec(c)?_a(c):s===null||s.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Im())),$n(c),null;case 26:var A=c.type,T=c.memoizedState;return s===null?(_a(c),T!==null?($n(c),b1(c,T)):($n(c),Eg(c,A,null,g,d))):T?T!==s.memoizedState?(_a(c),$n(c),b1(c,T)):($n(c),c.flags&=-16777217):(s=s.memoizedProps,s!==g&&_a(c),$n(c),Eg(c,A,s,g,d)),null;case 27:if(Ze(c),d=De.current,A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==g&&_a(c);else{if(!g){if(c.stateNode===null)throw Error(i(166));return $n(c),null}s=_e.current,ec(c)?Jb(c):(s=Ax(A,g,d),c.stateNode=s,_a(c))}return $n(c),null;case 5:if(Ze(c),A=c.type,s!==null&&c.stateNode!=null)s.memoizedProps!==g&&_a(c);else{if(!g){if(c.stateNode===null)throw Error(i(166));return $n(c),null}if(T=_e.current,ec(c))Jb(c);else{var F=uf(De.current);switch(T){case 1:T=F.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:T=F.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":T=F.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":T=F.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":T=F.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof g.is=="string"?F.createElement("select",{is:g.is}):F.createElement("select"),g.multiple?T.multiple=!0:g.size&&(T.size=g.size);break;default:T=typeof g.is=="string"?F.createElement(A,{is:g.is}):F.createElement(A)}}T[Tn]=c,T[Jn]=g;e:for(F=c.child;F!==null;){if(F.tag===5||F.tag===6)T.appendChild(F.stateNode);else if(F.tag!==4&&F.tag!==27&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===c)break e;for(;F.sibling===null;){if(F.return===null||F.return===c)break e;F=F.return}F.sibling.return=F.return,F=F.sibling}c.stateNode=T;e:switch(Pi(T,A,g),A){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&_a(c)}}return $n(c),Eg(c,c.type,s===null?null:s.memoizedProps,c.pendingProps,d),null;case 6:if(s&&c.stateNode!=null)s.memoizedProps!==g&&_a(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(i(166));if(s=De.current,ec(c)){if(s=c.stateNode,d=c.memoizedProps,g=null,A=Li,A!==null)switch(A.tag){case 27:case 5:g=A.memoizedProps}s[Tn]=c,s=!!(s.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||mx(s.nodeValue,d)),s||to(c,!0)}else s=uf(s).createTextNode(g),s[Tn]=c,c.stateNode=s}return $n(c),null;case 31:if(d=c.memoizedState,s===null||s.memoizedState!==null){if(g=ec(c),d!==null){if(s===null){if(!g)throw Error(i(318));if(s=c.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Tn]=c}else Zo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;$n(c),s=!1}else d=Im(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),s=!0;if(!s)return c.flags&256?(wr(c),c):(wr(c),null);if((c.flags&128)!==0)throw Error(i(558))}return $n(c),null;case 13:if(g=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(A=ec(c),g!==null&&g.dehydrated!==null){if(s===null){if(!A)throw Error(i(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[Tn]=c}else Zo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;$n(c),A=!1}else A=Im(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(wr(c),c):(wr(c),null)}return wr(c),(c.flags&128)!==0?(c.lanes=d,c):(d=g!==null,s=s!==null&&s.memoizedState!==null,d&&(g=c.child,A=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(A=g.alternate.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==A&&(g.flags|=2048)),d!==s&&d&&(c.child.flags|=8192),Kd(c,c.updateQueue),$n(c),null);case 4:return Me(),s===null&&$g(c.stateNode.containerInfo),$n(c),null;case 10:return pa(c.type),$n(c),null;case 19:if(Z(li),g=c.memoizedState,g===null)return $n(c),null;if(A=(c.flags&128)!==0,T=g.rendering,T===null)if(A)Vu(g,!1);else{if(si!==0||s!==null&&(s.flags&128)!==0)for(s=c.child;s!==null;){if(T=Ld(s),T!==null){for(c.flags|=128,Vu(g,!1),s=T.updateQueue,c.updateQueue=s,Kd(c,s),c.subtreeFlags=0,s=d,d=c.child;d!==null;)Gb(d,s),d=d.sibling;return V(li,li.current&1|2),un&&da(c,g.treeForkCount),c.child}s=s.sibling}g.tail!==null&&Bt()>Qd&&(c.flags|=128,A=!0,Vu(g,!1),c.lanes=4194304)}else{if(!A)if(s=Ld(T),s!==null){if(c.flags|=128,A=!0,s=s.updateQueue,c.updateQueue=s,Kd(c,s),Vu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!un)return $n(c),null}else 2*Bt()-g.renderingStartTime>Qd&&d!==536870912&&(c.flags|=128,A=!0,Vu(g,!1),c.lanes=4194304);g.isBackwards?(T.sibling=c.child,c.child=T):(s=g.last,s!==null?s.sibling=T:c.child=T,g.last=T)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Bt(),s.sibling=null,d=li.current,V(li,A?d&1|2:d&1),un&&da(c,g.treeForkCount),s):($n(c),null);case 22:case 23:return wr(c),Gm(),g=c.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(d&536870912)!==0&&(c.flags&128)===0&&($n(c),c.subtreeFlags&6&&(c.flags|=8192)):$n(c),d=c.updateQueue,d!==null&&Kd(c,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048),s!==null&&Z(el),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),c.memoizedState.cache!==d&&(c.flags|=2048),pa(fi),$n(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function IT(s,c){switch(Nm(c),c.tag){case 1:return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return pa(fi),Me(),s=c.flags,(s&65536)!==0&&(s&128)===0?(c.flags=s&-65537|128,c):null;case 26:case 27:case 5:return Ze(c),null;case 31:if(c.memoizedState!==null){if(wr(c),c.alternate===null)throw Error(i(340));Zo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 13:if(wr(c),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Zo()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return Z(li),null;case 4:return Me(),null;case 10:return pa(c.type),null;case 22:case 23:return wr(c),Gm(),s!==null&&Z(el),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 24:return pa(fi),null;case 25:return null;default:return null}}function v1(s,c){switch(Nm(c),c.tag){case 3:pa(fi),Me();break;case 26:case 27:case 5:Ze(c);break;case 4:Me();break;case 31:c.memoizedState!==null&&wr(c);break;case 13:wr(c);break;case 19:Z(li);break;case 10:pa(c.type);break;case 22:case 23:wr(c),Gm(),s!==null&&Z(el);break;case 24:pa(fi)}}function Wu(s,c){try{var d=c.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var A=g.next;d=A;do{if((d.tag&s)===s){g=void 0;var T=d.create,F=d.inst;g=T(),F.destroy=g}d=d.next}while(d!==A)}}catch(J){Rn(c,c.return,J)}}function lo(s,c,d){try{var g=c.updateQueue,A=g!==null?g.lastEffect:null;if(A!==null){var T=A.next;g=T;do{if((g.tag&s)===s){var F=g.inst,J=F.destroy;if(J!==void 0){F.destroy=void 0,A=c;var ae=d,Ae=J;try{Ae()}catch(Ne){Rn(A,ae,Ne)}}}g=g.next}while(g!==T)}}catch(Ne){Rn(c,c.return,Ne)}}function x1(s){var c=s.updateQueue;if(c!==null){var d=s.stateNode;try{hv(c,d)}catch(g){Rn(s,s.return,g)}}}function S1(s,c,d){d.props=sl(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(g){Rn(s,c,g)}}function $u(s,c){try{var d=s.ref;if(d!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof d=="function"?s.refCleanup=d(g):d.current=g}}catch(A){Rn(s,c,A)}}function zs(s,c){var d=s.ref,g=s.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(A){Rn(s,c,A)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(A){Rn(s,c,A)}else d.current=null}function w1(s){var c=s.type,d=s.memoizedProps,g=s.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(A){Rn(s,s.return,A)}}function Cg(s,c,d){try{var g=s.stateNode;nk(g,s.type,d,c),g[Jn]=c}catch(A){Rn(s,s.return,A)}}function E1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&go(s.type)||s.tag===4}function Ag(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||E1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&go(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tg(s,c,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,c?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(s,c):(c=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,c.appendChild(s),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=Qe));else if(g!==4&&(g===27&&go(s.type)&&(d=s.stateNode,c=null),s=s.child,s!==null))for(Tg(s,c,d),s=s.sibling;s!==null;)Tg(s,c,d),s=s.sibling}function Yd(s,c,d){var g=s.tag;if(g===5||g===6)s=s.stateNode,c?d.insertBefore(s,c):d.appendChild(s);else if(g!==4&&(g===27&&go(s.type)&&(d=s.stateNode),s=s.child,s!==null))for(Yd(s,c,d),s=s.sibling;s!==null;)Yd(s,c,d),s=s.sibling}function C1(s){var c=s.stateNode,d=s.memoizedProps;try{for(var g=s.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);Pi(c,g,d),c[Tn]=s,c[Jn]=d}catch(T){Rn(s,s.return,T)}}var ba=!1,gi=!1,kg=!1,A1=typeof WeakSet=="function"?WeakSet:Set,Ri=null;function LT(s,c){if(s=s.containerInfo,Yg=yf,s=q(s),W(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var A=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var F=0,J=-1,ae=-1,Ae=0,Ne=0,Fe=s,ke=null;t:for(;;){for(var Re;Fe!==d||A!==0&&Fe.nodeType!==3||(J=F+A),Fe!==T||g!==0&&Fe.nodeType!==3||(ae=F+g),Fe.nodeType===3&&(F+=Fe.nodeValue.length),(Re=Fe.firstChild)!==null;)ke=Fe,Fe=Re;for(;;){if(Fe===s)break t;if(ke===d&&++Ae===A&&(J=F),ke===T&&++Ne===g&&(ae=F),(Re=Fe.nextSibling)!==null)break;Fe=ke,ke=Fe.parentNode}Fe=Re}d=J===-1||ae===-1?null:{start:J,end:ae}}else d=null}d=d||{start:0,end:0}}else d=null;for(Xg={focusedElem:s,selectionRange:d},yf=!1,Ri=c;Ri!==null;)if(c=Ri,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,Ri=s;else for(;Ri!==null;){switch(c=Ri,T=c.alternate,s=c.flags,c.tag){case 0:if((s&4)!==0&&(s=c.updateQueue,s=s!==null?s.events:null,s!==null))for(d=0;d<s.length;d++)A=s[d],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,d=c,A=T.memoizedProps,T=T.memoizedState,g=d.stateNode;try{var pt=sl(d.type,A);s=g.getSnapshotBeforeUpdate(pt,T),g.__reactInternalSnapshotBeforeUpdate=s}catch(kt){Rn(d,d.return,kt)}}break;case 3:if((s&1024)!==0){if(s=c.stateNode.containerInfo,d=s.nodeType,d===9)Qg(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Qg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=c.sibling,s!==null){s.return=c.return,Ri=s;break}Ri=c.return}}function T1(s,c,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:xa(s,d),g&4&&Wu(5,d);break;case 1:if(xa(s,d),g&4)if(s=d.stateNode,c===null)try{s.componentDidMount()}catch(F){Rn(d,d.return,F)}else{var A=sl(d.type,c.memoizedProps);c=c.memoizedState;try{s.componentDidUpdate(A,c,s.__reactInternalSnapshotBeforeUpdate)}catch(F){Rn(d,d.return,F)}}g&64&&x1(d),g&512&&$u(d,d.return);break;case 3:if(xa(s,d),g&64&&(s=d.updateQueue,s!==null)){if(c=null,d.child!==null)switch(d.child.tag){case 27:case 5:c=d.child.stateNode;break;case 1:c=d.child.stateNode}try{hv(s,c)}catch(F){Rn(d,d.return,F)}}break;case 27:c===null&&g&4&&C1(d);case 26:case 5:xa(s,d),c===null&&g&4&&w1(d),g&512&&$u(d,d.return);break;case 12:xa(s,d);break;case 31:xa(s,d),g&4&&R1(s,d);break;case 13:xa(s,d),g&4&&O1(s,d),g&64&&(s=d.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(d=VT.bind(null,d),uk(s,d))));break;case 22:if(g=d.memoizedState!==null||ba,!g){c=c!==null&&c.memoizedState!==null||gi,A=ba;var T=gi;ba=g,(gi=c)&&!T?Sa(s,d,(d.subtreeFlags&8772)!==0):xa(s,d),ba=A,gi=T}break;case 30:break;default:xa(s,d)}}function k1(s){var c=s.alternate;c!==null&&(s.alternate=null,k1(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&Ha(c)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Yn=null,hr=!1;function va(s,c,d){for(d=d.child;d!==null;)M1(s,c,d),d=d.sibling}function M1(s,c,d){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(zn,d)}catch{}switch(d.tag){case 26:gi||zs(d,c),va(s,c,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:gi||zs(d,c);var g=Yn,A=hr;go(d.type)&&(Yn=d.stateNode,hr=!1),va(s,c,d),th(d.stateNode),Yn=g,hr=A;break;case 5:gi||zs(d,c);case 6:if(g=Yn,A=hr,Yn=null,va(s,c,d),Yn=g,hr=A,Yn!==null)if(hr)try{(Yn.nodeType===9?Yn.body:Yn.nodeName==="HTML"?Yn.ownerDocument.body:Yn).removeChild(d.stateNode)}catch(T){Rn(d,c,T)}else try{Yn.removeChild(d.stateNode)}catch(T){Rn(d,c,T)}break;case 18:Yn!==null&&(hr?(s=Yn,xx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,d.stateNode),xc(s)):xx(Yn,d.stateNode));break;case 4:g=Yn,A=hr,Yn=d.stateNode.containerInfo,hr=!0,va(s,c,d),Yn=g,hr=A;break;case 0:case 11:case 14:case 15:lo(2,d,c),gi||lo(4,d,c),va(s,c,d);break;case 1:gi||(zs(d,c),g=d.stateNode,typeof g.componentWillUnmount=="function"&&S1(d,c,g)),va(s,c,d);break;case 21:va(s,c,d);break;case 22:gi=(g=gi)||d.memoizedState!==null,va(s,c,d),gi=g;break;default:va(s,c,d)}}function R1(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{xc(s)}catch(d){Rn(c,c.return,d)}}}function O1(s,c){if(c.memoizedState===null&&(s=c.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{xc(s)}catch(d){Rn(c,c.return,d)}}function BT(s){switch(s.tag){case 31:case 13:case 19:var c=s.stateNode;return c===null&&(c=s.stateNode=new A1),c;case 22:return s=s.stateNode,c=s._retryCache,c===null&&(c=s._retryCache=new A1),c;default:throw Error(i(435,s.tag))}}function Xd(s,c){var d=BT(s);c.forEach(function(g){if(!d.has(g)){d.add(g);var A=WT.bind(null,s,g);g.then(A,A)}})}function dr(s,c){var d=c.deletions;if(d!==null)for(var g=0;g<d.length;g++){var A=d[g],T=s,F=c,J=F;e:for(;J!==null;){switch(J.tag){case 27:if(go(J.type)){Yn=J.stateNode,hr=!1;break e}break;case 5:Yn=J.stateNode,hr=!1;break e;case 3:case 4:Yn=J.stateNode.containerInfo,hr=!0;break e}J=J.return}if(Yn===null)throw Error(i(160));M1(T,F,A),Yn=null,hr=!1,T=A.alternate,T!==null&&(T.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)N1(c,s),c=c.sibling}var us=null;function N1(s,c){var d=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:dr(c,s),fr(s),g&4&&(lo(3,s,s.return),Wu(3,s),lo(5,s,s.return));break;case 1:dr(c,s),fr(s),g&512&&(gi||d===null||zs(d,d.return)),g&64&&ba&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var A=us;if(dr(c,s),fr(s),g&512&&(gi||d===null||zs(d,d.return)),g&4){var T=d!==null?d.memoizedState:null;if(g=s.memoizedState,d===null)if(g===null)if(s.stateNode===null){e:{g=s.type,d=s.memoizedProps,A=A.ownerDocument||A;t:switch(g){case"title":T=A.getElementsByTagName("title")[0],(!T||T[Qi]||T[Tn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=A.createElement(g),A.head.insertBefore(T,A.querySelector("head > title"))),Pi(T,g,d),T[Tn]=s,Qn(T),g=T;break e;case"link":var F=Nx("link","href",A).get(g+(d.href||""));if(F){for(var J=0;J<F.length;J++)if(T=F[J],T.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&T.getAttribute("rel")===(d.rel==null?null:d.rel)&&T.getAttribute("title")===(d.title==null?null:d.title)&&T.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){F.splice(J,1);break t}}T=A.createElement(g),Pi(T,g,d),A.head.appendChild(T);break;case"meta":if(F=Nx("meta","content",A).get(g+(d.content||""))){for(J=0;J<F.length;J++)if(T=F[J],T.getAttribute("content")===(d.content==null?null:""+d.content)&&T.getAttribute("name")===(d.name==null?null:d.name)&&T.getAttribute("property")===(d.property==null?null:d.property)&&T.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&T.getAttribute("charset")===(d.charSet==null?null:d.charSet)){F.splice(J,1);break t}}T=A.createElement(g),Pi(T,g,d),A.head.appendChild(T);break;default:throw Error(i(468,g))}T[Tn]=s,Qn(T),g=T}s.stateNode=g}else Dx(A,s.type,s.stateNode);else s.stateNode=Ox(A,g,s.memoizedProps);else T!==g?(T===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):T.count--,g===null?Dx(A,s.type,s.stateNode):Ox(A,g,s.memoizedProps)):g===null&&s.stateNode!==null&&Cg(s,s.memoizedProps,d.memoizedProps)}break;case 27:dr(c,s),fr(s),g&512&&(gi||d===null||zs(d,d.return)),d!==null&&g&4&&Cg(s,s.memoizedProps,d.memoizedProps);break;case 5:if(dr(c,s),fr(s),g&512&&(gi||d===null||zs(d,d.return)),s.flags&32){A=s.stateNode;try{wt(A,"")}catch(pt){Rn(s,s.return,pt)}}g&4&&s.stateNode!=null&&(A=s.memoizedProps,Cg(s,A,d!==null?d.memoizedProps:A)),g&1024&&(kg=!0);break;case 6:if(dr(c,s),fr(s),g&4){if(s.stateNode===null)throw Error(i(162));g=s.memoizedProps,d=s.stateNode;try{d.nodeValue=g}catch(pt){Rn(s,s.return,pt)}}break;case 3:if(ff=null,A=us,us=hf(c.containerInfo),dr(c,s),us=A,fr(s),g&4&&d!==null&&d.memoizedState.isDehydrated)try{xc(c.containerInfo)}catch(pt){Rn(s,s.return,pt)}kg&&(kg=!1,D1(s));break;case 4:g=us,us=hf(s.stateNode.containerInfo),dr(c,s),fr(s),us=g;break;case 12:dr(c,s),fr(s);break;case 31:dr(c,s),fr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Xd(s,g)));break;case 13:dr(c,s),fr(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Jd=Bt()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Xd(s,g)));break;case 22:A=s.memoizedState!==null;var ae=d!==null&&d.memoizedState!==null,Ae=ba,Ne=gi;if(ba=Ae||A,gi=Ne||ae,dr(c,s),gi=Ne,ba=Ae,fr(s),g&8192)e:for(c=s.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(d===null||ae||ba||gi||al(s)),d=null,c=s;;){if(c.tag===5||c.tag===26){if(d===null){ae=d=c;try{if(T=ae.stateNode,A)F=T.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{J=ae.stateNode;var Fe=ae.memoizedProps.style,ke=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;J.style.display=ke==null||typeof ke=="boolean"?"":(""+ke).trim()}}catch(pt){Rn(ae,ae.return,pt)}}}else if(c.tag===6){if(d===null){ae=c;try{ae.stateNode.nodeValue=A?"":ae.memoizedProps}catch(pt){Rn(ae,ae.return,pt)}}}else if(c.tag===18){if(d===null){ae=c;try{var Re=ae.stateNode;A?Sx(Re,!0):Sx(ae.stateNode,!1)}catch(pt){Rn(ae,ae.return,pt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===s)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break e;for(;c.sibling===null;){if(c.return===null||c.return===s)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=s.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Xd(s,d))));break;case 19:dr(c,s),fr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,Xd(s,g)));break;case 30:break;case 21:break;default:dr(c,s),fr(s)}}function fr(s){var c=s.flags;if(c&2){try{for(var d,g=s.return;g!==null;){if(E1(g)){d=g;break}g=g.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var A=d.stateNode,T=Ag(s);Yd(s,T,A);break;case 5:var F=d.stateNode;d.flags&32&&(wt(F,""),d.flags&=-33);var J=Ag(s);Yd(s,J,F);break;case 3:case 4:var ae=d.stateNode.containerInfo,Ae=Ag(s);Tg(s,Ae,ae);break;default:throw Error(i(161))}}catch(Ne){Rn(s,s.return,Ne)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function D1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var c=s;D1(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),s=s.sibling}}function xa(s,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)T1(s,c.alternate,c),c=c.sibling}function al(s){for(s=s.child;s!==null;){var c=s;switch(c.tag){case 0:case 11:case 14:case 15:lo(4,c,c.return),al(c);break;case 1:zs(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount=="function"&&S1(c,c.return,d),al(c);break;case 27:th(c.stateNode);case 26:case 5:zs(c,c.return),al(c);break;case 22:c.memoizedState===null&&al(c);break;case 30:al(c);break;default:al(c)}s=s.sibling}}function Sa(s,c,d){for(d=d&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,A=s,T=c,F=T.flags;switch(T.tag){case 0:case 11:case 15:Sa(A,T,d),Wu(4,T);break;case 1:if(Sa(A,T,d),g=T,A=g.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ae){Rn(g,g.return,Ae)}if(g=T,A=g.updateQueue,A!==null){var J=g.stateNode;try{var ae=A.shared.hiddenCallbacks;if(ae!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ae.length;A++)uv(ae[A],J)}catch(Ae){Rn(g,g.return,Ae)}}d&&F&64&&x1(T),$u(T,T.return);break;case 27:C1(T);case 26:case 5:Sa(A,T,d),d&&g===null&&F&4&&w1(T),$u(T,T.return);break;case 12:Sa(A,T,d);break;case 31:Sa(A,T,d),d&&F&4&&R1(A,T);break;case 13:Sa(A,T,d),d&&F&4&&O1(A,T);break;case 22:T.memoizedState===null&&Sa(A,T,d),$u(T,T.return);break;case 30:break;default:Sa(A,T,d)}c=c.sibling}}function Mg(s,c){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(s=c.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Nu(d))}function Rg(s,c){s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Nu(s))}function hs(s,c,d,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)I1(s,c,d,g),c=c.sibling}function I1(s,c,d,g){var A=c.flags;switch(c.tag){case 0:case 11:case 15:hs(s,c,d,g),A&2048&&Wu(9,c);break;case 1:hs(s,c,d,g);break;case 3:hs(s,c,d,g),A&2048&&(s=null,c.alternate!==null&&(s=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==s&&(c.refCount++,s!=null&&Nu(s)));break;case 12:if(A&2048){hs(s,c,d,g),s=c.stateNode;try{var T=c.memoizedProps,F=T.id,J=T.onPostCommit;typeof J=="function"&&J(F,c.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ae){Rn(c,c.return,ae)}}else hs(s,c,d,g);break;case 31:hs(s,c,d,g);break;case 13:hs(s,c,d,g);break;case 23:break;case 22:T=c.stateNode,F=c.alternate,c.memoizedState!==null?T._visibility&2?hs(s,c,d,g):Gu(s,c):T._visibility&2?hs(s,c,d,g):(T._visibility|=2,uc(s,c,d,g,(c.subtreeFlags&10256)!==0||!1)),A&2048&&Mg(F,c);break;case 24:hs(s,c,d,g),A&2048&&Rg(c.alternate,c);break;default:hs(s,c,d,g)}}function uc(s,c,d,g,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var T=s,F=c,J=d,ae=g,Ae=F.flags;switch(F.tag){case 0:case 11:case 15:uc(T,F,J,ae,A),Wu(8,F);break;case 23:break;case 22:var Ne=F.stateNode;F.memoizedState!==null?Ne._visibility&2?uc(T,F,J,ae,A):Gu(T,F):(Ne._visibility|=2,uc(T,F,J,ae,A)),A&&Ae&2048&&Mg(F.alternate,F);break;case 24:uc(T,F,J,ae,A),A&&Ae&2048&&Rg(F.alternate,F);break;default:uc(T,F,J,ae,A)}c=c.sibling}}function Gu(s,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var d=s,g=c,A=g.flags;switch(g.tag){case 22:Gu(d,g),A&2048&&Mg(g.alternate,g);break;case 24:Gu(d,g),A&2048&&Rg(g.alternate,g);break;default:Gu(d,g)}c=c.sibling}}var Ku=8192;function hc(s,c,d){if(s.subtreeFlags&Ku)for(s=s.child;s!==null;)L1(s,c,d),s=s.sibling}function L1(s,c,d){switch(s.tag){case 26:hc(s,c,d),s.flags&Ku&&s.memoizedState!==null&&Sk(d,us,s.memoizedState,s.memoizedProps);break;case 5:hc(s,c,d);break;case 3:case 4:var g=us;us=hf(s.stateNode.containerInfo),hc(s,c,d),us=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=Ku,Ku=16777216,hc(s,c,d),Ku=g):hc(s,c,d));break;default:hc(s,c,d)}}function B1(s){var c=s.alternate;if(c!==null&&(s=c.child,s!==null)){c.child=null;do c=s.sibling,s.sibling=null,s=c;while(s!==null)}}function Yu(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var g=c[d];Ri=g,P1(g,s)}B1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)z1(s),s=s.sibling}function z1(s){switch(s.tag){case 0:case 11:case 15:Yu(s),s.flags&2048&&lo(9,s,s.return);break;case 3:Yu(s);break;case 12:Yu(s);break;case 22:var c=s.stateNode;s.memoizedState!==null&&c._visibility&2&&(s.return===null||s.return.tag!==13)?(c._visibility&=-3,Zd(s)):Yu(s);break;default:Yu(s)}}function Zd(s){var c=s.deletions;if((s.flags&16)!==0){if(c!==null)for(var d=0;d<c.length;d++){var g=c[d];Ri=g,P1(g,s)}B1(s)}for(s=s.child;s!==null;){switch(c=s,c.tag){case 0:case 11:case 15:lo(8,c,c.return),Zd(c);break;case 22:d=c.stateNode,d._visibility&2&&(d._visibility&=-3,Zd(c));break;default:Zd(c)}s=s.sibling}}function P1(s,c){for(;Ri!==null;){var d=Ri;switch(d.tag){case 0:case 11:case 15:lo(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Nu(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,Ri=g;else e:for(d=s;Ri!==null;){g=Ri;var A=g.sibling,T=g.return;if(k1(g),g===d){Ri=null;break e}if(A!==null){A.return=T,Ri=A;break e}Ri=T}}}var zT={getCacheForType:function(s){var c=Bi(fi),d=c.data.get(s);return d===void 0&&(d=s(),c.data.set(s,d)),d},cacheSignal:function(){return Bi(fi).controller.signal}},PT=typeof WeakMap=="function"?WeakMap:Map,An=0,Pn=null,sn=null,ln=0,Mn=0,Er=null,co=!1,dc=!1,Og=!1,wa=0,si=0,uo=0,ol=0,Ng=0,Cr=0,fc=0,Xu=null,pr=null,Dg=!1,Jd=0,F1=0,Qd=1/0,ef=null,ho=null,Ei=0,fo=null,pc=null,Ea=0,Ig=0,Lg=null,U1=null,Zu=0,Bg=null;function Ar(){return(An&2)!==0&&ln!==0?ln&-ln:Y.T!==null?Hg():is()}function j1(){if(Cr===0)if((ln&536870912)===0||un){var s=Cs;Cs<<=1,(Cs&3932160)===0&&(Cs=262144),Cr=s}else Cr=536870912;return s=Sr.current,s!==null&&(s.flags|=32),Cr}function mr(s,c,d){(s===Pn&&(Mn===2||Mn===9)||s.cancelPendingCommit!==null)&&(mc(s,0),po(s,ln,Cr,!1)),hn(s,d),((An&2)===0||s!==Pn)&&(s===Pn&&((An&2)===0&&(ol|=d),si===4&&po(s,ln,Cr,!1)),Ps(s))}function H1(s,c,d){if((An&6)!==0)throw Error(i(327));var g=!d&&(c&127)===0&&(c&s.expiredLanes)===0||Ie(s,c),A=g?jT(s,c):Pg(s,c,!0),T=g;do{if(A===0){dc&&!g&&po(s,c,0,!1);break}else{if(d=s.current.alternate,T&&!FT(d)){A=Pg(s,c,!1),T=!1;continue}if(A===2){if(T=c,s.errorRecoveryDisabledLanes&T)var F=0;else F=s.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){c=F;e:{var J=s;A=Xu;var ae=J.current.memoizedState.isDehydrated;if(ae&&(mc(J,F).flags|=256),F=Pg(J,F,!1),F!==2){if(Og&&!ae){J.errorRecoveryDisabledLanes|=T,ol|=T,A=4;break e}T=pr,pr=A,T!==null&&(pr===null?pr=T:pr.push.apply(pr,T))}A=F}if(T=!1,A!==2)continue}}if(A===1){mc(s,0),po(s,c,0,!0);break}e:{switch(g=s,T=A,T){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:po(g,c,Cr,!co);break e;case 2:pr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(A=Jd+300-Bt(),10<A)){if(po(g,c,Cr,!co),oe(g,0,!0)!==0)break e;Ea=c,g.timeoutHandle=bx(q1.bind(null,g,d,pr,ef,Dg,c,Cr,ol,fc,co,T,"Throttled",-0,0),A);break e}q1(g,d,pr,ef,Dg,c,Cr,ol,fc,co,T,null,-0,0)}}break}while(!0);Ps(s)}function q1(s,c,d,g,A,T,F,J,ae,Ae,Ne,Fe,ke,Re){if(s.timeoutHandle=-1,Fe=c.subtreeFlags,Fe&8192||(Fe&16785408)===16785408){Fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qe},L1(c,T,Fe);var pt=(T&62914560)===T?Jd-Bt():(T&4194048)===T?F1-Bt():0;if(pt=wk(Fe,pt),pt!==null){Ea=T,s.cancelPendingCommit=pt(Z1.bind(null,s,c,T,d,g,A,F,J,ae,Ne,Fe,null,ke,Re)),po(s,T,F,!Ae);return}}Z1(s,c,T,d,g,A,F,J,ae)}function FT(s){for(var c=s;;){var d=c.tag;if((d===0||d===11||d===15)&&c.flags&16384&&(d=c.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var A=d[g],T=A.getSnapshot;A=A.value;try{if(!qi(T(),A))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&16384&&d!==null)d.return=c,c=d;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function po(s,c,d,g){c&=~Ng,c&=~ol,s.suspendedLanes|=c,s.pingedLanes&=~c,g&&(s.warmLanes|=c),g=s.expirationTimes;for(var A=c;0<A;){var T=31-Je(A),F=1<<T;g[T]=-1,A&=~F}d!==0&&lt(s,d,c)}function tf(){return(An&6)===0?(Ju(0),!1):!0}function zg(){if(sn!==null){if(Mn===0)var s=sn.return;else s=sn,fa=Jo=null,Qm(s),sc=null,Iu=0,s=sn;for(;s!==null;)v1(s.alternate,s),s=s.return;sn=null}}function mc(s,c){var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,sk(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),Ea=0,zg(),Pn=s,sn=d=ha(s.current,null),ln=c,Mn=0,Er=null,co=!1,dc=Ie(s,c),Og=!1,fc=Cr=Ng=ol=uo=si=0,pr=Xu=null,Dg=!1,(c&8)!==0&&(c|=c&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=c;0<g;){var A=31-Je(g),T=1<<A;c|=s[A],g&=~T}return wa=c,Ht(),d}function V1(s,c){Gt=null,Y.H=Hu,c===rc||c===Rd?(c=av(),Mn=3):c===jm?(c=av(),Mn=4):Mn=c===mg?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Er=c,sn===null&&(si=1,Vd(s,Vr(c,s.current)))}function W1(){var s=Sr.current;return s===null?!0:(ln&4194048)===ln?Kr===null:(ln&62914560)===ln||(ln&536870912)!==0?s===Kr:!1}function $1(){var s=Y.H;return Y.H=Hu,s===null?Hu:s}function G1(){var s=Y.A;return Y.A=zT,s}function nf(){si=4,co||(ln&4194048)!==ln&&Sr.current!==null||(dc=!0),(uo&134217727)===0&&(ol&134217727)===0||Pn===null||po(Pn,ln,Cr,!1)}function Pg(s,c,d){var g=An;An|=2;var A=$1(),T=G1();(Pn!==s||ln!==c)&&(ef=null,mc(s,c)),c=!1;var F=si;e:do try{if(Mn!==0&&sn!==null){var J=sn,ae=Er;switch(Mn){case 8:zg(),F=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(c=!0);var Ae=Mn;if(Mn=0,Er=null,gc(s,J,ae,Ae),d&&dc){F=0;break e}break;default:Ae=Mn,Mn=0,Er=null,gc(s,J,ae,Ae)}}UT(),F=si;break}catch(Ne){V1(s,Ne)}while(!0);return c&&s.shellSuspendCounter++,fa=Jo=null,An=g,Y.H=A,Y.A=T,sn===null&&(Pn=null,ln=0,Ht()),F}function UT(){for(;sn!==null;)K1(sn)}function jT(s,c){var d=An;An|=2;var g=$1(),A=G1();Pn!==s||ln!==c?(ef=null,Qd=Bt()+500,mc(s,c)):dc=Ie(s,c);e:do try{if(Mn!==0&&sn!==null){c=sn;var T=Er;t:switch(Mn){case 1:Mn=0,Er=null,gc(s,c,T,1);break;case 2:case 9:if(rv(T)){Mn=0,Er=null,Y1(c);break}c=function(){Mn!==2&&Mn!==9||Pn!==s||(Mn=7),Ps(s)},T.then(c,c);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:rv(T)?(Mn=0,Er=null,Y1(c)):(Mn=0,Er=null,gc(s,c,T,7));break;case 5:var F=null;switch(sn.tag){case 26:F=sn.memoizedState;case 5:case 27:var J=sn;if(F?Ix(F):J.stateNode.complete){Mn=0,Er=null;var ae=J.sibling;if(ae!==null)sn=ae;else{var Ae=J.return;Ae!==null?(sn=Ae,rf(Ae)):sn=null}break t}}Mn=0,Er=null,gc(s,c,T,5);break;case 6:Mn=0,Er=null,gc(s,c,T,6);break;case 8:zg(),si=6;break e;default:throw Error(i(462))}}HT();break}catch(Ne){V1(s,Ne)}while(!0);return fa=Jo=null,Y.H=g,Y.A=A,An=d,sn!==null?0:(Pn=null,ln=0,Ht(),si)}function HT(){for(;sn!==null&&!rn();)K1(sn)}function K1(s){var c=_1(s.alternate,s,wa);s.memoizedProps=s.pendingProps,c===null?rf(s):sn=c}function Y1(s){var c=s,d=c.alternate;switch(c.tag){case 15:case 0:c=d1(d,c,c.pendingProps,c.type,void 0,ln);break;case 11:c=d1(d,c,c.pendingProps,c.type.render,c.ref,ln);break;case 5:Qm(c);default:v1(d,c),c=sn=Gb(c,wa),c=_1(d,c,wa)}s.memoizedProps=s.pendingProps,c===null?rf(s):sn=c}function gc(s,c,d,g){fa=Jo=null,Qm(c),sc=null,Iu=0;var A=c.return;try{if(RT(s,A,c,d,ln)){si=1,Vd(s,Vr(d,s.current)),sn=null;return}}catch(T){if(A!==null)throw sn=A,T;si=1,Vd(s,Vr(d,s.current)),sn=null;return}c.flags&32768?(un||g===1?s=!0:dc||(ln&536870912)!==0?s=!1:(co=s=!0,(g===2||g===9||g===3||g===6)&&(g=Sr.current,g!==null&&g.tag===13&&(g.flags|=16384))),X1(c,s)):rf(c)}function rf(s){var c=s;do{if((c.flags&32768)!==0){X1(c,co);return}s=c.return;var d=DT(c.alternate,c,wa);if(d!==null){sn=d;return}if(c=c.sibling,c!==null){sn=c;return}sn=c=s}while(c!==null);si===0&&(si=5)}function X1(s,c){do{var d=IT(s.alternate,s);if(d!==null){d.flags&=32767,sn=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&&(s=s.sibling,s!==null)){sn=s;return}sn=s=d}while(s!==null);si=6,sn=null}function Z1(s,c,d,g,A,T,F,J,ae){s.cancelPendingCommit=null;do sf();while(Ei!==0);if((An&6)!==0)throw Error(i(327));if(c!==null){if(c===s.current)throw Error(i(177));if(T=c.lanes|c.childLanes,T|=vt,ft(s,d,T,F,J,ae),s===Pn&&(sn=Pn=null,ln=0),pc=c,fo=s,Ea=d,Ig=T,Lg=A,U1=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,$T(dt,function(){return nx(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=Y.T,Y.T=null,A=te.p,te.p=2,F=An,An|=4;try{LT(s,c,d)}finally{An=F,te.p=A,Y.T=g}}Ei=1,J1(),Q1(),ex()}}function J1(){if(Ei===1){Ei=0;var s=fo,c=pc,d=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null;var g=te.p;te.p=2;var A=An;An|=4;try{N1(c,s);var T=Xg,F=q(s.containerInfo),J=T.focusedElem,ae=T.selectionRange;if(F!==J&&J&&J.ownerDocument&&z(J.ownerDocument.documentElement,J)){if(ae!==null&&W(J)){var Ae=ae.start,Ne=ae.end;if(Ne===void 0&&(Ne=Ae),"selectionStart"in J)J.selectionStart=Ae,J.selectionEnd=Math.min(Ne,J.value.length);else{var Fe=J.ownerDocument||document,ke=Fe&&Fe.defaultView||window;if(ke.getSelection){var Re=ke.getSelection(),pt=J.textContent.length,kt=Math.min(ae.start,pt),Ln=ae.end===void 0?kt:Math.min(ae.end,pt);!Re.extend&&kt>Ln&&(F=Ln,Ln=kt,kt=F);var ye=I(J,kt),me=I(J,Ln);if(ye&&me&&(Re.rangeCount!==1||Re.anchorNode!==ye.node||Re.anchorOffset!==ye.offset||Re.focusNode!==me.node||Re.focusOffset!==me.offset)){var Ce=Fe.createRange();Ce.setStart(ye.node,ye.offset),Re.removeAllRanges(),kt>Ln?(Re.addRange(Ce),Re.extend(me.node,me.offset)):(Ce.setEnd(me.node,me.offset),Re.addRange(Ce))}}}}for(Fe=[],Re=J;Re=Re.parentNode;)Re.nodeType===1&&Fe.push({element:Re,left:Re.scrollLeft,top:Re.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<Fe.length;J++){var Be=Fe[J];Be.element.scrollLeft=Be.left,Be.element.scrollTop=Be.top}}yf=!!Yg,Xg=Yg=null}finally{An=A,te.p=g,Y.T=d}}s.current=c,Ei=2}}function Q1(){if(Ei===2){Ei=0;var s=fo,c=pc,d=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||d){d=Y.T,Y.T=null;var g=te.p;te.p=2;var A=An;An|=4;try{T1(s,c.alternate,c)}finally{An=A,te.p=g,Y.T=d}}Ei=3}}function ex(){if(Ei===4||Ei===3){Ei=0,Ut();var s=fo,c=pc,d=Ea,g=U1;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Ei=5:(Ei=0,pc=fo=null,tx(s,s.pendingLanes));var A=s.pendingLanes;if(A===0&&(ho=null),ur(d),c=c.stateNode,Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(zn,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=Y.T,A=te.p,te.p=2,Y.T=null;try{for(var T=s.onRecoverableError,F=0;F<g.length;F++){var J=g[F];T(J.value,{componentStack:J.stack})}}finally{Y.T=c,te.p=A}}(Ea&3)!==0&&sf(),Ps(s),A=s.pendingLanes,(d&261930)!==0&&(A&42)!==0?s===Bg?Zu++:(Zu=0,Bg=s):Zu=0,Ju(0)}}function tx(s,c){(s.pooledCacheLanes&=c)===0&&(c=s.pooledCache,c!=null&&(s.pooledCache=null,Nu(c)))}function sf(){return J1(),Q1(),ex(),nx()}function nx(){if(Ei!==5)return!1;var s=fo,c=Ig;Ig=0;var d=ur(Ea),g=Y.T,A=te.p;try{te.p=32>d?32:d,Y.T=null,d=Lg,Lg=null;var T=fo,F=Ea;if(Ei=0,pc=fo=null,Ea=0,(An&6)!==0)throw Error(i(331));var J=An;if(An|=4,z1(T.current),I1(T,T.current,F,d),An=J,Ju(0,!1),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(zn,T)}catch{}return!0}finally{te.p=A,Y.T=g,tx(s,c)}}function ix(s,c,d){c=Vr(d,c),c=pg(s.stateNode,c,2),s=so(s,c,2),s!==null&&(hn(s,2),Ps(s))}function Rn(s,c,d){if(s.tag===3)ix(s,s,d);else for(;c!==null;){if(c.tag===3){ix(c,s,d);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ho===null||!ho.has(g))){s=Vr(d,s),d=r1(2),g=so(c,d,2),g!==null&&(s1(d,g,c,s),hn(g,2),Ps(g));break}}c=c.return}}function Fg(s,c,d){var g=s.pingCache;if(g===null){g=s.pingCache=new PT;var A=new Set;g.set(c,A)}else A=g.get(c),A===void 0&&(A=new Set,g.set(c,A));A.has(d)||(Og=!0,A.add(d),s=qT.bind(null,s,c,d),c.then(s,s))}function qT(s,c,d){var g=s.pingCache;g!==null&&g.delete(c),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Pn===s&&(ln&d)===d&&(si===4||si===3&&(ln&62914560)===ln&&300>Bt()-Jd?(An&2)===0&&mc(s,0):Ng|=d,fc===ln&&(fc=0)),Ps(s)}function rx(s,c){c===0&&(c=Ot()),s=kn(s,c),s!==null&&(hn(s,c),Ps(s))}function VT(s){var c=s.memoizedState,d=0;c!==null&&(d=c.retryLane),rx(s,d)}function WT(s,c){var d=0;switch(s.tag){case 31:case 13:var g=s.stateNode,A=s.memoizedState;A!==null&&(d=A.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(c),rx(s,d)}function $T(s,c){return bt(s,c)}var af=null,yc=null,Ug=!1,of=!1,jg=!1,mo=0;function Ps(s){s!==yc&&s.next===null&&(yc===null?af=yc=s:yc=yc.next=s),of=!0,Ug||(Ug=!0,KT())}function Ju(s,c){if(!jg&&of){jg=!0;do for(var d=!1,g=af;g!==null;){if(s!==0){var A=g.pendingLanes;if(A===0)var T=0;else{var F=g.suspendedLanes,J=g.pingedLanes;T=(1<<31-Je(42|s)+1)-1,T&=A&~(F&~J),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(d=!0,lx(g,T))}else T=ln,T=oe(g,g===Pn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Ie(g,T)||(d=!0,lx(g,T));g=g.next}while(d);jg=!1}}function GT(){sx()}function sx(){of=Ug=!1;var s=0;mo!==0&&rk()&&(s=mo);for(var c=Bt(),d=null,g=af;g!==null;){var A=g.next,T=ax(g,c);T===0?(g.next=null,d===null?af=A:d.next=A,A===null&&(yc=d)):(d=g,(s!==0||(T&3)!==0)&&(of=!0)),g=A}Ei!==0&&Ei!==5||Ju(s),mo!==0&&(mo=0)}function ax(s,c){for(var d=s.suspendedLanes,g=s.pingedLanes,A=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var F=31-Je(T),J=1<<F,ae=A[F];ae===-1?((J&d)===0||(J&g)!==0)&&(A[F]=it(J,c)):ae<=c&&(s.expiredLanes|=J),T&=~J}if(c=Pn,d=ln,d=oe(s,s===c?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,d===0||s===c&&(Mn===2||Mn===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&Dt(g),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Ie(s,d)){if(c=d&-d,c===s.callbackPriority)return c;switch(g!==null&&Dt(g),ur(d)){case 2:case 8:d=He;break;case 32:d=dt;break;case 268435456:d=It;break;default:d=dt}return g=ox.bind(null,s),d=bt(d,g),s.callbackPriority=c,s.callbackNode=d,c}return g!==null&&g!==null&&Dt(g),s.callbackPriority=2,s.callbackNode=null,2}function ox(s,c){if(Ei!==0&&Ei!==5)return s.callbackNode=null,s.callbackPriority=0,null;var d=s.callbackNode;if(sf()&&s.callbackNode!==d)return null;var g=ln;return g=oe(s,s===Pn?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(H1(s,g,c),ax(s,Bt()),s.callbackNode!=null&&s.callbackNode===d?ox.bind(null,s):null)}function lx(s,c){if(sf())return null;H1(s,c,!0)}function KT(){ak(function(){(An&6)!==0?bt(Ee,GT):sx()})}function Hg(){if(mo===0){var s=nc;s===0&&(s=nt,nt<<=1,(nt&261888)===0&&(nt=256)),mo=s}return mo}function cx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:er(""+s)}function ux(s,c){var d=c.ownerDocument.createElement("input");return d.name=c.name,d.value=c.value,s.id&&d.setAttribute("form",s.id),c.parentNode.insertBefore(d,c),s=new FormData(s),d.parentNode.removeChild(d),s}function YT(s,c,d,g,A){if(c==="submit"&&d&&d.stateNode===A){var T=cx((A[Jn]||null).action),F=g.submitter;F&&(c=(c=F[Jn]||null)?cx(c.formAction):F.getAttribute("formAction"),c!==null&&(T=c,F=null));var J=new Bl("action","action",null,g,A);s.push({event:J,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(mo!==0){var ae=F?ux(A,F):new FormData(A);lg(d,{pending:!0,data:ae,method:A.method,action:T},null,ae)}}else typeof T=="function"&&(J.preventDefault(),ae=F?ux(A,F):new FormData(A),lg(d,{pending:!0,data:ae,method:A.method,action:T},T,ae))},currentTarget:A}]})}}for(var qg=0;qg<rt.length;qg++){var Vg=rt[qg],XT=Vg.toLowerCase(),ZT=Vg[0].toUpperCase()+Vg.slice(1);We(XT,"on"+ZT)}We(Te,"onAnimationEnd"),We(ve,"onAnimationIteration"),We(Oe,"onAnimationStart"),We("dblclick","onDoubleClick"),We("focusin","onFocus"),We("focusout","onBlur"),We(qe,"onTransitionRun"),We(et,"onTransitionStart"),We(tt,"onTransitionCancel"),We(Ve,"onTransitionEnd"),Ge("onMouseEnter",["mouseout","mouseover"]),Ge("onMouseLeave",["mouseout","mouseover"]),Ge("onPointerEnter",["pointerout","pointerover"]),Ge("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function hx(s,c){c=(c&4)!==0;for(var d=0;d<s.length;d++){var g=s[d],A=g.event;g=g.listeners;e:{var T=void 0;if(c)for(var F=g.length-1;0<=F;F--){var J=g[F],ae=J.instance,Ae=J.currentTarget;if(J=J.listener,ae!==T&&A.isPropagationStopped())break e;T=J,A.currentTarget=Ae;try{T(A)}catch(Ne){ut(Ne)}A.currentTarget=null,T=ae}else for(F=0;F<g.length;F++){if(J=g[F],ae=J.instance,Ae=J.currentTarget,J=J.listener,ae!==T&&A.isPropagationStopped())break e;T=J,A.currentTarget=Ae;try{T(A)}catch(Ne){ut(Ne)}A.currentTarget=null,T=ae}}}}function an(s,c){var d=c[Ts];d===void 0&&(d=c[Ts]=new Set);var g=s+"__bubble";d.has(g)||(dx(c,s,2,!1),d.add(g))}function Wg(s,c,d){var g=0;c&&(g|=4),dx(d,s,g,c)}var lf="_reactListening"+Math.random().toString(36).slice(2);function $g(s){if(!s[lf]){s[lf]=!0,ss.forEach(function(d){d!=="selectionchange"&&(JT.has(d)||Wg(d,!1,s),Wg(d,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[lf]||(c[lf]=!0,Wg("selectionchange",!1,c))}}function dx(s,c,d,g){switch(jx(c)){case 2:var A=Ak;break;case 8:A=Tk;break;default:A=oy}d=A.bind(null,c,d,s),A=void 0,!gu||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),g?A!==void 0?s.addEventListener(c,d,{capture:!0,passive:A}):s.addEventListener(c,d,!0):A!==void 0?s.addEventListener(c,d,{passive:A}):s.addEventListener(c,d,!1)}function Gg(s,c,d,g,A){var T=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var F=g.tag;if(F===3||F===4){var J=g.stateNode.containerInfo;if(J===A)break;if(F===4)for(F=g.return;F!==null;){var ae=F.tag;if((ae===3||ae===4)&&F.stateNode.containerInfo===A)return;F=F.return}for(;J!==null;){if(F=xi(J),F===null)return;if(ae=F.tag,ae===5||ae===6||ae===26||ae===27){g=T=F;continue e}J=J.parentNode}}g=g.return}Rs(function(){var Ae=T,Ne=Pt(d),Fe=[];e:{var ke=ct.get(s);if(ke!==void 0){var Re=Bl,pt=s;switch(s){case"keypress":if($a(d)===0)break e;case"keydown":case"keyup":Re=ql;break;case"focusin":pt="focus",Re=Ga;break;case"focusout":pt="blur",Re=Ga;break;case"beforeblur":case"afterblur":Re=Ga;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=pd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=wu;break;case Te:case ve:case Oe:Re=md;break;case Ve:Re=Eu;break;case"scroll":case"scrollend":Re=zl;break;case"wheel":Re=Wl;break;case"copy":case"cut":case"paste":Re=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=Su;break;case"toggle":case"beforetoggle":Re=_d}var kt=(c&4)!==0,Ln=!kt&&(s==="scroll"||s==="scrollend"),ye=kt?ke!==null?ke+"Capture":null:ke;kt=[];for(var me=Ae,Ce;me!==null;){var Be=me;if(Ce=Be.stateNode,Be=Be.tag,Be!==5&&Be!==26&&Be!==27||Ce===null||ye===null||(Be=ra(me,ye),Be!=null&&kt.push(eh(me,Be,Ce))),Ln)break;me=me.return}0<kt.length&&(ke=new Re(ke,pt,null,d,Ne),Fe.push({event:ke,listeners:kt}))}}if((c&7)===0){e:{if(ke=s==="mouseover"||s==="pointerover",Re=s==="mouseout"||s==="pointerout",ke&&d!==ht&&(pt=d.relatedTarget||d.fromElement)&&(xi(pt)||pt[Di]))break e;if((Re||ke)&&(ke=Ne.window===Ne?Ne:(ke=Ne.ownerDocument)?ke.defaultView||ke.parentWindow:window,Re?(pt=d.relatedTarget||d.toElement,Re=Ae,pt=pt?xi(pt):null,pt!==null&&(Ln=a(pt),kt=pt.tag,pt!==Ln||kt!==5&&kt!==27&&kt!==6)&&(pt=null)):(Re=null,pt=Ae),Re!==pt)){if(kt=Fl,Be="onMouseLeave",ye="onMouseEnter",me="mouse",(s==="pointerout"||s==="pointerover")&&(kt=Su,Be="onPointerLeave",ye="onPointerEnter",me="pointer"),Ln=Re==null?ke:Ui(Re),Ce=pt==null?ke:Ui(pt),ke=new kt(Be,me+"leave",Re,d,Ne),ke.target=Ln,ke.relatedTarget=Ce,Be=null,xi(Ne)===Ae&&(kt=new kt(ye,me+"enter",pt,d,Ne),kt.target=Ce,kt.relatedTarget=Ln,Be=kt),Ln=Be,Re&&pt)t:{for(kt=QT,ye=Re,me=pt,Ce=0,Be=ye;Be;Be=kt(Be))Ce++;Be=0;for(var xt=me;xt;xt=kt(xt))Be++;for(;0<Ce-Be;)ye=kt(ye),Ce--;for(;0<Be-Ce;)me=kt(me),Be--;for(;Ce--;){if(ye===me||me!==null&&ye===me.alternate){kt=ye;break t}ye=kt(ye),me=kt(me)}kt=null}else kt=null;Re!==null&&fx(Fe,ke,Re,kt,!1),pt!==null&&Ln!==null&&fx(Fe,Ln,pt,kt,!0)}}e:{if(ke=Ae?Ui(Ae):window,Re=ke.nodeName&&ke.nodeName.toLowerCase(),Re==="select"||Re==="input"&&ke.type==="file")var _n=Yo;else if(Kl(ke))if(qr)_n=Za;else{_n=ua;var yt=Ed}else Re=ke.nodeName,!Re||Re.toLowerCase()!=="input"||ke.type!=="checkbox"&&ke.type!=="radio"?Ae&&Ms(Ae.elementType)&&(_n=Yo):_n=Mu;if(_n&&(_n=_n(s,Ae))){ku(Fe,_n,d,Ne);break e}yt&&yt(s,ke,Ae),s==="focusout"&&Ae&&ke.type==="number"&&Ae.memoizedProps.value!=null&&ks(ke,"number",ke.value)}switch(yt=Ae?Ui(Ae):window,s){case"focusin":(Kl(yt)||yt.contentEditable==="true")&&(ie=yt,ue=Ae,be=null);break;case"focusout":be=ue=ie=null;break;case"mousedown":he=!0;break;case"contextmenu":case"mouseup":case"dragend":he=!1,ce(Fe,d,Ne);break;case"selectionchange":if(ne)break;case"keydown":case"keyup":ce(Fe,d,Ne)}var Xt;if(Go)e:{switch(s){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else la?Tu(s,d)&&(cn="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(cn="onCompositionStart");cn&&($l&&d.locale!=="ko"&&(la||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&la&&(Xt=Wa()):(Hr=Ne,Ll="value"in Hr?Hr.value:Hr.textContent,la=!0)),yt=cf(Ae,cn),0<yt.length&&(cn=new Hl(cn,s,null,d,Ne),Fe.push({event:cn,listeners:yt}),Xt?cn.data=Xt:(Xt=vd(d),Xt!==null&&(cn.data=Xt)))),(Xt=Cm?xd(s,d):Am(s,d))&&(cn=cf(Ae,"onBeforeInput"),0<cn.length&&(yt=new Hl("onBeforeInput","beforeinput",null,d,Ne),Fe.push({event:yt,listeners:cn}),yt.data=Xt)),YT(Fe,s,Ae,d,Ne)}hx(Fe,c)})}function eh(s,c,d){return{instance:s,listener:c,currentTarget:d}}function cf(s,c){for(var d=c+"Capture",g=[];s!==null;){var A=s,T=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||T===null||(A=ra(s,d),A!=null&&g.unshift(eh(s,A,T)),A=ra(s,c),A!=null&&g.push(eh(s,A,T))),s.tag===3)return g;s=s.return}return[]}function QT(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function fx(s,c,d,g,A){for(var T=c._reactName,F=[];d!==null&&d!==g;){var J=d,ae=J.alternate,Ae=J.stateNode;if(J=J.tag,ae!==null&&ae===g)break;J!==5&&J!==26&&J!==27||Ae===null||(ae=Ae,A?(Ae=ra(d,T),Ae!=null&&F.unshift(eh(d,Ae,ae))):A||(Ae=ra(d,T),Ae!=null&&F.push(eh(d,Ae,ae)))),d=d.return}F.length!==0&&s.push({event:c,listeners:F})}var ek=/\r\n?/g,tk=/\u0000|\uFFFD/g;function px(s){return(typeof s=="string"?s:""+s).replace(ek,`
`).replace(tk,"")}function mx(s,c){return c=px(c),px(s)===c}function In(s,c,d,g,A,T){switch(d){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||wt(s,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&wt(s,""+g);break;case"className":ji(s,"class",g);break;case"tabIndex":ji(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ji(s,d,g);break;case"style":yn(s,g,T);break;case"data":if(c!=="object"){ji(s,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||d!=="href")){s.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=er(""+g),s.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(d==="formAction"?(c!=="input"&&In(s,c,"name",A.name,A,null),In(s,c,"formEncType",A.formEncType,A,null),In(s,c,"formMethod",A.formMethod,A,null),In(s,c,"formTarget",A.formTarget,A,null)):(In(s,c,"encType",A.encType,A,null),In(s,c,"method",A.method,A,null),In(s,c,"target",A.target,A,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(d);break}g=er(""+g),s.setAttribute(d,g);break;case"onClick":g!=null&&(s.onclick=Qe);break;case"onScroll":g!=null&&an("scroll",s);break;case"onScrollEnd":g!=null&&an("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(A.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}d=er(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""+g):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":g===!0?s.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(d,g):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(d,g):s.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(d):s.setAttribute(d,g);break;case"popover":an("beforetoggle",s),an("toggle",s),At(s,"popover",g);break;case"xlinkActuate":Ii(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ii(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ii(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ii(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ii(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ii(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ii(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ii(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ii(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":At(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ls.get(d)||d,At(s,d,g))}}function Kg(s,c,d,g,A,T){switch(d){case"style":yn(s,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(d=g.__html,d!=null){if(A.children!=null)throw Error(i(60));s.innerHTML=d}}break;case"children":typeof g=="string"?wt(s,g):(typeof g=="number"||typeof g=="bigint")&&wt(s,""+g);break;case"onScroll":g!=null&&an("scroll",s);break;case"onScrollEnd":g!=null&&an("scrollend",s);break;case"onClick":g!=null&&(s.onclick=Qe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ur.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(A=d.endsWith("Capture"),c=d.slice(2,A?d.length-7:void 0),T=s[Jn]||null,T=T!=null?T[d]:null,typeof T=="function"&&s.removeEventListener(c,T,A),typeof g=="function")){typeof T!="function"&&T!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(c,g,A);break e}d in s?s[d]=g:g===!0?s.setAttribute(d,""):At(s,d,g)}}}function Pi(s,c,d){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":an("error",s),an("load",s);var g=!1,A=!1,T;for(T in d)if(d.hasOwnProperty(T)){var F=d[T];if(F!=null)switch(T){case"src":g=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:In(s,c,T,F,d,null)}}A&&In(s,c,"srcSet",d.srcSet,d,null),g&&In(s,c,"src",d.src,d,null);return;case"input":an("invalid",s);var J=T=F=A=null,ae=null,Ae=null;for(g in d)if(d.hasOwnProperty(g)){var Ne=d[g];if(Ne!=null)switch(g){case"name":A=Ne;break;case"type":F=Ne;break;case"checked":ae=Ne;break;case"defaultChecked":Ae=Ne;break;case"value":T=Ne;break;case"defaultValue":J=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,c));break;default:In(s,c,g,Ne,d,null)}}as(s,T,J,ae,Ae,F,A,!1);return;case"select":an("invalid",s),g=F=T=null;for(A in d)if(d.hasOwnProperty(A)&&(J=d[A],J!=null))switch(A){case"value":T=J;break;case"defaultValue":F=J;break;case"multiple":g=J;default:In(s,c,A,J,d,null)}c=T,d=F,s.multiple=!!g,c!=null?ii(s,!!g,c,!1):d!=null&&ii(s,!!g,d,!0);return;case"textarea":an("invalid",s),T=A=g=null;for(F in d)if(d.hasOwnProperty(F)&&(J=d[F],J!=null))switch(F){case"value":g=J;break;case"defaultValue":A=J;break;case"children":T=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(91));break;default:In(s,c,F,J,d,null)}os(s,g,A,T);return;case"option":for(ae in d)d.hasOwnProperty(ae)&&(g=d[ae],g!=null)&&(ae==="selected"?s.selected=g&&typeof g!="function"&&typeof g!="symbol":In(s,c,ae,g,d,null));return;case"dialog":an("beforetoggle",s),an("toggle",s),an("cancel",s),an("close",s);break;case"iframe":case"object":an("load",s);break;case"video":case"audio":for(g=0;g<Qu.length;g++)an(Qu[g],s);break;case"image":an("error",s),an("load",s);break;case"details":an("toggle",s);break;case"embed":case"source":case"link":an("error",s),an("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in d)if(d.hasOwnProperty(Ae)&&(g=d[Ae],g!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:In(s,c,Ae,g,d,null)}return;default:if(Ms(c)){for(Ne in d)d.hasOwnProperty(Ne)&&(g=d[Ne],g!==void 0&&Kg(s,c,Ne,g,d,void 0));return}}for(J in d)d.hasOwnProperty(J)&&(g=d[J],g!=null&&In(s,c,J,g,d,null))}function nk(s,c,d,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,T=null,F=null,J=null,ae=null,Ae=null,Ne=null;for(Re in d){var Fe=d[Re];if(d.hasOwnProperty(Re)&&Fe!=null)switch(Re){case"checked":break;case"value":break;case"defaultValue":ae=Fe;default:g.hasOwnProperty(Re)||In(s,c,Re,null,g,Fe)}}for(var ke in g){var Re=g[ke];if(Fe=d[ke],g.hasOwnProperty(ke)&&(Re!=null||Fe!=null))switch(ke){case"type":T=Re;break;case"name":A=Re;break;case"checked":Ae=Re;break;case"defaultChecked":Ne=Re;break;case"value":F=Re;break;case"defaultValue":J=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(i(137,c));break;default:Re!==Fe&&In(s,c,ke,Re,g,Fe)}}jr(s,F,J,ae,Ae,Ne,T,A);return;case"select":Re=F=J=ke=null;for(T in d)if(ae=d[T],d.hasOwnProperty(T)&&ae!=null)switch(T){case"value":break;case"multiple":Re=ae;default:g.hasOwnProperty(T)||In(s,c,T,null,g,ae)}for(A in g)if(T=g[A],ae=d[A],g.hasOwnProperty(A)&&(T!=null||ae!=null))switch(A){case"value":ke=T;break;case"defaultValue":J=T;break;case"multiple":F=T;default:T!==ae&&In(s,c,A,T,g,ae)}c=J,d=F,g=Re,ke!=null?ii(s,!!d,ke,!1):!!g!=!!d&&(c!=null?ii(s,!!d,c,!0):ii(s,!!d,d?[]:"",!1));return;case"textarea":Re=ke=null;for(J in d)if(A=d[J],d.hasOwnProperty(J)&&A!=null&&!g.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:In(s,c,J,null,g,A)}for(F in g)if(A=g[F],T=d[F],g.hasOwnProperty(F)&&(A!=null||T!=null))switch(F){case"value":ke=A;break;case"defaultValue":Re=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==T&&In(s,c,F,A,g,T)}Ho(s,ke,Re);return;case"option":for(var pt in d)ke=d[pt],d.hasOwnProperty(pt)&&ke!=null&&!g.hasOwnProperty(pt)&&(pt==="selected"?s.selected=!1:In(s,c,pt,null,g,ke));for(ae in g)ke=g[ae],Re=d[ae],g.hasOwnProperty(ae)&&ke!==Re&&(ke!=null||Re!=null)&&(ae==="selected"?s.selected=ke&&typeof ke!="function"&&typeof ke!="symbol":In(s,c,ae,ke,g,Re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in d)ke=d[kt],d.hasOwnProperty(kt)&&ke!=null&&!g.hasOwnProperty(kt)&&In(s,c,kt,null,g,ke);for(Ae in g)if(ke=g[Ae],Re=d[Ae],g.hasOwnProperty(Ae)&&ke!==Re&&(ke!=null||Re!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(i(137,c));break;default:In(s,c,Ae,ke,g,Re)}return;default:if(Ms(c)){for(var Ln in d)ke=d[Ln],d.hasOwnProperty(Ln)&&ke!==void 0&&!g.hasOwnProperty(Ln)&&Kg(s,c,Ln,void 0,g,ke);for(Ne in g)ke=g[Ne],Re=d[Ne],!g.hasOwnProperty(Ne)||ke===Re||ke===void 0&&Re===void 0||Kg(s,c,Ne,ke,g,Re);return}}for(var ye in d)ke=d[ye],d.hasOwnProperty(ye)&&ke!=null&&!g.hasOwnProperty(ye)&&In(s,c,ye,null,g,ke);for(Fe in g)ke=g[Fe],Re=d[Fe],!g.hasOwnProperty(Fe)||ke===Re||ke==null&&Re==null||In(s,c,Fe,ke,g,Re)}function gx(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ik(){if(typeof performance.getEntriesByType=="function"){for(var s=0,c=0,d=performance.getEntriesByType("resource"),g=0;g<d.length;g++){var A=d[g],T=A.transferSize,F=A.initiatorType,J=A.duration;if(T&&J&&gx(F)){for(F=0,J=A.responseEnd,g+=1;g<d.length;g++){var ae=d[g],Ae=ae.startTime;if(Ae>J)break;var Ne=ae.transferSize,Fe=ae.initiatorType;Ne&&gx(Fe)&&(ae=ae.responseEnd,F+=Ne*(ae<J?1:(J-Ae)/(ae-Ae)))}if(--g,c+=8*(T+F)/(A.duration/1e3),s++,10<s)break}}if(0<s)return c/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Yg=null,Xg=null;function uf(s){return s.nodeType===9?s:s.ownerDocument}function yx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _x(s,c){if(s===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&c==="foreignObject"?0:s}function Zg(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Jg=null;function rk(){var s=window.event;return s&&s.type==="popstate"?s===Jg?!1:(Jg=s,!0):(Jg=null,!1)}var bx=typeof setTimeout=="function"?setTimeout:void 0,sk=typeof clearTimeout=="function"?clearTimeout:void 0,vx=typeof Promise=="function"?Promise:void 0,ak=typeof queueMicrotask=="function"?queueMicrotask:typeof vx<"u"?function(s){return vx.resolve(null).then(s).catch(ok)}:bx;function ok(s){setTimeout(function(){throw s})}function go(s){return s==="head"}function xx(s,c){var d=c,g=0;do{var A=d.nextSibling;if(s.removeChild(d),A&&A.nodeType===8)if(d=A.data,d==="/$"||d==="/&"){if(g===0){s.removeChild(A),xc(c);return}g--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")g++;else if(d==="html")th(s.ownerDocument.documentElement);else if(d==="head"){d=s.ownerDocument.head,th(d);for(var T=d.firstChild;T;){var F=T.nextSibling,J=T.nodeName;T[Qi]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&T.rel.toLowerCase()==="stylesheet"||d.removeChild(T),T=F}}else d==="body"&&th(s.ownerDocument.body);d=A}while(d);xc(c)}function Sx(s,c){var d=s;s=0;do{var g=d.nextSibling;if(d.nodeType===1?c?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(c?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),g&&g.nodeType===8)if(d=g.data,d==="/$"){if(s===0)break;s--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||s++;d=g}while(d)}function Qg(s){var c=s.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var d=c;switch(c=c.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Qg(d),Ha(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function lk(s,c,d,g){for(;s.nodeType===1;){var A=d;if(s.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[Qi])switch(c){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==A.rel||s.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||s.getAttribute("title")!==(A.title==null?null:A.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(A.src==null?null:A.src)||s.getAttribute("type")!==(A.type==null?null:A.type)||s.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(c==="input"&&s.type==="hidden"){var T=A.name==null?null:""+A.name;if(A.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=Yr(s.nextSibling),s===null)break}return null}function ck(s,c,d){if(c==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Yr(s.nextSibling),s===null))return null;return s}function wx(s,c){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Yr(s.nextSibling),s===null))return null;return s}function ey(s){return s.data==="$?"||s.data==="$~"}function ty(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function uk(s,c){var d=s.ownerDocument;if(s.data==="$~")s._reactRetry=c;else if(s.data!=="$?"||d.readyState!=="loading")c();else{var g=function(){c(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function Yr(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return s}var ny=null;function Ex(s){s=s.nextSibling;for(var c=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"||d==="/&"){if(c===0)return Yr(s.nextSibling);c--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||c++}s=s.nextSibling}return null}function Cx(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(c===0)return s;c--}else d!=="/$"&&d!=="/&"||c++}s=s.previousSibling}return null}function Ax(s,c,d){switch(c=uf(d),s){case"html":if(s=c.documentElement,!s)throw Error(i(452));return s;case"head":if(s=c.head,!s)throw Error(i(453));return s;case"body":if(s=c.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function th(s){for(var c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Ha(s)}var Xr=new Map,Tx=new Set;function hf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ca=te.d;te.d={f:hk,r:dk,D:fk,C:pk,L:mk,m:gk,X:_k,S:yk,M:bk};function hk(){var s=Ca.f(),c=tf();return s||c}function dk(s){var c=En(s);c!==null&&c.tag===5&&c.type==="form"?Vv(c):Ca.r(s)}var _c=typeof document>"u"?null:document;function kx(s,c,d){var g=_c;if(g&&typeof c=="string"&&c){var A=hi(c);A='link[rel="'+s+'"][href="'+A+'"]',typeof d=="string"&&(A+='[crossorigin="'+d+'"]'),Tx.has(A)||(Tx.add(A),s={rel:s,crossOrigin:d,href:c},g.querySelector(A)===null&&(c=g.createElement("link"),Pi(c,"link",s),Qn(c),g.head.appendChild(c)))}}function fk(s){Ca.D(s),kx("dns-prefetch",s,null)}function pk(s,c){Ca.C(s,c),kx("preconnect",s,c)}function mk(s,c,d){Ca.L(s,c,d);var g=_c;if(g&&s&&c){var A='link[rel="preload"][as="'+hi(c)+'"]';c==="image"&&d&&d.imageSrcSet?(A+='[imagesrcset="'+hi(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(A+='[imagesizes="'+hi(d.imageSizes)+'"]')):A+='[href="'+hi(s)+'"]';var T=A;switch(c){case"style":T=bc(s);break;case"script":T=vc(s)}Xr.has(T)||(s=f({rel:"preload",href:c==="image"&&d&&d.imageSrcSet?void 0:s,as:c},d),Xr.set(T,s),g.querySelector(A)!==null||c==="style"&&g.querySelector(nh(T))||c==="script"&&g.querySelector(ih(T))||(c=g.createElement("link"),Pi(c,"link",s),Qn(c),g.head.appendChild(c)))}}function gk(s,c){Ca.m(s,c);var d=_c;if(d&&s){var g=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+hi(g)+'"][href="'+hi(s)+'"]',T=A;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=vc(s)}if(!Xr.has(T)&&(s=f({rel:"modulepreload",href:s},c),Xr.set(T,s),d.querySelector(A)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(ih(T)))return}g=d.createElement("link"),Pi(g,"link",s),Qn(g),d.head.appendChild(g)}}}function yk(s,c,d){Ca.S(s,c,d);var g=_c;if(g&&s){var A=Ti(g).hoistableStyles,T=bc(s);c=c||"default";var F=A.get(T);if(!F){var J={loading:0,preload:null};if(F=g.querySelector(nh(T)))J.loading=5;else{s=f({rel:"stylesheet",href:s,"data-precedence":c},d),(d=Xr.get(T))&&iy(s,d);var ae=F=g.createElement("link");Qn(ae),Pi(ae,"link",s),ae._p=new Promise(function(Ae,Ne){ae.onload=Ae,ae.onerror=Ne}),ae.addEventListener("load",function(){J.loading|=1}),ae.addEventListener("error",function(){J.loading|=2}),J.loading|=4,df(F,c,g)}F={type:"stylesheet",instance:F,count:1,state:J},A.set(T,F)}}}function _k(s,c){Ca.X(s,c);var d=_c;if(d&&s){var g=Ti(d).hoistableScripts,A=vc(s),T=g.get(A);T||(T=d.querySelector(ih(A)),T||(s=f({src:s,async:!0},c),(c=Xr.get(A))&&ry(s,c),T=d.createElement("script"),Qn(T),Pi(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(A,T))}}function bk(s,c){Ca.M(s,c);var d=_c;if(d&&s){var g=Ti(d).hoistableScripts,A=vc(s),T=g.get(A);T||(T=d.querySelector(ih(A)),T||(s=f({src:s,async:!0,type:"module"},c),(c=Xr.get(A))&&ry(s,c),T=d.createElement("script"),Qn(T),Pi(T,"link",s),d.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(A,T))}}function Mx(s,c,d,g){var A=(A=De.current)?hf(A):null;if(!A)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(c=bc(d.href),d=Ti(A).hoistableStyles,g=d.get(c),g||(g={type:"style",instance:null,count:0,state:null},d.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=bc(d.href);var T=Ti(A).hoistableStyles,F=T.get(s);if(F||(A=A.ownerDocument||A,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,F),(T=A.querySelector(nh(s)))&&!T._p&&(F.instance=T,F.state.loading=5),Xr.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Xr.set(s,d),T||vk(A,s,d,F.state))),c&&g===null)throw Error(i(528,""));return F}if(c&&g!==null)throw Error(i(529,""));return null;case"script":return c=d.async,d=d.src,typeof d=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=vc(d),d=Ti(A).hoistableScripts,g=d.get(c),g||(g={type:"script",instance:null,count:0,state:null},d.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function bc(s){return'href="'+hi(s)+'"'}function nh(s){return'link[rel="stylesheet"]['+s+"]"}function Rx(s){return f({},s,{"data-precedence":s.precedence,precedence:null})}function vk(s,c,d,g){s.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=s.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Pi(c,"link",d),Qn(c),s.head.appendChild(c))}function vc(s){return'[src="'+hi(s)+'"]'}function ih(s){return"script[async]"+s}function Ox(s,c,d){if(c.count++,c.instance===null)switch(c.type){case"style":var g=s.querySelector('style[data-href~="'+hi(d.href)+'"]');if(g)return c.instance=g,Qn(g),g;var A=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),Qn(g),Pi(g,"style",A),df(g,d.precedence,s),c.instance=g;case"stylesheet":A=bc(d.href);var T=s.querySelector(nh(A));if(T)return c.state.loading|=4,c.instance=T,Qn(T),T;g=Rx(d),(A=Xr.get(A))&&iy(g,A),T=(s.ownerDocument||s).createElement("link"),Qn(T);var F=T;return F._p=new Promise(function(J,ae){F.onload=J,F.onerror=ae}),Pi(T,"link",g),c.state.loading|=4,df(T,d.precedence,s),c.instance=T;case"script":return T=vc(d.src),(A=s.querySelector(ih(T)))?(c.instance=A,Qn(A),A):(g=d,(A=Xr.get(T))&&(g=f({},d),ry(g,A)),s=s.ownerDocument||s,A=s.createElement("script"),Qn(A),Pi(A,"link",g),s.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,df(g,d.precedence,s));return c.instance}function df(s,c,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=g.length?g[g.length-1]:null,T=A,F=0;F<g.length;F++){var J=g[F];if(J.dataset.precedence===c)T=J;else if(T!==A)break}T?T.parentNode.insertBefore(s,T.nextSibling):(c=d.nodeType===9?d.head:d,c.insertBefore(s,c.firstChild))}function iy(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.title==null&&(s.title=c.title)}function ry(s,c){s.crossOrigin==null&&(s.crossOrigin=c.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=c.referrerPolicy),s.integrity==null&&(s.integrity=c.integrity)}var ff=null;function Nx(s,c,d){if(ff===null){var g=new Map,A=ff=new Map;A.set(d,g)}else A=ff,g=A.get(d),g||(g=new Map,A.set(d,g));if(g.has(s))return g;for(g.set(s,null),d=d.getElementsByTagName(s),A=0;A<d.length;A++){var T=d[A];if(!(T[Qi]||T[Tn]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var F=T.getAttribute(c)||"";F=s+F;var J=g.get(F);J?J.push(T):g.set(F,[T])}}return g}function Dx(s,c,d){s=s.ownerDocument||s,s.head.insertBefore(d,c==="title"?s.querySelector("head > title"):null)}function xk(s,c,d){if(d===1||c.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;return c.rel==="stylesheet"?(s=c.disabled,typeof c.precedence=="string"&&s==null):!0;case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Ix(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Sk(s,c,d,g){if(d.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var A=bc(g.href),T=c.querySelector(nh(A));if(T){c=T._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(s.count++,s=pf.bind(s),c.then(s,s)),d.state.loading|=4,d.instance=T,Qn(T);return}T=c.ownerDocument||c,g=Rx(g),(A=Xr.get(A))&&iy(g,A),T=T.createElement("link"),Qn(T);var F=T;F._p=new Promise(function(J,ae){F.onload=J,F.onerror=ae}),Pi(T,"link",g),d.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(d,c),(c=d.state.preload)&&(d.state.loading&3)===0&&(s.count++,d=pf.bind(s),c.addEventListener("load",d),c.addEventListener("error",d))}}var sy=0;function wk(s,c){return s.stylesheets&&s.count===0&&gf(s,s.stylesheets),0<s.count||0<s.imgCount?function(d){var g=setTimeout(function(){if(s.stylesheets&&gf(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+c);0<s.imgBytes&&sy===0&&(sy=62500*ik());var A=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&gf(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>sy?50:800)+c);return s.unsuspend=d,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(A)}}:null}function pf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var mf=null;function gf(s,c){s.stylesheets=null,s.unsuspend!==null&&(s.count++,mf=new Map,c.forEach(Ek,s),mf=null,pf.call(s))}function Ek(s,c){if(!(c.state.loading&4)){var d=mf.get(s);if(d)var g=d.get(null);else{d=new Map,mf.set(s,d);for(var A=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<A.length;T++){var F=A[T];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(d.set(F.dataset.precedence,F),g=F)}g&&d.set(null,g)}A=c.instance,F=A.getAttribute("data-precedence"),T=d.get(F)||g,T===g&&d.set(null,A),d.set(F,A),this.count++,g=pf.bind(this),A.addEventListener("load",g),A.addEventListener("error",g),T?T.parentNode.insertBefore(A,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(A,s.firstChild)),c.state.loading|=4}}var rh={$$typeof:_,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Ck(s,c,d,g,A,T,F,J,ae){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=g,this.onUncaughtError=A,this.onCaughtError=T,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function Lx(s,c,d,g,A,T,F,J,ae,Ae,Ne,Fe){return s=new Ck(s,c,d,F,ae,Ae,Ne,Fe,J),c=1,T===!0&&(c|=24),T=xr(3,null,null,c),s.current=T,T.stateNode=s,c=Pm(),c.refCount++,s.pooledCache=c,c.refCount++,T.memoizedState={element:g,isDehydrated:d,cache:c},Hm(T),s}function Bx(s){return s?(s=Zl,s):Zl}function zx(s,c,d,g,A,T){A=Bx(A),g.context===null?g.context=A:g.pendingContext=A,g=ro(c),g.payload={element:d},T=T===void 0?null:T,T!==null&&(g.callback=T),d=so(s,g,c),d!==null&&(mr(d,s,c),Bu(d,s,c))}function Px(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<c?d:c}}function ay(s,c){Px(s,c),(s=s.alternate)&&Px(s,c)}function Fx(s){if(s.tag===13||s.tag===31){var c=kn(s,67108864);c!==null&&mr(c,s,67108864),ay(s,67108864)}}function Ux(s){if(s.tag===13||s.tag===31){var c=Ar();c=jn(c);var d=kn(s,c);d!==null&&mr(d,s,c),ay(s,c)}}var yf=!0;function Ak(s,c,d,g){var A=Y.T;Y.T=null;var T=te.p;try{te.p=2,oy(s,c,d,g)}finally{te.p=T,Y.T=A}}function Tk(s,c,d,g){var A=Y.T;Y.T=null;var T=te.p;try{te.p=8,oy(s,c,d,g)}finally{te.p=T,Y.T=A}}function oy(s,c,d,g){if(yf){var A=ly(g);if(A===null)Gg(s,c,g,_f,d),Hx(s,g);else if(Mk(A,s,c,d,g))g.stopPropagation();else if(Hx(s,g),c&4&&-1<kk.indexOf(s)){for(;A!==null;){var T=En(A);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var F=Ai(T.pendingLanes);if(F!==0){var J=T;for(J.pendingLanes|=2,J.entangledLanes|=2;F;){var ae=1<<31-Je(F);J.entanglements[1]|=ae,F&=~ae}Ps(T),(An&6)===0&&(Qd=Bt()+500,Ju(0))}}break;case 31:case 13:J=kn(T,2),J!==null&&mr(J,T,2),tf(),ay(T,2)}if(T=ly(g),T===null&&Gg(s,c,g,_f,d),T===A)break;A=T}A!==null&&g.stopPropagation()}else Gg(s,c,g,null,d)}}function ly(s){return s=Pt(s),cy(s)}var _f=null;function cy(s){if(_f=null,s=xi(s),s!==null){var c=a(s);if(c===null)s=null;else{var d=c.tag;if(d===13){if(s=l(c),s!==null)return s;s=null}else if(d===31){if(s=o(c),s!==null)return s;s=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null)}}return _f=s,null}function jx(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wn()){case Ee:return 2;case He:return 8;case dt:case St:return 32;case It:return 268435456;default:return 32}default:return 32}}var uy=!1,yo=null,_o=null,bo=null,sh=new Map,ah=new Map,vo=[],kk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hx(s,c){switch(s){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":sh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(c.pointerId)}}function oh(s,c,d,g,A,T){return s===null||s.nativeEvent!==T?(s={blockedOn:c,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[A]},c!==null&&(c=En(c),c!==null&&Fx(c)),s):(s.eventSystemFlags|=g,c=s.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),s)}function Mk(s,c,d,g,A){switch(c){case"focusin":return yo=oh(yo,s,c,d,g,A),!0;case"dragenter":return _o=oh(_o,s,c,d,g,A),!0;case"mouseover":return bo=oh(bo,s,c,d,g,A),!0;case"pointerover":var T=A.pointerId;return sh.set(T,oh(sh.get(T)||null,s,c,d,g,A)),!0;case"gotpointercapture":return T=A.pointerId,ah.set(T,oh(ah.get(T)||null,s,c,d,g,A)),!0}return!1}function qx(s){var c=xi(s.target);if(c!==null){var d=a(c);if(d!==null){if(c=d.tag,c===13){if(c=l(d),c!==null){s.blockedOn=c,rs(s.priority,function(){Ux(d)});return}}else if(c===31){if(c=o(d),c!==null){s.blockedOn=c,rs(s.priority,function(){Ux(d)});return}}else if(c===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function bf(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var d=ly(s.nativeEvent);if(d===null){d=s.nativeEvent;var g=new d.constructor(d.type,d);ht=g,d.target.dispatchEvent(g),ht=null}else return c=En(d),c!==null&&Fx(c),s.blockedOn=d,!1;c.shift()}return!0}function Vx(s,c,d){bf(s)&&d.delete(c)}function Rk(){uy=!1,yo!==null&&bf(yo)&&(yo=null),_o!==null&&bf(_o)&&(_o=null),bo!==null&&bf(bo)&&(bo=null),sh.forEach(Vx),ah.forEach(Vx)}function vf(s,c){s.blockedOn===c&&(s.blockedOn=null,uy||(uy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Rk)))}var xf=null;function Wx(s){xf!==s&&(xf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xf===s&&(xf=null);for(var c=0;c<s.length;c+=3){var d=s[c],g=s[c+1],A=s[c+2];if(typeof g!="function"){if(cy(g||d)===null)continue;break}var T=En(d);T!==null&&(s.splice(c,3),c-=3,lg(T,{pending:!0,data:A,method:d.method,action:g},g,A))}}))}function xc(s){function c(ae){return vf(ae,s)}yo!==null&&vf(yo,s),_o!==null&&vf(_o,s),bo!==null&&vf(bo,s),sh.forEach(c),ah.forEach(c);for(var d=0;d<vo.length;d++){var g=vo[d];g.blockedOn===s&&(g.blockedOn=null)}for(;0<vo.length&&(d=vo[0],d.blockedOn===null);)qx(d),d.blockedOn===null&&vo.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var A=d[g],T=d[g+1],F=A[Jn]||null;if(typeof T=="function")F||Wx(d);else if(F){var J=null;if(T&&T.hasAttribute("formAction")){if(A=T,F=T[Jn]||null)J=F.formAction;else if(cy(A)!==null)continue}else J=F.action;typeof J=="function"?d[g+1]=J:(d.splice(g,3),g-=3),Wx(d)}}}function $x(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(F){return A=F})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),g||setTimeout(d,20)}function d(){if(!g&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,A=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(d,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function hy(s){this._internalRoot=s}Sf.prototype.render=hy.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(i(409));var d=c.current,g=Ar();zx(d,g,s,c,null,null)},Sf.prototype.unmount=hy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;zx(s.current,2,null,s,null,null),tf(),c[Di]=null}};function Sf(s){this._internalRoot=s}Sf.prototype.unstable_scheduleHydration=function(s){if(s){var c=is();s={blockedOn:null,target:s,priority:c};for(var d=0;d<vo.length&&c!==0&&c<vo[d].priority;d++);vo.splice(d,0,s),d===0&&qx(s)}};var Gx=e.version;if(Gx!=="19.2.4")throw Error(i(527,Gx,"19.2.4"));te.findDOMNode=function(s){var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(c),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var Ok={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wf.isDisabled&&wf.supportsFiber)try{zn=wf.inject(Ok),Un=wf}catch{}}return ch.createRoot=function(s,c){if(!r(s))throw Error(i(299));var d=!1,g="",A=e1,T=t1,F=n1;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(F=c.onRecoverableError)),c=Lx(s,1,!1,null,null,d,g,null,A,T,F,$x),s[Di]=c.current,$g(s),new hy(c)},ch.hydrateRoot=function(s,c,d){if(!r(s))throw Error(i(299));var g=!1,A="",T=e1,F=t1,J=n1,ae=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(F=d.onCaughtError),d.onRecoverableError!==void 0&&(J=d.onRecoverableError),d.formState!==void 0&&(ae=d.formState)),c=Lx(s,1,!0,c,d??null,g,A,ae,T,F,J,$x),c.context=Bx(null),d=c.current,g=Ar(),g=jn(g),A=ro(g),A.callback=null,so(d,A,g),d=g,c.current.lanes=d,hn(c,d),Ps(c),s[Di]=c.current,$g(s),new Sf(c)},ch.version="19.2.4",ch}var iS;function Hk(){if(iS)return py.exports;iS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),py.exports=jk(),py.exports}var qk=Hk();const Vk="modulepreload",Wk=function(n){return"/demos/ai-agent/"+n},rS={},id=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=l?.nonce||l?.getAttribute("nonce");r=u(t.map(h=>{if(h=Wk(h),h in rS)return;rS[h]=!0;const p=h.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":Vk,p||(m.as="script"),m.crossOrigin="",m.href=h,o&&m.setAttribute("nonce",o),document.head.appendChild(m),p)return new Promise((y,x)=>{m.addEventListener("load",y),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return r.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};var sS="popstate";function $k(n={}){function e(i,r){let{pathname:a,search:l,hash:o}=i.location;return W_("",{pathname:a,search:l,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:qh(r)}return Kk(e,t,null,n)}function Xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gk(){return Math.random().toString(36).substring(2,10)}function aS(n,e){return{usr:n.state,key:n.key,idx:e}}function W_(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ou(e):e,state:t,key:e&&e.key||i||Gk()}}function qh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ou(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Kk(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,l=r.history,o="POP",u=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function f(){o="POP";let S=p(),b=S==null?null:S-h;h=S,u&&u({action:o,location:w.location,delta:b})}function m(S,b){o="PUSH";let v=W_(w.location,S,b);h=p()+1;let _=aS(v,h),E=w.createHref(v);try{l.pushState(_,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(E)}a&&u&&u({action:o,location:w.location,delta:1})}function y(S,b){o="REPLACE";let v=W_(w.location,S,b);h=p();let _=aS(v,h),E=w.createHref(v);l.replaceState(_,"",E),a&&u&&u({action:o,location:w.location,delta:0})}function x(S){return Yk(S)}let w={get action(){return o},get location(){return n(r,l)},listen(S){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(sS,f),u=S,()=>{r.removeEventListener(sS,f),u=null}},createHref(S){return e(r,S)},createURL:x,encodeLocation(S){let b=x(S);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:y,go(S){return l.go(S)}};return w}function Yk(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xn(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:qh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function hC(n,e,t="/"){return Xk(n,e,t,!1)}function Xk(n,e,t,i){let r=typeof e=="string"?ou(e):e,a=Fa(r.pathname||"/",t);if(a==null)return null;let l=dC(n);Zk(l);let o=null;for(let u=0;o==null&&u<l.length;++u){let h=lM(a);o=aM(l[u],h,i)}return o}function dC(n,e=[],t=[],i="",r=!1){let a=(l,o,u=r,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&u)return;Xn(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let f=La([i,p.relativePath]),m=t.concat(p);l.children&&l.children.length>0&&(Xn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),dC(l.children,e,m,f,u)),!(l.path==null&&!l.index)&&e.push({path:f,score:rM(f,l.index),routesMeta:m})};return n.forEach((l,o)=>{if(l.path===""||!l.path?.includes("?"))a(l,o);else for(let u of fC(l.path))a(l,o,!0,u)}),e}function fC(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let l=fC(i.join("/")),o=[];return o.push(...l.map(u=>u===""?a:[a,u].join("/"))),r&&o.push(...l),o.map(u=>n.startsWith("/")&&u===""?"/":u)}function Zk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:sM(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Jk=/^:[\w-]+$/,Qk=3,eM=2,tM=1,nM=10,iM=-2,oS=n=>n==="*";function rM(n,e){let t=n.split("/"),i=t.length;return t.some(oS)&&(i+=iM),e&&(i+=eM),t.filter(r=>!oS(r)).reduce((r,a)=>r+(Jk.test(a)?Qk:a===""?tM:nM),i)}function sM(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function aM(n,e,t=!1){let{routesMeta:i}=n,r={},a="/",l=[];for(let o=0;o<i.length;++o){let u=i[o],h=o===i.length-1,p=a==="/"?e:e.slice(a.length)||"/",f=Lp({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),m=u.route;if(!f&&h&&t&&!i[i.length-1].route.index&&(f=Lp({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!f)return null;Object.assign(r,f.params),l.push({params:r,pathname:La([a,f.pathname]),pathnameBase:dM(La([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=La([a,f.pathnameBase]))}return l}function Lp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=oM(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((h,{paramName:p,isOptional:f},m)=>{if(p==="*"){let x=o[m]||"";l=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const y=o[m];return f&&!y?h[p]=void 0:h[p]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:n}}function oM(n,e=!1,t=!0){xs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,u)=>(i.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function lM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Fa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var cM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function uM(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?ou(n):n,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=lS(t.substring(1),"/"):a=lS(t,e)):a=e,{pathname:a,search:fM(i),hash:pM(r)}}function lS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function _y(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function R0(n){let e=hM(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function O0(n,e,t,i=!1){let r;typeof n=="string"?r=ou(n):(r={...n},Xn(!r.pathname||!r.pathname.includes("?"),_y("?","pathname","search",r)),Xn(!r.pathname||!r.pathname.includes("#"),_y("#","pathname","hash",r)),Xn(!r.search||!r.search.includes("#"),_y("#","search","hash",r)));let a=n===""||r.pathname==="",l=a?"/":r.pathname,o;if(l==null)o=t;else{let f=e.length-1;if(!i&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}o=f>=0?e[f]:"/"}let u=uM(r,o),h=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var La=n=>n.join("/").replace(/\/\/+/g,"/"),dM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),fM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,mM=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function gM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function yM(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mC(n,e){let t=n;if(typeof t!="string"||!cM.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,r=!1;if(pC)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),o=Fa(l.pathname,e);l.origin===a.origin&&o!=null?t=o+l.search+l.hash:r=!0}catch{xs(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gC=["POST","PUT","PATCH","DELETE"];new Set(gC);var _M=["GET",...gC];new Set(_M);var lu=K.createContext(null);lu.displayName="DataRouter";var sm=K.createContext(null);sm.displayName="DataRouterState";var bM=K.createContext(!1),yC=K.createContext({isTransitioning:!1});yC.displayName="ViewTransition";var vM=K.createContext(new Map);vM.displayName="Fetchers";var xM=K.createContext(null);xM.displayName="Await";var zr=K.createContext(null);zr.displayName="Navigation";var rd=K.createContext(null);rd.displayName="Location";var Ss=K.createContext({outlet:null,matches:[],isDataRoute:!1});Ss.displayName="Route";var N0=K.createContext(null);N0.displayName="RouteError";var _C="REACT_ROUTER_ERROR",SM="REDIRECT",wM="ROUTE_ERROR_RESPONSE";function EM(n){if(n.startsWith(`${_C}:${SM}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function CM(n){if(n.startsWith(`${_C}:${wM}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new mM(e.status,e.statusText,e.data)}catch{}}function AM(n,{relative:e}={}){Xn(cu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=K.useContext(zr),{hash:r,pathname:a,search:l}=sd(n,{relative:e}),o=a;return t!=="/"&&(o=a==="/"?t:La([t,a])),i.createHref({pathname:o,search:l,hash:r})}function cu(){return K.useContext(rd)!=null}function zo(){return Xn(cu(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(rd).location}var bC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vC(n){K.useContext(zr).static||K.useLayoutEffect(n)}function xC(){let{isDataRoute:n}=K.useContext(Ss);return n?jM():TM()}function TM(){Xn(cu(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(lu),{basename:e,navigator:t}=K.useContext(zr),{matches:i}=K.useContext(Ss),{pathname:r}=zo(),a=JSON.stringify(R0(i)),l=K.useRef(!1);return vC(()=>{l.current=!0}),K.useCallback((u,h={})=>{if(xs(l.current,bC),!l.current)return;if(typeof u=="number"){t.go(u);return}let p=O0(u,JSON.parse(a),r,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:La([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,a,r,n])}var kM=K.createContext(null);function MM(n){let e=K.useContext(Ss).outlet;return K.useMemo(()=>e&&K.createElement(kM.Provider,{value:n},e),[e,n])}function sd(n,{relative:e}={}){let{matches:t}=K.useContext(Ss),{pathname:i}=zo(),r=JSON.stringify(R0(t));return K.useMemo(()=>O0(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function RM(n,e){return SC(n,e)}function SC(n,e,t,i,r){Xn(cu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=K.useContext(zr),{matches:l}=K.useContext(Ss),o=l[l.length-1],u=o?o.params:{},h=o?o.pathname:"/",p=o?o.pathnameBase:"/",f=o&&o.route;{let v=f&&f.path||"";EC(h,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let m=zo(),y;if(e){let v=typeof e=="string"?ou(e):e;Xn(p==="/"||v.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${v.pathname}" was given in the \`location\` prop.`),y=v}else y=m;let x=y.pathname||"/",w=x;if(p!=="/"){let v=p.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(v.length).join("/")}let S=hC(n,{pathname:w});xs(f||S!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),xs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=LM(S&&S.map(v=>Object.assign({},v,{params:Object.assign({},u,v.params),pathname:La([p,a.encodeLocation?a.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?p:La([p,a.encodeLocation?a.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),l,t,i,r);return e&&b?K.createElement(rd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},b):b}function OM(){let n=UM(),e=gM(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:a},"ErrorBoundary")," or"," ",K.createElement("code",{style:a},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,l)}var NM=K.createElement(OM,null),wC=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=CM(n.digest);t&&(n=t)}let e=n!==void 0?K.createElement(Ss.Provider,{value:this.props.routeContext},K.createElement(N0.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?K.createElement(DM,{error:n},e):e}};wC.contextType=bM;var by=new WeakMap;function DM({children:n,error:e}){let{basename:t}=K.useContext(zr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=EM(e.digest);if(i){let r=by.get(e);if(r)throw r;let a=mC(i.location,t);if(pC&&!by.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw by.set(e,l),l}return K.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function IM({routeContext:n,match:e,children:t}){let i=K.useContext(lu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(Ss.Provider,{value:n},t)}function LM(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let p=a.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);Xn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let o=!1,u=-1;if(t)for(let p=0;p<a.length;p++){let f=a[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:m,errors:y}=t,x=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){o=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let h=t&&i?(p,f)=>{i(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:yM(t.matches),errorInfo:f})}:void 0;return a.reduceRight((p,f,m)=>{let y,x=!1,w=null,S=null;t&&(y=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||NM,o&&(u<0&&m===0?(EC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,S=null):u===m&&(x=!0,S=f.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,m+1)),v=()=>{let _;return y?_=w:x?_=S:f.route.Component?_=K.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=p,K.createElement(IM,{match:f,routeContext:{outlet:p,matches:b,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?K.createElement(wC,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:h}):v()},null)}function D0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BM(n){let e=K.useContext(lu);return Xn(e,D0(n)),e}function zM(n){let e=K.useContext(sm);return Xn(e,D0(n)),e}function PM(n){let e=K.useContext(Ss);return Xn(e,D0(n)),e}function I0(n){let e=PM(n),t=e.matches[e.matches.length-1];return Xn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function FM(){return I0("useRouteId")}function UM(){let n=K.useContext(N0),e=zM("useRouteError"),t=I0("useRouteError");return n!==void 0?n:e.errors?.[t]}function jM(){let{router:n}=BM("useNavigate"),e=I0("useNavigate"),t=K.useRef(!1);return vC(()=>{t.current=!0}),K.useCallback(async(r,a={})=>{xs(t.current,bC),t.current&&(typeof r=="number"?await n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var cS={};function EC(n,e,t){!e&&!cS[n]&&(cS[n]=!0,xs(!1,t))}K.memo(HM);function HM({routes:n,future:e,state:t,onError:i}){return SC(n,void 0,t,i,e)}function qM({to:n,replace:e,state:t,relative:i}){Xn(cu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=K.useContext(zr);xs(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=K.useContext(Ss),{pathname:l}=zo(),o=xC(),u=O0(n,R0(a),l,i==="path"),h=JSON.stringify(u);return K.useEffect(()=>{o(JSON.parse(h),{replace:e,state:t,relative:i})},[o,h,i,e,t]),null}function VM(n){return MM(n.context)}function No(n){Xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WM({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:a=!1,unstable_useTransitions:l}){Xn(!cu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),u=K.useMemo(()=>({basename:o,navigator:r,static:a,unstable_useTransitions:l,future:{}}),[o,r,a,l]);typeof t=="string"&&(t=ou(t));let{pathname:h="/",search:p="",hash:f="",state:m=null,key:y="default"}=t,x=K.useMemo(()=>{let w=Fa(h,o);return w==null?null:{location:{pathname:w,search:p,hash:f,state:m,key:y},navigationType:i}},[o,h,p,f,m,y,i]);return xs(x!=null,`<Router basename="${o}"> is not able to match the URL "${h}${p}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:K.createElement(zr.Provider,{value:u},K.createElement(rd.Provider,{children:e,value:x}))}function $M({children:n,location:e}){return RM($_(n),e)}function $_(n,e=[]){let t=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let a=[...e,r];if(i.type===K.Fragment){t.push.apply(t,$_(i.props.children,a));return}Xn(i.type===No,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=$_(i.props.children,a)),t.push(l)}),t}var Tp="get",kp="application/x-www-form-urlencoded";function am(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function GM(n){return am(n)&&n.tagName.toLowerCase()==="button"}function KM(n){return am(n)&&n.tagName.toLowerCase()==="form"}function YM(n){return am(n)&&n.tagName.toLowerCase()==="input"}function XM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZM(n,e){return n.button===0&&(!e||e==="_self")&&!XM(n)}var Ef=null;function JM(){if(Ef===null)try{new FormData(document.createElement("form"),0),Ef=!1}catch{Ef=!0}return Ef}var QM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vy(n){return n!=null&&!QM.has(n)?(xs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kp}"`),null):n}function eR(n,e){let t,i,r,a,l;if(KM(n)){let o=n.getAttribute("action");i=o?Fa(o,e):null,t=n.getAttribute("method")||Tp,r=vy(n.getAttribute("enctype"))||kp,a=new FormData(n)}else if(GM(n)||YM(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||o.getAttribute("action");if(i=u?Fa(u,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||Tp,r=vy(n.getAttribute("formenctype"))||vy(o.getAttribute("enctype"))||kp,a=new FormData(o,n),!JM()){let{name:h,type:p,value:f}=n;if(p==="image"){let m=h?`${h}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else h&&a.append(h,f)}}else{if(am(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Tp,i=null,r=kp,l=n}return a&&r==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function L0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tR(n,e,t,i){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:e&&Fa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function nR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function rR(n,e,t){let i=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await nR(a,t);return l.links?l.links():[]}return[]}));return lR(i.flat(1).filter(iR).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function uS(n,e,t,i,r,a){let l=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,o=(u,h)=>t[h].pathname!==u.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,h)=>l(u,h)||o(u,h)):a==="data"?e.filter((u,h)=>{let p=i.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(l(u,h)||o(u,h))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function sR(n,e,{includeHydrateFallback:t}={}){return aR(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function aR(n){return[...new Set(n)]}function oR(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function lR(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let a=JSON.stringify(oR(r));return t.has(a)||(t.add(a),i.push({key:a,link:r})),i},[])}function CC(){let n=K.useContext(lu);return L0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function cR(){let n=K.useContext(sm);return L0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var B0=K.createContext(void 0);B0.displayName="FrameworkContext";function AC(){let n=K.useContext(B0);return L0(n,"You must render this element inside a <HydratedRouter> element"),n}function uR(n,e){let t=K.useContext(B0),[i,r]=K.useState(!1),[a,l]=K.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:f}=e,m=K.useRef(null);K.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let w=b=>{b.forEach(v=>{l(v.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return m.current&&S.observe(m.current),()=>{S.disconnect()}}},[n]),K.useEffect(()=>{if(i){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[i]);let y=()=>{r(!0)},x=()=>{r(!1),l(!1)};return t?n!=="intent"?[a,m,{}]:[a,m,{onFocus:uh(o,y),onBlur:uh(u,x),onMouseEnter:uh(h,y),onMouseLeave:uh(p,x),onTouchStart:uh(f,y)}]:[!1,m,{}]}function uh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function hR({page:n,...e}){let{router:t}=CC(),i=K.useMemo(()=>hC(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?K.createElement(fR,{page:n,matches:i,...e}):null}function dR(n){let{manifest:e,routeModules:t}=AC(),[i,r]=K.useState([]);return K.useEffect(()=>{let a=!1;return rR(n,e,t).then(l=>{a||r(l)}),()=>{a=!0}},[n,e,t]),i}function fR({page:n,matches:e,...t}){let i=zo(),{future:r,manifest:a,routeModules:l}=AC(),{basename:o}=CC(),{loaderData:u,matches:h}=cR(),p=K.useMemo(()=>uS(n,e,h,a,i,"data"),[n,e,h,a,i]),f=K.useMemo(()=>uS(n,e,h,a,i,"assets"),[n,e,h,a,i]),m=K.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let w=new Set,S=!1;if(e.forEach(v=>{let _=a.routes[v.route.id];!_||!_.hasLoader||(!p.some(E=>E.route.id===v.route.id)&&v.route.id in u&&l[v.route.id]?.shouldRevalidate||_.hasClientLoader?S=!0:w.add(v.route.id))}),w.size===0)return[];let b=tR(n,o,r.unstable_trailingSlashAwareDataRequests,"data");return S&&w.size>0&&b.searchParams.set("_routes",e.filter(v=>w.has(v.route.id)).map(v=>v.route.id).join(",")),[b.pathname+b.search]},[o,r.unstable_trailingSlashAwareDataRequests,u,i,a,p,e,n,l]),y=K.useMemo(()=>sR(f,a),[f,a]),x=dR(f);return K.createElement(K.Fragment,null,m.map(w=>K.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),y.map(w=>K.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),x.map(({key:w,link:S})=>K.createElement("link",{key:w,nonce:t.nonce,...S,crossOrigin:S.crossOrigin??t.crossOrigin})))}function pR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mR&&(window.__reactRouterVersion="7.13.0")}catch{}function gR({basename:n,children:e,unstable_useTransitions:t,window:i}){let r=K.useRef();r.current==null&&(r.current=$k({window:i,v5Compat:!0}));let a=r.current,[l,o]=K.useState({action:a.action,location:a.location}),u=K.useCallback(h=>{t===!1?o(h):K.startTransition(()=>o(h))},[t]);return K.useLayoutEffect(()=>a.listen(u),[a,u]),K.createElement(WM,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var TC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kC=K.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:a,replace:l,state:o,target:u,to:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:m,...y},x){let{basename:w,unstable_useTransitions:S}=K.useContext(zr),b=typeof h=="string"&&TC.test(h),v=mC(h,w);h=v.to;let _=AM(h,{relative:r}),[E,R,M]=uR(i,y),D=bR(h,{replace:l,state:o,target:u,preventScrollReset:p,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:S});function O(j){e&&e(j),j.defaultPrevented||D(j)}let L=K.createElement("a",{...y,...M,href:v.absoluteURL||_,onClick:v.isExternal||a?e:O,ref:pR(x,R),target:u,"data-discover":!b&&t==="render"?"true":void 0});return E&&!b?K.createElement(K.Fragment,null,L,K.createElement(hR,{page:_})):L});kC.displayName="Link";var MC=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:a,to:l,viewTransition:o,children:u,...h},p){let f=sd(l,{relative:h.relative}),m=zo(),y=K.useContext(sm),{navigator:x,basename:w}=K.useContext(zr),S=y!=null&&ER(f)&&o===!0,b=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,v=m.pathname,_=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(v=v.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&w&&(_=Fa(_,w)||_);const E=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let R=v===b||!r&&v.startsWith(b)&&v.charAt(E)==="/",M=_!=null&&(_===b||!r&&_.startsWith(b)&&_.charAt(b.length)==="/"),D={isActive:R,isPending:M,isTransitioning:S},O=R?e:void 0,L;typeof i=="function"?L=i(D):L=[i,R?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(D):a;return K.createElement(kC,{...h,"aria-current":O,className:L,ref:p,style:j,to:l,viewTransition:o},typeof u=="function"?u(D):u)});MC.displayName="NavLink";var yR=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:a,method:l=Tp,action:o,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:m,...y},x)=>{let{unstable_useTransitions:w}=K.useContext(zr),S=SR(),b=wR(o,{relative:h}),v=l.toLowerCase()==="get"?"get":"post",_=typeof o=="string"&&TC.test(o),E=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let M=R.nativeEvent.submitter,D=M?.getAttribute("formmethod")||l,O=()=>S(M||R.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:a,relative:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:m});w&&t!==!1?K.startTransition(()=>O()):O()};return K.createElement("form",{ref:x,method:v,action:b,onSubmit:i?u:E,...y,"data-discover":!_&&n==="render"?"true":void 0})});yR.displayName="Form";function _R(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RC(n){let e=K.useContext(lu);return Xn(e,_R(n)),e}function bR(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:o,unstable_useTransitions:u}={}){let h=xC(),p=zo(),f=sd(n,{relative:a});return K.useCallback(m=>{if(ZM(m,e)){m.preventDefault();let y=t!==void 0?t:qh(p)===qh(f),x=()=>h(n,{replace:y,state:i,preventScrollReset:r,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:o});u?K.startTransition(()=>x()):x()}},[p,h,f,t,i,e,n,r,a,l,o,u])}var vR=0,xR=()=>`__${String(++vR)}__`;function SR(){let{router:n}=RC("useSubmit"),{basename:e}=K.useContext(zr),t=FM(),i=n.fetch,r=n.navigate;return K.useCallback(async(a,l={})=>{let{action:o,method:u,encType:h,formData:p,body:f}=eR(a,e);if(l.navigate===!1){let m=l.fetcherKey||xR();await i(m,t,l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:f,formMethod:l.method||u,formEncType:l.encType||h,flushSync:l.flushSync})}else await r(l.action||o,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:f,formMethod:l.method||u,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[i,r,e,t])}function wR(n,{relative:e}={}){let{basename:t}=K.useContext(zr),i=K.useContext(Ss);Xn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...sd(n||".",{relative:e})},l=zo();if(n==null){a.search=l.search;let o=new URLSearchParams(a.search),u=o.getAll("index");if(u.some(p=>p==="")){o.delete("index"),u.filter(f=>f).forEach(f=>o.append("index",f));let p=o.toString();a.search=p?`?${p}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:La([t,a.pathname])),qh(a)}function ER(n,{relative:e}={}){let t=K.useContext(yC);Xn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=RC("useViewTransitionState"),r=sd(n,{relative:e});if(!t.isTransitioning)return!1;let a=Fa(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Fa(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Lp(r.pathname,l)!=null||Lp(r.pathname,a)!=null}var om=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},CR={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},AR=class{#e=CR;#n=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},G_=new AR;function TR(n){setTimeout(n,0)}var lm=typeof window>"u"||"Deno"in globalThis;function ys(){}function kR(n,e){return typeof n=="function"?n(e):n}function MR(n){return typeof n=="number"&&n>=0&&n!==1/0}function RR(n,e){return Math.max(n+(e||0)-Date.now(),0)}function K_(n,e){return typeof n=="function"?n(e):n}function OR(n,e){return typeof n=="function"?n(e):n}function hS(n,e){const{type:t="all",exact:i,fetchStatus:r,predicate:a,queryKey:l,stale:o}=n;if(l){if(i){if(e.queryHash!==z0(l,e.options))return!1}else if(!Wh(e.queryKey,l))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||a&&!a(e))}function dS(n,e){const{exact:t,status:i,predicate:r,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Vh(e.options.mutationKey)!==Vh(a))return!1}else if(!Wh(e.options.mutationKey,a))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function z0(n,e){return(e?.queryKeyHashFn||Vh)(n)}function Vh(n){return JSON.stringify(n,(e,t)=>Y_(t)?Object.keys(t).sort().reduce((i,r)=>(i[r]=t[r],i),{}):t)}function Wh(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Wh(n[t],e[t])):!1}var NR=Object.prototype.hasOwnProperty;function OC(n,e,t=0){if(n===e)return n;if(t>500)return e;const i=fS(n)&&fS(e);if(!i&&!(Y_(n)&&Y_(e)))return e;const a=(i?n:Object.keys(n)).length,l=i?e:Object.keys(e),o=l.length,u=i?new Array(o):{};let h=0;for(let p=0;p<o;p++){const f=i?p:l[p],m=n[f],y=e[f];if(m===y){u[f]=m,(i?p<a:NR.call(n,f))&&h++;continue}if(m===null||y===null||typeof m!="object"||typeof y!="object"){u[f]=y;continue}const x=OC(m,y,t+1);u[f]=x,x===m&&h++}return a===o&&h===a?n:u}function NV(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function fS(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Y_(n){if(!pS(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!pS(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function pS(n){return Object.prototype.toString.call(n)==="[object Object]"}function DR(n){return new Promise(e=>{G_.setTimeout(e,n)})}function IR(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?OC(n,e):e}function LR(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function BR(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var P0=Symbol();function NC(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===P0?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function DV(n,e){return typeof n=="function"?n(...e):!!n}function zR(n,e,t){let i=!1,r;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(r??=e(),i||(i=!0,r.aborted?t():r.addEventListener("abort",t,{once:!0})),r)}),n}var PR=class extends om{#e;#n;#t;constructor(){super(),this.#t=n=>{if(!lm&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(n){this.#t=n,this.#n?.(),this.#n=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},DC=new PR;function FR(){let n,e;const t=new Promise((r,a)=>{n=r,e=a});t.status="pending",t.catch(()=>{});function i(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{i({status:"fulfilled",value:r}),n(r)},t.reject=r=>{i({status:"rejected",reason:r}),e(r)},t}var UR=TR;function jR(){let n=[],e=0,t=o=>{o()},i=o=>{o()},r=UR;const a=o=>{e?n.push(o):r(()=>{t(o)})},l=()=>{const o=n;n=[],o.length&&r(()=>{i(()=>{o.forEach(u=>{t(u)})})})};return{batch:o=>{let u;e++;try{u=o()}finally{e--,e||l()}return u},batchCalls:o=>(...u)=>{a(()=>{o(...u)})},schedule:a,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{i=o},setScheduler:o=>{r=o}}}var rr=jR(),HR=class extends om{#e=!0;#n;#t;constructor(){super(),this.#t=n=>{if(!lm&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(n){this.#t=n,this.#n?.(),this.#n=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},Bp=new HR;function qR(n){return Math.min(1e3*2**n,3e4)}function IC(n){return(n??"online")==="online"?Bp.isOnline():!0}var X_=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function LC(n){let e=!1,t=0,i;const r=FR(),a=()=>r.status!=="pending",l=w=>{if(!a()){const S=new X_(w);m(S),n.onCancel?.(S)}},o=()=>{e=!0},u=()=>{e=!1},h=()=>DC.isFocused()&&(n.networkMode==="always"||Bp.isOnline())&&n.canRun(),p=()=>IC(n.networkMode)&&n.canRun(),f=w=>{a()||(i?.(),r.resolve(w))},m=w=>{a()||(i?.(),r.reject(w))},y=()=>new Promise(w=>{i=S=>{(a()||h())&&w(S)},n.onPause?.()}).then(()=>{i=void 0,a()||n.onContinue?.()}),x=()=>{if(a())return;let w;const S=t===0?n.initialPromise:void 0;try{w=S??n.fn()}catch(b){w=Promise.reject(b)}Promise.resolve(w).then(f).catch(b=>{if(a())return;const v=n.retry??(lm?0:3),_=n.retryDelay??qR,E=typeof _=="function"?_(t,b):_,R=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,b);if(e||!R){m(b);return}t++,n.onFail?.(t,b),DR(E).then(()=>h()?void 0:y()).then(()=>{e?m(b):x()})})};return{promise:r,status:()=>r.status,cancel:l,continue:()=>(i?.(),r),cancelRetry:o,continueRetry:u,canStart:p,start:()=>(p()?x():y().then(x),r)}}var BC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),MR(this.gcTime)&&(this.#e=G_.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(lm?1/0:300*1e3))}clearGcTimeout(){this.#e&&(G_.clearTimeout(this.#e),this.#e=void 0)}},VR=class extends BC{#e;#n;#t;#r;#i;#a;#o;constructor(n){super(),this.#o=!1,this.#a=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#r=n.client,this.#t=this.#r.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=gS(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(n){if(this.options={...this.#a,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=gS(this.options);e.data!==void 0&&(this.setState(mS(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(n,e){const t=IR(this.state.data,n,this.options);return this.#s({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#s({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#i?.promise;return this.#i?.cancel(n),e?e.then(ys).catch(ys):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>OR(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===P0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>K_(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!RR(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(n,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(n&&this.setOptions(n),!this.options.queryFn){const o=this.observers.find(u=>u.options.queryFn);o&&this.setOptions(o.options)}const t=new AbortController,i=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#o=!0,t.signal)})},r=()=>{const o=NC(this.options,e),h=(()=>{const p={client:this.#r,queryKey:this.queryKey,meta:this.meta};return i(p),p})();return this.#o=!1,this.options.persister?this.options.persister(o,h,this):o(h)},l=(()=>{const o={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return i(o),o})();this.options.behavior?.onFetch(l,this),this.#n=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#s({type:"fetch",meta:l.fetchOptions?.meta}),this.#i=LC({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:o=>{o instanceof X_&&o.revert&&this.setState({...this.#n,fetchStatus:"idle"}),t.abort()},onFail:(o,u)=>{this.#s({type:"failed",failureCount:o,error:u})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const o=await this.#i.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#t.config.onSuccess?.(o,this),this.#t.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof X_){if(o.silent)return this.#i.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#t.config.onError?.(o,this),this.#t.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...WR(t.data,this.options),fetchMeta:n.meta??null};case"success":const i={...t,...mS(n.data,n.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#n=n.manual?i:void 0,i;case"error":const r=n.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),rr.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:n})})}};function WR(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:IC(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function mS(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function gS(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}function yS(n){return{onFetch:(e,t)=>{const i=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},u=0;const h=async()=>{let p=!1;const f=x=>{zR(x,()=>e.signal,()=>p=!0)},m=NC(e.options,e.fetchOptions),y=async(x,w,S)=>{if(p)return Promise.reject();if(w==null&&x.pages.length)return Promise.resolve(x);const v=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:w,direction:S?"backward":"forward",meta:e.options.meta};return f(M),M})(),_=await m(v),{maxPages:E}=e.options,R=S?BR:LR;return{pages:R(x.pages,_,E),pageParams:R(x.pageParams,w,E)}};if(r&&a.length){const x=r==="backward",w=x?$R:_S,S={pages:a,pageParams:l},b=w(i,S);o=await y(S,b,x)}else{const x=n??a.length;do{const w=u===0?l[0]??i.initialPageParam:_S(i,o);if(u>0&&w==null)break;o=await y(o,w),u++}while(u<x)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=h}}}function _S(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function $R(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var GR=class extends BC{#e;#n;#t;#r;constructor(n){super(),this.#e=n.client,this.mutationId=n.mutationId,this.#t=n.mutationCache,this.#n=[],this.state=n.state||KR(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#n.includes(n)||(this.#n.push(n),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#n=this.#n.filter(e=>e!==n),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#n.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(n){const e=()=>{this.#i({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=LC({fn:()=>this.options.mutationFn?this.options.mutationFn(n,t):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#i({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const i=this.state.status==="pending",r=!this.#r.canStart();try{if(i)e();else{this.#i({type:"pending",variables:n,isPaused:r}),this.#t.config.onMutate&&await this.#t.config.onMutate(n,this,t);const l=await this.options.onMutate?.(n,t);l!==this.state.context&&this.#i({type:"pending",context:l,variables:n,isPaused:r})}const a=await this.#r.start();return await this.#t.config.onSuccess?.(a,n,this.state.context,this,t),await this.options.onSuccess?.(a,n,this.state.context,t),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(a,null,n,this.state.context,t),this.#i({type:"success",data:a}),a}catch(a){try{await this.#t.config.onError?.(a,n,this.state.context,this,t)}catch(l){Promise.reject(l)}try{await this.options.onError?.(a,n,this.state.context,t)}catch(l){Promise.reject(l)}try{await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,t)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,a,n,this.state.context,t)}catch(l){Promise.reject(l)}throw this.#i({type:"error",error:a}),a}finally{this.#t.runNext(this)}}#i(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),rr.batch(()=>{this.#n.forEach(t=>{t.onMutationUpdate(n)}),this.#t.notify({mutation:this,type:"updated",action:n})})}};function KR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var YR=class extends om{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#n=new Map,this.#t=0}#e;#n;#t;build(n,e,t){const i=new GR({client:n,mutationCache:this,mutationId:++this.#t,options:n.defaultMutationOptions(e),state:t});return this.add(i),i}add(n){this.#e.add(n);const e=Cf(n);if(typeof e=="string"){const t=this.#n.get(e);t?t.push(n):this.#n.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=Cf(n);if(typeof e=="string"){const t=this.#n.get(e);if(t)if(t.length>1){const i=t.indexOf(n);i!==-1&&t.splice(i,1)}else t[0]===n&&this.#n.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=Cf(n);if(typeof e=="string"){const i=this.#n.get(e)?.find(r=>r.state.status==="pending");return!i||i===n}else return!0}runNext(n){const e=Cf(n);return typeof e=="string"?this.#n.get(e)?.find(i=>i!==n&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){rr.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#n.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>dS(e,t))}findAll(n={}){return this.getAll().filter(e=>dS(n,e))}notify(n){rr.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return rr.batch(()=>Promise.all(n.map(e=>e.continue().catch(ys))))}};function Cf(n){return n.options.scope?.id}var XR=class extends om{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const i=e.queryKey,r=e.queryHash??z0(i,e);let a=this.get(r);return a||(a=new VR({client:n,queryKey:i,queryHash:r,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(i)}),this.add(a)),a}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){rr.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>hS(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>hS(n,t)):e}notify(n){rr.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){rr.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){rr.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},ZR=class{#e;#n;#t;#r;#i;#a;#o;#s;constructor(n={}){this.#e=n.queryCache||new XR,this.#n=n.mutationCache||new YR,this.#t=n.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=DC.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Bp.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#n.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(K_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),a=this.#e.get(i.queryHash)?.state.data,l=kR(e,a);if(l!==void 0)return this.#e.build(this,i).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return rr.batch(()=>this.#e.findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;rr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return rr.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=rr.batch(()=>this.#e.findAll(n).map(r=>r.cancel(t)));return Promise.all(i).then(ys).catch(ys)}invalidateQueries(n,e={}){return rr.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=rr.batch(()=>this.#e.findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let a=r.fetch(void 0,t);return t.throwOnError||(a=a.catch(ys)),r.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(i).then(ys)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(K_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ys).catch(ys)}fetchInfiniteQuery(n){return n.behavior=yS(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ys).catch(ys)}ensureInfiniteQueryData(n){return n.behavior=yS(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Bp.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#n}getDefaultOptions(){return this.#t}setDefaultOptions(n){this.#t=n}setQueryDefaults(n,e){this.#r.set(Vh(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(i=>{Wh(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){this.#i.set(Vh(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#i.values()],t={};return e.forEach(i=>{Wh(n,i.mutationKey)&&Object.assign(t,i.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#t.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=z0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===P0&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#t.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#n.clear()}},zC=K.createContext(void 0),IV=n=>{const e=K.useContext(zC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},JR=({client:n,children:e})=>(K.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),N.jsx(zC.Provider,{value:n,children:e}));const F0="auth_token",QR=300*1e3;function Lh(){try{return localStorage.getItem(F0)}catch{return null}}function PC(n){try{localStorage.setItem(F0,n)}catch{}}function xy(){try{localStorage.removeItem(F0)}catch{}}function LV(n,e){const t=Lh();if(t){const i=new Headers(e?.headers);return i.has("Authorization")||i.set("Authorization",`Bearer ${t}`),fetch(n,{...e,headers:i})}return fetch(n,e)}async function eO(){try{const n=Lh();if(!n)return null;const e=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}}),t=await e.json();return e.ok&&t.success&&t.token?(PC(t.token),t.token):null}catch{return null}}function tO(){const[n,e]=K.useState({token:Lh(),loading:!0,needsLogin:!1}),t=K.useRef(null),i=K.useCallback(l=>{t.current&&clearTimeout(t.current);const o=Math.max(l*1e3-QR,3e4);t.current=setTimeout(async()=>{const u=await eO();u?(e(h=>({...h,token:u})),i(3600)):(xy(),e({token:null,loading:!1,needsLogin:!0}))},o)},[]);K.useEffect(()=>{let l=!1;async function o(){try{const p=await(await fetch("/api/auth/status")).json();if(l)return;!p.passwordRequired||p.authenticated?(e({token:Lh(),loading:!1,needsLogin:!1}),p.passwordRequired&&p.authenticated&&Lh()&&i(3600)):e({token:null,loading:!1,needsLogin:!0})}catch{l||e({token:null,loading:!1,needsLogin:!0})}}o();function u(){t.current&&clearTimeout(t.current),xy(),e({token:null,loading:!1,needsLogin:!0})}return document.addEventListener("ws-auth-failed",u),()=>{l=!0,t.current&&clearTimeout(t.current),document.removeEventListener("ws-auth-failed",u)}},[i]);const r=K.useCallback(async l=>{try{const o=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:l})}),u=await o.json();return o.ok&&u.success?(u.token&&PC(u.token),e({token:u.token??null,loading:!1,needsLogin:!1}),u.expiresIn&&i(u.expiresIn),{success:!0}):{success:!1,error:u.error||"Authentication failed"}}catch{return{success:!1,error:"Connection error -- is the server running?"}}},[i]),a=K.useCallback(()=>{t.current&&clearTimeout(t.current),xy(),fetch("/api/auth/logout",{method:"POST"}).catch(()=>{}),e({token:null,loading:!1,needsLogin:!0})},[]);return{...n,login:r,logout:a}}const nO=1e3,iO=1e4;class U0{ws=null;options;reconnectAttempt=0;reconnectTimer=null;disposed=!1;lastSeq=0;constructor(e){this.options=e}connect(){if(this.disposed)return;const e=new URL(this.options.url,window.location.origin);e.protocol=e.protocol==="https:"?"wss:":"ws:",this.options.token&&e.searchParams.set("token",this.options.token),this.ws=new WebSocket(e.toString()),this.ws.onopen=()=>{this.reconnectAttempt=0,this.options.onStatus("connected"),this.lastSeq>0&&this.send({type:"replay",sinceSeq:this.lastSeq})},this.ws.onmessage=t=>{try{const i=JSON.parse(t.data);i.type==="snapshot"&&"seq"in i&&(this.lastSeq=i.seq),this.options.onMessage(i)}catch{}},this.ws.onclose=t=>{if(!this.disposed){if(t.code===4001){this.options.onStatus("disconnected"),document.dispatchEvent(new CustomEvent("ws-auth-failed"));return}this.options.onStatus("reconnecting"),this.scheduleReconnect()}},this.ws.onerror=()=>{}}static MAX_BUFFERED=64*1024;send(e){if(this.ws?.readyState===WebSocket.OPEN){if(this.ws.bufferedAmount>U0.MAX_BUFFERED&&e.type!=="terminal_input")return;this.ws.send(JSON.stringify(e))}}setToken(e){this.options.token=e}getRawSocket(){return this.ws}getLastSeq(){return this.lastSeq}dispose(){this.disposed=!0,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws&&(this.ws.onclose=null,this.ws.onerror=null,this.ws.onmessage=null,this.ws.onopen=null,this.ws.close(),this.ws=null)}scheduleReconnect(){if(this.disposed)return;const e=Math.min(nO*Math.pow(2,this.reconnectAttempt),iO);this.reconnectAttempt++,this.options.onStatus("reconnecting"),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.connect()},e)}}const bS=n=>{let e;const t=new Set,i=(h,p)=>{const f=typeof h=="function"?h(e):h;if(!Object.is(f,e)){const m=e;e=p??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(y=>y(e,m))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=n(i,r,o);return o},rO=(n=>n?bS(n):bS),sO=n=>n;function aO(n,e=sO){const t=Rh.useSyncExternalStore(n.subscribe,Rh.useCallback(()=>e(n.getState()),[n,e]),Rh.useCallback(()=>e(n.getInitialState()),[n,e]));return Rh.useDebugValue(t),t}const vS=n=>{const e=rO(n),t=i=>aO(e,i);return Object.assign(t,e),t},kl=(n=>n?vS(n):vS),mn=kl(n=>({sessions:new Map,selectedSessionId:null,addSession:e=>n(t=>{const i=new Map(t.sessions);return i.set(e.sessionId,e),{sessions:i}}),removeSession:e=>n(t=>{const i=new Map(t.sessions);i.delete(e);const r=t.selectedSessionId===e?null:t.selectedSessionId;return{sessions:i,selectedSessionId:r}}),updateSession:e=>n(t=>{const i=new Map(t.sessions);e.replacesId&&i.delete(e.replacesId),i.set(e.sessionId,e);let r=t.selectedSessionId;return e.replacesId&&t.selectedSessionId===e.replacesId&&(r=e.sessionId),{sessions:i,selectedSessionId:r}}),selectSession:e=>n({selectedSessionId:e}),deselectSession:()=>n({selectedSessionId:null}),setSessions:e=>n({sessions:e})})),Z_=kl(n=>({connected:!1,reconnecting:!1,lastSeq:0,client:null,setConnected:e=>n({connected:e}),setReconnecting:e=>n({reconnecting:e}),setLastSeq:e=>n({lastSeq:e}),setClient:e=>n({client:e})}));var Mp={exports:{}},oO=Mp.exports,xS;function lO(){return xS||(xS=1,(function(n,e){((t,i)=>{n.exports=i()})(oO,function(){var t=function(C,k){return(t=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(I,z){I.__proto__=z}:function(I,z){for(var q in z)Object.prototype.hasOwnProperty.call(z,q)&&(I[q]=z[q])}))(C,k)},i=function(){return(i=Object.assign||function(C){for(var k,I=1,z=arguments.length;I<z;I++)for(var q in k=arguments[I])Object.prototype.hasOwnProperty.call(k,q)&&(C[q]=k[q]);return C}).apply(this,arguments)};function r(C,k,I){for(var z,q=0,W=k.length;q<W;q++)!z&&q in k||((z=z||Array.prototype.slice.call(k,0,q))[q]=k[q]);return C.concat(z||Array.prototype.slice.call(k))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ik,l=Object.keys,o=Array.isArray;function u(C,k){return typeof k=="object"&&l(k).forEach(function(I){C[I]=k[I]}),C}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var h=Object.getPrototypeOf,p={}.hasOwnProperty;function f(C,k){return p.call(C,k)}function m(C,k){typeof k=="function"&&(k=k(h(C))),(typeof Reflect>"u"?l:Reflect.ownKeys)(k).forEach(function(I){x(C,I,k[I])})}var y=Object.defineProperty;function x(C,k,I,z){y(C,k,u(I&&f(I,"get")&&typeof I.get=="function"?{get:I.get,set:I.set,configurable:!0}:{value:I,configurable:!0,writable:!0},z))}function w(C){return{from:function(k){return C.prototype=Object.create(k.prototype),x(C.prototype,"constructor",C),{extend:m.bind(null,C.prototype)}}}}var S=Object.getOwnPropertyDescriptor,b=[].slice;function v(C,k,I){return b.call(C,k,I)}function _(C,k){return k(C)}function E(C){if(!C)throw new Error("Assertion Failed")}function R(C){a.setImmediate?setImmediate(C):setTimeout(C,0)}function M(C,k){if(typeof k=="string"&&f(C,k))return C[k];if(!k)return C;if(typeof k!="string"){for(var I=[],z=0,q=k.length;z<q;++z){var W=M(C,k[z]);I.push(W)}return I}var ne,ie=k.indexOf(".");return ie===-1||(ne=C[k.substr(0,ie)])==null?void 0:M(ne,k.substr(ie+1))}function D(C,k,I){if(C&&k!==void 0&&!("isFrozen"in Object&&Object.isFrozen(C)))if(typeof k!="string"&&"length"in k){E(typeof I!="string"&&"length"in I);for(var z=0,q=k.length;z<q;++z)D(C,k[z],I[z])}else{var W,ne,ie=k.indexOf(".");ie!==-1?(W=k.substr(0,ie),(ie=k.substr(ie+1))===""?I===void 0?o(C)&&!isNaN(parseInt(W))?C.splice(W,1):delete C[W]:C[W]=I:D(ne=(ne=C[W])&&f(C,W)?ne:C[W]={},ie,I)):I===void 0?o(C)&&!isNaN(parseInt(k))?C.splice(k,1):delete C[k]:C[k]=I}}function O(C){var k,I={};for(k in C)f(C,k)&&(I[k]=C[k]);return I}var L=[].concat;function j(C){return L.apply([],C)}var Z="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map(function(C){return["Int","Uint","Float"].map(function(k){return k+C+"Array"})}))).filter(function(C){return a[C]}),X=new Set(Z.map(function(C){return a[C]})),G=null;function H(C){return G=new WeakMap,C=(function k(I){if(!I||typeof I!="object")return I;var z=G.get(I);if(z)return z;if(o(I)){z=[],G.set(I,z);for(var q=0,W=I.length;q<W;++q)z.push(k(I[q]))}else if(X.has(I.constructor))z=I;else{var ne,ie=h(I);for(ne in z=ie===Object.prototype?{}:Object.create(ie),G.set(I,z),I)f(I,ne)&&(z[ne]=k(I[ne]))}return z})(C),G=null,C}var $={}.toString;function Q(C){return $.call(C).slice(8,-1)}var Y=typeof Symbol<"u"?Symbol.iterator:"@@iterator",te=typeof Y=="symbol"?function(C){var k;return C!=null&&(k=C[Y])&&k.apply(C)}:function(){return null};function re(C,k){k=C.indexOf(k),0<=k&&C.splice(k,1)}var U={};function B(C){var k,I,z,q;if(arguments.length===1){if(o(C))return C.slice();if(this===U&&typeof C=="string")return[C];if(q=te(C))for(I=[];!(z=q.next()).done;)I.push(z.value);else{if(C==null)return[C];if(typeof(k=C.length)!="number")return[C];for(I=new Array(k);k--;)I[k]=C[k]}}else for(k=arguments.length,I=new Array(k);k--;)I[k]=arguments[k];return I}var P=typeof Symbol<"u"?function(C){return C[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ee=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Z),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _e(C,k){this.name=C,this.message=k}function we(C,k){return C+". Errors: "+Object.keys(k).map(function(I){return k[I].toString()}).filter(function(I,z,q){return q.indexOf(I)===z}).join(`
`)}function De(C,k,I,z){this.failures=k,this.failedKeys=z,this.successCount=I,this.message=we(C,k)}function le(C,k){this.name="BulkError",this.failures=Object.keys(k).map(function(I){return k[I]}),this.failuresByPos=k,this.message=we(C,this.failures)}w(_e).from(Error).extend({toString:function(){return this.name+": "+this.message}}),w(De).from(_e),w(le).from(_e);var ee=Ee.reduce(function(C,k){return C[k]=k+"Error",C},{}),Me=_e,xe=Ee.reduce(function(C,k){var I=k+"Error";function z(q,W){this.name=I,q?typeof q=="string"?(this.message="".concat(q).concat(W?`
 `+W:""),this.inner=W||null):typeof q=="object"&&(this.message="".concat(q.name," ").concat(q.message),this.inner=q):(this.message=V[k]||I,this.inner=null)}return w(z).from(Me),C[k]=z,C},{}),Ze=(xe.Syntax=SyntaxError,xe.Type=TypeError,xe.Range=RangeError,Z.reduce(function(C,k){return C[k+"Error"]=xe[k],C},{}));Z=Ee.reduce(function(C,k){return["Syntax","Type","Range"].indexOf(k)===-1&&(C[k+"Error"]=xe[k]),C},{});function Le(){}function _t(C){return C}function Pe(C,k){return C==null||C===_t?k:function(I){return k(C(I))}}function je(C,k){return function(){C.apply(this,arguments),k.apply(this,arguments)}}function ze(C,k){return C===Le?k:function(){var I=C.apply(this,arguments),z=(I!==void 0&&(arguments[0]=I),this.onsuccess),q=this.onerror,W=(this.onsuccess=null,this.onerror=null,k.apply(this,arguments));return z&&(this.onsuccess=this.onsuccess?je(z,this.onsuccess):z),q&&(this.onerror=this.onerror?je(q,this.onerror):q),W!==void 0?W:I}}function Ue(C,k){return C===Le?k:function(){C.apply(this,arguments);var I=this.onsuccess,z=this.onerror;this.onsuccess=this.onerror=null,k.apply(this,arguments),I&&(this.onsuccess=this.onsuccess?je(I,this.onsuccess):I),z&&(this.onerror=this.onerror?je(z,this.onerror):z)}}function st(C,k){return C===Le?k:function(q){var z=C.apply(this,arguments),q=(u(q,z),this.onsuccess),W=this.onerror,ne=(this.onsuccess=null,this.onerror=null,k.apply(this,arguments));return q&&(this.onsuccess=this.onsuccess?je(q,this.onsuccess):q),W&&(this.onerror=this.onerror?je(W,this.onerror):W),z===void 0?ne===void 0?void 0:ne:u(z,ne)}}function Rt(C,k){return C===Le?k:function(){return k.apply(this,arguments)!==!1&&C.apply(this,arguments)}}function bt(C,k){return C===Le?k:function(){var I=C.apply(this,arguments);if(I&&typeof I.then=="function"){for(var z=this,q=arguments.length,W=new Array(q);q--;)W[q]=arguments[q];return I.then(function(){return k.apply(z,W)})}return k.apply(this,arguments)}}Z.ModifyError=De,Z.DexieError=_e,Z.BulkError=le;var Dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function rn(C){Dt=C}var Ut={},Bt=100,wn=typeof Promise>"u"?[]:(Ee=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[wn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),h(wn),Ee]:[Ee,h(Ee),Ee]),Ee=wn[0],ca=wn[1],ca=ca&&ca.then,He=Ee&&Ee.constructor,dt=!!wn[2],St=function(C,k){Fi.push([C,k]),On&&(queueMicrotask(Ot),On=!1)},It=!0,On=!0,zt=[],zn=[],Un=_t,qn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},Je=qn,Fi=[],Zn=0,ta=[];function nt(C){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var k=this._PSD=Je;if(typeof C!="function"){if(C!==Ut)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Ai(this,this._value)}else this._state=null,this._value=null,++k.ref,(function I(z,q){try{q(function(W){if(z._state===null){if(W===z)throw new TypeError("A promise cannot be resolved with itself.");var ne=z._lib&&gn();W&&typeof W.then=="function"?I(z,function(ie,ue){W instanceof nt?W._then(ie,ue):W.then(ie,ue)}):(z._state=!0,z._value=W,oe(z)),ne&&hn()}},Ai.bind(null,z))}catch(W){Ai(z,W)}})(this,C)}var Cs={get:function(){var C=Je,k=rs;function I(z,q){var W=this,ne=!C.global&&(C!==Je||k!==rs),ie=ne&&!Di(),ue=new nt(function(be,he){Ie(W,new As(Ha(z,C,ne,ie),Ha(q,C,ne,ie),be,he,C))});return this._consoleTask&&(ue._consoleTask=this._consoleTask),ue}return I.prototype=Ut,I},set:function(C){x(this,"then",C&&C.prototype===Ut?Cs:{get:function(){return C},set:Cs.set})}};function As(C,k,I,z,q){this.onFulfilled=typeof C=="function"?C:null,this.onRejected=typeof k=="function"?k:null,this.resolve=I,this.reject=z,this.psd=q}function Ai(C,k){var I,z;zn.push(k),C._state===null&&(I=C._lib&&gn(),k=Un(k),C._state=!1,C._value=k,z=C,zt.some(function(q){return q._value===z._value})||zt.push(z),oe(C),I)&&hn()}function oe(C){var k=C._listeners;C._listeners=[];for(var I=0,z=k.length;I<z;++I)Ie(C,k[I]);var q=C._PSD;--q.ref||q.finalize(),Zn===0&&(++Zn,St(function(){--Zn==0&&ft()},[]))}function Ie(C,k){if(C._state===null)C._listeners.push(k);else{var I=C._state?k.onFulfilled:k.onRejected;if(I===null)return(C._state?k.resolve:k.reject)(C._value);++k.psd.ref,++Zn,St(it,[I,C,k])}}function it(C,k,I){try{var z,q=k._value;!k._state&&zn.length&&(zn=[]),z=Dt&&k._consoleTask?k._consoleTask.run(function(){return C(q)}):C(q),k._state||zn.indexOf(q)!==-1||(W=>{for(var ne=zt.length;ne;)if(zt[--ne]._value===W._value)return zt.splice(ne,1)})(k),I.resolve(z)}catch(W){I.reject(W)}finally{--Zn==0&&ft(),--I.psd.ref||I.psd.finalize()}}function Ot(){Qi(qn,function(){gn()&&hn()})}function gn(){var C=It;return On=It=!1,C}function hn(){var C,k,I;do for(;0<Fi.length;)for(C=Fi,Fi=[],I=C.length,k=0;k<I;++k){var z=C[k];z[0].apply(null,z[1])}while(0<Fi.length);On=It=!0}function ft(){for(var C=zt,k=(zt=[],C.forEach(function(z){z._PSD.onunhandled.call(null,z._value,z)}),ta.slice(0)),I=k.length;I;)k[--I]()}function lt(C){return new nt(Ut,!1,C)}function at(C,k){var I=Je;return function(){var z=gn(),q=Je;try{return Ji(I,!0),C.apply(this,arguments)}catch(W){k&&k(W)}finally{Ji(q,!1),z&&hn()}}}m(nt.prototype,{then:Cs,_then:function(C,k){Ie(this,new As(null,null,C,k,Je))},catch:function(C){var k,I;return arguments.length===1?this.then(null,C):(k=C,I=arguments[1],typeof k=="function"?this.then(null,function(z){return(z instanceof k?I:lt)(z)}):this.then(null,function(z){return(z&&z.name===k?I:lt)(z)}))},finally:function(C){return this.then(function(k){return nt.resolve(C()).then(function(){return k})},function(k){return nt.resolve(C()).then(function(){return lt(k)})})},timeout:function(C,k){var I=this;return C<1/0?new nt(function(z,q){var W=setTimeout(function(){return q(new xe.Timeout(k))},C);I.then(z,q).finally(clearTimeout.bind(null,W))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&x(nt.prototype,Symbol.toStringTag,"Dexie.Promise"),qn.env=Uo(),m(nt,{all:function(){var C=B.apply(null,arguments).map(Ts);return new nt(function(k,I){C.length===0&&k([]);var z=C.length;C.forEach(function(q,W){return nt.resolve(q).then(function(ne){C[W]=ne,--z||k(C)},I)})})},resolve:function(C){return C instanceof nt?C:C&&typeof C.then=="function"?new nt(function(k,I){C.then(k,I)}):new nt(Ut,!0,C)},reject:lt,race:function(){var C=B.apply(null,arguments).map(Ts);return new nt(function(k,I){C.map(function(z){return nt.resolve(z).then(k,I)})})},PSD:{get:function(){return Je},set:function(C){return Je=C}},totalEchoes:{get:function(){return rs}},newPSD:Tn,usePSD:Qi,scheduler:{get:function(){return St},set:function(C){St=C}},rejectionMapper:{get:function(){return Un},set:function(C){Un=C}},follow:function(C,k){return new nt(function(I,z){return Tn(function(q,W){var ne=Je;ne.unhandleds=[],ne.onunhandled=W,ne.finalize=je(function(){var ie,ue=this;ie=function(){ue.unhandleds.length===0?q():W(ue.unhandleds[0])},ta.push(function be(){ie(),ta.splice(ta.indexOf(be),1)}),++Zn,St(function(){--Zn==0&&ft()},[])},ne.finalize),C()},k,I,z)})}}),He&&(He.allSettled&&x(nt,"allSettled",function(){var C=B.apply(null,arguments).map(Ts);return new nt(function(k){C.length===0&&k([]);var I=C.length,z=new Array(I);C.forEach(function(q,W){return nt.resolve(q).then(function(ne){return z[W]={status:"fulfilled",value:ne}},function(ne){return z[W]={status:"rejected",reason:ne}}).then(function(){return--I||k(z)})})})}),He.any&&typeof AggregateError<"u"&&x(nt,"any",function(){var C=B.apply(null,arguments).map(Ts);return new nt(function(k,I){C.length===0&&I(new AggregateError([]));var z=C.length,q=new Array(z);C.forEach(function(W,ne){return nt.resolve(W).then(function(ie){return k(ie)},function(ie){q[ne]=ie,--z||I(new AggregateError(q))})})})}),He.withResolvers)&&(nt.withResolvers=He.withResolvers);var Qt={awaits:0,echoes:0,id:0},jn=0,ur=[],is=0,rs=0,Fr=0;function Tn(C,ne,I,z){var q=Je,W=Object.create(q),ne=(W.parent=q,W.ref=0,W.global=!1,W.id=++Fr,qn.env,W.env=dt?{Promise:nt,PromiseProp:{value:nt,configurable:!0,writable:!0},all:nt.all,race:nt.race,allSettled:nt.allSettled,any:nt.any,resolve:nt.resolve,reject:nt.reject}:{},ne&&u(W,ne),++q.ref,W.finalize=function(){--this.parent.ref||this.parent.finalize()},Qi(W,C,I,z));return W.ref===0&&W.finalize(),ne}function Jn(){return Qt.id||(Qt.id=++jn),++Qt.awaits,Qt.echoes+=Bt,Qt.id}function Di(){return!!Qt.awaits&&(--Qt.awaits==0&&(Qt.id=0),Qt.echoes=Qt.awaits*Bt,!0)}function Ts(C){return Qt.echoes&&C&&C.constructor===He?(Jn(),C.then(function(k){return Di(),k},function(k){return Di(),En(k)})):C}function Dl(){var C=ur[ur.length-1];ur.pop(),Ji(C,!1)}function Ji(C,k){var I,z,q=Je;(k?!Qt.echoes||is++&&C===Je:!is||--is&&C===Je)||queueMicrotask(k?(function(W){++rs,Qt.echoes&&--Qt.echoes!=0||(Qt.echoes=Qt.awaits=Qt.id=0),ur.push(Je),Ji(W,!0)}).bind(null,C):Dl),C!==Je&&(Je=C,q===qn&&(qn.env=Uo()),dt)&&(I=qn.env.Promise,z=C.env,q.global||C.global)&&(Object.defineProperty(a,"Promise",z.PromiseProp),I.all=z.all,I.race=z.race,I.resolve=z.resolve,I.reject=z.reject,z.allSettled&&(I.allSettled=z.allSettled),z.any)&&(I.any=z.any)}function Uo(){var C=a.Promise;return dt?{Promise:C,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject}:{}}function Qi(C,k,I,z,q){var W=Je;try{return Ji(C,!0),k(I,z,q)}finally{Ji(W,!1)}}function Ha(C,k,I,z){return typeof C!="function"?C:function(){var q=Je;I&&Jn(),Ji(k,!0);try{return C.apply(this,arguments)}finally{Ji(q,!1),z&&queueMicrotask(Di)}}}function xi(C){Promise===He&&Qt.echoes===0?is===0?C():enqueueNativeMicroTask(C):setTimeout(C,0)}(""+ca).indexOf("[native code]")===-1&&(Jn=Di=Le);var En=nt.reject,Ui="",Ti="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Qn="String expected.",ss=[],Ur="__dbnames",vr="readonly",Ge="readwrite";function mt(C,k){return C?k?function(){return C.apply(this,arguments)&&k.apply(this,arguments)}:C:k}var Yt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function dn(C){return typeof C!="string"||/\./.test(C)?function(k){return k}:function(k){return k[C]===void 0&&C in k&&delete(k=H(k))[C],k}}function Kn(){throw xe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function At(C,k){try{var I=ji(C),z=ji(k);if(I!==z)return I==="Array"?1:z==="Array"?-1:I==="binary"?1:z==="binary"?-1:I==="string"?1:z==="string"?-1:I==="Date"?1:z!=="Date"?NaN:-1;switch(I){case"number":case"Date":case"string":return k<C?1:C<k?-1:0;case"binary":for(var q=Ii(C),W=Ii(k),ne=q.length,ie=W.length,ue=ne<ie?ne:ie,be=0;be<ue;++be)if(q[be]!==W[be])return q[be]<W[be]?-1:1;return ne===ie?0:ne<ie?-1:1;case"Array":for(var he=C,ce=k,pe=he.length,ge=ce.length,de=pe<ge?pe:ge,fe=0;fe<de;++fe){var Se=At(he[fe],ce[fe]);if(Se!==0)return Se}return pe===ge?0:pe<ge?-1:1}}catch{}return NaN}function ji(C){var k=typeof C;return k=="object"&&(ArrayBuffer.isView(C)||(k=Q(C))==="ArrayBuffer")?"binary":k}function Ii(C){return C instanceof Uint8Array?C:ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):new Uint8Array(C)}function Cn(C,k,I){var z=C.schema.yProps;return z?(k&&0<I.numFailures&&(k=k.filter(function(q,W){return!I.failures[W]})),Promise.all(z.map(function(q){return q=q.updatesTable,k?C.db.table(q).where("k").anyOf(k).delete():C.db.table(q).clear()})).then(function(){return I})):I}jo.prototype.execute=function(C){var k=this["@@propmod"];if(k.add!==void 0){var I=k.add;if(o(I))return r(r([],o(C)?C:[],!0),I).sort();if(typeof I=="number")return(Number(C)||0)+I;if(typeof I=="bigint")try{return BigInt(C)+I}catch{return BigInt(0)+I}throw new TypeError("Invalid term ".concat(I))}if(k.remove!==void 0){var z=k.remove;if(o(z))return o(C)?C.filter(function(q){return!z.includes(q)}).sort():[];if(typeof z=="number")return Number(C)-z;if(typeof z=="bigint")try{return BigInt(C)-z}catch{return BigInt(0)-z}throw new TypeError("Invalid subtrahend ".concat(z))}return I=(I=k.replacePrefix)==null?void 0:I[0],I&&typeof C=="string"&&C.startsWith(I)?k.replacePrefix[1]+C.substring(I.length):C};var Si=jo;function jo(C){this["@@propmod"]=C}function na(C,k){for(var I=l(k),z=I.length,q=!1,W=0;W<z;++W){var ne=I[W],ie=k[ne],ue=M(C,ne);ie instanceof Si?(D(C,ne,ie.execute(ue)),q=!0):ue!==ie&&(D(C,ne,ie),q=!0)}return q}pn.prototype._trans=function(C,k,I){var z=this._tx||Je.trans,q=this.name,W=Dt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(C==="readonly"?"read":"write"," ").concat(this.name));function ne(be,he,ce){if(ce.schema[q])return k(ce.idbtrans,ce);throw new xe.NotFound("Table "+q+" not part of transaction")}var ie=gn();try{var ue=z&&z.db._novip===this.db._novip?z===Je.trans?z._promise(C,ne,I):Tn(function(){return z._promise(C,ne,I)},{trans:z,transless:Je.transless||Je}):(function be(he,ce,pe,ge){if(he.idbdb&&(he._state.openComplete||Je.letThrough||he._vip)){var de=he._createTransaction(ce,pe,he._dbSchema);try{de.create(),he._state.PR1398_maxLoop=3}catch(fe){return fe.name===ee.InvalidState&&he.isOpen()&&0<--he._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),he.close({disableAutoOpen:!1}),he.open().then(function(){return be(he,ce,pe,ge)})):En(fe)}return de._promise(ce,function(fe,Se){return Tn(function(){return Je.trans=de,ge(fe,Se,de)})}).then(function(fe){if(ce==="readwrite")try{de.idbtrans.commit()}catch{}return ce==="readonly"?fe:de._completion.then(function(){return fe})})}if(he._state.openComplete)return En(new xe.DatabaseClosed(he._state.dbOpenError));if(!he._state.isBeingOpened){if(!he._state.autoOpen)return En(new xe.DatabaseClosed);he.open().catch(Le)}return he._state.dbReadyPromise.then(function(){return be(he,ce,pe,ge)})})(this.db,C,[this.name],ne);return W&&(ue._consoleTask=W,ue=ue.catch(function(be){return console.trace(be),En(be)})),ue}finally{ie&&hn()}},pn.prototype.get=function(C,k){var I=this;return C&&C.constructor===Object?this.where(C).first(k):C==null?En(new xe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(z){return I.core.get({trans:z,key:C}).then(function(q){return I.hook.reading.fire(q)})}).then(k)},pn.prototype.where=function(C){if(typeof C=="string")return new this.db.WhereClause(this,C);if(o(C))return new this.db.WhereClause(this,"[".concat(C.join("+"),"]"));var k=l(C);if(k.length===1)return this.where(k[0]).equals(C[k[0]]);var I=this.schema.indexes.concat(this.schema.primKey).filter(function(ie){if(ie.compound&&k.every(function(be){return 0<=ie.keyPath.indexOf(be)})){for(var ue=0;ue<k.length;++ue)if(k.indexOf(ie.keyPath[ue])===-1)return!1;return!0}return!1}).sort(function(ie,ue){return ie.keyPath.length-ue.keyPath.length})[0];if(I&&this.db._maxKey!==Ui)return ne=I.keyPath.slice(0,k.length),this.where(ne).equals(ne.map(function(ie){return C[ie]}));!I&&Dt&&console.warn("The query ".concat(JSON.stringify(C)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(k.join("+"),"]"));var z=this.schema.idxByName;function q(ie,ue){return At(ie,ue)===0}var ne=k.reduce(function(he,ue){var be=he[0],he=he[1],ce=z[ue],pe=C[ue];return[be||ce,be||!ce?mt(he,ce&&ce.multi?function(ge){return ge=M(ge,ue),o(ge)&&ge.some(function(de){return q(pe,de)})}:function(ge){return q(pe,M(ge,ue))}):he]},[null,null]),W=ne[0],ne=ne[1];return W?this.where(W.name).equals(C[W.keyPath]).filter(ne):I?this.filter(ne):this.where(k).equals("")},pn.prototype.filter=function(C){return this.toCollection().and(C)},pn.prototype.count=function(C){return this.toCollection().count(C)},pn.prototype.offset=function(C){return this.toCollection().offset(C)},pn.prototype.limit=function(C){return this.toCollection().limit(C)},pn.prototype.each=function(C){return this.toCollection().each(C)},pn.prototype.toArray=function(C){return this.toCollection().toArray(C)},pn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pn.prototype.orderBy=function(C){return new this.db.Collection(new this.db.WhereClause(this,o(C)?"[".concat(C.join("+"),"]"):C))},pn.prototype.reverse=function(){return this.toCollection().reverse()},pn.prototype.mapToClass=function(C){for(var k=this.db,I=this.name,z=((this.schema.mappedClass=C).prototype instanceof Kn&&(C=(ne=>{var ie=he,ue=ne;if(typeof ue!="function"&&ue!==null)throw new TypeError("Class extends value "+String(ue)+" is not a constructor or null");function be(){this.constructor=ie}function he(){return ne!==null&&ne.apply(this,arguments)||this}return t(ie,ue),ie.prototype=ue===null?Object.create(ue):(be.prototype=ue.prototype,new be),Object.defineProperty(he.prototype,"db",{get:function(){return k},enumerable:!1,configurable:!0}),he.prototype.table=function(){return I},he})(C)),new Set),q=C.prototype;q;q=h(q))Object.getOwnPropertyNames(q).forEach(function(ne){return z.add(ne)});function W(ne){if(!ne)return ne;var ie,ue=Object.create(C.prototype);for(ie in ne)if(!z.has(ie))try{ue[ie]=ne[ie]}catch{}return ue}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=W,this.hook("reading",W),C},pn.prototype.defineClass=function(){return this.mapToClass(function(C){u(this,C)})},pn.prototype.add=function(C,k){var I=this,z=this.schema.primKey,q=z.auto,W=z.keyPath,ne=C;return W&&q&&(ne=dn(W)(C)),this._trans("readwrite",function(ie){return I.core.mutate({trans:ie,type:"add",keys:k!=null?[k]:null,values:[ne]})}).then(function(ie){return ie.numFailures?nt.reject(ie.failures[0]):ie.lastResult}).then(function(ie){if(W)try{D(C,W,ie)}catch{}return ie})},pn.prototype.upsert=function(C,k){var I=this,z=this.schema.primKey.keyPath;return this._trans("readwrite",function(q){return I.core.get({trans:q,key:C}).then(function(W){var ne=W??{};return na(ne,k),z&&D(ne,z,C),I.core.mutate({trans:q,type:"put",values:[ne],keys:[C],upsert:!0,updates:{keys:[C],changeSpecs:[k]}}).then(function(ie){return ie.numFailures?nt.reject(ie.failures[0]):!!W})})})},pn.prototype.update=function(C,k){return typeof C!="object"||o(C)?this.where(":id").equals(C).modify(k):(C=M(C,this.schema.primKey.keyPath))===void 0?En(new xe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(C).modify(k)},pn.prototype.put=function(C,k){var I=this,z=this.schema.primKey,q=z.auto,W=z.keyPath,ne=C;return W&&q&&(ne=dn(W)(C)),this._trans("readwrite",function(ie){return I.core.mutate({trans:ie,type:"put",values:[ne],keys:k!=null?[k]:null})}).then(function(ie){return ie.numFailures?nt.reject(ie.failures[0]):ie.lastResult}).then(function(ie){if(W)try{D(C,W,ie)}catch{}return ie})},pn.prototype.delete=function(C){var k=this;return this._trans("readwrite",function(I){return k.core.mutate({trans:I,type:"delete",keys:[C]}).then(function(z){return Cn(k,[C],z)}).then(function(z){return z.numFailures?nt.reject(z.failures[0]):void 0})})},pn.prototype.clear=function(){var C=this;return this._trans("readwrite",function(k){return C.core.mutate({trans:k,type:"deleteRange",range:Yt}).then(function(I){return Cn(C,null,I)})}).then(function(k){return k.numFailures?nt.reject(k.failures[0]):void 0})},pn.prototype.bulkGet=function(C){var k=this;return this._trans("readonly",function(I){return k.core.getMany({keys:C,trans:I}).then(function(z){return z.map(function(q){return k.hook.reading.fire(q)})})})},pn.prototype.bulkAdd=function(C,k,I){var z=this,q=Array.isArray(k)?k:void 0,W=(I=I||(q?void 0:k))?I.allKeys:void 0;return this._trans("readwrite",function(ne){var ie=z.schema.primKey,be=ie.auto,ie=ie.keyPath;if(ie&&q)throw new xe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(q&&q.length!==C.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var ue=C.length,be=ie&&be?C.map(dn(ie)):C;return z.core.mutate({trans:ne,type:"add",keys:q,values:be,wantResults:W}).then(function(he){var ce=he.numFailures,pe=he.failures;if(ce===0)return W?he.results:he.lastResult;throw new le("".concat(z.name,".bulkAdd(): ").concat(ce," of ").concat(ue," operations failed"),pe)})})},pn.prototype.bulkPut=function(C,k,I){var z=this,q=Array.isArray(k)?k:void 0,W=(I=I||(q?void 0:k))?I.allKeys:void 0;return this._trans("readwrite",function(ne){var ie=z.schema.primKey,be=ie.auto,ie=ie.keyPath;if(ie&&q)throw new xe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(q&&q.length!==C.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var ue=C.length,be=ie&&be?C.map(dn(ie)):C;return z.core.mutate({trans:ne,type:"put",keys:q,values:be,wantResults:W}).then(function(he){var ce=he.numFailures,pe=he.failures;if(ce===0)return W?he.results:he.lastResult;throw new le("".concat(z.name,".bulkPut(): ").concat(ce," of ").concat(ue," operations failed"),pe)})})},pn.prototype.bulkUpdate=function(C){var k=this,I=this.core,z=C.map(function(ne){return ne.key}),q=C.map(function(ne){return ne.changes}),W=[];return this._trans("readwrite",function(ne){return I.getMany({trans:ne,keys:z,cache:"clone"}).then(function(ie){var ue=[],be=[],he=(C.forEach(function(ce,pe){var ge=ce.key,de=ce.changes,fe=ie[pe];if(fe){for(var Se=0,Te=Object.keys(de);Se<Te.length;Se++){var ve=Te[Se],Oe=de[ve];if(ve===k.schema.primKey.keyPath){if(At(Oe,ge)!==0)throw new xe.Constraint("Cannot update primary key in bulkUpdate()")}else D(fe,ve,Oe)}W.push(pe),ue.push(ge),be.push(fe)}}),ue.length);return I.mutate({trans:ne,type:"put",keys:ue,values:be,updates:{keys:z,changeSpecs:q}}).then(function(ce){var pe=ce.numFailures,ge=ce.failures;if(pe===0)return he;for(var de=0,fe=Object.keys(ge);de<fe.length;de++){var Se,Te=fe[de],ve=W[Number(Te)];ve!=null&&(Se=ge[Te],delete ge[Te],ge[ve]=Se)}throw new le("".concat(k.name,".bulkUpdate(): ").concat(pe," of ").concat(he," operations failed"),ge)})})})},pn.prototype.bulkDelete=function(C){var k=this,I=C.length;return this._trans("readwrite",function(z){return k.core.mutate({trans:z,type:"delete",keys:C}).then(function(q){return Cn(k,C,q)})}).then(function(z){var q=z.numFailures,W=z.failures;if(q===0)return z.lastResult;throw new le("".concat(k.name,".bulkDelete(): ").concat(q," of ").concat(I," operations failed"),W)})};var qa=pn;function pn(){}function ia(C){function k(ne,ie){if(ie){for(var ue=arguments.length,be=new Array(ue-1);--ue;)be[ue-1]=arguments[ue];return I[ne].subscribe.apply(null,be),C}if(typeof ne=="string")return I[ne]}var I={};k.addEventType=W;for(var z=1,q=arguments.length;z<q;++z)W(arguments[z]);return k;function W(ne,ie,ue){var be,he;if(typeof ne!="object")return ie=ie||Rt,he={subscribers:[],fire:ue=ue||Le,subscribe:function(ce){he.subscribers.indexOf(ce)===-1&&(he.subscribers.push(ce),he.fire=ie(he.fire,ce))},unsubscribe:function(ce){he.subscribers=he.subscribers.filter(function(pe){return pe!==ce}),he.fire=he.subscribers.reduce(ie,ue)}},I[ne]=k[ne]=he;l(be=ne).forEach(function(ce){var pe=be[ce];if(o(pe))W(ce,be[ce][0],be[ce][1]);else{if(pe!=="asap")throw new xe.InvalidArgument("Invalid event config");var ge=W(ce,_t,function(){for(var de=arguments.length,fe=new Array(de);de--;)fe[de]=arguments[de];ge.subscribers.forEach(function(Se){R(function(){Se.apply(null,fe)})})})}})}}function hi(C,k){return w(k).from({prototype:C}),k}function jr(C,k){return!(C.filter||C.algorithm||C.or)&&(k?C.justLimit:!C.replayFilter)}function as(C,k){C.filter=mt(C.filter,k)}function ks(C,k,I){var z=C.replayFilter;C.replayFilter=z?function(){return mt(z(),k())}:k,C.justLimit=I&&!z}function ii(C,k){if(C.isPrimKey)return k.primaryKey;var I=k.getIndexByKeyPath(C.index);if(I)return I;throw new xe.Schema("KeyPath "+C.index+" on object store "+k.name+" is not indexed")}function Ho(C,k,I){var z=ii(C,k.schema);return k.openCursor({trans:I,values:!C.keysOnly,reverse:C.dir==="prev",unique:!!C.unique,query:{index:z,range:C.range}})}function os(C,k,I,z){var q,W,ne=C.replayFilter?mt(C.filter,C.replayFilter()):C.filter;return C.or?(q={},W=function(ie,ue,be){var he,ce;ne&&!ne(ue,be,function(pe){return ue.stop(pe)},function(pe){return ue.fail(pe)})||((ce=""+(he=ue.primaryKey))=="[object ArrayBuffer]"&&(ce=""+new Uint8Array(he)),f(q,ce))||(q[ce]=!0,k(ie,ue,be))},Promise.all([C.or._iterate(W,I),wt(Ho(C,z,I),C.algorithm,W,!C.keysOnly&&C.valueMapper)])):wt(Ho(C,z,I),mt(C.algorithm,ne),k,!C.keysOnly&&C.valueMapper)}function wt(C,k,I,z){var q=at(z?function(W,ne,ie){return I(z(W),ne,ie)}:I);return C.then(function(W){if(W)return W.start(function(){var ne=function(){return W.continue()};k&&!k(W,function(ie){return ne=ie},function(ie){W.stop(ie),ne=Le},function(ie){W.fail(ie),ne=Le})||q(W.value,W,function(ie){return ne=ie}),ne()})})}Et.prototype._read=function(C,k){var I=this._ctx;return I.error?I.table._trans(null,En.bind(null,I.error)):I.table._trans("readonly",C).then(k)},Et.prototype._write=function(C){var k=this._ctx;return k.error?k.table._trans(null,En.bind(null,k.error)):k.table._trans("readwrite",C,"locked")},Et.prototype._addAlgorithm=function(C){var k=this._ctx;k.algorithm=mt(k.algorithm,C)},Et.prototype._iterate=function(C,k){return os(this._ctx,C,k,this._ctx.table.core)},Et.prototype.clone=function(C){var k=Object.create(this.constructor.prototype),I=Object.create(this._ctx);return C&&u(I,C),k._ctx=I,k},Et.prototype.raw=function(){return this._ctx.valueMapper=null,this},Et.prototype.each=function(C){var k=this._ctx;return this._read(function(I){return os(k,C,I,k.table.core)})},Et.prototype.count=function(C){var k=this;return this._read(function(I){var z,q=k._ctx,W=q.table.core;return jr(q,!0)?W.count({trans:I,query:{index:ii(q,W.schema),range:q.range}}).then(function(ne){return Math.min(ne,q.limit)}):(z=0,os(q,function(){return++z,!1},I,W).then(function(){return z}))}).then(C)},Et.prototype.sortBy=function(C,k){var I=C.split(".").reverse(),z=I[0],q=I.length-1;function W(ue,be){return be?W(ue[I[be]],be-1):ue[z]}var ne=this._ctx.dir==="next"?1:-1;function ie(ue,be){return At(W(ue,q),W(be,q))*ne}return this.toArray(function(ue){return ue.sort(ie)}).then(k)},Et.prototype.toArray=function(C){var k=this;return this._read(function(I){var z,q,W,ne=k._ctx;return ne.dir==="next"&&jr(ne,!0)&&0<ne.limit?(z=ne.valueMapper,q=ii(ne,ne.table.core.schema),ne.table.core.query({trans:I,limit:ne.limit,values:!0,query:{index:q,range:ne.range}}).then(function(ie){return ie=ie.result,z?ie.map(z):ie})):(W=[],os(ne,function(ie){return W.push(ie)},I,ne.table.core).then(function(){return W}))},C)},Et.prototype.offset=function(C){var k=this._ctx;return C<=0||(k.offset+=C,jr(k)?ks(k,function(){var I=C;return function(z,q){return I===0||(I===1?--I:q(function(){z.advance(I),I=0}),!1)}}):ks(k,function(){var I=C;return function(){return--I<0}})),this},Et.prototype.limit=function(C){return this._ctx.limit=Math.min(this._ctx.limit,C),ks(this._ctx,function(){var k=C;return function(I,z,q){return--k<=0&&z(q),0<=k}},!0),this},Et.prototype.until=function(C,k){return as(this._ctx,function(I,z,q){return!C(I.value)||(z(q),k)}),this},Et.prototype.first=function(C){return this.limit(1).toArray(function(k){return k[0]}).then(C)},Et.prototype.last=function(C){return this.reverse().first(C)},Et.prototype.filter=function(C){var k;return as(this._ctx,function(I){return C(I.value)}),(k=this._ctx).isMatch=mt(k.isMatch,C),this},Et.prototype.and=function(C){return this.filter(C)},Et.prototype.or=function(C){return new this.db.WhereClause(this._ctx.table,C,this)},Et.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Et.prototype.desc=function(){return this.reverse()},Et.prototype.eachKey=function(C){var k=this._ctx;return k.keysOnly=!k.isMatch,this.each(function(I,z){C(z.key,z)})},Et.prototype.eachUniqueKey=function(C){return this._ctx.unique="unique",this.eachKey(C)},Et.prototype.eachPrimaryKey=function(C){var k=this._ctx;return k.keysOnly=!k.isMatch,this.each(function(I,z){C(z.primaryKey,z)})},Et.prototype.keys=function(C){var k=this._ctx,I=(k.keysOnly=!k.isMatch,[]);return this.each(function(z,q){I.push(q.key)}).then(function(){return I}).then(C)},Et.prototype.primaryKeys=function(C){var k=this._ctx;if(k.dir==="next"&&jr(k,!0)&&0<k.limit)return this._read(function(z){var q=ii(k,k.table.core.schema);return k.table.core.query({trans:z,values:!1,limit:k.limit,query:{index:q,range:k.range}})}).then(function(z){return z.result}).then(C);k.keysOnly=!k.isMatch;var I=[];return this.each(function(z,q){I.push(q.primaryKey)}).then(function(){return I}).then(C)},Et.prototype.uniqueKeys=function(C){return this._ctx.unique="unique",this.keys(C)},Et.prototype.firstKey=function(C){return this.limit(1).keys(function(k){return k[0]}).then(C)},Et.prototype.lastKey=function(C){return this.reverse().firstKey(C)},Et.prototype.distinct=function(){var C,k=this._ctx,k=k.index&&k.table.schema.idxByName[k.index];return k&&k.multi&&(C={},as(this._ctx,function(z){var z=z.primaryKey.toString(),q=f(C,z);return C[z]=!0,!q})),this},Et.prototype.modify=function(C){var k=this,I=this._ctx;return this._write(function(z){function q(fe,Se){var Te=Se.failures;pe+=fe-Se.numFailures;for(var ve=0,Oe=l(Te);ve<Oe.length;ve++){var qe=Oe[ve];ce.push(Te[qe])}}var W=typeof C=="function"?C:function(fe){return na(fe,C)},ne=I.table.core,he=ne.schema.primaryKey,ie=he.outbound,ue=he.extractKey,be=200,he=k.db._options.modifyChunkSize,ce=(he&&(be=typeof he=="object"?he[ne.name]||he["*"]||200:he),[]),pe=0,ge=[],de=C===yn;return k.clone().primaryKeys().then(function(fe){function Se(ve){var Oe=Math.min(be,fe.length-ve),qe=fe.slice(ve,ve+Oe);return(de?Promise.resolve([]):ne.getMany({trans:z,keys:qe,cache:"immutable"})).then(function(et){var tt=[],Ve=[],ct=ie?[]:null,rt=de?qe:[];if(!de)for(var We=0;We<Oe;++We){var ut=et[We],Lt={value:H(ut),primKey:fe[ve+We]};W.call(Lt,Lt.value,Lt)!==!1&&(Lt.value==null?rt.push(fe[ve+We]):ie||At(ue(ut),ue(Lt.value))===0?(Ve.push(Lt.value),ie&&ct.push(fe[ve+We])):(rt.push(fe[ve+We]),tt.push(Lt.value)))}return Promise.resolve(0<tt.length&&ne.mutate({trans:z,type:"add",values:tt}).then(function(tn){for(var vt in tn.failures)rt.splice(parseInt(vt),1);q(tt.length,tn)})).then(function(){return(0<Ve.length||Te&&typeof C=="object")&&ne.mutate({trans:z,type:"put",keys:ct,values:Ve,criteria:Te,changeSpec:typeof C!="function"&&C,isAdditionalChunk:0<ve}).then(function(tn){return q(Ve.length,tn)})}).then(function(){return(0<rt.length||Te&&de)&&ne.mutate({trans:z,type:"delete",keys:rt,criteria:Te,isAdditionalChunk:0<ve}).then(function(tn){return Cn(I.table,rt,tn)}).then(function(tn){return q(rt.length,tn)})}).then(function(){return fe.length>ve+Oe&&Se(ve+be)})})}var Te=jr(I)&&I.limit===1/0&&(typeof C!="function"||de)&&{index:I.index,range:I.range};return Se(0).then(function(){if(0<ce.length)throw new De("Error modifying one or more objects",ce,pe,ge);return fe.length})})})},Et.prototype.delete=function(){var C=this._ctx,k=C.range;return!jr(C)||C.table.schema.yProps||!C.isPrimKey&&k.type!==3?this.modify(yn):this._write(function(I){var z=C.table.core.schema.primaryKey,q=k;return C.table.core.count({trans:I,query:{index:z,range:q}}).then(function(W){return C.table.core.mutate({trans:I,type:"deleteRange",range:q}).then(function(ue){var ie=ue.failures,ue=ue.numFailures;if(ue)throw new De("Could not delete some values",Object.keys(ie).map(function(be){return ie[be]}),W-ue);return W-ue})})})};var Il=Et;function Et(){}var yn=function(C,k){return k.value=null};function Ms(C,k){return C<k?-1:C===k?0:1}function ls(C,k){return k<C?-1:C===k?0:1}function wi(C,k,I){return C=C instanceof en?new C.Collection(C):C,C._ctx.error=new(I||TypeError)(k),C}function er(C){return new C.Collection(C,function(){return Pt("")}).limit(0)}function Qe(ge,k,I,z){var q,W,ne,ie,ue,be,he,ce=I.length;if(!I.every(function(fe){return typeof fe=="string"}))return wi(ge,Qn);function pe(fe){q=fe==="next"?function(Te){return Te.toUpperCase()}:function(Te){return Te.toLowerCase()},W=fe==="next"?function(Te){return Te.toLowerCase()}:function(Te){return Te.toUpperCase()},ne=fe==="next"?Ms:ls;var Se=I.map(function(Te){return{lower:W(Te),upper:q(Te)}}).sort(function(Te,ve){return ne(Te.lower,ve.lower)});ie=Se.map(function(Te){return Te.upper}),ue=Se.map(function(Te){return Te.lower}),he=(be=fe)==="next"?"":z}pe("next");var ge=new ge.Collection(ge,function(){return ht(ie[0],ue[ce-1]+z)}),de=(ge._ondirectionchange=function(fe){pe(fe)},0);return ge._addAlgorithm(function(fe,Se,Te){var ve=fe.key;if(typeof ve=="string"){var Oe=W(ve);if(k(Oe,ue,de))return!0;for(var qe=null,et=de;et<ce;++et){var tt=((Ve,ct,rt,We,ut,Lt)=>{for(var tn=Math.min(Ve.length,We.length),vt=-1,Ht=0;Ht<tn;++Ht){var Nn=ct[Ht];if(Nn!==We[Ht])return ut(Ve[Ht],rt[Ht])<0?Ve.substr(0,Ht)+rt[Ht]+rt.substr(Ht+1):ut(Ve[Ht],We[Ht])<0?Ve.substr(0,Ht)+We[Ht]+rt.substr(Ht+1):0<=vt?Ve.substr(0,vt)+ct[vt]+rt.substr(vt+1):null;ut(Ve[Ht],Nn)<0&&(vt=Ht)}return tn<We.length&&Lt==="next"?Ve+rt.substr(Ve.length):tn<Ve.length&&Lt==="prev"?Ve.substr(0,rt.length):vt<0?null:Ve.substr(0,vt)+We[vt]+rt.substr(vt+1)})(ve,Oe,ie[et],ue[et],ne,be);tt===null&&qe===null?de=et+1:(qe===null||0<ne(qe,tt))&&(qe=tt)}Se(qe!==null?function(){fe.continue(qe+he)}:Te)}return!1}),ge}function ht(C,k,I,z){return{type:2,lower:C,upper:k,lowerOpen:I,upperOpen:z}}function Pt(C){return{type:1,lower:C,upper:C}}Object.defineProperty($t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$t.prototype.between=function(C,k,I,z){I=I!==!1,z=z===!0;try{return 0<this._cmp(C,k)||this._cmp(C,k)===0&&(I||z)&&(!I||!z)?er(this):new this.Collection(this,function(){return ht(C,k,!I,!z)})}catch{return wi(this,Ti)}},$t.prototype.equals=function(C){return C==null?wi(this,Ti):new this.Collection(this,function(){return Pt(C)})},$t.prototype.above=function(C){return C==null?wi(this,Ti):new this.Collection(this,function(){return ht(C,void 0,!0)})},$t.prototype.aboveOrEqual=function(C){return C==null?wi(this,Ti):new this.Collection(this,function(){return ht(C,void 0,!1)})},$t.prototype.below=function(C){return C==null?wi(this,Ti):new this.Collection(this,function(){return ht(void 0,C,!1,!0)})},$t.prototype.belowOrEqual=function(C){return C==null?wi(this,Ti):new this.Collection(this,function(){return ht(void 0,C)})},$t.prototype.startsWith=function(C){return typeof C!="string"?wi(this,Qn):this.between(C,C+Ui,!0,!0)},$t.prototype.startsWithIgnoreCase=function(C){return C===""?this.startsWith(C):Qe(this,function(k,I){return k.indexOf(I[0])===0},[C],Ui)},$t.prototype.equalsIgnoreCase=function(C){return Qe(this,function(k,I){return k===I[0]},[C],"")},$t.prototype.anyOfIgnoreCase=function(){var C=B.apply(U,arguments);return C.length===0?er(this):Qe(this,function(k,I){return I.indexOf(k)!==-1},C,"")},$t.prototype.startsWithAnyOfIgnoreCase=function(){var C=B.apply(U,arguments);return C.length===0?er(this):Qe(this,function(k,I){return I.some(function(z){return k.indexOf(z)===0})},C,Ui)},$t.prototype.anyOf=function(){var C,k,I=this,z=B.apply(U,arguments),q=this._cmp;try{z.sort(q)}catch{return wi(this,Ti)}return z.length===0?er(this):((C=new this.Collection(this,function(){return ht(z[0],z[z.length-1])}))._ondirectionchange=function(W){q=W==="next"?I._ascending:I._descending,z.sort(q)},k=0,C._addAlgorithm(function(W,ne,ie){for(var ue=W.key;0<q(ue,z[k]);)if(++k===z.length)return ne(ie),!1;return q(ue,z[k])===0||(ne(function(){W.continue(z[k])}),!1)}),C)},$t.prototype.notEqual=function(C){return this.inAnyRange([[-1/0,C],[C,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$t.prototype.noneOf=function(){var C=B.apply(U,arguments);if(C.length===0)return new this.Collection(this);try{C.sort(this._ascending)}catch{return wi(this,Ti)}var k=C.reduce(function(I,z){return I?I.concat([[I[I.length-1][1],z]]):[[-1/0,z]]},null);return k.push([C[C.length-1],this.db._maxKey]),this.inAnyRange(k,{includeLowers:!1,includeUppers:!1})},$t.prototype.inAnyRange=function(C,Te){var I=this,z=this._cmp,q=this._ascending,W=this._descending,ne=this._min,ie=this._max;if(C.length===0)return er(this);if(!C.every(function(ve){return ve[0]!==void 0&&ve[1]!==void 0&&q(ve[0],ve[1])<=0}))return wi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",xe.InvalidArgument);var ue=!Te||Te.includeLowers!==!1,be=Te&&Te.includeUppers===!0,he,ce=q;function pe(ve,Oe){return ce(ve[0],Oe[0])}try{(he=C.reduce(function(ve,Oe){for(var qe=0,et=ve.length;qe<et;++qe){var tt=ve[qe];if(z(Oe[0],tt[1])<0&&0<z(Oe[1],tt[0])){tt[0]=ne(tt[0],Oe[0]),tt[1]=ie(tt[1],Oe[1]);break}}return qe===et&&ve.push(Oe),ve},[])).sort(pe)}catch{return wi(this,Ti)}var ge=0,de=be?function(ve){return 0<q(ve,he[ge][1])}:function(ve){return 0<=q(ve,he[ge][1])},fe=ue?function(ve){return 0<W(ve,he[ge][0])}:function(ve){return 0<=W(ve,he[ge][0])},Se=de,Te=new this.Collection(this,function(){return ht(he[0][0],he[he.length-1][1],!ue,!be)});return Te._ondirectionchange=function(ve){ce=ve==="next"?(Se=de,q):(Se=fe,W),he.sort(pe)},Te._addAlgorithm(function(ve,Oe,qe){for(var et,tt=ve.key;Se(tt);)if(++ge===he.length)return Oe(qe),!1;return!de(et=tt)&&!fe(et)||(I._cmp(tt,he[ge][1])===0||I._cmp(tt,he[ge][0])===0||Oe(function(){ce===q?ve.continue(he[ge][0]):ve.continue(he[ge][1])}),!1)}),Te},$t.prototype.startsWithAnyOf=function(){var C=B.apply(U,arguments);return C.every(function(k){return typeof k=="string"})?C.length===0?er(this):this.inAnyRange(C.map(function(k){return[k,k+Ui]})):wi(this,"startsWithAnyOf() only works with strings")};var en=$t;function $t(){}function ei(C){return at(function(k){return cs(k),C(k.target.error),!1})}function cs(C){C.stopPropagation&&C.stopPropagation(),C.preventDefault&&C.preventDefault()}var Rs="storagemutated",ra="x-storagemutated-1",ki=ia(null,Rs),gu=(Hi.prototype._lock=function(){return E(!Je.global),++this._reculock,this._reculock!==1||Je.global||(Je.lockOwnerFor=this),this},Hi.prototype._unlock=function(){if(E(!Je.global),--this._reculock==0)for(Je.global||(Je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var C=this._blockedFuncs.shift();try{Qi(C[1],C[0])}catch{}}return this},Hi.prototype._locked=function(){return this._reculock&&Je.lockOwnerFor!==this},Hi.prototype.create=function(C){var k=this;if(this.mode){var I=this.db.idbdb,z=this.db._state.dbOpenError;if(E(!this.idbtrans),!C&&!I)switch(z&&z.name){case"DatabaseClosedError":throw new xe.DatabaseClosed(z);case"MissingAPIError":throw new xe.MissingAPI(z.message,z);default:throw new xe.OpenFailed(z)}if(!this.active)throw new xe.TransactionInactive;E(this._completion._state===null),(C=this.idbtrans=C||(this.db.core||I).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=at(function(q){cs(q),k._reject(C.error)}),C.onabort=at(function(q){cs(q),k.active&&k._reject(new xe.Abort(C.error)),k.active=!1,k.on("abort").fire(q)}),C.oncomplete=at(function(){k.active=!1,k._resolve(),"mutatedParts"in C&&ki.storagemutated.fire(C.mutatedParts)})}return this},Hi.prototype._promise=function(C,k,I){var z,q=this;return C==="readwrite"&&this.mode!=="readwrite"?En(new xe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new nt(function(W,ne){q._blockedFuncs.push([function(){q._promise(C,k,I).then(W,ne)},Je])}):I?Tn(function(){var W=new nt(function(ne,ie){q._lock();var ue=k(ne,ie,q);ue&&ue.then&&ue.then(ne,ie)});return W.finally(function(){return q._unlock()}),W._lib=!0,W}):((z=new nt(function(W,ne){var ie=k(W,ne,q);ie&&ie.then&&ie.then(W,ne)}))._lib=!0,z):En(new xe.TransactionInactive)},Hi.prototype._root=function(){return this.parent?this.parent._root():this},Hi.prototype.waitFor=function(C){var k,I=this._root(),z=nt.resolve(C),q=(I._waitingFor?I._waitingFor=I._waitingFor.then(function(){return z}):(I._waitingFor=z,I._waitingQueue=[],k=I.idbtrans.objectStore(I.storeNames[0]),(function W(){for(++I._spinCount;I._waitingQueue.length;)I._waitingQueue.shift()();I._waitingFor&&(k.get(-1/0).onsuccess=W)})()),I._waitingFor);return new nt(function(W,ne){z.then(function(ie){return I._waitingQueue.push(at(W.bind(null,ie)))},function(ie){return I._waitingQueue.push(at(ne.bind(null,ie)))}).finally(function(){I._waitingFor===q&&(I._waitingFor=null)})})},Hi.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new xe.Abort))},Hi.prototype.table=function(C){var k=this._memoizedTables||(this._memoizedTables={});if(f(k,C))return k[C];var I=this.schema[C];if(I)return(I=new this.db.Table(C,I,this)).core=this.db.core.table(C),k[C]=I;throw new xe.NotFound("Table "+C+" not part of transaction")},Hi);function Hi(){}function Hr(C,k,I,z,q,W,ne,ie){return{name:C,keyPath:k,unique:I,multi:z,auto:q,compound:W,src:(I&&!ne?"&":"")+(z?"*":"")+(q?"++":"")+Ll(k),type:ie}}function Ll(C){return typeof C=="string"?C:C?"["+[].join.call(C,"+")+"]":""}function Va(C,k,I){return{name:C,primKey:k,indexes:I,mappedClass:null,idxByName:(z=function(q){return[q.name,q]},I.reduce(function(q,W,ne){return W=z(W,ne),W&&(q[W[0]]=W[1]),q},{}))};var z}var Wa=function(C){try{return C.only([[]]),Wa=function(){return[[]]},[[]]}catch{return Wa=function(){return Ui},Ui}};function $a(C){return C==null?function(){}:typeof C=="string"?(k=C).split(".").length===1?function(I){return I[k]}:function(I){return M(I,k)}:function(I){return M(I,C)};var k}function qo(C){return[].slice.call(C)}var fd=0;function di(C){return C==null?":id":typeof C=="string"?C:"[".concat(C.join("+"),"]")}function sa(C,k,ue){function z(de){if(de.type===3)return null;if(de.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ce=de.lower,pe=de.upper,ge=de.lowerOpen,de=de.upperOpen;return ce===void 0?pe===void 0?null:k.upperBound(pe,!!de):pe===void 0?k.lowerBound(ce,!!ge):k.bound(ce,pe,!!ge,!!de)}function q(he){var ce,pe=he.name;return{name:pe,schema:he,mutate:function(ge){var de=ge.trans,fe=ge.type,Se=ge.keys,Te=ge.values,ve=ge.range;return new Promise(function(Oe,qe){Oe=at(Oe);var et=de.objectStore(pe),tt=et.keyPath==null,Ve=fe==="put"||fe==="add";if(!Ve&&fe!=="delete"&&fe!=="deleteRange")throw new Error("Invalid operation type: "+fe);var ct,rt=(Se||Te||{length:1}).length;if(Se&&Te&&Se.length!==Te.length)throw new Error("Given keys array must have same length as given values array.");if(rt===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function We(kn){++tn,cs(kn)}var ut=[],Lt=[],tn=0;if(fe==="deleteRange"){if(ve.type===4)return Oe({numFailures:tn,failures:Lt,results:[],lastResult:void 0});ve.type===3?ut.push(ct=et.clear()):ut.push(ct=et.delete(z(ve)))}else{var tt=Ve?tt?[Te,Se]:[Te,null]:[Se,null],vt=tt[0],Ht=tt[1];if(Ve)for(var Nn=0;Nn<rt;++Nn)ut.push(ct=Ht&&Ht[Nn]!==void 0?et[fe](vt[Nn],Ht[Nn]):et[fe](vt[Nn])),ct.onerror=We;else for(Nn=0;Nn<rt;++Nn)ut.push(ct=et[fe](vt[Nn])),ct.onerror=We}function Vi(kn){kn=kn.target.result,ut.forEach(function(Is,Ja){return Is.error!=null&&(Lt[Ja]=Is.error)}),Oe({numFailures:tn,failures:Lt,results:fe==="delete"?Se:ut.map(function(Is){return Is.result}),lastResult:kn})}ct.onerror=function(kn){We(kn),Vi(kn)},ct.onsuccess=Vi})},getMany:function(ge){var de=ge.trans,fe=ge.keys;return new Promise(function(Se,Te){Se=at(Se);for(var ve,Oe=de.objectStore(pe),qe=fe.length,et=new Array(qe),tt=0,Ve=0,ct=function(ut){ut=ut.target,et[ut._pos]=ut.result,++Ve===tt&&Se(et)},rt=ei(Te),We=0;We<qe;++We)fe[We]!=null&&((ve=Oe.get(fe[We]))._pos=We,ve.onsuccess=ct,ve.onerror=rt,++tt);tt===0&&Se(et)})},get:function(ge){var de=ge.trans,fe=ge.key;return new Promise(function(Se,Te){Se=at(Se);var ve=de.objectStore(pe).get(fe);ve.onsuccess=function(Oe){return Se(Oe.target.result)},ve.onerror=ei(Te)})},query:(ce=ie,function(ge){return new Promise(function(de,fe){de=at(de);var Se,Te,ve,Ve=ge.trans,Oe=ge.values,qe=ge.limit,tt=ge.query,et=qe===1/0?void 0:qe,ct=tt.index,tt=tt.range,Ve=Ve.objectStore(pe),Ve=ct.isPrimaryKey?Ve:Ve.index(ct.name),ct=z(tt);if(qe===0)return de({result:[]});ce?((tt=Oe?Ve.getAll(ct,et):Ve.getAllKeys(ct,et)).onsuccess=function(rt){return de({result:rt.target.result})},tt.onerror=ei(fe)):(Se=0,Te=!Oe&&"openKeyCursor"in Ve?Ve.openKeyCursor(ct):Ve.openCursor(ct),ve=[],Te.onsuccess=function(rt){var We=Te.result;return!We||(ve.push(Oe?We.value:We.primaryKey),++Se===qe)?de({result:ve}):void We.continue()},Te.onerror=ei(fe))})}),openCursor:function(ge){var de=ge.trans,fe=ge.values,Se=ge.query,Te=ge.reverse,ve=ge.unique;return new Promise(function(Oe,qe){Oe=at(Oe);var Ve=Se.index,et=Se.range,tt=de.objectStore(pe),tt=Ve.isPrimaryKey?tt:tt.index(Ve.name),Ve=Te?ve?"prevunique":"prev":ve?"nextunique":"next",ct=!fe&&"openKeyCursor"in tt?tt.openKeyCursor(z(et),Ve):tt.openCursor(z(et),Ve);ct.onerror=ei(qe),ct.onsuccess=at(function(rt){var We,ut,Lt,tn,vt=ct.result;vt?(vt.___id=++fd,vt.done=!1,We=vt.continue.bind(vt),ut=(ut=vt.continuePrimaryKey)&&ut.bind(vt),Lt=vt.advance.bind(vt),tn=function(){throw new Error("Cursor not stopped")},vt.trans=de,vt.stop=vt.continue=vt.continuePrimaryKey=vt.advance=function(){throw new Error("Cursor not started")},vt.fail=at(qe),vt.next=function(){var Ht=this,Nn=1;return this.start(function(){return Nn--?Ht.continue():Ht.stop()}).then(function(){return Ht})},vt.start=function(Ht){function Nn(){if(ct.result)try{Ht()}catch(kn){vt.fail(kn)}else vt.done=!0,vt.start=function(){throw new Error("Cursor behind last entry")},vt.stop()}var Vi=new Promise(function(kn,Is){kn=at(kn),ct.onerror=ei(Is),vt.fail=Is,vt.stop=function(Ja){vt.stop=vt.continue=vt.continuePrimaryKey=vt.advance=tn,kn(Ja)}});return ct.onsuccess=at(function(kn){ct.onsuccess=Nn,Nn()}),vt.continue=We,vt.continuePrimaryKey=ut,vt.advance=Lt,Nn(),Vi},Oe(vt)):Oe(null)},qe)})},count:function(ge){var de=ge.query,fe=ge.trans,Se=de.index,Te=de.range;return new Promise(function(ve,Oe){var qe=fe.objectStore(pe),qe=Se.isPrimaryKey?qe:qe.index(Se.name),et=z(Te),et=et?qe.count(et):qe.count();et.onsuccess=at(function(tt){return ve(tt.target.result)}),et.onerror=ei(Oe)})}}}W=ue,ne=qo((ue=C).objectStoreNames);var W,ue={schema:{name:ue.name,tables:ne.map(function(he){return W.objectStore(he)}).map(function(he){var ce=he.keyPath,pe=he.autoIncrement,de=o(ce),ge={},de={name:he.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ce==null,compound:de,keyPath:ce,autoIncrement:pe,unique:!0,extractKey:$a(ce)},indexes:qo(he.indexNames).map(function(fe){return he.index(fe)}).map(function(ve){var Oe=ve.name,Se=ve.unique,Te=ve.multiEntry,ve=ve.keyPath,Oe={name:Oe,compound:o(ve),keyPath:ve,unique:Se,multiEntry:Te,extractKey:$a(ve)};return ge[di(ve)]=Oe}),getIndexByKeyPath:function(fe){return ge[di(fe)]}};return ge[":id"]=de.primaryKey,ce!=null&&(ge[di(ce)]=de.primaryKey),de})},hasGetAll:0<ne.length&&"getAll"in W.objectStore(ne[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},ne=ue.schema,ie=ue.hasGetAll,ue=ne.tables.map(q),be={};return ue.forEach(function(he){return be[he.name]=he}),{stack:"dbcore",transaction:C.transaction.bind(C),table:function(he){if(be[he])return be[he];throw new Error("Table '".concat(he,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Wa(k),schema:ne}}function Bl(C,k,I,z){return I=I.IDBKeyRange,k=sa(k,I,z),{dbcore:C.dbcore.reduce(function(q,W){return W=W.create,i(i({},q),W(q))},k)}}function Os(C,k){var I=k.db,I=Bl(C._middlewares,I,C._deps,k);C.core=I.dbcore,C.tables.forEach(function(z){var q=z.name;C.core.schema.tables.some(function(W){return W.name===q})&&(z.core=C.core.table(q),C[q]instanceof C.Table)&&(C[q].core=z.core)})}function zl(C,k,I,z){I.forEach(function(q){var W=z[q];k.forEach(function(ne){var ie=(function ue(be,he){return S(be,he)||(be=h(be))&&ue(be,he)})(ne,q);(!ie||"value"in ie&&ie.value===void 0)&&(ne===C.Transaction.prototype||ne instanceof C.Transaction?x(ne,q,{get:function(){return this.table(q)},set:function(ue){y(this,q,{value:ue,writable:!0,configurable:!0,enumerable:!0})}}):ne[q]=new C.Table(q,W))})})}function Vo(C,k){k.forEach(function(I){for(var z in I)I[z]instanceof C.Table&&delete I[z]})}function yu(C,k){return C._cfg.version-k._cfg.version}function Wo(C,k,I,z){var q=C._dbSchema,W=(I.objectStoreNames.contains("$meta")&&!q.$meta&&(q.$meta=Va("$meta",md("")[0],[]),C._storeNames.push("$meta")),C._createTransaction("readwrite",C._storeNames,q)),ne=(W.create(I),W._completion.catch(z),W._reject.bind(W)),ie=Je.transless||Je;Tn(function(){if(Je.trans=W,Je.transless=ie,k!==0)return Os(C,I),be=k,((ue=W).storeNames.includes("$meta")?ue.table("$meta").get("version").then(function(he){return he??be}):nt.resolve(be)).then(function(Se){var ce=C,pe=Se,ge=W,de=I,fe=[],Se=ce._versions,Te=ce._dbSchema=Ga(0,ce.idbdb,de);return(Se=Se.filter(function(ve){return ve._cfg.version>=pe})).length===0?nt.resolve():(Se.forEach(function(ve){fe.push(function(){var Oe,qe,et,tt=Te,Ve=ve._cfg.dbschema,ct=(jl(ce,tt,de),jl(ce,Ve,de),Te=ce._dbSchema=Ve,Fl(tt,Ve)),rt=(ct.add.forEach(function(We){_u(de,We[0],We[1].primKey,We[1].indexes)}),ct.change.forEach(function(We){if(We.recreate)throw new xe.Upgrade("Not yet support for changing primary key");var ut=de.objectStore(We.name);We.add.forEach(function(Lt){return Ul(ut,Lt)}),We.change.forEach(function(Lt){ut.deleteIndex(Lt.name),Ul(ut,Lt)}),We.del.forEach(function(Lt){return ut.deleteIndex(Lt)})}),ve._cfg.contentUpgrade);if(rt&&ve._cfg.version>pe)return Os(ce,de),ge._memoizedTables={},Oe=O(Ve),ct.del.forEach(function(We){Oe[We]=tt[We]}),Vo(ce,[ce.Transaction.prototype]),zl(ce,[ce.Transaction.prototype],l(Oe),Oe),ge.schema=Oe,(qe=P(rt))&&Jn(),Ve=nt.follow(function(){var We;(et=rt(ge))&&qe&&(We=Di.bind(null,null),et.then(We,We))}),et&&typeof et.then=="function"?nt.resolve(et):Ve.then(function(){return et})}),fe.push(function(Oe){var qe,et,tt=ve._cfg.dbschema;qe=tt,et=Oe,[].slice.call(et.db.objectStoreNames).forEach(function(Ve){return qe[Ve]==null&&et.db.deleteObjectStore(Ve)}),Vo(ce,[ce.Transaction.prototype]),zl(ce,[ce.Transaction.prototype],ce._storeNames,ce._dbSchema),ge.schema=ce._dbSchema}),fe.push(function(Oe){ce.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ce.idbdb.version/10)===ve._cfg.version?(ce.idbdb.deleteObjectStore("$meta"),delete ce._dbSchema.$meta,ce._storeNames=ce._storeNames.filter(function(qe){return qe!=="$meta"})):Oe.objectStore("$meta").put(ve._cfg.version,"version"))})}),(function ve(){return fe.length?nt.resolve(fe.shift()(ge.idbtrans)).then(ve):nt.resolve()})().then(function(){pd(Te,de)}))}).catch(ne);var ue,be;l(q).forEach(function(he){_u(I,he,q[he].primKey,q[he].indexes)}),Os(C,I),nt.follow(function(){return C.on.populate.fire(W)}).catch(ne)})}function Pl(C,k){pd(C._dbSchema,k),k.db.version%10!=0||k.objectStoreNames.contains("$meta")||k.db.createObjectStore("$meta").add(Math.ceil(k.db.version/10-1),"version");var I=Ga(0,C.idbdb,k);jl(C,C._dbSchema,k);for(var z=0,q=Fl(I,C._dbSchema).change;z<q.length;z++){var W=(ne=>{if(ne.change.length||ne.recreate)return console.warn("Unable to patch indexes of table ".concat(ne.name," because it has changes on the type of index or primary key.")),{value:void 0};var ie=k.objectStore(ne.name);ne.add.forEach(function(ue){Dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(ne.name,".").concat(ue.src)),Ul(ie,ue)})})(q[z]);if(typeof W=="object")return W.value}}function Fl(C,k){var I,z={del:[],add:[],change:[]};for(I in C)k[I]||z.del.push(I);for(I in k){var q=C[I],W=k[I];if(q){var ne={name:I,def:W,recreate:!1,del:[],add:[],change:[]};if(""+(q.primKey.keyPath||"")!=""+(W.primKey.keyPath||"")||q.primKey.auto!==W.primKey.auto)ne.recreate=!0,z.change.push(ne);else{var ie=q.idxByName,ue=W.idxByName,be=void 0;for(be in ie)ue[be]||ne.del.push(be);for(be in ue){var he=ie[be],ce=ue[be];he?he.src!==ce.src&&ne.change.push(ce):ne.add.push(ce)}(0<ne.del.length||0<ne.add.length||0<ne.change.length)&&z.change.push(ne)}}else z.add.push([I,W])}return z}function _u(C,k,I,z){var q=C.db.createObjectStore(k,I.keyPath?{keyPath:I.keyPath,autoIncrement:I.auto}:{autoIncrement:I.auto});z.forEach(function(W){return Ul(q,W)})}function pd(C,k){l(C).forEach(function(I){k.db.objectStoreNames.contains(I)||(Dt&&console.debug("Dexie: Creating missing table",I),_u(k,I,C[I].primKey,C[I].indexes))})}function Ul(C,k){C.createIndex(k.name,k.keyPath,{unique:k.unique,multiEntry:k.multi})}function Ga(C,k,I){var z={};return v(k.objectStoreNames,0).forEach(function(q){for(var W=I.objectStore(q),ne=Hr(Ll(be=W.keyPath),be||"",!0,!1,!!W.autoIncrement,be&&typeof be!="string",!0),ie=[],ue=0;ue<W.indexNames.length;++ue){var he=W.index(W.indexNames[ue]),be=he.keyPath,he=Hr(he.name,be,!!he.unique,!!he.multiEntry,!1,be&&typeof be!="string",!1);ie.push(he)}z[q]=Va(q,ne,ie)}),z}function jl(C,k,I){for(var z=I.db.objectStoreNames,q=0;q<z.length;++q){var W=z[q],ne=I.objectStore(W);C._hasGetAll="getAll"in ne;for(var ie=0;ie<ne.indexNames.length;++ie){var ue,be=ne.indexNames[ie],he=ne.index(be).keyPath,he=typeof he=="string"?he:"["+v(he).join("+")+"]";k[W]&&(ue=k[W].idxByName[he])&&(ue.name=be,delete k[W].idxByName[he],k[W].idxByName[be]=ue)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(C._hasGetAll=!1)}function md(C){return C.split(",").map(function(k,I){var q=k.split(":"),z=(z=q[1])==null?void 0:z.trim(),q=(k=q[0].trim()).replace(/([&*]|\+\+)/g,""),W=/^\[/.test(q)?q.match(/^\[(.*)\]$/)[1].split("+"):q;return Hr(q,W||null,/\&/.test(k),/\*/.test(k),/\+\+/.test(k),o(W),I===0,z)})}Ka.prototype._createTableSchema=Va,Ka.prototype._parseIndexSyntax=md,Ka.prototype._parseStoresSpec=function(C,k){var I=this;l(C).forEach(function(z){if(C[z]!==null){var q=I._parseIndexSyntax(C[z]),W=q.shift();if(!W)throw new xe.Schema("Invalid schema for table "+z+": "+C[z]);if(W.unique=!0,W.multi)throw new xe.Schema("Primary key cannot be multiEntry*");q.forEach(function(ne){if(ne.auto)throw new xe.Schema("Only primary key can be marked as autoIncrement (++)");if(!ne.keyPath)throw new xe.Schema("Index must have a name and cannot be an empty string")}),W=I._createTableSchema(z,W,q),k[z]=W}})},Ka.prototype.stores=function(I){var k=this.db,I=(this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,I):I,k._versions),z={},q={};return I.forEach(function(W){u(z,W._cfg.storesSource),q=W._cfg.dbschema={},W._parseStoresSpec(z,q)}),k._dbSchema=q,Vo(k,[k._allTables,k,k.Transaction.prototype]),zl(k,[k._allTables,k,k.Transaction.prototype,this._cfg.tables],l(q),q),k._storeNames=l(q),this},Ka.prototype.upgrade=function(C){return this._cfg.contentUpgrade=bt(this._cfg.contentUpgrade||Le,C),this};var wm=Ka;function Ka(){}function bu(C,k){var I=C._dbNamesDB;return I||(I=C._dbNamesDB=new qr(Ur,{addons:[],indexedDB:C,IDBKeyRange:k})).version(1).stores({dbnames:"name"}),I.table("dbnames")}function Hl(C){return C&&typeof C.databases=="function"}function vu(C){return Tn(function(){return Je.letThrough=!0,C()})}function xu(C){return!("from"in C)}var Mi=function(C,k){var I;if(!this)return I=new Mi,C&&"d"in C&&u(I,C),I;u(this,arguments.length?{d:1,from:C,to:1<arguments.length?k:C}:{d:0})};function $o(C,k,I){var z=At(k,I);if(!isNaN(z)){if(0<z)throw RangeError();if(xu(C))return u(C,{from:k,to:I,d:1});var z=C.l,q=C.r;if(At(I,C.from)<0)return z?$o(z,k,I):C.l={from:k,to:I,d:1,l:null,r:null},yd(C);if(0<At(k,C.to))return q?$o(q,k,I):C.r={from:k,to:I,d:1,l:null,r:null},yd(C);At(k,C.from)<0&&(C.from=k,C.l=null,C.d=q?q.d+1:1),0<At(I,C.to)&&(C.to=I,C.r=null,C.d=C.l?C.l.d+1:1),k=!C.r,z&&!C.l&&aa(C,z),q&&k&&aa(C,q)}}function aa(C,k){xu(k)||(function I(z,q){var W=q.from,ne=q.l,ie=q.r;$o(z,W,q.to),ne&&I(z,ne),ie&&I(z,ie)})(C,k)}function gd(C,k){var I=ql(k),z=I.next();if(!z.done)for(var q=z.value,W=ql(C),ne=W.next(q.from),ie=ne.value;!z.done&&!ne.done;){if(At(ie.from,q.to)<=0&&0<=At(ie.to,q.from))return!0;At(q.from,ie.from)<0?q=(z=I.next(ie.from)).value:ie=(ne=W.next(q.from)).value}return!1}function ql(C){var k=xu(C)?null:{s:0,n:C};return{next:function(I){for(var z=0<arguments.length;k;)switch(k.s){case 0:if(k.s=1,z)for(;k.n.l&&At(I,k.n.from)<0;)k={up:k,n:k.n.l,s:1};else for(;k.n.l;)k={up:k,n:k.n.l,s:1};case 1:if(k.s=2,!z||At(I,k.n.to)<=0)return{value:k.n,done:!1};case 2:if(k.n.r){k.s=3,k={up:k,n:k.n.r,s:0};continue}case 3:k=k.up}return{done:!0}}}}function yd(C){var k,I,z,q=(((q=C.r)==null?void 0:q.d)||0)-(((q=C.l)==null?void 0:q.d)||0),q=1<q?"r":q<-1?"l":"";q&&(k=q=="r"?"l":"r",I=i({},C),z=C[q],C.from=z.from,C.to=z.to,C[q]=z[q],I[q]=z[k],(C[k]=I).d=Su(I)),C.d=Su(C)}function Su(I){var k=I.r,I=I.l;return(k?I?Math.max(k.d,I.d):k.d:I?I.d:0)+1}function Vl(C,k){return l(k).forEach(function(I){C[I]?aa(C[I],k[I]):C[I]=(function z(q){var W,ne,ie={};for(W in q)f(q,W)&&(ne=q[W],ie[W]=!ne||typeof ne!="object"||X.has(ne.constructor)?ne:z(ne));return ie})(k[I])}),C}function wu(C,k){return C.all||k.all||Object.keys(C).some(function(I){return k[I]&&gd(k[I],C[I])})}m(Mi.prototype,((Ee={add:function(C){return aa(this,C),this},addKey:function(C){return $o(this,C,C),this},addKeys:function(C){var k=this;return C.forEach(function(I){return $o(k,I,I)}),this},hasKey:function(C){var k=ql(this).next(C).value;return k&&At(k.from,C)<=0&&0<=At(k.to,C)}})[Y]=function(){return ql(this)},Ee));var oa={},Eu={},Cu=!1;function Wl(C){Vl(Eu,C),Cu||(Cu=!0,setTimeout(function(){Cu=!1,Au(Eu,!(Eu={}))},0))}function Au(C,k){k===void 0&&(k=!1);var I=new Set;if(C.all)for(var z=0,q=Object.values(oa);z<q.length;z++)_d(ie=q[z],C,I,k);else for(var W in C){var ne,ie,W=/^idb\:\/\/(.*)\/(.*)\//.exec(W);W&&(ne=W[1],W=W[2],ie=oa["idb://".concat(ne,"/").concat(W)])&&_d(ie,C,I,k)}I.forEach(function(ue){return ue()})}function _d(C,k,I,z){for(var q=[],W=0,ne=Object.entries(C.queries.query);W<ne.length;W++){for(var ie=ne[W],ue=ie[0],be=[],he=0,ce=ie[1];he<ce.length;he++){var pe=ce[he];wu(k,pe.obsSet)?pe.subscribers.forEach(function(Se){return I.add(Se)}):z&&be.push(pe)}z&&q.push([ue,be])}if(z)for(var ge=0,de=q;ge<de.length;ge++){var fe=de[ge],ue=fe[0],be=fe[1];C.queries.query[ue]=be}}function Em(C){var k=C._state,I=C._deps.indexedDB;if(k.isBeingOpened||C.idbdb)return k.dbReadyPromise.then(function(){return k.dbOpenError?En(k.dbOpenError):C});k.isBeingOpened=!0,k.dbOpenError=null,k.openComplete=!1;var z=k.openCanceller,q=Math.round(10*C.verno),W=!1;function ne(){if(k.openCanceller!==z)throw new xe.DatabaseClosed("db.open() was cancelled")}function ie(){return new nt(function(pe,ge){if(ne(),!I)throw new xe.MissingAPI;var de=C.name,fe=k.autoSchema||!q?I.open(de):I.open(de,q);if(!fe)throw new xe.MissingAPI;fe.onerror=ei(ge),fe.onblocked=at(C._fireOnBlocked),fe.onupgradeneeded=at(function(Se){var Te;he=fe.transaction,k.autoSchema&&!C._options.allowEmptyDB?(fe.onerror=cs,he.abort(),fe.result.close(),(Te=I.deleteDatabase(de)).onsuccess=Te.onerror=at(function(){ge(new xe.NoSuchDatabase("Database ".concat(de," doesnt exist")))})):(he.onerror=ei(ge),Te=Se.oldVersion>Math.pow(2,62)?0:Se.oldVersion,ce=Te<1,C.idbdb=fe.result,W&&Pl(C,he),Wo(C,Te/10,he,ge))},ge),fe.onsuccess=at(function(){he=null;var Se,Te,ve,Oe,qe,et,tt=C.idbdb=fe.result,Ve=v(tt.objectStoreNames);if(0<Ve.length)try{var ct=tt.transaction((qe=Ve).length===1?qe[0]:qe,"readonly");if(k.autoSchema)et=tt,Oe=ct,(ve=C).verno=et.version/10,Oe=ve._dbSchema=Ga(0,et,Oe),ve._storeNames=v(et.objectStoreNames,0),zl(ve,[ve._allTables],l(Oe),Oe);else if(jl(C,C._dbSchema,ct),Te=ct,((Te=Fl(Ga(0,(Se=C).idbdb,Te),Se._dbSchema)).add.length||Te.change.some(function(rt){return rt.add.length||rt.change.length}))&&!W)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),tt.close(),q=tt.version+1,W=!0,pe(ie());Os(C,ct)}catch{}ss.push(C),tt.onversionchange=at(function(rt){k.vcFired=!0,C.on("versionchange").fire(rt)}),tt.onclose=at(function(){C.close({disableAutoOpen:!1})}),ce&&(Ve=C._deps,qe=de,Hl(et=Ve.indexedDB)||qe===Ur||bu(et,Ve.IDBKeyRange).put({name:qe}).catch(Le)),pe()},ge)}).catch(function(pe){switch(pe?.name){case"UnknownError":if(0<k.PR1398_maxLoop)return k.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ie();break;case"VersionError":if(0<q)return q=0,ie()}return nt.reject(pe)})}var ue,be=k.dbReadyResolve,he=null,ce=!1;return nt.race([z,(typeof navigator>"u"?nt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(pe){function ge(){return indexedDB.databases().finally(pe)}ue=setInterval(ge,100),ge()}).finally(function(){return clearInterval(ue)}):Promise.resolve()).then(ie)]).then(function(){return ne(),k.onReadyBeingFired=[],nt.resolve(vu(function(){return C.on.ready.fire(C.vip)})).then(function pe(){var ge;if(0<k.onReadyBeingFired.length)return ge=k.onReadyBeingFired.reduce(bt,Le),k.onReadyBeingFired=[],nt.resolve(vu(function(){return ge(C.vip)})).then(pe)})}).finally(function(){k.openCanceller===z&&(k.onReadyBeingFired=null,k.isBeingOpened=!1)}).catch(function(pe){k.dbOpenError=pe;try{he&&he.abort()}catch{}return z===k.openCanceller&&C._close(),En(pe)}).finally(function(){k.openComplete=!0,be()}).then(function(){var pe;return ce&&(pe={},C.tables.forEach(function(ge){ge.schema.indexes.forEach(function(de){de.name&&(pe["idb://".concat(C.name,"/").concat(ge.name,"/").concat(de.name)]=new Mi(-1/0,[[[]]]))}),pe["idb://".concat(C.name,"/").concat(ge.name,"/")]=pe["idb://".concat(C.name,"/").concat(ge.name,"/:dels")]=new Mi(-1/0,[[[]]])}),ki(Rs).fire(pe),Au(pe,!0)),C})}function Go(C){function k(W){return C.next(W)}var I=q(k),z=q(function(W){return C.throw(W)});function q(W){return function(ie){var ie=W(ie),ue=ie.value;return ie.done?ue:ue&&typeof ue.then=="function"?ue.then(I,z):o(ue)?Promise.all(ue).then(I,z):I(ue)}}return q(k)()}function Ns(C,k,I){for(var z=o(C)?C.slice():[C],q=0;q<I;++q)z.push(k);return z}var Cm={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(C){return i(i({},C),{table:function(z){var I=C.table(z),z=I.schema,q={},W=[];function ne(pe,ge,de){var ve=di(pe),fe=q[ve]=q[ve]||[],Se=pe==null?0:typeof pe=="string"?1:pe.length,Te=0<ge,ve=i(i({},de),{name:Te?"".concat(ve,"(virtual-from:").concat(de.name,")"):de.name,lowLevelIndex:de,isVirtual:Te,keyTail:ge,keyLength:Se,extractKey:$a(pe),unique:!Te&&de.unique});return fe.push(ve),ve.isPrimaryKey||W.push(ve),1<Se&&ne(Se===2?pe[0]:pe.slice(0,Se-1),ge+1,de),fe.sort(function(Oe,qe){return Oe.keyTail-qe.keyTail}),ve}var ie=ne(z.primaryKey.keyPath,0,z.primaryKey);q[":id"]=[ie];for(var ue=0,be=z.indexes;ue<be.length;ue++){var he=be[ue];ne(he.keyPath,0,he)}function ce(pe){var ge,de=pe.query.index;return de.isVirtual?i(i({},pe),{query:{index:de.lowLevelIndex,range:(ge=pe.query.range,de=de.keyTail,{type:ge.type===1?2:ge.type,lower:Ns(ge.lower,ge.lowerOpen?C.MAX_KEY:C.MIN_KEY,de),lowerOpen:!0,upper:Ns(ge.upper,ge.upperOpen?C.MIN_KEY:C.MAX_KEY,de),upperOpen:!0})}}):pe}return i(i({},I),{schema:i(i({},z),{primaryKey:ie,indexes:W,getIndexByKeyPath:function(pe){return(pe=q[di(pe)])&&pe[0]}}),count:function(pe){return I.count(ce(pe))},query:function(pe){return I.query(ce(pe))},openCursor:function(pe){var ge=pe.query.index,de=ge.keyTail,fe=ge.keyLength;return ge.isVirtual?I.openCursor(ce(pe)).then(function(Te){return Te&&Se(Te)}):I.openCursor(pe);function Se(Te){return Object.create(Te,{continue:{value:function(ve){ve!=null?Te.continue(Ns(ve,pe.reverse?C.MAX_KEY:C.MIN_KEY,de)):pe.unique?Te.continue(Te.key.slice(0,fe).concat(pe.reverse?C.MIN_KEY:C.MAX_KEY,de)):Te.continue()}},continuePrimaryKey:{value:function(ve,Oe){Te.continuePrimaryKey(Ns(ve,C.MAX_KEY,de),Oe)}},primaryKey:{get:function(){return Te.primaryKey}},key:{get:function(){var ve=Te.key;return fe===1?ve[0]:ve.slice(0,fe)}},value:{get:function(){return Te.value}}})}}})}})}};function $l(C,k,I,z){return I=I||{},z=z||"",l(C).forEach(function(q){var W,ne,ie;f(k,q)?(W=C[q],ne=k[q],typeof W=="object"&&typeof ne=="object"&&W&&ne?(ie=Q(W))!==Q(ne)?I[z+q]=k[q]:ie==="Object"?$l(W,ne,I,z+q+"."):W!==ne&&(I[z+q]=k[q]):W!==ne&&(I[z+q]=k[q])):I[z+q]=void 0}),l(k).forEach(function(q){f(C,q)||(I[z+q]=k[q])}),I}function Gl(C,k){return k.type==="delete"?k.keys:k.keys||k.values.map(C.extractKey)}var bd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(C){return i(i({},C),{table:function(k){var I=C.table(k),z=I.schema.primaryKey;return i(i({},I),{mutate:function(q){var W=Je.trans,ne=W.table(k).hook,ie=ne.deleting,ue=ne.creating,be=ne.updating;switch(q.type){case"add":if(ue.fire===Le)break;return W._promise("readwrite",function(){return he(q)},!0);case"put":if(ue.fire===Le&&be.fire===Le)break;return W._promise("readwrite",function(){return he(q)},!0);case"delete":if(ie.fire===Le)break;return W._promise("readwrite",function(){return he(q)},!0);case"deleteRange":if(ie.fire===Le)break;return W._promise("readwrite",function(){return(function ce(pe,ge,de){return I.query({trans:pe,values:!1,query:{index:z,range:ge},limit:de}).then(function(fe){var Se=fe.result;return he({type:"delete",keys:Se,trans:pe}).then(function(Te){return 0<Te.numFailures?Promise.reject(Te.failures[0]):Se.length<de?{failures:[],numFailures:0,lastResult:void 0}:ce(pe,i(i({},ge),{lower:Se[Se.length-1],lowerOpen:!0}),de)})})})(q.trans,q.range,1e4)},!0)}return I.mutate(q);function he(ce){var pe,ge,de,fe=Je.trans,Se=ce.keys||Gl(z,ce);if(Se)return(ce=ce.type==="add"||ce.type==="put"?i(i({},ce),{keys:Se}):i({},ce)).type!=="delete"&&(ce.values=r([],ce.values)),ce.keys&&(ce.keys=r([],ce.keys)),pe=I,de=Se,((ge=ce).type==="add"?Promise.resolve([]):pe.getMany({trans:ge.trans,keys:de,cache:"immutable"})).then(function(Te){var ve=Se.map(function(Oe,qe){var et,tt,Ve,ct=Te[qe],rt={onerror:null,onsuccess:null};return ce.type==="delete"?ie.fire.call(rt,Oe,ct,fe):ce.type==="add"||ct===void 0?(et=ue.fire.call(rt,Oe,ce.values[qe],fe),Oe==null&&et!=null&&(ce.keys[qe]=Oe=et,z.outbound||D(ce.values[qe],z.keyPath,Oe))):(et=$l(ct,ce.values[qe]),(tt=be.fire.call(rt,et,Oe,ct,fe))&&(Ve=ce.values[qe],Object.keys(tt).forEach(function(We){f(Ve,We)?Ve[We]=tt[We]:D(Ve,We,tt[We])}))),rt});return I.mutate(ce).then(function(Oe){for(var qe=Oe.failures,et=Oe.results,tt=Oe.numFailures,Oe=Oe.lastResult,Ve=0;Ve<Se.length;++Ve){var ct=(et||Se)[Ve],rt=ve[Ve];ct==null?rt.onerror&&rt.onerror(qe[Ve]):rt.onsuccess&&rt.onsuccess(ce.type==="put"&&Te[Ve]?ce.values[Ve]:ct)}return{failures:qe,results:et,numFailures:tt,lastResult:Oe}}).catch(function(Oe){return ve.forEach(function(qe){return qe.onerror&&qe.onerror(Oe)}),Promise.reject(Oe)})});throw new Error("Keys missing")}}})}})}};function Tu(C,k,I){try{if(!k||k.keys.length<C.length)return null;for(var z=[],q=0,W=0;q<k.keys.length&&W<C.length;++q)At(k.keys[q],C[W])===0&&(z.push(I?H(k.values[q]):k.values[q]),++W);return z.length===C.length?z:null}catch{return null}}var vd={stack:"dbcore",level:-1,create:function(C){return{table:function(k){var I=C.table(k);return i(i({},I),{getMany:function(z){var q;return z.cache?(q=Tu(z.keys,z.trans._cache,z.cache==="clone"))?nt.resolve(q):I.getMany(z).then(function(W){return z.trans._cache={keys:z.keys,values:z.cache==="clone"?H(W):W},W}):I.getMany(z)},mutate:function(z){return z.type!=="add"&&(z.trans._cache=null),I.mutate(z)}})}}}};function la(C,k){return C.trans.mode==="readonly"&&!!C.subscr&&!C.trans.explicit&&C.trans.db._options.cache!=="disabled"&&!k.schema.primaryKey.outbound}function xd(C,k){switch(C){case"query":return k.values&&!k.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Am={stack:"dbcore",level:0,name:"Observability",create:function(C){var k=C.schema.name,I=new Mi(C.MIN_KEY,C.MAX_KEY);return i(i({},C),{transaction:function(z,q,W){if(Je.subscr&&q!=="readonly")throw new xe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Je.querier));return C.transaction(z,q,W)},table:function(z){function q(Se){var fe,Se=Se.query;return[fe=Se.index,new Mi((fe=(Se=Se.range).lower)!=null?fe:C.MIN_KEY,(fe=Se.upper)!=null?fe:C.MAX_KEY)]}var W=C.table(z),ne=W.schema,ie=ne.primaryKey,ue=ne.indexes,be=ie.extractKey,he=ie.outbound,ce=ie.autoIncrement&&ue.filter(function(de){return de.compound&&de.keyPath.includes(ie.keyPath)}),pe=i(i({},W),{mutate:function(de){function fe(ut){return ut="idb://".concat(k,"/").concat(z,"/").concat(ut),qe[ut]||(qe[ut]=new Mi)}var Se,Te,ve,Oe=de.trans,qe=de.mutatedParts||(de.mutatedParts={}),et=fe(""),tt=fe(":dels"),Ve=de.type,rt=de.type==="deleteRange"?[de.range]:de.type==="delete"?[de.keys]:de.values.length<50?[Gl(ie,de).filter(function(ut){return ut}),de.values]:[],ct=rt[0],rt=rt[1],We=de.trans._cache;return o(ct)?(et.addKeys(ct),(Ve=Ve==="delete"||ct.length===rt.length?Tu(ct,We):null)||tt.addKeys(ct),(Ve||rt)&&(Se=fe,Te=Ve,ve=rt,ne.indexes.forEach(function(ut){var Lt=Se(ut.name||"");function tn(Ht){return Ht!=null?ut.extractKey(Ht):null}function vt(Ht){ut.multiEntry&&o(Ht)?Ht.forEach(function(Nn){return Lt.addKey(Nn)}):Lt.addKey(Ht)}(Te||ve).forEach(function(Ht,kn){var Vi=Te&&tn(Te[kn]),kn=ve&&tn(ve[kn]);At(Vi,kn)!==0&&(Vi!=null&&vt(Vi),kn!=null)&&vt(kn)})}))):ct?(rt={from:(We=ct.lower)!=null?We:C.MIN_KEY,to:(Ve=ct.upper)!=null?Ve:C.MAX_KEY},tt.add(rt),et.add(rt)):(et.add(I),tt.add(I),ne.indexes.forEach(function(ut){return fe(ut.name).add(I)})),W.mutate(de).then(function(ut){return!ct||de.type!=="add"&&de.type!=="put"||(et.addKeys(ut.results),ce&&ce.forEach(function(Lt){for(var tn=de.values.map(function(Vi){return Lt.extractKey(Vi)}),vt=Lt.keyPath.findIndex(function(Vi){return Vi===ie.keyPath}),Ht=0,Nn=ut.results.length;Ht<Nn;++Ht)tn[Ht][vt]=ut.results[Ht];fe(Lt.name).addKeys(tn)})),Oe.mutatedParts=Vl(Oe.mutatedParts||{},qe),ut})}}),ge={get:function(de){return[ie,new Mi(de.key)]},getMany:function(de){return[ie,new Mi().addKeys(de.keys)]},count:q,query:q,openCursor:q};return l(ge).forEach(function(de){pe[de]=function(fe){var Se=Je.subscr,Te=!!Se,ve=la(Je,W)&&xd(de,fe)?fe.obsSet={}:Se;if(Te){var Oe,Se=function(rt){return rt="idb://".concat(k,"/").concat(z,"/").concat(rt),ve[rt]||(ve[rt]=new Mi)},qe=Se(""),et=Se(":dels"),Te=ge[de](fe),tt=Te[0],Te=Te[1];if((de==="query"&&tt.isPrimaryKey&&!fe.values?et:Se(tt.name||"")).add(Te),!tt.isPrimaryKey){if(de!=="count")return Oe=de==="query"&&he&&fe.values&&W.query(i(i({},fe),{values:!1})),W[de].apply(this,arguments).then(function(rt){if(de==="query"){if(he&&fe.values)return Oe.then(function(tn){return tn=tn.result,qe.addKeys(tn),rt});var We=fe.values?rt.result.map(be):rt.result;(fe.values?qe:et).addKeys(We)}else{var ut,Lt;if(de==="openCursor")return Lt=fe.values,(ut=rt)&&Object.create(ut,{key:{get:function(){return et.addKey(ut.primaryKey),ut.key}},primaryKey:{get:function(){var tn=ut.primaryKey;return et.addKey(tn),tn}},value:{get:function(){return Lt&&qe.addKey(ut.primaryKey),ut.value}}})}return rt});et.add(I)}}return W[de].apply(this,arguments)}}),pe}})}};function Sd(C,k,I){var z;return I.numFailures===0?k:k.type==="deleteRange"||(z=k.keys?k.keys.length:"values"in k&&k.values?k.values.length:1,I.numFailures===z)?null:(z=i({},k),o(z.keys)&&(z.keys=z.keys.filter(function(q,W){return!(W in I.failures)})),"values"in z&&o(z.values)&&(z.values=z.values.filter(function(q,W){return!(W in I.failures)})),z)}function Kl(C,k){return I=C,((z=k).lower===void 0||(z.lowerOpen?0<At(I,z.lower):0<=At(I,z.lower)))&&(I=C,(z=k).upper===void 0||(z.upperOpen?At(I,z.upper)<0:At(I,z.upper)<=0));var I,z}function ku(C,k,I,z,q,W){var ne,ie,ue,be,he,ce;return!I||I.length===0||(ne=k.query.index,ie=ne.multiEntry,ue=k.query.range,be=z.schema.primaryKey.extractKey,he=ne.extractKey,ce=(ne.lowLevelIndex||ne).extractKey,(z=I.reduce(function(pe,ge){var de=pe,fe=[];if(ge.type==="add"||ge.type==="put")for(var Se=new Mi,Te=ge.values.length-1;0<=Te;--Te){var ve,Oe=ge.values[Te],qe=be(Oe);!Se.hasKey(qe)&&(ve=he(Oe),ie&&o(ve)?ve.some(function(rt){return Kl(rt,ue)}):Kl(ve,ue))&&(Se.addKey(qe),fe.push(Oe))}switch(ge.type){case"add":var et=new Mi().addKeys(k.values?pe.map(function(We){return be(We)}):pe),de=pe.concat(k.values?fe.filter(function(We){return We=be(We),!et.hasKey(We)&&(et.addKey(We),!0)}):fe.map(function(We){return be(We)}).filter(function(We){return!et.hasKey(We)&&(et.addKey(We),!0)}));break;case"put":var tt=new Mi().addKeys(ge.values.map(function(We){return be(We)}));de=pe.filter(function(We){return!tt.hasKey(k.values?be(We):We)}).concat(k.values?fe:fe.map(function(We){return be(We)}));break;case"delete":var Ve=new Mi().addKeys(ge.keys);de=pe.filter(function(We){return!Ve.hasKey(k.values?be(We):We)});break;case"deleteRange":var ct=ge.range;de=pe.filter(function(We){return!Kl(be(We),ct)})}return de},C))===C)?C:(z.sort(function(pe,ge){return At(ce(pe),ce(ge))||At(be(pe),be(ge))}),k.limit&&k.limit<1/0&&(z.length>k.limit?z.length=k.limit:C.length===k.limit&&z.length<k.limit&&(q.dirty=!0)),W?Object.freeze(z):z)}function Ya(C,k){return At(C.lower,k.lower)===0&&At(C.upper,k.upper)===0&&!!C.lowerOpen==!!k.lowerOpen&&!!C.upperOpen==!!k.upperOpen}function Ko(C,k){return((I,z,q,W)=>{if(I===void 0)return z!==void 0?-1:0;if(z===void 0)return 1;if((I=At(I,z))===0){if(q&&W)return 0;if(q)return 1;if(W)return-1}return I})(C.lower,k.lower,C.lowerOpen,k.lowerOpen)<=0&&0<=((I,z,q,W)=>{if(I===void 0)return z!==void 0?1:0;if(z===void 0)return-1;if((I=At(I,z))===0){if(q&&W)return 0;if(q)return-1;if(W)return 1}return I})(C.upper,k.upper,C.upperOpen,k.upperOpen)}function Tm(C,k,I,z){C.subscribers.add(I),z.addEventListener("abort",function(){var q,W;C.subscribers.delete(I),C.subscribers.size===0&&(q=C,W=k,setTimeout(function(){q.subscribers.size===0&&re(W,q)},3e3))})}var Yl={stack:"dbcore",level:0,name:"Cache",create:function(C){var k=C.schema.name;return i(i({},C),{transaction:function(I,z,q){var W,ne,ie=C.transaction(I,z,q);return z==="readwrite"&&(q=(W=new AbortController).signal,ie.addEventListener("abort",(ne=function(ue){return function(){if(W.abort(),z==="readwrite"){for(var be=new Set,he=0,ce=I;he<ce.length;he++){var pe=ce[he],ge=oa["idb://".concat(k,"/").concat(pe)];if(ge){var de=C.table(pe),fe=ge.optimisticOps.filter(function(ut){return ut.trans===ie});if(ie._explicit&&ue&&ie.mutatedParts)for(var Se=0,Te=Object.values(ge.queries.query);Se<Te.length;Se++)for(var ve=0,Oe=(tt=Te[Se]).slice();ve<Oe.length;ve++)wu((Ve=Oe[ve]).obsSet,ie.mutatedParts)&&(re(tt,Ve),Ve.subscribers.forEach(function(ut){return be.add(ut)}));else if(0<fe.length){ge.optimisticOps=ge.optimisticOps.filter(function(ut){return ut.trans!==ie});for(var qe=0,et=Object.values(ge.queries.query);qe<et.length;qe++)for(var tt,Ve,ct,rt=0,We=(tt=et[qe]).slice();rt<We.length;rt++)(Ve=We[rt]).res!=null&&ie.mutatedParts&&(ue&&!Ve.dirty?(ct=Object.isFrozen(Ve.res),ct=ku(Ve.res,Ve.req,fe,de,Ve,ct),Ve.dirty?(re(tt,Ve),Ve.subscribers.forEach(function(ut){return be.add(ut)})):ct!==Ve.res&&(Ve.res=ct,Ve.promise=nt.resolve({result:ct}))):(Ve.dirty&&re(tt,Ve),Ve.subscribers.forEach(function(ut){return be.add(ut)})))}}}be.forEach(function(ut){return ut()})}}})(!1),{signal:q}),ie.addEventListener("error",ne(!1),{signal:q}),ie.addEventListener("complete",ne(!0),{signal:q})),ie},table:function(I){var z=C.table(I),q=z.schema.primaryKey;return i(i({},z),{mutate:function(W){var ne,ie=Je.trans;return!q.outbound&&ie.db._options.cache!=="disabled"&&!ie.explicit&&ie.idbtrans.mode==="readwrite"&&(ne=oa["idb://".concat(k,"/").concat(I)])?(ie=z.mutate(W),W.type!=="add"&&W.type!=="put"||!(50<=W.values.length||Gl(q,W).some(function(ue){return ue==null}))?(ne.optimisticOps.push(W),W.mutatedParts&&Wl(W.mutatedParts),ie.then(function(ue){0<ue.numFailures&&(re(ne.optimisticOps,W),(ue=Sd(0,W,ue))&&ne.optimisticOps.push(ue),W.mutatedParts)&&Wl(W.mutatedParts)}),ie.catch(function(){re(ne.optimisticOps,W),W.mutatedParts&&Wl(W.mutatedParts)})):ie.then(function(ue){var be=Sd(0,i(i({},W),{values:W.values.map(function(he,ce){var pe;return ue.failures[ce]?he:(D(pe=(pe=q.keyPath)!=null&&pe.includes(".")?H(he):i({},he),q.keyPath,ue.results[ce]),pe)})}),ue);ne.optimisticOps.push(be),queueMicrotask(function(){return W.mutatedParts&&Wl(W.mutatedParts)})}),ie):z.mutate(W)},query:function(W){var ne,ie,ue,be,he,ce,pe;return la(Je,z)&&xd("query",W)?(ne=((ue=Je.trans)==null?void 0:ue.db._options.cache)==="immutable",ie=(ue=Je).requery,ue=ue.signal,ce=((ge,de,fe,Se)=>{var Te=oa["idb://".concat(ge,"/").concat(de)];if(!Te)return[];if(!(ge=Te.queries[fe]))return[null,!1,Te,null];var ve=ge[(Se.query?Se.query.index.name:null)||""];if(!ve)return[null,!1,Te,null];switch(fe){case"query":var Oe=ve.find(function(qe){return qe.req.limit===Se.limit&&qe.req.values===Se.values&&Ya(qe.req.query.range,Se.query.range)});return Oe?[Oe,!0,Te,ve]:[ve.find(function(qe){return("limit"in qe.req?qe.req.limit:1/0)>=Se.limit&&(!Se.values||qe.req.values)&&Ko(qe.req.query.range,Se.query.range)}),!1,Te,ve];case"count":return Oe=ve.find(function(qe){return Ya(qe.req.query.range,Se.query.range)}),[Oe,!!Oe,Te,ve]}})(k,I,"query",W),pe=ce[0],be=ce[2],he=ce[3],pe&&ce[1]?pe.obsSet=W.obsSet:(ce=z.query(W).then(function(ge){var de=ge.result;if(pe&&(pe.res=de),ne){for(var fe=0,Se=de.length;fe<Se;++fe)Object.freeze(de[fe]);Object.freeze(de)}else ge.result=H(de);return ge}).catch(function(ge){return he&&pe&&re(he,pe),Promise.reject(ge)}),pe={obsSet:W.obsSet,promise:ce,subscribers:new Set,type:"query",req:W,dirty:!1},he?he.push(pe):(he=[pe],(be=be||(oa["idb://".concat(k,"/").concat(I)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[W.query.index.name||""]=he)),Tm(pe,he,ie,ue),pe.promise.then(function(ge){return{result:ku(ge.result,W,be?.optimisticOps,z,pe,ne)}})):z.query(W)}})}})}};function Yo(C,k){return new Proxy(C,{get:function(I,z,q){return z==="db"?k:Reflect.get(I,z,q)}})}Vn.prototype.version=function(C){if(isNaN(C)||C<.1)throw new xe.Type("Given version is not a positive number");if(C=Math.round(10*C)/10,this.idbdb||this._state.isBeingOpened)throw new xe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,C);var k=this._versions,I=k.filter(function(z){return z._cfg.version===C})[0];return I||(I=new this.Version(C),k.push(I),k.sort(yu),I.stores({}),this._state.autoSchema=!1),I},Vn.prototype._whenReady=function(C){var k=this;return this.idbdb&&(this._state.openComplete||Je.letThrough||this._vip)?C():new nt(function(I,z){if(k._state.openComplete)return z(new xe.DatabaseClosed(k._state.dbOpenError));if(!k._state.isBeingOpened){if(!k._state.autoOpen)return void z(new xe.DatabaseClosed);k.open().catch(Le)}k._state.dbReadyPromise.then(I,z)}).then(C)},Vn.prototype.use=function(q){var k=q.stack,I=q.create,z=q.level,q=q.name,W=(q&&this.unuse({stack:k,name:q}),this._middlewares[k]||(this._middlewares[k]=[]));return W.push({stack:k,create:I,level:z??10,name:q}),W.sort(function(ne,ie){return ne.level-ie.level}),this},Vn.prototype.unuse=function(C){var k=C.stack,I=C.name,z=C.create;return k&&this._middlewares[k]&&(this._middlewares[k]=this._middlewares[k].filter(function(q){return z?q.create!==z:!!I&&q.name!==I})),this},Vn.prototype.open=function(){var C=this;return Qi(qn,function(){return Em(C)})},Vn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var C=this._state,k=ss.indexOf(this);if(0<=k&&ss.splice(k,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}C.isBeingOpened||(C.dbReadyPromise=new nt(function(I){C.dbReadyResolve=I}),C.openCanceller=new nt(function(I,z){C.cancelOpen=z}))},Vn.prototype.close=function(k){var k=(k===void 0?{disableAutoOpen:!0}:k).disableAutoOpen,I=this._state;k?(I.isBeingOpened&&I.cancelOpen(new xe.DatabaseClosed),this._close(),I.autoOpen=!1,I.dbOpenError=new xe.DatabaseClosed):(this._close(),I.autoOpen=this._options.autoOpen||I.isBeingOpened,I.openComplete=!1,I.dbOpenError=null)},Vn.prototype.delete=function(C){var k=this,I=(C===void 0&&(C={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),z=this._state;return new nt(function(q,W){function ne(){k.close(C);var ie=k._deps.indexedDB.deleteDatabase(k.name);ie.onsuccess=at(function(){var ue,be,he;ue=k._deps,be=k.name,Hl(he=ue.indexedDB)||be===Ur||bu(he,ue.IDBKeyRange).delete(be).catch(Le),q()}),ie.onerror=ei(W),ie.onblocked=k._fireOnBlocked}if(I)throw new xe.InvalidArgument("Invalid closeOptions argument to db.delete()");z.isBeingOpened?z.dbReadyPromise.then(ne):ne()})},Vn.prototype.backendDB=function(){return this.idbdb},Vn.prototype.isOpen=function(){return this.idbdb!==null},Vn.prototype.hasBeenClosed=function(){var C=this._state.dbOpenError;return C&&C.name==="DatabaseClosed"},Vn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Vn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Vn.prototype,"tables",{get:function(){var C=this;return l(this._allTables).map(function(k){return C._allTables[k]})},enumerable:!1,configurable:!0}),Vn.prototype.transaction=function(){var C=(function(k,I,z){var q=arguments.length;if(q<2)throw new xe.InvalidArgument("Too few arguments");for(var W=new Array(q-1);--q;)W[q-1]=arguments[q];return z=W.pop(),[k,j(W),z]}).apply(this,arguments);return this._transaction.apply(this,C)},Vn.prototype._transaction=function(C,k,I){var z,q,W=this,ne=Je.trans,ie=(ne&&ne.db===this&&C.indexOf("!")===-1||(ne=null),C.indexOf("?")!==-1);C=C.replace("!","").replace("?","");try{if(q=k.map(function(be){if(be=be instanceof W.Table?be.name:be,typeof be!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return be}),C=="r"||C===vr)z=vr;else{if(C!="rw"&&C!=Ge)throw new xe.InvalidArgument("Invalid transaction mode: "+C);z=Ge}if(ne){if(ne.mode===vr&&z===Ge){if(!ie)throw new xe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ne=null}ne&&q.forEach(function(be){if(ne&&ne.storeNames.indexOf(be)===-1){if(!ie)throw new xe.SubTransaction("Table "+be+" not included in parent transaction.");ne=null}}),ie&&ne&&!ne.active&&(ne=null)}}catch(be){return ne?ne._promise(null,function(he,ce){ce(be)}):En(be)}var ue=(function be(he,ce,pe,ge,de){return nt.resolve().then(function(){var ve=Je.transless||Je,fe=he._createTransaction(ce,pe,he._dbSchema,ge),ve=(fe.explicit=!0,{trans:fe,transless:ve});if(ge)fe.idbtrans=ge.idbtrans;else try{fe.create(),fe.idbtrans._explicit=!0,he._state.PR1398_maxLoop=3}catch(Oe){return Oe.name===ee.InvalidState&&he.isOpen()&&0<--he._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),he.close({disableAutoOpen:!1}),he.open().then(function(){return be(he,ce,pe,null,de)})):En(Oe)}var Se,Te=P(de),ve=(Te&&Jn(),nt.follow(function(){var Oe;(Se=de.call(fe,fe))&&(Te?(Oe=Di.bind(null,null),Se.then(Oe,Oe)):typeof Se.next=="function"&&typeof Se.throw=="function"&&(Se=Go(Se)))},ve));return(Se&&typeof Se.then=="function"?nt.resolve(Se).then(function(Oe){return fe.active?Oe:En(new xe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ve.then(function(){return Se})).then(function(Oe){return ge&&fe._resolve(),fe._completion.then(function(){return Oe})}).catch(function(Oe){return fe._reject(Oe),En(Oe)})})}).bind(null,this,z,q,ne,I);return ne?ne._promise(z,ue,"lock"):Je.trans?Qi(Je.transless,function(){return W._whenReady(ue)}):this._whenReady(ue)},Vn.prototype.table=function(C){if(f(this._allTables,C))return this._allTables[C];throw new xe.InvalidTable("Table ".concat(C," does not exist"))};var qr=Vn;function Vn(C,k){var I,z,q,W,ne,ie=this,ue=(this._middlewares={},this.verno=0,Vn.dependencies),ue=(this._options=k=i({addons:Vn.addons,autoOpen:!0,indexedDB:ue.indexedDB,IDBKeyRange:ue.IDBKeyRange,cache:"cloned"},k),this._deps={indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange},k.addons),be=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:k.autoOpen}),he=(be.dbReadyPromise=new nt(function(ce){be.dbReadyResolve=ce}),be.openCanceller=new nt(function(ce,pe){be.cancelOpen=pe}),this._state=be,this.name=C,this.on=ia(this,"populate","blocked","versionchange","close",{ready:[bt,Le]}),this.once=function(ce,pe){var ge=function(){for(var de=[],fe=0;fe<arguments.length;fe++)de[fe]=arguments[fe];ie.on(ce).unsubscribe(ge),pe.apply(ie,de)};return ie.on(ce,ge)},this.on.ready.subscribe=_(this.on.ready.subscribe,function(ce){return function(pe,ge){Vn.vip(function(){var de,fe=ie._state;fe.openComplete?(fe.dbOpenError||nt.resolve().then(pe),ge&&ce(pe)):fe.onReadyBeingFired?(fe.onReadyBeingFired.push(pe),ge&&ce(pe)):(ce(pe),de=ie,ge||ce(function Se(){de.on.ready.unsubscribe(pe),de.on.ready.unsubscribe(Se)}))})}}),this.Collection=(I=this,hi(Il.prototype,function(Se,fe){this.db=I;var ge=Yt,de=null;if(fe)try{ge=fe()}catch(ve){de=ve}var fe=Se._ctx,Se=fe.table,Te=Se.hook.reading.fire;this._ctx={table:Se,index:fe.index,isPrimKey:!fe.index||Se.schema.primKey.keyPath&&fe.index===Se.schema.primKey.name,range:ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:de,or:fe.or,valueMapper:Te!==_t?Te:null}})),this.Table=(z=this,hi(qa.prototype,function(ce,pe,ge){this.db=z,this._tx=ge,this.name=ce,this.schema=pe,this.hook=z._allTables[ce]?z._allTables[ce].hook:ia(null,{creating:[ze,Le],reading:[Pe,_t],updating:[st,Le],deleting:[Ue,Le]})})),this.Transaction=(q=this,hi(gu.prototype,function(ce,pe,ge,de,fe){var Se=this;ce!=="readonly"&&pe.forEach(function(Te){Te=(Te=ge[Te])==null?void 0:Te.yProps,Te&&(pe=pe.concat(Te.map(function(ve){return ve.updatesTable})))}),this.db=q,this.mode=ce,this.storeNames=pe,this.schema=ge,this.chromeTransactionDurability=de,this.idbtrans=null,this.on=ia(this,"complete","error","abort"),this.parent=fe||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new nt(function(Te,ve){Se._resolve=Te,Se._reject=ve}),this._completion.then(function(){Se.active=!1,Se.on.complete.fire()},function(Te){var ve=Se.active;return Se.active=!1,Se.on.error.fire(Te),Se.parent?Se.parent._reject(Te):ve&&Se.idbtrans&&Se.idbtrans.abort(),En(Te)})})),this.Version=(W=this,hi(wm.prototype,function(ce){this.db=W,this._cfg={version:ce,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ne=this,hi(en.prototype,function(ce,pe,ge){if(this.db=ne,this._ctx={table:ce,index:pe===":id"?null:pe,or:ge},this._cmp=this._ascending=At,this._descending=function(de,fe){return At(fe,de)},this._max=function(de,fe){return 0<At(de,fe)?de:fe},this._min=function(de,fe){return At(de,fe)<0?de:fe},this._IDBKeyRange=ne._deps.IDBKeyRange,!this._IDBKeyRange)throw new xe.MissingAPI})),this.on("versionchange",function(ce){0<ce.newVersion?console.warn("Another connection wants to upgrade database '".concat(ie.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(ie.name,"'. Closing db now to resume the delete request.")),ie.close({disableAutoOpen:!1})}),this.on("blocked",function(ce){!ce.newVersion||ce.newVersion<ce.oldVersion?console.warn("Dexie.delete('".concat(ie.name,"') was blocked")):console.warn("Upgrade '".concat(ie.name,"' blocked by other connection holding version ").concat(ce.oldVersion/10))}),this._maxKey=Wa(k.IDBKeyRange),this._createTransaction=function(ce,pe,ge,de){return new ie.Transaction(ce,pe,ge,ie._options.chromeTransactionDurability,de)},this._fireOnBlocked=function(ce){ie.on("blocked").fire(ce),ss.filter(function(pe){return pe.name===ie.name&&pe!==ie&&!pe._state.vcFired}).map(function(pe){return pe.on("versionchange").fire(ce)})},this.use(vd),this.use(Yl),this.use(Am),this.use(Cm),this.use(bd),new Proxy(this,{get:function(ce,pe,ge){var de;return pe==="_vip"||(pe==="table"?function(fe){return Yo(ie.table(fe),he)}:(de=Reflect.get(ce,pe,ge))instanceof qa?Yo(de,he):pe==="tables"?de.map(function(fe){return Yo(fe,he)}):pe==="_createTransaction"?function(){return Yo(de.apply(this,arguments),he)}:de)}}));this.vip=he,ue.forEach(function(ce){return ce(ie)})}var Xa,ca=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wd=(Xl.prototype.subscribe=function(C,k,I){return this._subscribe(C&&typeof C!="function"?C:{next:C,error:k,complete:I})},Xl.prototype[ca]=function(){return this},Xl);function Xl(C){this._subscribe=C}try{Xa={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Xa={indexedDB:null,IDBKeyRange:null}}function Ed(C){var k,I=!1,z=new wd(function(q){var W=P(C),ne,ie=!1,ue={},be={},he={get closed(){return ie},unsubscribe:function(){ie||(ie=!0,ne&&ne.abort(),ce&&ki.storagemutated.unsubscribe(ge))}},ce=(q.start&&q.start(he),!1),pe=function(){return xi(de)},ge=function(fe){Vl(ue,fe),wu(be,ue)&&pe()},de=function(){var fe,Se,Te;!ie&&Xa.indexedDB&&(ue={},fe={},ne&&ne.abort(),ne=new AbortController,Te=(ve=>{var Oe=gn();try{W&&Jn();var qe=Tn(C,ve);return qe=W?qe.finally(Di):qe}finally{Oe&&hn()}})(Se={subscr:fe,signal:ne.signal,requery:pe,querier:C,trans:null}),Promise.resolve(Te).then(function(ve){I=!0,k=ve,ie||Se.signal.aborted||(ue={},(Oe=>{for(var qe in Oe)if(f(Oe,qe))return;return 1})(be=fe)||ce||(ki(Rs,ge),ce=!0),xi(function(){return!ie&&q.next&&q.next(ve)}))},function(ve){I=!1,["DatabaseClosedError","AbortError"].includes(ve?.name)||ie||xi(function(){ie||q.error&&q.error(ve)})}))};return setTimeout(pe,0),he});return z.hasValue=function(){return I},z.getValue=function(){return k},z}var ua=qr;function Mu(C){var k=Ds;try{Ds=!0,ki.storagemutated.fire(C),Au(C,!0)}finally{Ds=k}}m(ua,i(i({},Z),{delete:function(C){return new ua(C,{addons:[]}).delete()},exists:function(C){return new ua(C,{addons:[]}).open().then(function(k){return k.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(C){try{return k=ua.dependencies,I=k.indexedDB,k=k.IDBKeyRange,(Hl(I)?Promise.resolve(I.databases()).then(function(z){return z.map(function(q){return q.name}).filter(function(q){return q!==Ur})}):bu(I,k).toCollection().primaryKeys()).then(C)}catch{return En(new xe.MissingAPI)}var k,I},defineClass:function(){return function(C){u(this,C)}},ignoreTransaction:function(C){return Je.trans?Qi(Je.transless,C):C()},vip:vu,async:function(C){return function(){try{var k=Go(C.apply(this,arguments));return k&&typeof k.then=="function"?k:nt.resolve(k)}catch(I){return En(I)}}},spawn:function(C,k,I){try{var z=Go(C.apply(I,k||[]));return z&&typeof z.then=="function"?z:nt.resolve(z)}catch(q){return En(q)}},currentTransaction:{get:function(){return Je.trans||null}},waitFor:function(C,k){return C=nt.resolve(typeof C=="function"?ua.ignoreTransaction(C):C).timeout(k||6e4),Je.trans?Je.trans.waitFor(C):C},Promise:nt,debug:{get:function(){return Dt},set:function(C){rn(C)}},derive:w,extend:u,props:m,override:_,Events:ia,on:ki,liveQuery:Ed,extendObservabilitySet:Vl,getByKeyPath:M,setByKeyPath:D,delByKeyPath:function(C,k){typeof k=="string"?D(C,k,void 0):"length"in k&&[].map.call(k,function(I){D(C,I,void 0)})},shallowClone:O,deepClone:H,getObjectDiff:$l,cmp:At,asap:R,minKey:-1/0,addons:[],connections:ss,errnames:ee,dependencies:Xa,cache:oa,semVer:"4.3.0",version:"4.3.0".split(".").map(function(C){return parseInt(C)}).reduce(function(C,k,I){return C+k/Math.pow(10,2*I)})})),ua.maxKey=Wa(ua.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ki(Rs,function(C){Ds||(C=new CustomEvent(ra,{detail:C}),Ds=!0,dispatchEvent(C),Ds=!1)}),addEventListener(ra,function(C){C=C.detail,Ds||Mu(C)}));var Za,Ds=!1,qi=function(){};return typeof BroadcastChannel<"u"&&((qi=function(){(Za=new BroadcastChannel(ra)).onmessage=function(C){return C.data&&Mu(C.data)}})(),typeof Za.unref=="function"&&Za.unref(),ki(Rs,function(C){Ds||Za.postMessage(C)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(C){if(!qr.disableBfCache&&C.persisted){Dt&&console.debug("Dexie: handling persisted pagehide"),Za?.close();for(var k=0,I=ss;k<I.length;k++)I[k].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(C){!qr.disableBfCache&&C.persisted&&(Dt&&console.debug("Dexie: handling persisted pageshow"),qi(),Mu({all:new Mi(-1/0,[[]])}))})),nt.rejectionMapper=function(C,k){return!C||C instanceof _e||C instanceof TypeError||C instanceof SyntaxError||!C.name||!Ze[C.name]?C:(k=new Ze[C.name](k||C.message,C),"stack"in C&&x(k,"stack",{get:function(){return this.inner.stack}}),k)},rn(Dt),i(qr,Object.freeze({__proto__:null,Dexie:qr,Entity:Kn,PropModification:Si,RangeSet:Mi,add:function(C){return new Si({add:C})},cmp:At,default:qr,liveQuery:Ed,mergeRanges:aa,rangesOverlap:gd,remove:function(C){return new Si({remove:C})},replacePrefix:function(C,k){return new Si({replacePrefix:[C,k]})}}),{default:qr}),qr})})(Mp)),Mp.exports}var cO=lO();const J_=nd(cO),SS=Symbol.for("Dexie"),zp=globalThis[SS]||(globalThis[SS]=J_);if(J_.semVer!==zp.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${J_.semVer} and ${zp.semVer}`);const{liveQuery:BV,mergeRanges:zV,rangesOverlap:PV,RangeSet:FV,cmp:UV,Entity:jV,PropModification:HV,replacePrefix:qV,add:VV,remove:WV,DexieYProvider:$V}=zp;class uO extends zp{sessions;prompts;responses;toolCalls;events;notes;promptQueue;alerts;sshProfiles;settings;summaryPrompts;teams;constructor(){super("claude-dashboard"),this.version(2).stores({sessions:"id, status, projectPath, startedAt, lastActivityAt, archived",prompts:"++id, sessionId, timestamp, [sessionId+timestamp]",responses:"++id, sessionId, timestamp, [sessionId+timestamp]",toolCalls:"++id, sessionId, timestamp, toolName, [sessionId+timestamp]",events:"++id, sessionId, timestamp, [sessionId+timestamp]",notes:"++id, sessionId",promptQueue:"++id, sessionId, [sessionId+position]",alerts:"++id, sessionId",sshProfiles:"++id, name",settings:"key",summaryPrompts:"++id, isDefault",teams:"id"})}}const Wt=new uO;async function wS(n){if(!n?.sessionId)return;const e={id:n.sessionId,projectPath:n.projectPath||"",projectName:n.projectName||"Unknown",title:n.title||"",status:n.status||"idle",model:n.model||"",source:typeof n.source=="string"?n.source:"hook",startedAt:n.startedAt||Date.now(),lastActivityAt:n.lastActivityAt||Date.now(),endedAt:n.endedAt??null,totalToolCalls:n.totalToolCalls||0,totalPrompts:n.promptHistory?.length||0,archived:n.archived||0,summary:n.summary??null,characterModel:n.characterModel??null,accentColor:n.accentColor??null,teamId:n.teamId??null,teamRole:n.teamRole??null,terminalId:n.terminalId??null,queueCount:n.queueCount||0,label:n.label??null};if(await Wt.sessions.put(e),n.promptHistory?.length){const t=await Wt.prompts.where("sessionId").equals(n.sessionId).toArray(),i=new Set(t.map(a=>a.timestamp)),r=n.promptHistory.filter(a=>!i.has(a.timestamp)).map(a=>({sessionId:n.sessionId,text:a.text,timestamp:a.timestamp}));r.length>0&&await Wt.prompts.bulkAdd(r)}if(n.toolLog?.length){const t=await Wt.toolCalls.where("sessionId").equals(n.sessionId).toArray(),i=new Set(t.map(a=>a.timestamp)),r=n.toolLog.filter(a=>!i.has(a.timestamp)).map(a=>({sessionId:n.sessionId,toolName:a.tool,toolInputSummary:a.input,timestamp:a.timestamp}));r.length>0&&await Wt.toolCalls.bulkAdd(r)}if(n.responseLog?.length){const t=await Wt.responses.where("sessionId").equals(n.sessionId).toArray(),i=new Set(t.map(a=>a.timestamp)),r=n.responseLog.filter(a=>!i.has(a.timestamp)).map(a=>({sessionId:n.sessionId,textExcerpt:a.text,timestamp:a.timestamp}));r.length>0&&await Wt.responses.bulkAdd(r)}if(n.events?.length){const t=await Wt.events.where("sessionId").equals(n.sessionId).toArray(),i=new Set(t.map(a=>a.timestamp)),r=n.events.filter(a=>!i.has(a.timestamp)).map(a=>({sessionId:n.sessionId,eventType:a.type,detail:a.detail||"",timestamp:a.timestamp}));r.length>0&&await Wt.events.bulkAdd(r)}}const FC=["prompts","responses","toolCalls","events","notes","promptQueue","alerts"];async function hO(n,e){for(const t of FC){const i=Wt.table(t),r=await i.where("sessionId").equals(n).toArray();r.length!==0&&await Wt.transaction("rw",i,async()=>{for(const a of r)await i.update(a.id,{sessionId:e})})}}async function dO(n){await Wt.sessions.delete(n);for(const e of FC){const t=Wt.table(e),r=(await t.where("sessionId").equals(n).toArray()).map(a=>a.id).filter(a=>a!=null);r.length>0&&await t.bulkDelete(r)}}const ES={sessionStart:"chime",sessionEnd:"cascade",promptSubmit:"ping",taskComplete:"fanfare",toolRead:"click",toolWrite:"blip",toolEdit:"blip",toolBash:"buzz",toolGrep:"click",toolGlob:"click",toolWebFetch:"swoosh",toolTask:"ding",toolOther:"click",approvalNeeded:"alarm",inputNeeded:"chime",alert:"alarm",kill:"thud",archive:"ding",subagentStart:"chirp",subagentStop:"ping"},fO={sessionStart:"Session Start",sessionEnd:"Session End",promptSubmit:"Prompt Submit",taskComplete:"Task Complete",toolRead:"Tool: Read",toolWrite:"Tool: Write",toolEdit:"Tool: Edit",toolBash:"Tool: Bash",toolGrep:"Tool: Grep",toolGlob:"Tool: Glob",toolWebFetch:"Tool: WebFetch",toolTask:"Tool: Task",toolOther:"Tool: Other",approvalNeeded:"Approval Needed",inputNeeded:"Input Needed",alert:"Alert",kill:"Kill",archive:"Archive",subagentStart:"Subagent Start",subagentStop:"Subagent Stop"},pO=[{label:"Session Events",actions:["sessionStart","sessionEnd","promptSubmit","taskComplete"]},{label:"Tool Calls",actions:["toolRead","toolWrite","toolEdit","toolBash","toolGrep","toolGlob","toolWebFetch","toolTask","toolOther"]},{label:"System",actions:["approvalNeeded","inputNeeded","alert","kill","archive","subagentStart","subagentStop"]}];class mO{ctx=null;unlocked=!1;volume=.5;actionOverrides={};getCtx(){return this.ctx||(this.ctx=new AudioContext),this.ctx.state==="suspended"&&this.ctx.resume().catch(()=>{}),this.ctx}playTone(e,t,i="sine",r=1){const a=this.getCtx(),l=a.createOscillator(),o=a.createGain();l.type=i,l.frequency.setValueAtTime(e,a.currentTime),o.gain.setValueAtTime(r*this.volume*.3,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+t),l.connect(o),o.connect(a.destination),l.start(a.currentTime),l.stop(a.currentTime+t)}playSequence(e,t=.1,i=.15,r="sine"){e.forEach((a,l)=>{setTimeout(()=>this.playTone(a,i,r),l*t*1e3)})}sounds={chirp:()=>this.playTone(1200,.08,"sine"),ping:()=>this.playTone(660,.2,"sine"),chime:()=>this.playSequence([523,659,784],.08,.2),ding:()=>this.playTone(800,.25,"triangle"),blip:()=>this.playTone(880,.05,"square",.5),swoosh:()=>{const e=this.getCtx(),t=e.createOscillator(),i=e.createGain();t.type="sine",t.frequency.setValueAtTime(300,e.currentTime),t.frequency.exponentialRampToValueAtTime(1200,e.currentTime+.25),i.gain.setValueAtTime(this.volume*.25,e.currentTime),i.gain.exponentialRampToValueAtTime(.001,e.currentTime+.3),t.connect(i),i.connect(e.destination),t.start(e.currentTime),t.stop(e.currentTime+.3)},click:()=>this.playTone(1200,.03,"square",.2),beep:()=>this.playTone(440,.15,"square",.4),warble:()=>{const e=this.getCtx(),t=e.createOscillator(),i=e.createOscillator(),r=e.createGain(),a=e.createGain();t.type="sine",t.frequency.setValueAtTime(600,e.currentTime),i.type="sine",i.frequency.setValueAtTime(12,e.currentTime),r.gain.setValueAtTime(50,e.currentTime),i.connect(r),r.connect(t.frequency),a.gain.setValueAtTime(this.volume*.25,e.currentTime),a.gain.exponentialRampToValueAtTime(.001,e.currentTime+.3),t.connect(a),a.connect(e.destination),t.start(e.currentTime),i.start(e.currentTime),t.stop(e.currentTime+.3),i.stop(e.currentTime+.3)},buzz:()=>this.playTone(200,.12,"sawtooth",.4),cascade:()=>this.playSequence([784,659,523,392],.1,.2),fanfare:()=>this.playSequence([523,659,784,1047,1319],.08,.2),alarm:()=>this.playSequence([880,660,880,660],.15,.15,"square"),thud:()=>{const e=this.getCtx(),t=e.createOscillator(),i=e.createGain();t.type="sine",t.frequency.setValueAtTime(80,e.currentTime),t.frequency.exponentialRampToValueAtTime(30,e.currentTime+.3),i.gain.setValueAtTime(this.volume*.5,e.currentTime),i.gain.exponentialRampToValueAtTime(.001,e.currentTime+.35),t.connect(i),i.connect(e.destination),t.start(e.currentTime),t.stop(e.currentTime+.35)},urgentAlarm:()=>{const e=this.getCtx(),t=e.currentTime;for(let i=0;i<3;i++){const r=i*.4,a=e.createOscillator(),l=e.createGain();a.type="square",a.frequency.setValueAtTime(1e3,t+r),a.frequency.setValueAtTime(800,t+r+.1),a.frequency.setValueAtTime(1e3,t+r+.2),l.gain.setValueAtTime(this.volume*.5,t+r),l.gain.setValueAtTime(this.volume*.5,t+r+.25),l.gain.exponentialRampToValueAtTime(.001,t+r+.3),a.connect(l),l.connect(e.destination),a.start(t+r),a.stop(t+r+.3);const o=e.createOscillator(),u=e.createGain();o.type="sawtooth",o.frequency.setValueAtTime(200,t+r),u.gain.setValueAtTime(this.volume*.3,t+r),u.gain.exponentialRampToValueAtTime(.001,t+r+.3),o.connect(u),u.connect(e.destination),o.start(t+r),o.stop(t+r+.3)}},none:()=>{}};unlock(){this.unlocked=!0,this.ctx?.state==="suspended"&&this.ctx.resume().catch(()=>{})}isUnlocked(){return this.unlocked}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}getVolume(){return this.volume}setActionSound(e,t){this.actionOverrides={...this.actionOverrides,[e]:t}}getActionSound(e){return this.actionOverrides[e]??ES[e]??"none"}getActionSounds(){return{...ES,...this.actionOverrides}}loadOverrides(e){this.actionOverrides={...e}}getSoundNames(){return Object.keys(this.sounds)}play(e){if(!this.unlocked)return!1;const t=this.getActionSound(e),i=this.sounds[t];return i&&i(),t!=="none"}preview(e){const t=this.sounds[e];t&&t()}dispose(){this.ctx&&(this.ctx.close().catch(()=>{}),this.ctx=null),this.unlocked=!1}}const _s=new mO,gO=[{name:"command-center",label:"Command Center",colors:["#0a0a1a","#00e5ff","#ff9100"]},{name:"cyberpunk",label:"Cyberpunk",colors:["#0d0221","#ff00ff","#00ffff"]},{name:"warm",label:"Warm",colors:["#faf6f1","#d97706","#b87333"]},{name:"dracula",label:"Dracula",colors:["#282a36","#bd93f9","#50fa7b"]},{name:"solarized",label:"Solarized",colors:["#002b36","#2aa198","#cb4b16"]},{name:"nord",label:"Nord",colors:["#2e3440","#88c0d0","#d08770"]},{name:"monokai",label:"Monokai",colors:["#272822","#66d9ef","#f92672"]},{name:"light",label:"Light",colors:["#f0f2f5","#0ea5e9","#3b82f6"]},{name:"blonde",label:"Blonde",colors:["#fdf8ef","#ca8a04","#a16207"]}],Af={claude:{enabled:!0,volume:.7,actions:{sessionStart:"chime",sessionEnd:"cascade",promptSubmit:"ping",taskComplete:"fanfare",toolRead:"click",toolWrite:"blip",toolEdit:"blip",toolBash:"click",toolGrep:"click",toolGlob:"click",toolWebFetch:"ping",toolTask:"chime",toolOther:"click",approvalNeeded:"alarm",inputNeeded:"chime",alert:"alarm",kill:"thud",archive:"ping",subagentStart:"chirp",subagentStop:"ping"}},gemini:{enabled:!0,volume:.7,actions:{sessionStart:"ding",sessionEnd:"cascade",promptSubmit:"chirp",taskComplete:"fanfare",toolRead:"click",toolWrite:"swoosh",toolEdit:"swoosh",toolBash:"ding",toolGrep:"click",toolGlob:"click",toolWebFetch:"swoosh",toolTask:"ding",toolOther:"chirp",approvalNeeded:"alarm",inputNeeded:"ding",alert:"alarm",kill:"thud",archive:"swoosh",subagentStart:"chirp",subagentStop:"ding"}},codex:{enabled:!0,volume:.5,actions:{sessionStart:"blip",sessionEnd:"beep",promptSubmit:"click",taskComplete:"blip",toolRead:"click",toolWrite:"blip",toolEdit:"blip",toolBash:"beep",toolGrep:"click",toolGlob:"click",toolWebFetch:"click",toolTask:"beep",toolOther:"click",approvalNeeded:"alarm",inputNeeded:"beep",alert:"alarm",kill:"thud",archive:"click",subagentStart:"blip",subagentStop:"beep"}},openclaw:{enabled:!0,volume:.7,actions:{sessionStart:"fanfare",sessionEnd:"cascade",promptSubmit:"buzz",taskComplete:"fanfare",toolRead:"click",toolWrite:"buzz",toolEdit:"buzz",toolBash:"buzz",toolGrep:"click",toolGlob:"click",toolWebFetch:"swoosh",toolTask:"buzz",toolOther:"buzz",approvalNeeded:"urgentAlarm",inputNeeded:"fanfare",alert:"urgentAlarm",kill:"thud",archive:"cascade",subagentStart:"fanfare",subagentStop:"cascade"}}},yO={enabled:!1,volume:.3,preset:"off",roomSounds:!1,roomVolume:.2},So={soundSettings:{enabled:!0,volume:.5,muteApproval:!1,muteInput:!1,perCli:{claude:{...Af.claude},gemini:{...Af.gemini},codex:{...Af.codex},openclaw:{...Af.openclaw}}},ambientSettings:{...yO},labelAlarms:{labels:[],soundEnabled:!0},theme:"dark",compactMode:!1,showArchived:!1,groupBy:"none",sortBy:"activity",themeName:"command-center",fontSize:13,scanlineEnabled:!0,animationIntensity:100,animationSpeed:100,characterModel:"robot",soundActions:{},movementActions:{},hookDensity:"medium",scene3dEnabled:!0,activityFeedVisible:!0,toastEnabled:!0,autoSendQueue:!1,defaultTerminalTheme:"auto",anthropicApiKey:"",openaiApiKey:"",geminiApiKey:"",autosaveVisible:!1};function Sy(n){n==="command-center"?document.body.removeAttribute("data-theme"):document.body.setAttribute("data-theme",n)}function wy(n){document.documentElement.style.fontSize=n+"px"}function Ey(n){document.body.classList.toggle("no-scanlines",!n)}function Cy(n){document.documentElement.style.setProperty("--anim-intensity",String(n/100))}function Ay(n){document.documentElement.style.setProperty("--anim-speed",String(n/100))}const Vt=kl((n,e)=>({...So,loadFromDb:t=>{n({...t});const i=e();Sy(i.themeName),wy(i.fontSize),Ey(i.scanlineEnabled),Cy(i.animationIntensity),Ay(i.animationSpeed)},saveToDb:()=>({...e()}),updateSoundSettings:t=>{n(i=>({soundSettings:{...i.soundSettings,...t}})),e().persistSetting("soundSettings",JSON.stringify(e().soundSettings))},updateCliSoundConfig:(t,i)=>{n(r=>{const a=r.soundSettings.perCli,l=a[t];return l?{soundSettings:{...r.soundSettings,perCli:{...a,[t]:{...l,...i}}}}:{}}),e().persistSetting("soundSettings",JSON.stringify(e().soundSettings))},setCliActionSound:(t,i,r)=>{n(a=>{const l=a.soundSettings.perCli,o=l[t];return o?{soundSettings:{...a.soundSettings,perCli:{...l,[t]:{...o,actions:{...o.actions,[i]:r}}}}}:{}}),e().persistSetting("soundSettings",JSON.stringify(e().soundSettings))},updateAmbientSettings:t=>{n(i=>({ambientSettings:{...i.ambientSettings,...t}})),e().persistSetting("ambientSettings",JSON.stringify(e().ambientSettings))},updateLabelAlarms:t=>{n(i=>({labelAlarms:{...i.labelAlarms,...t}})),e().persistSetting("labelAlarms",JSON.stringify(e().labelAlarms))},setThemeName:t=>{Sy(t),n({themeName:t}),e().persistSetting("themeName",t)},setTheme:t=>n({theme:t}),setFontSize:t=>{wy(t),n({fontSize:t}),e().persistSetting("fontSize",t)},setScanlineEnabled:t=>{Ey(t),n({scanlineEnabled:t}),e().persistSetting("scanlineEnabled",t)},setAnimationIntensity:t=>{Cy(t),n({animationIntensity:t}),e().persistSetting("animationIntensity",t)},setAnimationSpeed:t=>{Ay(t),n({animationSpeed:t}),e().persistSetting("animationSpeed",t)},setCharacterModel:t=>{n({characterModel:t}),e().persistSetting("characterModel",t)},setHookDensity:t=>{n({hookDensity:t}),e().persistSetting("hookDensity",t)},setCompactMode:t=>n({compactMode:t}),setShowArchived:t=>n({showArchived:t}),setGroupBy:t=>n({groupBy:t}),setSortBy:t=>n({sortBy:t}),setScene3dEnabled:t=>{n({scene3dEnabled:t}),e().persistSetting("scene3dEnabled",t)},setActivityFeedVisible:t=>{n({activityFeedVisible:t}),e().persistSetting("activityFeedVisible",t)},setToastEnabled:t=>{n({toastEnabled:t}),e().persistSetting("toastEnabled",t)},setAutoSendQueue:t=>{n({autoSendQueue:t}),e().persistSetting("autoSendQueue",t)},setDefaultTerminalTheme:t=>{n({defaultTerminalTheme:t}),e().persistSetting("defaultTerminalTheme",t)},setSoundAction:(t,i)=>{n(a=>({soundActions:{...a.soundActions,[t]:i}}));const r=e().soundActions;e().persistSetting("soundActions",JSON.stringify(r))},setMovementAction:(t,i)=>{n(a=>({movementActions:{...a.movementActions,[t]:i}}));const r=e().movementActions;e().persistSetting("movementActions",JSON.stringify(r))},setApiKey:(t,i)=>{const r={anthropic:"anthropicApiKey",openai:"openaiApiKey",gemini:"geminiApiKey"};n({[r[t]]:i}),e().persistSetting(r[t],i)},persistSetting:async(t,i)=>{try{if(typeof i=="object"&&i!==null)try{JSON.stringify(i)}catch{return}await Wt.settings.put({key:t,value:i,updatedAt:Date.now()}),e().flashAutosave()}catch{}},flashAutosave:()=>{n({autosaveVisible:!0}),setTimeout(()=>n({autosaveVisible:!1}),2e3)},resetDefaults:()=>{n({...So}),Sy(So.themeName),wy(So.fontSize),Ey(So.scanlineEnabled),Cy(So.animationIntensity),Ay(So.animationSpeed);const t=e();for(const[i,r]of Object.entries(So))typeof r!="function"&&t.persistSetting(i,typeof r=="object"?JSON.stringify(r):r)}}));function _O(n){const e=(n.model||"").toLowerCase();if(e.includes("claude")||e.includes("opus")||e.includes("sonnet")||e.includes("haiku"))return"claude";if(e.includes("gemini")||e.includes("gemma"))return"gemini";if(e.includes("gpt")||e.includes("codex")||e.includes("o1")||e.includes("o3")||e.includes("o4"))return"codex";if(e.includes("openclaw")||e.includes("claw"))return"openclaw";const t=n.events||[];return t.some(l=>l.type==="BeforeAgent"||l.type==="AfterAgent"||l.type==="BeforeTool"||l.type==="AfterTool")?"gemini":t.some(l=>l.type==="agent-turn-complete")?"codex":t.some(l=>l.type==="SessionStart"||l.type==="PreToolUse"||l.type==="PostToolUse"||l.type==="UserPromptSubmit")?"claude":null}const bO={Read:"toolRead",Write:"toolWrite",Edit:"toolEdit",Bash:"toolBash",Grep:"toolGrep",Glob:"toolGlob",WebFetch:"toolWebFetch",Task:"toolTask"},Sc=new Map,Ty=new Map,Rp=new Set;function Ws(n,e){const t=Vt.getState();if(!t.soundSettings.enabled)return;const i=_O(n),r=t.soundSettings.perCli,a=i?r[i]:void 0;if(a&&a.enabled){const l=a.actions[e]??"none";if(l!=="none"){const o=_s.getVolume();_s.setVolume(t.soundSettings.volume*a.volume),_s.preview(l),_s.setVolume(o)}return}_s.play(e)}function vO(n){const e=n.events;if(!e||e.length===0||Rp.has(n.sessionId))return;const t=e[e.length-1];if(t)switch(t.type){case"SessionStart":Ws(n,"sessionStart");break;case"UserPromptSubmit":Ws(n,"promptSubmit");break;case"PreToolUse":{const i=t.tool_name||"",r=bO[i]||"toolOther";Ws(n,r);break}case"Stop":Ws(n,"taskComplete");break;case"SessionEnd":Ws(n,"sessionEnd");break;case"SubagentStart":Ws(n,"subagentStart");break;case"SubagentStop":Ws(n,"subagentStop");break}}function xO(n,e){const t=n.sessionId;if(n.status==="approval"&&!Rp.has(t)){if(!Sc.has(t)){Ws(n,"approvalNeeded");const r=setInterval(()=>{const a=e().get(t);if(!a||a.status!=="approval"||Rp.has(t)){clearInterval(r),Sc.delete(t);return}Ws(a,"approvalNeeded")},1e4);Sc.set(t,r)}}else if(n.status!=="approval"&&Sc.has(t)){const r=Sc.get(t);clearInterval(r),Sc.delete(t)}const i=`input-${t}`;n.status==="input"&&!Rp.has(t)?Ty.has(i)||(Ws(n,"inputNeeded"),Ty.set(i,!0)):n.status!=="input"&&Ty.delete(i)}function SO(n){const e=K.useRef(null);return K.useEffect(()=>{const{addSession:t,updateSession:i,removeSession:r,setSessions:a}=mn.getState(),{setConnected:l,setReconnecting:o,setLastSeq:u}=Z_.getState();function h(y){switch(y.type){case"snapshot":{const x=new Map;for(const[w,S]of Object.entries(y.sessions)){const b=S.sessionId||w,v=x.get(b);(!v||(S.lastActivityAt||0)>(v.lastActivityAt||0))&&x.set(b,S)}a(x),u(y.seq);for(const w of x.values())wS(w).catch(()=>{});Wt.sessions.toCollection().primaryKeys().then(w=>{const S=new Set(x.keys()),b=w.filter(v=>!S.has(String(v)));b.length>0&&Wt.sessions.bulkDelete(b).catch(()=>{})}).catch(()=>{});break}case"session_update":{const{session:x}=y;x.replacesId&&hO(x.replacesId,x.sessionId).then(()=>Wt.sessions.delete(x.replacesId)).catch(()=>{}),i(x),wS(x).catch(()=>{}),vO(x),xO(x,()=>mn.getState().sessions);break}case"session_removed":{r(y.sessionId);break}case"clearBrowserDb":{Wt.delete().then(()=>Wt.open()).catch(()=>{});break}}}function p(y){l(y==="connected"),o(y==="reconnecting")}const{setClient:f}=Z_.getState(),m=new U0({url:"/ws",token:n,onMessage:h,onStatus:p});return e.current=m,f(m),m.connect(),()=>{m.dispose(),e.current=null,f(null)}},[n]),e.current}const wO="_screen_lsklh_6",EO="_card_lsklh_12",CO="_input_lsklh_38",AO="_btn_lsklh_59",TO="_error_lsklh_80",hh={screen:wO,card:EO,input:CO,btn:AO,error:TO};function kO({onLogin:n}){const[e,t]=K.useState(""),[i,r]=K.useState(""),[a,l]=K.useState(!1),o=K.useRef(null);K.useEffect(()=>{o.current?.focus()},[]);async function u(h){if(h.preventDefault(),!e){r("Please enter a password");return}l(!0),r("");const p=await n(e);p.success||(r(p.error??"Authentication failed"),t(""),o.current?.focus()),l(!1)}return N.jsx("div",{className:hh.screen,children:N.jsxs("form",{className:hh.card,onSubmit:u,children:[N.jsx("h2",{children:"AI Agent Session Center"}),N.jsx("p",{children:"Enter password to continue"}),N.jsx("input",{ref:o,type:"password",value:e,onChange:h=>t(h.target.value),placeholder:"Password",autoComplete:"current-password",className:hh.input,disabled:a}),i&&N.jsx("p",{className:hh.error,children:i}),N.jsx("button",{type:"submit",disabled:a,className:hh.btn,children:a?"Authenticating...":"Login"})]})})}const bi=kl(n=>({activeModal:null,detailPanelOpen:!1,activityFeedOpen:!1,openModal:e=>n({activeModal:e}),closeModal:()=>n({activeModal:null}),setDetailPanelOpen:e=>n({detailPanelOpen:e}),setActivityFeedOpen:e=>n({activityFeedOpen:e})})),MO="_overlay_12hnn_10",RO="_panel_12hnn_19",OO="_actions_12hnn_27",NO="_closeBtn_12hnn_29",DO="_alertInputRow_12hnn_33",IO="_alertInput_12hnn_33",LO="_newSessionPanel_12hnn_41",BO="_newSessionBody_12hnn_49",zO="_newSessionFooter_12hnn_60",PO="_sshField_12hnn_71",FO="_sshFieldRow_12hnn_75",UO="_sshFieldGrow_12hnn_76",jO="_sshFieldSmall_12hnn_77",HO="_sshFieldHint_12hnn_78",qO="_sshFieldRequired_12hnn_79",VO="_sshFieldError_12hnn_80",WO="_active_12hnn_87",$O="_quickSessionPanel_12hnn_104",GO="_quickSessionHeader_12hnn_105",KO="_quickSessionBody_12hnn_107",YO="_quickSessionHint_12hnn_108",XO="_quickSessionFooter_12hnn_109",ZO="_quickLabelChips_12hnn_112",JO="_quickLabelChip_12hnn_112",QO="_labelText_12hnn_116",e3="_labelDelete_12hnn_117",t3="_quickLabelEmpty_12hnn_120",n3="_quickLabelInputRow_12hnn_122",i3="_quickWorkdirRow_12hnn_126",r3="_shortcutsPanel_12hnn_133",s3="_shortcutsHeader_12hnn_134",a3="_shortcutsBody_12hnn_136",o3="_shortcutsSection_12hnn_137",l3="_shortcutList_12hnn_138",c3="_shortcutRow_12hnn_139",u3="_toastContainer_12hnn_145",h3="_toast_12hnn_145",d3="_toastMsg_12hnn_152",ot={overlay:MO,panel:RO,actions:OO,closeBtn:NO,alertInputRow:DO,alertInput:IO,newSessionPanel:LO,newSessionBody:BO,newSessionFooter:zO,sshField:PO,sshFieldRow:FO,sshFieldGrow:UO,sshFieldSmall:jO,sshFieldHint:HO,sshFieldRequired:qO,sshFieldError:VO,active:WO,quickSessionPanel:$O,quickSessionHeader:GO,quickSessionBody:KO,quickSessionHint:YO,quickSessionFooter:XO,quickLabelChips:ZO,quickLabelChip:JO,labelText:QO,labelDelete:e3,quickLabelEmpty:t3,quickLabelInputRow:n3,quickWorkdirRow:i3,shortcutsPanel:r3,shortcutsHeader:s3,shortcutsBody:a3,shortcutsSection:o3,shortcutList:l3,shortcutRow:c3,toastContainer:u3,toast:h3,toastMsg:d3};function cm({modalId:n,children:e,title:t,onClose:i,panelClassName:r}){const a=bi(m=>m.activeModal),l=bi(m=>m.closeModal),o=K.useRef(null),u=K.useRef(null),h=a===n,p=K.useCallback(()=>{l(),i?.()},[l,i]);if(K.useEffect(()=>{if(!h)return;function m(y){y.key==="Escape"&&(y.stopPropagation(),p())}return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[h,p]),K.useEffect(()=>{if(!h||!u.current)return;const m=u.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),y=m[0],x=m[m.length-1];y?.focus();function w(S){if(S.key==="Tab"){if(m.length===0){S.preventDefault();return}S.shiftKey?document.activeElement===y&&(S.preventDefault(),x?.focus()):document.activeElement===x&&(S.preventDefault(),y?.focus())}}return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[h]),!h)return null;function f(m){m.target===o.current&&p()}return N.jsx("div",{ref:o,onClick:f,className:ot.overlay,children:N.jsxs("div",{ref:u,role:"dialog","aria-modal":"true","aria-label":t,className:`${ot.panel}${r?` ${r}`:""}`,children:[t&&N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[N.jsx("h3",{children:t}),N.jsx("button",{onClick:p,"aria-label":"Close",className:ot.closeBtn,children:"x"})]}),e]})})}const UC="182",GV={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},KV={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},YV=0,XV=1,ZV=2,JV=3,QV=0,eW=1,tW=2,nW=3,Q_=0,jC=1,iW=2,f3=0,CS=1,rW=2,sW=3,aW=4,oW=5,AS=100,lW=101,cW=102,uW=103,hW=104,dW=200,fW=201,pW=202,mW=203,TS=204,kS=205,gW=206,yW=207,_W=208,bW=209,vW=210,xW=211,SW=212,wW=213,EW=214,CW=0,AW=1,TW=2,MS=3,kW=4,MW=5,RW=6,OW=7,j0=0,NW=1,DW=2,IW=0,LW=1,BW=2,zW=3,PW=4,FW=5,UW=6,jW=7,RS="attached",p3="detached",H0=300,um=301,m3=302,g3=303,y3=304,_3=306,e0=1e3,Ks=1001,t0=1002,Br=1003,b3=1004,HW=1004,v3=1005,qW=1005,ts=1006,x3=1007,VW=1007,hm=1008,WW=1008,q0=1009,S3=1010,w3=1011,E3=1012,C3=1013,dm=1014,iu=1015,A3=1016,T3=1017,k3=1018,$W=1020,M3=35902,R3=35899,O3=1021,N3=1022,$h=1023,n0=1026,D3=1027,HC=1028,qC=1029,I3=1030,L3=1031,GW=1032,B3=1033,z3=33776,P3=33777,F3=33778,U3=33779,j3=35840,H3=35841,q3=35842,V3=35843,W3=36196,$3=37492,G3=37496,K3=37488,Y3=37489,X3=37490,Z3=37491,J3=37808,Q3=37809,eN=37810,tN=37811,nN=37812,iN=37813,rN=37814,sN=37815,aN=37816,oN=37817,lN=37818,cN=37819,uN=37820,hN=37821,dN=36492,fN=36494,pN=36495,mN=36283,gN=36284,yN=36285,_N=36286,bN=2200,vN=2201,xN=2202,Pp=2300,i0=2301,ky=2302,Zc=2400,Jc=2401,Fp=2402,V0=2500,VC=2501,KW=0,YW=1,XW=2,SN=3200,ZW=3201,JW=3202,QW=3203,uu=0,e$=1,WC="",Jr="srgb",OS="srgb-linear",NS="linear",My="srgb",t$="",n$="rg",i$="ga",r$=0,wc=7680,s$=7681,a$=7682,o$=7683,l$=34055,c$=34056,u$=5386,h$=512,d$=513,f$=514,p$=515,m$=516,g$=517,y$=518,DS=519,_$=512,b$=513,v$=514,x$=515,S$=516,w$=517,E$=518,C$=519,Up=35044,A$=35048,T$=35040,k$=35045,M$=35049,R$=35041,O$=35046,N$=35050,D$=35042,I$="100",L$="300 es",Ys=2e3,Gh=2001,B$={COMPUTE:"compute",RENDER:"render"},z$={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},P$={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function wN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const EN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qc(n,e){return new EN[n](e)}function $C(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function jp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function F$(){const n=jp("canvas");return n.style.display="block",n}const IS={};let Lo=null;function U$(n){Lo=n}function j$(){return Lo}function LS(...n){const e="THREE."+n.shift();Lo?Lo("log",e,...n):console.log(e,...n)}function Mt(...n){const e="THREE."+n.shift();Lo?Lo("warn",e,...n):console.warn(e,...n)}function xn(...n){const e="THREE."+n.shift();Lo?Lo("error",e,...n):console.error(e,...n)}function BS(...n){const e=n.join(" ");e in IS||(IS[e]=!0,Mt(...n))}function H$(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}class Po{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,l=r.length;a<l;a++)r[a].call(this,e);e.target=null}}}const $i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zS=1234567;const El=Math.PI/180,Kh=180/Math.PI;function Dr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return($i[n&255]+$i[n>>8&255]+$i[n>>16&255]+$i[n>>24&255]+"-"+$i[e&255]+$i[e>>8&255]+"-"+$i[e>>16&15|64]+$i[e>>24&255]+"-"+$i[t&63|128]+$i[t>>8&255]+"-"+$i[t>>16&255]+$i[t>>24&255]+$i[i&255]+$i[i>>8&255]+$i[i>>16&255]+$i[i>>24&255]).toLowerCase()}function Nt(n,e,t){return Math.max(e,Math.min(t,n))}function W0(n,e){return(n%e+e)%e}function CN(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function AN(n,e,t){return n!==e?(t-n)/(e-n):0}function Bh(n,e,t){return(1-t)*n+t*e}function TN(n,e,t,i){return Bh(n,e,1-Math.exp(-t*i))}function kN(n,e=1){return e-Math.abs(W0(n,e*2)-e)}function MN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function RN(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function ON(n,e){return n+Math.floor(Math.random()*(e-n+1))}function NN(n,e){return n+Math.random()*(e-n)}function DN(n){return n*(.5-Math.random())}function IN(n){n!==void 0&&(zS=n);let e=zS+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function LN(n){return n*El}function BN(n){return n*Kh}function zN(n){return(n&n-1)===0&&n!==0}function PN(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function FN(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function UN(n,e,t,i,r){const a=Math.cos,l=Math.sin,o=a(t/2),u=l(t/2),h=a((e+i)/2),p=l((e+i)/2),f=a((e-i)/2),m=l((e-i)/2),y=a((i-e)/2),x=l((i-e)/2);switch(r){case"XYX":n.set(o*p,u*f,u*m,o*h);break;case"YZY":n.set(u*m,o*p,u*f,o*h);break;case"ZXZ":n.set(u*f,u*m,o*p,o*h);break;case"XZX":n.set(o*p,u*x,u*y,o*h);break;case"YXY":n.set(u*y,o*p,u*x,o*h);break;case"ZYZ":n.set(u*x,u*y,o*p,o*h);break;default:Mt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function sr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Kt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const q$={DEG2RAD:El,RAD2DEG:Kh,generateUUID:Dr,clamp:Nt,euclideanModulo:W0,mapLinear:CN,inverseLerp:AN,lerp:Bh,damp:TN,pingpong:kN,smoothstep:MN,smootherstep:RN,randInt:ON,randFloat:NN,randFloatSpread:DN,seededRandom:IN,degToRad:LN,radToDeg:BN,isPowerOfTwo:zN,ceilPowerOfTwo:PN,floorPowerOfTwo:FN,setQuaternionFromProperEuler:UN,normalize:Kt,denormalize:sr};class Xe{constructor(e=0,t=0){Xe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Nt(this.x,e.x,t.x),this.y=Nt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Nt(this.x,e,t),this.y=Nt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Nt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Nt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*i-l*r+e.x,this.y=a*r+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ir{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,l,o){let u=i[r+0],h=i[r+1],p=i[r+2],f=i[r+3],m=a[l+0],y=a[l+1],x=a[l+2],w=a[l+3];if(o<=0){e[t+0]=u,e[t+1]=h,e[t+2]=p,e[t+3]=f;return}if(o>=1){e[t+0]=m,e[t+1]=y,e[t+2]=x,e[t+3]=w;return}if(f!==w||u!==m||h!==y||p!==x){let S=u*m+h*y+p*x+f*w;S<0&&(m=-m,y=-y,x=-x,w=-w,S=-S);let b=1-o;if(S<.9995){const v=Math.acos(S),_=Math.sin(v);b=Math.sin(b*v)/_,o=Math.sin(o*v)/_,u=u*b+m*o,h=h*b+y*o,p=p*b+x*o,f=f*b+w*o}else{u=u*b+m*o,h=h*b+y*o,p=p*b+x*o,f=f*b+w*o;const v=1/Math.sqrt(u*u+h*h+p*p+f*f);u*=v,h*=v,p*=v,f*=v}}e[t]=u,e[t+1]=h,e[t+2]=p,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,a,l){const o=i[r],u=i[r+1],h=i[r+2],p=i[r+3],f=a[l],m=a[l+1],y=a[l+2],x=a[l+3];return e[t]=o*x+p*f+u*y-h*m,e[t+1]=u*x+p*m+h*f-o*y,e[t+2]=h*x+p*y+o*m-u*f,e[t+3]=p*x-o*f-u*m-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,l=e._order,o=Math.cos,u=Math.sin,h=o(i/2),p=o(r/2),f=o(a/2),m=u(i/2),y=u(r/2),x=u(a/2);switch(l){case"XYZ":this._x=m*p*f+h*y*x,this._y=h*y*f-m*p*x,this._z=h*p*x+m*y*f,this._w=h*p*f-m*y*x;break;case"YXZ":this._x=m*p*f+h*y*x,this._y=h*y*f-m*p*x,this._z=h*p*x-m*y*f,this._w=h*p*f+m*y*x;break;case"ZXY":this._x=m*p*f-h*y*x,this._y=h*y*f+m*p*x,this._z=h*p*x+m*y*f,this._w=h*p*f-m*y*x;break;case"ZYX":this._x=m*p*f-h*y*x,this._y=h*y*f+m*p*x,this._z=h*p*x-m*y*f,this._w=h*p*f+m*y*x;break;case"YZX":this._x=m*p*f+h*y*x,this._y=h*y*f+m*p*x,this._z=h*p*x-m*y*f,this._w=h*p*f-m*y*x;break;case"XZY":this._x=m*p*f-h*y*x,this._y=h*y*f-m*p*x,this._z=h*p*x+m*y*f,this._w=h*p*f+m*y*x;break;default:Mt("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],l=t[1],o=t[5],u=t[9],h=t[2],p=t[6],f=t[10],m=i+o+f;if(m>0){const y=.5/Math.sqrt(m+1);this._w=.25/y,this._x=(p-u)*y,this._y=(a-h)*y,this._z=(l-r)*y}else if(i>o&&i>f){const y=2*Math.sqrt(1+i-o-f);this._w=(p-u)/y,this._x=.25*y,this._y=(r+l)/y,this._z=(a+h)/y}else if(o>f){const y=2*Math.sqrt(1+o-i-f);this._w=(a-h)/y,this._x=(r+l)/y,this._y=.25*y,this._z=(u+p)/y}else{const y=2*Math.sqrt(1+f-i-o);this._w=(l-r)/y,this._x=(a+h)/y,this._y=(u+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,l=e._w,o=t._x,u=t._y,h=t._z,p=t._w;return this._x=i*p+l*o+r*h-a*u,this._y=r*p+l*u+a*o-i*h,this._z=a*p+l*h+i*u-r*o,this._w=l*p-i*o-r*u-a*h,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,l=e._w,o=this.dot(e);o<0&&(i=-i,r=-r,a=-a,l=-l,o=-o);let u=1-t;if(o<.9995){const h=Math.acos(o),p=Math.sin(h);u=Math.sin(u*h)/p,t=Math.sin(t*h)/p,this._x=this._x*u+i*t,this._y=this._y*u+r*t,this._z=this._z*u+a*t,this._w=this._w*u+l*t,this._onChangeCallback()}else this._x=this._x*u+i*t,this._y=this._y*u+r*t,this._z=this._z*u+a*t,this._w=this._w*u+l*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class se{constructor(e=0,t=0,i=0){se.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(PS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,l=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*l,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*l,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,l=e.y,o=e.z,u=e.w,h=2*(l*r-o*i),p=2*(o*t-a*r),f=2*(a*i-l*t);return this.x=t+u*h+l*f-o*p,this.y=i+u*p+o*h-a*f,this.z=r+u*f+a*p-l*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Nt(this.x,e.x,t.x),this.y=Nt(this.y,e.y,t.y),this.z=Nt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Nt(this.x,e,t),this.y=Nt(this.y,e,t),this.z=Nt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Nt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,l=t.x,o=t.y,u=t.z;return this.x=r*u-a*o,this.y=a*l-i*u,this.z=i*o-r*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Ry.copy(this).projectOnVector(e),this.sub(Ry)}reflect(e){return this.sub(Ry.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Nt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ry=new se,PS=new Ir;class Js{constructor(e,t,i,r,a,l,o,u,h){Js.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,l,o,u,h)}set(e,t,i,r,a,l,o,u,h){const p=this.elements;return p[0]=e,p[1]=r,p[2]=o,p[3]=t,p[4]=a,p[5]=u,p[6]=i,p[7]=l,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,l=i[0],o=i[3],u=i[6],h=i[1],p=i[4],f=i[7],m=i[2],y=i[5],x=i[8],w=r[0],S=r[3],b=r[6],v=r[1],_=r[4],E=r[7],R=r[2],M=r[5],D=r[8];return a[0]=l*w+o*v+u*R,a[3]=l*S+o*_+u*M,a[6]=l*b+o*E+u*D,a[1]=h*w+p*v+f*R,a[4]=h*S+p*_+f*M,a[7]=h*b+p*E+f*D,a[2]=m*w+y*v+x*R,a[5]=m*S+y*_+x*M,a[8]=m*b+y*E+x*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],l=e[4],o=e[5],u=e[6],h=e[7],p=e[8];return t*l*p-t*o*h-i*a*p+i*o*u+r*a*h-r*l*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],l=e[4],o=e[5],u=e[6],h=e[7],p=e[8],f=p*l-o*h,m=o*u-p*a,y=h*a-l*u,x=t*f+i*m+r*y;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=f*w,e[1]=(r*h-p*i)*w,e[2]=(o*i-r*l)*w,e[3]=m*w,e[4]=(p*t-r*u)*w,e[5]=(r*a-o*t)*w,e[6]=y*w,e[7]=(i*u-h*t)*w,e[8]=(l*t-i*a)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,l,o){const u=Math.cos(a),h=Math.sin(a);return this.set(i*u,i*h,-i*(u*l+h*o)+l+e,-r*h,r*u,-r*(-h*l+u*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Oy.makeScale(e,t)),this}rotate(e){return this.premultiply(Oy.makeRotation(-e)),this}translate(e,t){return this.premultiply(Oy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Oy=new Js,FS=new Js().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),US=new Js().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function jN(){const n={enabled:!0,workingColorSpace:OS,spaces:{},convert:function(r,a,l){return this.enabled===!1||a===l||!a||!l||(this.spaces[a].transfer===My&&(r.r=Ba(r.r),r.g=Ba(r.g),r.b=Ba(r.b)),this.spaces[a].primaries!==this.spaces[l].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===My&&(r.r=eu(r.r),r.g=eu(r.g),r.b=eu(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===WC?NS:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,l){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return BS("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return BS("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[OS]:{primaries:e,whitePoint:i,transfer:NS,toXYZ:FS,fromXYZ:US,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Jr},outputColorSpaceConfig:{drawingBufferColorSpace:Jr}},[Jr]:{primaries:e,whitePoint:i,transfer:My,toXYZ:FS,fromXYZ:US,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Jr}}}),n}const Rr=jN();function Ba(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function eu(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ec;class HN{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Ec===void 0&&(Ec=jp("canvas")),Ec.width=e.width,Ec.height=e.height;const r=Ec.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Ec}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=jp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let l=0;l<a.length;l++)a[l]=Ba(a[l]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ba(t[i]/255)*255):t[i]=Ba(t[i]);return{data:t,width:e.width,height:e.height}}else return Mt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let qN=0;class Sl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:qN++}),this.uuid=Dr(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let l=0,o=r.length;l<o;l++)r[l].isDataTexture?a.push(Ny(r[l].image)):a.push(Ny(r[l]))}else a=Ny(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function Ny(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?HN.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(Mt("Texture: Unable to serialize Texture."),{})}let VN=0;const Dy=new se;class vi extends Po{constructor(e=vi.DEFAULT_IMAGE,t=vi.DEFAULT_MAPPING,i=Ks,r=Ks,a=ts,l=hm,o=$h,u=q0,h=vi.DEFAULT_ANISOTROPY,p=WC){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:VN++}),this.uuid=Dr(),this.name="",this.source=new Sl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=l,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=u,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Js,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Dy).x}get height(){return this.source.getSize(Dy).y}get depth(){return this.source.getSize(Dy).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){Mt(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Mt(`Texture.setValues(): property '${t}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==H0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case e0:e.x=e.x-Math.floor(e.x);break;case Ks:e.x=e.x<0?0:1;break;case t0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case e0:e.y=e.y-Math.floor(e.y);break;case Ks:e.y=e.y<0?0:1;break;case t0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}vi.DEFAULT_IMAGE=null;vi.DEFAULT_MAPPING=H0;vi.DEFAULT_ANISOTROPY=1;class ns{constructor(e=0,t=0,i=0,r=1){ns.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*r+l[12]*a,this.y=l[1]*t+l[5]*i+l[9]*r+l[13]*a,this.z=l[2]*t+l[6]*i+l[10]*r+l[14]*a,this.w=l[3]*t+l[7]*i+l[11]*r+l[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const u=e.elements,h=u[0],p=u[4],f=u[8],m=u[1],y=u[5],x=u[9],w=u[2],S=u[6],b=u[10];if(Math.abs(p-m)<.01&&Math.abs(f-w)<.01&&Math.abs(x-S)<.01){if(Math.abs(p+m)<.1&&Math.abs(f+w)<.1&&Math.abs(x+S)<.1&&Math.abs(h+y+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(h+1)/2,E=(y+1)/2,R=(b+1)/2,M=(p+m)/4,D=(f+w)/4,O=(x+S)/4;return _>E&&_>R?_<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(_),r=M/i,a=D/i):E>R?E<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(E),i=M/r,a=O/r):R<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(R),i=D/a,r=O/a),this.set(i,r,a,t),this}let v=Math.sqrt((S-x)*(S-x)+(f-w)*(f-w)+(m-p)*(m-p));return Math.abs(v)<.001&&(v=1),this.x=(S-x)/v,this.y=(f-w)/v,this.z=(m-p)/v,this.w=Math.acos((h+y+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Nt(this.x,e.x,t.x),this.y=Nt(this.y,e.y,t.y),this.z=Nt(this.z,e.z,t.z),this.w=Nt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Nt(this.x,e,t),this.y=Nt(this.y,e,t),this.z=Nt(this.z,e,t),this.w=Nt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Nt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class GC extends Po{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ts,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new ns(0,0,e,t),this.scissorTest=!1,this.viewport=new ns(0,0,e,t);const r={width:e,height:t,depth:i.depth},a=new vi(r);this.textures=[];const l=i.count;for(let o=0;o<l;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:ts,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Sl(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $0 extends GC{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class WN extends vi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Br,this.minFilter=Br,this.wrapR=Ks,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class V$ extends $0{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new WN(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class KC extends vi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Br,this.minFilter=Br,this.wrapR=Ks,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class W$ extends $0{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new KC(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class or{constructor(e=new se(1/0,1/0,1/0),t=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ds.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ds.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ds.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let l=0,o=a.count;l<o;l++)e.isMesh===!0?e.getVertexPosition(l,ds):ds.fromBufferAttribute(a,l),ds.applyMatrix4(e.matrixWorld),this.expandByPoint(ds);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Tf.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Tf.copy(i.boundingBox)),Tf.applyMatrix4(e.matrixWorld),this.union(Tf)}const r=e.children;for(let a=0,l=r.length;a<l;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ds),ds.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(dh),kf.subVectors(this.max,dh),Cc.subVectors(e.a,dh),Ac.subVectors(e.b,dh),Tc.subVectors(e.c,dh),wo.subVectors(Ac,Cc),Eo.subVectors(Tc,Ac),ll.subVectors(Cc,Tc);let t=[0,-wo.z,wo.y,0,-Eo.z,Eo.y,0,-ll.z,ll.y,wo.z,0,-wo.x,Eo.z,0,-Eo.x,ll.z,0,-ll.x,-wo.y,wo.x,0,-Eo.y,Eo.x,0,-ll.y,ll.x,0];return!Iy(t,Cc,Ac,Tc,kf)||(t=[1,0,0,0,1,0,0,0,1],!Iy(t,Cc,Ac,Tc,kf))?!1:(Mf.crossVectors(wo,Eo),t=[Mf.x,Mf.y,Mf.z],Iy(t,Cc,Ac,Tc,kf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ds).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ds).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Aa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Aa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Aa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Aa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Aa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Aa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Aa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Aa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Aa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Aa=[new se,new se,new se,new se,new se,new se,new se,new se],ds=new se,Tf=new or,Cc=new se,Ac=new se,Tc=new se,wo=new se,Eo=new se,ll=new se,dh=new se,kf=new se,Mf=new se,cl=new se;function Iy(n,e,t,i,r){for(let a=0,l=n.length-3;a<=l;a+=3){cl.fromArray(n,a);const o=r.x*Math.abs(cl.x)+r.y*Math.abs(cl.y)+r.z*Math.abs(cl.z),u=e.dot(cl),h=t.dot(cl),p=i.dot(cl);if(Math.max(-Math.max(u,h,p),Math.min(u,h,p))>o)return!1}return!0}const $N=new or,fh=new se,Ly=new se;class Xi{constructor(e=new se,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):$N.setFromPoints(e).getCenter(i);let r=0;for(let a=0,l=e.length;a<l;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fh.subVectors(e,this.center);const t=fh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(fh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ly.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fh.copy(e.center).add(Ly)),this.expandByPoint(fh.copy(e.center).sub(Ly))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Ta=new se,By=new se,Rf=new se,Co=new se,zy=new se,Of=new se,Py=new se;class ad{constructor(e=new se,t=new se(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ta)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ta.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ta.copy(this.origin).addScaledVector(this.direction,t),Ta.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){By.copy(e).add(t).multiplyScalar(.5),Rf.copy(t).sub(e).normalize(),Co.copy(this.origin).sub(By);const a=e.distanceTo(t)*.5,l=-this.direction.dot(Rf),o=Co.dot(this.direction),u=-Co.dot(Rf),h=Co.lengthSq(),p=Math.abs(1-l*l);let f,m,y,x;if(p>0)if(f=l*u-o,m=l*o-u,x=a*p,f>=0)if(m>=-x)if(m<=x){const w=1/p;f*=w,m*=w,y=f*(f+l*m+2*o)+m*(l*f+m+2*u)+h}else m=a,f=Math.max(0,-(l*m+o)),y=-f*f+m*(m+2*u)+h;else m=-a,f=Math.max(0,-(l*m+o)),y=-f*f+m*(m+2*u)+h;else m<=-x?(f=Math.max(0,-(-l*a+o)),m=f>0?-a:Math.min(Math.max(-a,-u),a),y=-f*f+m*(m+2*u)+h):m<=x?(f=0,m=Math.min(Math.max(-a,-u),a),y=m*(m+2*u)+h):(f=Math.max(0,-(l*a+o)),m=f>0?a:Math.min(Math.max(-a,-u),a),y=-f*f+m*(m+2*u)+h);else m=l>0?-a:a,f=Math.max(0,-(l*m+o)),y=-f*f+m*(m+2*u)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(By).addScaledVector(Rf,m),y}intersectSphere(e,t){Ta.subVectors(e.center,this.origin);const i=Ta.dot(this.direction),r=Ta.dot(Ta)-i*i,a=e.radius*e.radius;if(r>a)return null;const l=Math.sqrt(a-r),o=i-l,u=i+l;return u<0?null:o<0?this.at(u,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,l,o,u;const h=1/this.direction.x,p=1/this.direction.y,f=1/this.direction.z,m=this.origin;return h>=0?(i=(e.min.x-m.x)*h,r=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,r=(e.min.x-m.x)*h),p>=0?(a=(e.min.y-m.y)*p,l=(e.max.y-m.y)*p):(a=(e.max.y-m.y)*p,l=(e.min.y-m.y)*p),i>l||a>r||((a>i||isNaN(i))&&(i=a),(l<r||isNaN(r))&&(r=l),f>=0?(o=(e.min.z-m.z)*f,u=(e.max.z-m.z)*f):(o=(e.max.z-m.z)*f,u=(e.min.z-m.z)*f),i>u||o>r)||((o>i||i!==i)&&(i=o),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ta)!==null}intersectTriangle(e,t,i,r,a){zy.subVectors(t,e),Of.subVectors(i,e),Py.crossVectors(zy,Of);let l=this.direction.dot(Py),o;if(l>0){if(r)return null;o=1}else if(l<0)o=-1,l=-l;else return null;Co.subVectors(this.origin,e);const u=o*this.direction.dot(Of.crossVectors(Co,Of));if(u<0)return null;const h=o*this.direction.dot(zy.cross(Co));if(h<0||u+h>l)return null;const p=-o*Co.dot(Py);return p<0?null:this.at(p/l,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(e,t,i,r,a,l,o,u,h,p,f,m,y,x,w,S){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,l,o,u,h,p,f,m,y,x,w,S)}set(e,t,i,r,a,l,o,u,h,p,f,m,y,x,w,S){const b=this.elements;return b[0]=e,b[4]=t,b[8]=i,b[12]=r,b[1]=a,b[5]=l,b[9]=o,b[13]=u,b[2]=h,b[6]=p,b[10]=f,b[14]=m,b[3]=y,b[7]=x,b[11]=w,b[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,r=1/kc.setFromMatrixColumn(e,0).length(),a=1/kc.setFromMatrixColumn(e,1).length(),l=1/kc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,l=Math.cos(i),o=Math.sin(i),u=Math.cos(r),h=Math.sin(r),p=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const m=l*p,y=l*f,x=o*p,w=o*f;t[0]=u*p,t[4]=-u*f,t[8]=h,t[1]=y+x*h,t[5]=m-w*h,t[9]=-o*u,t[2]=w-m*h,t[6]=x+y*h,t[10]=l*u}else if(e.order==="YXZ"){const m=u*p,y=u*f,x=h*p,w=h*f;t[0]=m+w*o,t[4]=x*o-y,t[8]=l*h,t[1]=l*f,t[5]=l*p,t[9]=-o,t[2]=y*o-x,t[6]=w+m*o,t[10]=l*u}else if(e.order==="ZXY"){const m=u*p,y=u*f,x=h*p,w=h*f;t[0]=m-w*o,t[4]=-l*f,t[8]=x+y*o,t[1]=y+x*o,t[5]=l*p,t[9]=w-m*o,t[2]=-l*h,t[6]=o,t[10]=l*u}else if(e.order==="ZYX"){const m=l*p,y=l*f,x=o*p,w=o*f;t[0]=u*p,t[4]=x*h-y,t[8]=m*h+w,t[1]=u*f,t[5]=w*h+m,t[9]=y*h-x,t[2]=-h,t[6]=o*u,t[10]=l*u}else if(e.order==="YZX"){const m=l*u,y=l*h,x=o*u,w=o*h;t[0]=u*p,t[4]=w-m*f,t[8]=x*f+y,t[1]=f,t[5]=l*p,t[9]=-o*p,t[2]=-h*p,t[6]=y*f+x,t[10]=m-w*f}else if(e.order==="XZY"){const m=l*u,y=l*h,x=o*u,w=o*h;t[0]=u*p,t[4]=-f,t[8]=h*p,t[1]=m*f+w,t[5]=l*p,t[9]=y*f-x,t[2]=x*f-y,t[6]=o*p,t[10]=w*f+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(GN,e,KN)}lookAt(e,t,i){const r=this.elements;return Tr.subVectors(e,t),Tr.lengthSq()===0&&(Tr.z=1),Tr.normalize(),Ao.crossVectors(i,Tr),Ao.lengthSq()===0&&(Math.abs(i.z)===1?Tr.x+=1e-4:Tr.z+=1e-4,Tr.normalize(),Ao.crossVectors(i,Tr)),Ao.normalize(),Nf.crossVectors(Tr,Ao),r[0]=Ao.x,r[4]=Nf.x,r[8]=Tr.x,r[1]=Ao.y,r[5]=Nf.y,r[9]=Tr.y,r[2]=Ao.z,r[6]=Nf.z,r[10]=Tr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,l=i[0],o=i[4],u=i[8],h=i[12],p=i[1],f=i[5],m=i[9],y=i[13],x=i[2],w=i[6],S=i[10],b=i[14],v=i[3],_=i[7],E=i[11],R=i[15],M=r[0],D=r[4],O=r[8],L=r[12],j=r[1],X=r[5],G=r[9],H=r[13],$=r[2],Q=r[6],Y=r[10],te=r[14],re=r[3],U=r[7],B=r[11],P=r[15];return a[0]=l*M+o*j+u*$+h*re,a[4]=l*D+o*X+u*Q+h*U,a[8]=l*O+o*G+u*Y+h*B,a[12]=l*L+o*H+u*te+h*P,a[1]=p*M+f*j+m*$+y*re,a[5]=p*D+f*X+m*Q+y*U,a[9]=p*O+f*G+m*Y+y*B,a[13]=p*L+f*H+m*te+y*P,a[2]=x*M+w*j+S*$+b*re,a[6]=x*D+w*X+S*Q+b*U,a[10]=x*O+w*G+S*Y+b*B,a[14]=x*L+w*H+S*te+b*P,a[3]=v*M+_*j+E*$+R*re,a[7]=v*D+_*X+E*Q+R*U,a[11]=v*O+_*G+E*Y+R*B,a[15]=v*L+_*H+E*te+R*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],l=e[1],o=e[5],u=e[9],h=e[13],p=e[2],f=e[6],m=e[10],y=e[14],x=e[3],w=e[7],S=e[11],b=e[15],v=u*y-h*m,_=o*y-h*f,E=o*m-u*f,R=l*y-h*p,M=l*m-u*p,D=l*f-o*p;return t*(w*v-S*_+b*E)-i*(x*v-S*R+b*M)+r*(x*_-w*R+b*D)-a*(x*E-w*M+S*D)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],l=e[4],o=e[5],u=e[6],h=e[7],p=e[8],f=e[9],m=e[10],y=e[11],x=e[12],w=e[13],S=e[14],b=e[15],v=f*S*h-w*m*h+w*u*y-o*S*y-f*u*b+o*m*b,_=x*m*h-p*S*h-x*u*y+l*S*y+p*u*b-l*m*b,E=p*w*h-x*f*h+x*o*y-l*w*y-p*o*b+l*f*b,R=x*f*u-p*w*u-x*o*m+l*w*m+p*o*S-l*f*S,M=t*v+i*_+r*E+a*R;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/M;return e[0]=v*D,e[1]=(w*m*a-f*S*a-w*r*y+i*S*y+f*r*b-i*m*b)*D,e[2]=(o*S*a-w*u*a+w*r*h-i*S*h-o*r*b+i*u*b)*D,e[3]=(f*u*a-o*m*a-f*r*h+i*m*h+o*r*y-i*u*y)*D,e[4]=_*D,e[5]=(p*S*a-x*m*a+x*r*y-t*S*y-p*r*b+t*m*b)*D,e[6]=(x*u*a-l*S*a-x*r*h+t*S*h+l*r*b-t*u*b)*D,e[7]=(l*m*a-p*u*a+p*r*h-t*m*h-l*r*y+t*u*y)*D,e[8]=E*D,e[9]=(x*f*a-p*w*a-x*i*y+t*w*y+p*i*b-t*f*b)*D,e[10]=(l*w*a-x*o*a+x*i*h-t*w*h-l*i*b+t*o*b)*D,e[11]=(p*o*a-l*f*a-p*i*h+t*f*h+l*i*y-t*o*y)*D,e[12]=R*D,e[13]=(p*w*r-x*f*r+x*i*m-t*w*m-p*i*S+t*f*S)*D,e[14]=(x*o*r-l*w*r-x*i*u+t*w*u+l*i*S-t*o*S)*D,e[15]=(l*f*r-p*o*r+p*i*u-t*f*u-l*i*m+t*o*m)*D,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,l=e.x,o=e.y,u=e.z,h=a*l,p=a*o;return this.set(h*l+i,h*o-r*u,h*u+r*o,0,h*o+r*u,p*o+i,p*u-r*l,0,h*u-r*o,p*u+r*l,a*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,l){return this.set(1,i,a,0,e,1,l,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,l=t._y,o=t._z,u=t._w,h=a+a,p=l+l,f=o+o,m=a*h,y=a*p,x=a*f,w=l*p,S=l*f,b=o*f,v=u*h,_=u*p,E=u*f,R=i.x,M=i.y,D=i.z;return r[0]=(1-(w+b))*R,r[1]=(y+E)*R,r[2]=(x-_)*R,r[3]=0,r[4]=(y-E)*M,r[5]=(1-(m+b))*M,r[6]=(S+v)*M,r[7]=0,r[8]=(x+_)*D,r[9]=(S-v)*D,r[10]=(1-(m+w))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;if(e.x=r[12],e.y=r[13],e.z=r[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let a=kc.set(r[0],r[1],r[2]).length();const l=kc.set(r[4],r[5],r[6]).length(),o=kc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),fs.copy(this);const h=1/a,p=1/l,f=1/o;return fs.elements[0]*=h,fs.elements[1]*=h,fs.elements[2]*=h,fs.elements[4]*=p,fs.elements[5]*=p,fs.elements[6]*=p,fs.elements[8]*=f,fs.elements[9]*=f,fs.elements[10]*=f,t.setFromRotationMatrix(fs),i.x=a,i.y=l,i.z=o,this}makePerspective(e,t,i,r,a,l,o=Ys,u=!1){const h=this.elements,p=2*a/(t-e),f=2*a/(i-r),m=(t+e)/(t-e),y=(i+r)/(i-r);let x,w;if(u)x=a/(l-a),w=l*a/(l-a);else if(o===Ys)x=-(l+a)/(l-a),w=-2*l*a/(l-a);else if(o===Gh)x=-l/(l-a),w=-l*a/(l-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return h[0]=p,h[4]=0,h[8]=m,h[12]=0,h[1]=0,h[5]=f,h[9]=y,h[13]=0,h[2]=0,h[6]=0,h[10]=x,h[14]=w,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,r,a,l,o=Ys,u=!1){const h=this.elements,p=2/(t-e),f=2/(i-r),m=-(t+e)/(t-e),y=-(i+r)/(i-r);let x,w;if(u)x=1/(l-a),w=l/(l-a);else if(o===Ys)x=-2/(l-a),w=-(l+a)/(l-a);else if(o===Gh)x=-1/(l-a),w=-a/(l-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return h[0]=p,h[4]=0,h[8]=0,h[12]=m,h[1]=0,h[5]=f,h[9]=0,h[13]=y,h[2]=0,h[6]=0,h[10]=x,h[14]=w,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const kc=new se,fs=new Jt,GN=new se(0,0,0),KN=new se(1,1,1),Ao=new se,Nf=new se,Tr=new se,jS=new Jt,HS=new Ir;class Zs{constructor(e=0,t=0,i=0,r=Zs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],l=r[4],o=r[8],u=r[1],h=r[5],p=r[9],f=r[2],m=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Nt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(m,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Nt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(Nt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,y),this._z=Math.atan2(-l,h)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-Nt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-l,h));break;case"YZX":this._z=Math.asin(Nt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,h),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-Nt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-p,y),this._y=0);break;default:Mt("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return jS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return HS.setFromEuler(this),this.setFromQuaternion(HS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Zs.DEFAULT_ORDER="XYZ";class YC{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let YN=0;const qS=new se,Mc=new Ir,ka=new Jt,Df=new se,ph=new se,XN=new se,ZN=new Ir,VS=new se(1,0,0),WS=new se(0,1,0),$S=new se(0,0,1),GS={type:"added"},JN={type:"removed"},Rc={type:"childadded",child:null},Fy={type:"childremoved",child:null};class Sn extends Po{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:YN++}),this.uuid=Dr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sn.DEFAULT_UP.clone();const e=new se,t=new Zs,i=new Ir,r=new se(1,1,1);function a(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Jt},normalMatrix:{value:new Js}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=Sn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new YC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Mc.setFromAxisAngle(e,t),this.quaternion.multiply(Mc),this}rotateOnWorldAxis(e,t){return Mc.setFromAxisAngle(e,t),this.quaternion.premultiply(Mc),this}rotateX(e){return this.rotateOnAxis(VS,e)}rotateY(e){return this.rotateOnAxis(WS,e)}rotateZ(e){return this.rotateOnAxis($S,e)}translateOnAxis(e,t){return qS.copy(e).applyQuaternion(this.quaternion),this.position.add(qS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(VS,e)}translateY(e){return this.translateOnAxis(WS,e)}translateZ(e){return this.translateOnAxis($S,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ka.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Df.copy(e):Df.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ph.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ka.lookAt(ph,Df,this.up):ka.lookAt(Df,ph,this.up),this.quaternion.setFromRotationMatrix(ka),r&&(ka.extractRotation(r.matrixWorld),Mc.setFromRotationMatrix(ka),this.quaternion.premultiply(Mc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(xn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(GS),Rc.child=e,this.dispatchEvent(Rc),Rc.child=null):xn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(JN),Fy.child=e,this.dispatchEvent(Fy),Fy.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ka.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ka.multiply(e.parent.matrixWorld)),e.applyMatrix4(ka),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(GS),Rc.child=e,this.dispatchEvent(Rc),Rc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ph,e,XN),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ph,ZN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,l=r.length;a<l;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(o,u){return o[u.uuid]===void 0&&(o[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const u=o.shapes;if(Array.isArray(u))for(let h=0,p=u.length;h<p;h++){const f=u[h];a(e.shapes,f)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let u=0,h=this.material.length;u<h;u++)o.push(a(e.materials,this.material[u]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const u=this.animations[o];r.animations.push(a(e.animations,u))}}if(t){const o=l(e.geometries),u=l(e.materials),h=l(e.textures),p=l(e.images),f=l(e.shapes),m=l(e.skeletons),y=l(e.animations),x=l(e.nodes);o.length>0&&(i.geometries=o),u.length>0&&(i.materials=u),h.length>0&&(i.textures=h),p.length>0&&(i.images=p),f.length>0&&(i.shapes=f),m.length>0&&(i.skeletons=m),y.length>0&&(i.animations=y),x.length>0&&(i.nodes=x)}return i.object=r,i;function l(o){const u=[];for(const h in o){const p=o[h];delete p.metadata,u.push(p)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Sn.DEFAULT_UP=new se(0,1,0);Sn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ps=new se,Ma=new se,Uy=new se,Ra=new se,Oc=new se,Nc=new se,KS=new se,jy=new se,Hy=new se,qy=new se,Vy=new ns,Wy=new ns,$y=new ns;class Or{constructor(e=new se,t=new se,i=new se){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ps.subVectors(e,t),r.cross(ps);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){ps.subVectors(r,t),Ma.subVectors(i,t),Uy.subVectors(e,t);const l=ps.dot(ps),o=ps.dot(Ma),u=ps.dot(Uy),h=Ma.dot(Ma),p=Ma.dot(Uy),f=l*h-o*o;if(f===0)return a.set(0,0,0),null;const m=1/f,y=(h*u-o*p)*m,x=(l*p-o*u)*m;return a.set(1-y-x,x,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ra)===null?!1:Ra.x>=0&&Ra.y>=0&&Ra.x+Ra.y<=1}static getInterpolation(e,t,i,r,a,l,o,u){return this.getBarycoord(e,t,i,r,Ra)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,Ra.x),u.addScaledVector(l,Ra.y),u.addScaledVector(o,Ra.z),u)}static getInterpolatedAttribute(e,t,i,r,a,l){return Vy.setScalar(0),Wy.setScalar(0),$y.setScalar(0),Vy.fromBufferAttribute(e,t),Wy.fromBufferAttribute(e,i),$y.fromBufferAttribute(e,r),l.setScalar(0),l.addScaledVector(Vy,a.x),l.addScaledVector(Wy,a.y),l.addScaledVector($y,a.z),l}static isFrontFacing(e,t,i,r){return ps.subVectors(i,t),Ma.subVectors(e,t),ps.cross(Ma).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ps.subVectors(this.c,this.b),Ma.subVectors(this.a,this.b),ps.cross(Ma).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Or.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Or.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return Or.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return Or.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Or.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let l,o;Oc.subVectors(r,i),Nc.subVectors(a,i),jy.subVectors(e,i);const u=Oc.dot(jy),h=Nc.dot(jy);if(u<=0&&h<=0)return t.copy(i);Hy.subVectors(e,r);const p=Oc.dot(Hy),f=Nc.dot(Hy);if(p>=0&&f<=p)return t.copy(r);const m=u*f-p*h;if(m<=0&&u>=0&&p<=0)return l=u/(u-p),t.copy(i).addScaledVector(Oc,l);qy.subVectors(e,a);const y=Oc.dot(qy),x=Nc.dot(qy);if(x>=0&&y<=x)return t.copy(a);const w=y*h-u*x;if(w<=0&&h>=0&&x<=0)return o=h/(h-x),t.copy(i).addScaledVector(Nc,o);const S=p*x-y*f;if(S<=0&&f-p>=0&&y-x>=0)return KS.subVectors(a,r),o=(f-p)/(f-p+(y-x)),t.copy(r).addScaledVector(KS,o);const b=1/(S+w+m);return l=w*b,o=m*b,t.copy(i).addScaledVector(Oc,l).addScaledVector(Nc,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const XC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},To={h:0,s:0,l:0},If={h:0,s:0,l:0};function Gy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class jt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Jr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Rr.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=Rr.workingColorSpace){return this.r=e,this.g=t,this.b=i,Rr.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=Rr.workingColorSpace){if(e=W0(e,1),t=Nt(t,0,1),i=Nt(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,l=2*i-a;this.r=Gy(l,a,e+1/3),this.g=Gy(l,a,e),this.b=Gy(l,a,e-1/3)}return Rr.colorSpaceToWorking(this,r),this}setStyle(e,t=Jr){function i(a){a!==void 0&&parseFloat(a)<1&&Mt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const l=r[1],o=r[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:Mt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],l=a.length;if(l===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(a,16),t);Mt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Jr){const i=XC[e.toLowerCase()];return i!==void 0?this.setHex(i,t):Mt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ba(e.r),this.g=Ba(e.g),this.b=Ba(e.b),this}copyLinearToSRGB(e){return this.r=eu(e.r),this.g=eu(e.g),this.b=eu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Jr){return Rr.workingToColorSpace(Gi.copy(this),e),Math.round(Nt(Gi.r*255,0,255))*65536+Math.round(Nt(Gi.g*255,0,255))*256+Math.round(Nt(Gi.b*255,0,255))}getHexString(e=Jr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Rr.workingColorSpace){Rr.workingToColorSpace(Gi.copy(this),t);const i=Gi.r,r=Gi.g,a=Gi.b,l=Math.max(i,r,a),o=Math.min(i,r,a);let u,h;const p=(o+l)/2;if(o===l)u=0,h=0;else{const f=l-o;switch(h=p<=.5?f/(l+o):f/(2-l-o),l){case i:u=(r-a)/f+(r<a?6:0);break;case r:u=(a-i)/f+2;break;case a:u=(i-r)/f+4;break}u/=6}return e.h=u,e.s=h,e.l=p,e}getRGB(e,t=Rr.workingColorSpace){return Rr.workingToColorSpace(Gi.copy(this),t),e.r=Gi.r,e.g=Gi.g,e.b=Gi.b,e}getStyle(e=Jr){Rr.workingToColorSpace(Gi.copy(this),e);const t=Gi.r,i=Gi.g,r=Gi.b;return e!==Jr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(To),this.setHSL(To.h+e,To.s+t,To.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(To),e.getHSL(If);const i=Bh(To.h,If.h,t),r=Bh(To.s,If.s,t),a=Bh(To.l,If.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Gi=new jt;jt.NAMES=XC;let QN=0;class lr extends Po{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:QN++}),this.uuid=Dr(),this.name="",this.type="Material",this.blending=CS,this.side=Q_,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=TS,this.blendDst=kS,this.blendEquation=AS,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new jt(0,0,0),this.blendAlpha=0,this.depthFunc=MS,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=DS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wc,this.stencilZFail=wc,this.stencilZPass=wc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){Mt(`Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){Mt(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==CS&&(i.blending=this.blending),this.side!==Q_&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==TS&&(i.blendSrc=this.blendSrc),this.blendDst!==kS&&(i.blendDst=this.blendDst),this.blendEquation!==AS&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==MS&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==DS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==wc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==wc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==wc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const l=[];for(const o in a){const u=a[o];delete u.metadata,l.push(u)}return l}if(t){const a=r(e.textures),l=r(e.images);a.length>0&&(i.textures=a),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class hu extends lr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zs,this.combine=j0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Da=eD();function eD(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const h=u-127;h<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):h<-14?(i[u]=1024>>-h-14,i[u|256]=1024>>-h-14|32768,r[u]=-h-1,r[u|256]=-h-1):h<=15?(i[u]=h+15<<10,i[u|256]=h+15<<10|32768,r[u]=13,r[u|256]=13):h<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const a=new Uint32Array(2048),l=new Uint32Array(64),o=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,p=0;for(;(h&8388608)===0;)h<<=1,p-=8388608;h&=-8388609,p+=947912704,a[u]=h|p}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)l[u]=u<<23;l[31]=1199570944,l[32]=2147483648;for(let u=33;u<63;++u)l[u]=2147483648+(u-32<<23);l[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(o[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:l,offsetTable:o}}function yr(n){Math.abs(n)>65504&&Mt("DataUtils.toHalfFloat(): Value out of range."),n=Nt(n,-65504,65504),Da.floatView[0]=n;const e=Da.uint32View[0],t=e>>23&511;return Da.baseTable[t]+((e&8388607)>>Da.shiftTable[t])}function Oh(n){const e=n>>10;return Da.uint32View[0]=Da.mantissaTable[Da.offsetTable[e]+(n&1023)]+Da.exponentTable[e],Da.floatView[0]}class $${static toHalfFloat(e){return yr(e)}static fromHalfFloat(e){return Oh(e)}}const yi=new se,Lf=new Xe;let tD=0;class ni{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:tD++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Up,this.updateRanges=[],this.gpuType=iu,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Lf.fromBufferAttribute(this,t),Lf.applyMatrix3(e),this.setXY(t,Lf.x,Lf.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix3(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix4(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)yi.fromBufferAttribute(this,t),yi.applyNormalMatrix(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)yi.fromBufferAttribute(this,t),yi.transformDirection(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=sr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Kt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array),r=Kt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array),r=Kt(r,this.array),a=Kt(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Up&&(e.usage=this.usage),e}}class G$ extends ni{constructor(e,t,i){super(new Int8Array(e),t,i)}}class K$ extends ni{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Y$ extends ni{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class X$ extends ni{constructor(e,t,i){super(new Int16Array(e),t,i)}}class nD extends ni{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Z$ extends ni{constructor(e,t,i){super(new Int32Array(e),t,i)}}class iD extends ni{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class J$ extends ni{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Oh(this.array[e*this.itemSize]);return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize]=yr(t),this}getY(e){let t=Oh(this.array[e*this.itemSize+1]);return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+1]=yr(t),this}getZ(e){let t=Oh(this.array[e*this.itemSize+2]);return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+2]=yr(t),this}getW(e){let t=Oh(this.array[e*this.itemSize+3]);return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.array[e*this.itemSize+3]=yr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array)),this.array[e+0]=yr(t),this.array[e+1]=yr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array),r=Kt(r,this.array)),this.array[e+0]=yr(t),this.array[e+1]=yr(i),this.array[e+2]=yr(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array),r=Kt(r,this.array),a=Kt(a,this.array)),this.array[e+0]=yr(t),this.array[e+1]=yr(i),this.array[e+2]=yr(r),this.array[e+3]=yr(a),this}}class gt extends ni{constructor(e,t,i){super(new Float32Array(e),t,i)}}let rD=0;const Zr=new Jt,Ky=new Sn,Dc=new se,kr=new or,mh=new or,Oi=new se;class nn extends Po{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rD++}),this.uuid=Dr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wN(e)?iD:nD)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Js().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zr.makeRotationFromQuaternion(e),this.applyMatrix4(Zr),this}rotateX(e){return Zr.makeRotationX(e),this.applyMatrix4(Zr),this}rotateY(e){return Zr.makeRotationY(e),this.applyMatrix4(Zr),this}rotateZ(e){return Zr.makeRotationZ(e),this.applyMatrix4(Zr),this}translate(e,t,i){return Zr.makeTranslation(e,t,i),this.applyMatrix4(Zr),this}scale(e,t,i){return Zr.makeScale(e,t,i),this.applyMatrix4(Zr),this}lookAt(e){return Ky.lookAt(e),Ky.updateMatrix(),this.applyMatrix4(Ky.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Dc).negate(),this.translate(Dc.x,Dc.y,Dc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];i.push(l.x,l.y,l.z||0)}this.setAttribute("position",new gt(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&Mt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new or);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){xn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];kr.setFromBufferAttribute(a),this.morphTargetsRelative?(Oi.addVectors(this.boundingBox.min,kr.min),this.boundingBox.expandByPoint(Oi),Oi.addVectors(this.boundingBox.max,kr.max),this.boundingBox.expandByPoint(Oi)):(this.boundingBox.expandByPoint(kr.min),this.boundingBox.expandByPoint(kr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&xn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){xn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new se,1/0);return}if(e){const i=this.boundingSphere.center;if(kr.setFromBufferAttribute(e),t)for(let a=0,l=t.length;a<l;a++){const o=t[a];mh.setFromBufferAttribute(o),this.morphTargetsRelative?(Oi.addVectors(kr.min,mh.min),kr.expandByPoint(Oi),Oi.addVectors(kr.max,mh.max),kr.expandByPoint(Oi)):(kr.expandByPoint(mh.min),kr.expandByPoint(mh.max))}kr.getCenter(i);let r=0;for(let a=0,l=e.count;a<l;a++)Oi.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Oi));if(t)for(let a=0,l=t.length;a<l;a++){const o=t[a],u=this.morphTargetsRelative;for(let h=0,p=o.count;h<p;h++)Oi.fromBufferAttribute(o,h),u&&(Dc.fromBufferAttribute(e,h),Oi.add(Dc)),r=Math.max(r,i.distanceToSquared(Oi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&xn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){xn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ni(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),o=[],u=[];for(let O=0;O<i.count;O++)o[O]=new se,u[O]=new se;const h=new se,p=new se,f=new se,m=new Xe,y=new Xe,x=new Xe,w=new se,S=new se;function b(O,L,j){h.fromBufferAttribute(i,O),p.fromBufferAttribute(i,L),f.fromBufferAttribute(i,j),m.fromBufferAttribute(a,O),y.fromBufferAttribute(a,L),x.fromBufferAttribute(a,j),p.sub(h),f.sub(h),y.sub(m),x.sub(m);const X=1/(y.x*x.y-x.x*y.y);isFinite(X)&&(w.copy(p).multiplyScalar(x.y).addScaledVector(f,-y.y).multiplyScalar(X),S.copy(f).multiplyScalar(y.x).addScaledVector(p,-x.x).multiplyScalar(X),o[O].add(w),o[L].add(w),o[j].add(w),u[O].add(S),u[L].add(S),u[j].add(S))}let v=this.groups;v.length===0&&(v=[{start:0,count:e.count}]);for(let O=0,L=v.length;O<L;++O){const j=v[O],X=j.start,G=j.count;for(let H=X,$=X+G;H<$;H+=3)b(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const _=new se,E=new se,R=new se,M=new se;function D(O){R.fromBufferAttribute(r,O),M.copy(R);const L=o[O];_.copy(L),_.sub(R.multiplyScalar(R.dot(L))).normalize(),E.crossVectors(M,L);const X=E.dot(u[O])<0?-1:1;l.setXYZW(O,_.x,_.y,_.z,X)}for(let O=0,L=v.length;O<L;++O){const j=v[O],X=j.start,G=j.count;for(let H=X,$=X+G;H<$;H+=3)D(e.getX(H+0)),D(e.getX(H+1)),D(e.getX(H+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ni(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,y=i.count;m<y;m++)i.setXYZ(m,0,0,0);const r=new se,a=new se,l=new se,o=new se,u=new se,h=new se,p=new se,f=new se;if(e)for(let m=0,y=e.count;m<y;m+=3){const x=e.getX(m+0),w=e.getX(m+1),S=e.getX(m+2);r.fromBufferAttribute(t,x),a.fromBufferAttribute(t,w),l.fromBufferAttribute(t,S),p.subVectors(l,a),f.subVectors(r,a),p.cross(f),o.fromBufferAttribute(i,x),u.fromBufferAttribute(i,w),h.fromBufferAttribute(i,S),o.add(p),u.add(p),h.add(p),i.setXYZ(x,o.x,o.y,o.z),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(S,h.x,h.y,h.z)}else for(let m=0,y=t.count;m<y;m+=3)r.fromBufferAttribute(t,m+0),a.fromBufferAttribute(t,m+1),l.fromBufferAttribute(t,m+2),p.subVectors(l,a),f.subVectors(r,a),p.cross(f),i.setXYZ(m+0,p.x,p.y,p.z),i.setXYZ(m+1,p.x,p.y,p.z),i.setXYZ(m+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Oi.fromBufferAttribute(e,t),Oi.normalize(),e.setXYZ(t,Oi.x,Oi.y,Oi.z)}toNonIndexed(){function e(o,u){const h=o.array,p=o.itemSize,f=o.normalized,m=new h.constructor(u.length*p);let y=0,x=0;for(let w=0,S=u.length;w<S;w++){o.isInterleavedBufferAttribute?y=u[w]*o.data.stride+o.offset:y=u[w]*p;for(let b=0;b<p;b++)m[x++]=h[y++]}return new ni(m,p,f)}if(this.index===null)return Mt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new nn,i=this.index.array,r=this.attributes;for(const o in r){const u=r[o],h=e(u,i);t.setAttribute(o,h)}const a=this.morphAttributes;for(const o in a){const u=[],h=a[o];for(let p=0,f=h.length;p<f;p++){const m=h[p],y=e(m,i);u.push(y)}t.morphAttributes[o]=u}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let o=0,u=l.length;o<u;o++){const h=l[o];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const r={};let a=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],p=[];for(let f=0,m=h.length;f<m;f++){const y=h[f];p.push(y.toJSON(e.data))}p.length>0&&(r[u]=p,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const h in r){const p=r[h];this.setAttribute(h,p.clone(t))}const a=e.morphAttributes;for(const h in a){const p=[],f=a[h];for(let m=0,y=f.length;m<y;m++)p.push(f[m].clone(t));this.morphAttributes[h]=p}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let h=0,p=l.length;h<p;h++){const f=l[h];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const YS=new Jt,ul=new ad,Bf=new Xi,XS=new se,zf=new se,Pf=new se,Ff=new se,Yy=new se,Uf=new se,ZS=new se,jf=new se;class ws extends Sn{constructor(e=new nn,t=new hu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){Uf.set(0,0,0);for(let u=0,h=a.length;u<h;u++){const p=o[u],f=a[u];p!==0&&(Yy.fromBufferAttribute(f,e),l?Uf.addScaledVector(Yy,p):Uf.addScaledVector(Yy.sub(t),p))}t.add(Uf)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Bf.copy(i.boundingSphere),Bf.applyMatrix4(a),ul.copy(e.ray).recast(e.near),!(Bf.containsPoint(ul.origin)===!1&&(ul.intersectSphere(Bf,XS)===null||ul.origin.distanceToSquared(XS)>(e.far-e.near)**2))&&(YS.copy(a).invert(),ul.copy(e.ray).applyMatrix4(YS),!(i.boundingBox!==null&&ul.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ul)))}_computeIntersections(e,t,i){let r;const a=this.geometry,l=this.material,o=a.index,u=a.attributes.position,h=a.attributes.uv,p=a.attributes.uv1,f=a.attributes.normal,m=a.groups,y=a.drawRange;if(o!==null)if(Array.isArray(l))for(let x=0,w=m.length;x<w;x++){const S=m[x],b=l[S.materialIndex],v=Math.max(S.start,y.start),_=Math.min(o.count,Math.min(S.start+S.count,y.start+y.count));for(let E=v,R=_;E<R;E+=3){const M=o.getX(E),D=o.getX(E+1),O=o.getX(E+2);r=Hf(this,b,e,i,h,p,f,M,D,O),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,y.start),w=Math.min(o.count,y.start+y.count);for(let S=x,b=w;S<b;S+=3){const v=o.getX(S),_=o.getX(S+1),E=o.getX(S+2);r=Hf(this,l,e,i,h,p,f,v,_,E),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(l))for(let x=0,w=m.length;x<w;x++){const S=m[x],b=l[S.materialIndex],v=Math.max(S.start,y.start),_=Math.min(u.count,Math.min(S.start+S.count,y.start+y.count));for(let E=v,R=_;E<R;E+=3){const M=E,D=E+1,O=E+2;r=Hf(this,b,e,i,h,p,f,M,D,O),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,y.start),w=Math.min(u.count,y.start+y.count);for(let S=x,b=w;S<b;S+=3){const v=S,_=S+1,E=S+2;r=Hf(this,l,e,i,h,p,f,v,_,E),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function sD(n,e,t,i,r,a,l,o){let u;if(e.side===jC?u=i.intersectTriangle(l,a,r,!0,o):u=i.intersectTriangle(r,a,l,e.side===Q_,o),u===null)return null;jf.copy(o),jf.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(jf);return h<t.near||h>t.far?null:{distance:h,point:jf.clone(),object:n}}function Hf(n,e,t,i,r,a,l,o,u,h){n.getVertexPosition(o,zf),n.getVertexPosition(u,Pf),n.getVertexPosition(h,Ff);const p=sD(n,e,t,i,zf,Pf,Ff,ZS);if(p){const f=new se;Or.getBarycoord(ZS,zf,Pf,Ff,f),r&&(p.uv=Or.getInterpolatedAttribute(r,o,u,h,f,new Xe)),a&&(p.uv1=Or.getInterpolatedAttribute(a,o,u,h,f,new Xe)),l&&(p.normal=Or.getInterpolatedAttribute(l,o,u,h,f,new se),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const m={a:o,b:u,c:h,normal:new se,materialIndex:0};Or.getNormal(zf,Pf,Ff,m.normal),p.face=m,p.barycoord=f}return p}class Gn extends nn{constructor(e=1,t=1,i=1,r=1,a=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:l};const o=this;r=Math.floor(r),a=Math.floor(a),l=Math.floor(l);const u=[],h=[],p=[],f=[];let m=0,y=0;x("z","y","x",-1,-1,i,t,e,l,a,0),x("z","y","x",1,-1,i,t,-e,l,a,1),x("x","z","y",1,1,e,i,t,r,l,2),x("x","z","y",1,-1,e,i,-t,r,l,3),x("x","y","z",1,-1,e,t,i,r,a,4),x("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(u),this.setAttribute("position",new gt(h,3)),this.setAttribute("normal",new gt(p,3)),this.setAttribute("uv",new gt(f,2));function x(w,S,b,v,_,E,R,M,D,O,L){const j=E/D,X=R/O,G=E/2,H=R/2,$=M/2,Q=D+1,Y=O+1;let te=0,re=0;const U=new se;for(let B=0;B<Y;B++){const P=B*X-H;for(let Z=0;Z<Q;Z++){const V=Z*j-G;U[w]=V*v,U[S]=P*_,U[b]=$,h.push(U.x,U.y,U.z),U[w]=0,U[S]=0,U[b]=M>0?1:-1,p.push(U.x,U.y,U.z),f.push(Z/D),f.push(1-B/O),te+=1}}for(let B=0;B<O;B++)for(let P=0;P<D;P++){const Z=m+P+Q*B,V=m+P+Q*(B+1),_e=m+(P+1)+Q*(B+1),we=m+(P+1)+Q*B;u.push(Z,V,we),u.push(V,_e,we),re+=6}o.addGroup(y,re,L),y+=re,m+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fm(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Mt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function aD(n){const e={};for(let t=0;t<n.length;t++){const i=fm(n[t]);for(const r in i)e[r]=i[r]}return e}function oD(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Q$(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Rr.workingColorSpace}const eG={clone:fm,merge:aD};var lD=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cD=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class G0 extends lr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=lD,this.fragmentShader=cD,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fm(e.uniforms),this.uniformsGroups=oD(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const l=this.uniforms[r].value;l&&l.isTexture?t.uniforms[r]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[r]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[r]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[r]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[r]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[r]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[r]={type:"m4",value:l.toArray()}:t.uniforms[r]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class K0 extends Sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt,this.coordinateSystem=Ys,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ko=new se,JS=new Xe,QS=new Xe;class Qr extends K0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Kh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(El*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Kh*2*Math.atan(Math.tan(El*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ko.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ko.x,ko.y).multiplyScalar(-e/ko.z),ko.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ko.x,ko.y).multiplyScalar(-e/ko.z)}getViewSize(e,t){return this.getViewBounds(e,JS,QS),t.subVectors(QS,JS)}setViewOffset(e,t,i,r,a,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(El*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const l=this.view;if(this.view!==null&&this.view.enabled){const u=l.fullWidth,h=l.fullHeight;a+=l.offsetX*r/u,t-=l.offsetY*i/h,r*=l.width/u,i*=l.height/h}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ic=-90,Lc=1;class uD extends Sn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Qr(Ic,Lc,e,t);r.layers=this.layers,this.add(r);const a=new Qr(Ic,Lc,e,t);a.layers=this.layers,this.add(a);const l=new Qr(Ic,Lc,e,t);l.layers=this.layers,this.add(l);const o=new Qr(Ic,Lc,e,t);o.layers=this.layers,this.add(o);const u=new Qr(Ic,Lc,e,t);u.layers=this.layers,this.add(u);const h=new Qr(Ic,Lc,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,l,o,u]=t;for(const h of t)this.remove(h);if(e===Ys)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Gh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,l,o,u,h,p]=this.children,f=e.getRenderTarget(),m=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,l),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(f,m,y),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class Y0 extends vi{constructor(e=[],t=um,i,r,a,l,o,u,h,p){super(e,t,i,r,a,l,o,u,h,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tG extends $0{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Y0(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Gn(5,5,5),a=new G0({name:"CubemapFromEquirect",uniforms:fm(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:jC,blending:f3});a.uniforms.tEquirect.value=t;const l=new ws(r,a),o=t.minFilter;return t.minFilter===hm&&(t.minFilter=ts),new uD(1,10,this).update(e,l),t.minFilter=o,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,r);e.setRenderTarget(a)}}class Nh extends Sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const hD={type:"move"};class nG{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Nh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Nh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Nh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,l=null;const o=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){l=!0;for(const w of e.hand.values()){const S=t.getJointPose(w,i),b=this._getHandJoint(h,w);S!==null&&(b.matrix.fromArray(S.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=S.radius),b.visible=S!==null}const p=h.joints["index-finger-tip"],f=h.joints["thumb-tip"],m=p.position.distanceTo(f.position),y=.02,x=.005;h.inputState.pinching&&m>y+x?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&m<=y-x&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(hD)))}return o!==null&&(o.visible=r!==null),u!==null&&(u.visible=a!==null),h!==null&&(h.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Nh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class X0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new jt(e),this.density=t}clone(){return new X0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Z0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new jt(e),this.near=t,this.far=i}clone(){return new Z0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class dD extends Sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Zs,this.environmentIntensity=1,this.environmentRotation=new Zs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class J0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Up,this.updateRanges=[],this.version=0,this.uuid=Dr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const nr=new se;class ru{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)nr.fromBufferAttribute(this,t),nr.applyMatrix4(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)nr.fromBufferAttribute(this,t),nr.applyNormalMatrix(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)nr.fromBufferAttribute(this,t),nr.transformDirection(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=sr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Kt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=sr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=sr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=sr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=sr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array),r=Kt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kt(t,this.array),i=Kt(i,this.array),r=Kt(r,this.array),a=Kt(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){LS("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new ni(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ru(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){LS("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ZC extends lr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new jt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Bc;const gh=new se,zc=new se,Pc=new se,Fc=new Xe,yh=new Xe,JC=new Jt,qf=new se,_h=new se,Vf=new se,ew=new Xe,Xy=new Xe,tw=new Xe;class fD extends Sn{constructor(e=new ZC){if(super(),this.isSprite=!0,this.type="Sprite",Bc===void 0){Bc=new nn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new J0(t,5);Bc.setIndex([0,1,2,0,2,3]),Bc.setAttribute("position",new ru(i,3,0,!1)),Bc.setAttribute("uv",new ru(i,2,3,!1))}this.geometry=Bc,this.material=e,this.center=new Xe(.5,.5),this.count=1}raycast(e,t){e.camera===null&&xn('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),zc.setFromMatrixScale(this.matrixWorld),JC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Pc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&zc.multiplyScalar(-Pc.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const l=this.center;Wf(qf.set(-.5,-.5,0),Pc,l,zc,r,a),Wf(_h.set(.5,-.5,0),Pc,l,zc,r,a),Wf(Vf.set(.5,.5,0),Pc,l,zc,r,a),ew.set(0,0),Xy.set(1,0),tw.set(1,1);let o=e.ray.intersectTriangle(qf,_h,Vf,!1,gh);if(o===null&&(Wf(_h.set(-.5,.5,0),Pc,l,zc,r,a),Xy.set(0,1),o=e.ray.intersectTriangle(qf,Vf,_h,!1,gh),o===null))return;const u=e.ray.origin.distanceTo(gh);u<e.near||u>e.far||t.push({distance:u,point:gh.clone(),uv:Or.getInterpolation(gh,qf,_h,Vf,ew,Xy,tw,new Xe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Wf(n,e,t,i,r,a){Fc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(yh.x=a*Fc.x-r*Fc.y,yh.y=r*Fc.x+a*Fc.y):yh.copy(Fc),n.copy(e),n.x+=yh.x,n.y+=yh.y,n.applyMatrix4(JC)}const $f=new se,nw=new se;class pD extends Sn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){$f.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo($f);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){$f.setFromMatrixPosition(e.matrixWorld),nw.setFromMatrixPosition(this.matrixWorld);const i=$f.distanceTo(nw)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let l=t[r].distance;if(t[r].object.visible&&(l-=l*t[r].hysteresis),i>=l)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const l=i[r];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const iw=new se,rw=new ns,sw=new ns,mD=new se,aw=new Jt,Gf=new se,Zy=new Xi,ow=new Jt,Jy=new ad;class gD extends ws{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=RS,this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new or),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Gf),this.boundingBox.expandByPoint(Gf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Xi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Gf),this.boundingSphere.expandByPoint(Gf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Zy.copy(this.boundingSphere),Zy.applyMatrix4(r),e.ray.intersectsSphere(Zy)!==!1&&(ow.copy(r).invert(),Jy.copy(e.ray).applyMatrix4(ow),!(this.boundingBox!==null&&Jy.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Jy)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ns,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===RS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===p3?this.bindMatrixInverse.copy(this.bindMatrix).invert():Mt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;rw.fromBufferAttribute(r.attributes.skinIndex,e),sw.fromBufferAttribute(r.attributes.skinWeight,e),iw.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const l=sw.getComponent(a);if(l!==0){const o=rw.getComponent(a);aw.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(mD.copy(iw).applyMatrix4(aw),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class QC extends Sn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class za extends vi{constructor(e=null,t=1,i=1,r,a,l,o,u,h=Br,p=Br,f,m){super(null,l,o,u,h,p,r,a,f,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const lw=new Jt,yD=new Jt;class Q0{constructor(e=[],t=[]){this.uuid=Dr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){Mt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Jt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,l=e.length;a<l;a++){const o=e[a]?e[a].matrixWorld:yD;lw.multiplyMatrices(o,t[a]),lw.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Q0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new za(t,e,e,$h,iu);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let l=t[a];l===void 0&&(Mt("Skeleton: No bone found with UUID:",a),l=new QC),this.bones.push(l),this.boneInverses.push(new Jt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const l=t[r];e.bones.push(l.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class Yh extends ni{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Uc=new Jt,cw=new Jt,Kf=[],uw=new or,_D=new Jt,bh=new ws,vh=new Xi;class bD extends ws{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Yh(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,_D)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new or),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Uc),uw.copy(e.boundingBox).applyMatrix4(Uc),this.boundingBox.union(uw)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Xi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Uc),vh.copy(e.boundingSphere).applyMatrix4(Uc),this.boundingSphere.union(vh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,l=e*a+1;for(let o=0;o<i.length;o++)i[o]=r[l+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(bh.geometry=this.geometry,bh.material=this.material,bh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vh.copy(this.boundingSphere),vh.applyMatrix4(i),e.ray.intersectsSphere(vh)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,Uc),cw.multiplyMatrices(i,Uc),bh.matrixWorld=cw,bh.raycast(e,Kf);for(let l=0,o=Kf.length;l<o;l++){const u=Kf[l];u.instanceId=a,u.object=this,t.push(u)}Kf.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Yh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new za(new Float32Array(r*this.count),r,this.count,HC,iu));const a=this.morphTexture.source.data.data;let l=0;for(let h=0;h<i.length;h++)l+=i[h];const o=this.geometry.morphTargetsRelative?1:1-l,u=r*e;a[u]=o,a.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Qy=new se,vD=new se,xD=new Js;class jc{constructor(e=new se(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Qy.subVectors(i,t).cross(vD.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Qy),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||xD.getNormalMatrix(e),r=this.coplanarPoint(Qy).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const hl=new Xi,SD=new Xe(.5,.5),Yf=new se;class eb{constructor(e=new jc,t=new jc,i=new jc,r=new jc,a=new jc,l=new jc){this.planes=[e,t,i,r,a,l]}set(e,t,i,r,a,l){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ys,i=!1){const r=this.planes,a=e.elements,l=a[0],o=a[1],u=a[2],h=a[3],p=a[4],f=a[5],m=a[6],y=a[7],x=a[8],w=a[9],S=a[10],b=a[11],v=a[12],_=a[13],E=a[14],R=a[15];if(r[0].setComponents(h-l,y-p,b-x,R-v).normalize(),r[1].setComponents(h+l,y+p,b+x,R+v).normalize(),r[2].setComponents(h+o,y+f,b+w,R+_).normalize(),r[3].setComponents(h-o,y-f,b-w,R-_).normalize(),i)r[4].setComponents(u,m,S,E).normalize(),r[5].setComponents(h-u,y-m,b-S,R-E).normalize();else if(r[4].setComponents(h-u,y-m,b-S,R-E).normalize(),t===Ys)r[5].setComponents(h+u,y+m,b+S,R+E).normalize();else if(t===Gh)r[5].setComponents(u,m,S,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),hl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),hl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(hl)}intersectsSprite(e){hl.center.set(0,0,0);const t=SD.distanceTo(e.center);return hl.radius=.7071067811865476+t,hl.applyMatrix4(e.matrixWorld),this.intersectsSphere(hl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Yf.x=r.normal.x>0?e.max.x:e.min.x,Yf.y=r.normal.y>0?e.max.y:e.min.y,Yf.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Yf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Fs=new Jt,Us=new eb;class tb{constructor(){this.coordinateSystem=Ys}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Fs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Us.setFromProjectionMatrix(Fs,r.coordinateSystem,r.reversedDepth),Us.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Fs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Us.setFromProjectionMatrix(Fs,r.coordinateSystem,r.reversedDepth),Us.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Fs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Us.setFromProjectionMatrix(Fs,r.coordinateSystem,r.reversedDepth),Us.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Fs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Us.setFromProjectionMatrix(Fs,r.coordinateSystem,r.reversedDepth),Us.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(Fs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Us.setFromProjectionMatrix(Fs,r.coordinateSystem,r.reversedDepth),Us.containsPoint(e))return!0}return!1}clone(){return new tb}}function e_(n,e){return n-e}function wD(n,e){return n.z-e.z}function ED(n,e){return e.z-n.z}class CD{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,l=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];l.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const gr=new Jt,AD=new jt(1,1,1),hw=new eb,TD=new tb,Xf=new or,dl=new Xi,xh=new se,dw=new se,kD=new se,t_=new CD,Ki=new ws,Zf=[];function MD(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let l=0;l<i;l++)e.setComponent(a+t,l,n.getComponent(a,l))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function fl(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class RD extends ws{constructor(e,t,i=t*2,r){super(new nn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new za(t,e,e,$h,iu);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new za(t,e,e,qC,dm);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new za(t,e,e,$h,iu);i.colorSpace=Rr.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:o,itemSize:u,normalized:h}=l,p=new o.constructor(i*u),f=new ni(p,u,h);t.setAttribute(a,f)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new ni(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new or);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,gr),this.getBoundingBoxAt(a,Xf).applyMatrix4(gr),e.union(Xf)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,gr),this.getBoundingSphereAt(a,dl).applyMatrix4(gr),e.union(dl)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(e_),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;gr.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const l=this._colorsTexture;return l&&(AD.toArray(l.image.data,r*4),l.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?l.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(e_),u=this._availableGeometryIds.shift(),a[u]=r):(u=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),l=t.getIndex(),o=this._geometryInfo[e];if(r&&l.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=o.vertexStart,h=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const p in i.attributes){const f=t.getAttribute(p),m=i.getAttribute(p);MD(f,m,u);const y=f.itemSize;for(let x=f.count,w=h;x<w;x++){const S=u+x;for(let b=0;b<y;b++)m.setComponent(S,b,0)}m.needsUpdate=!0,m.addUpdateRange(u*y,h*y)}if(r){const p=o.indexStart,f=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let m=0;m<l.count;m++)a.setX(p+m,u+l.getX(m));for(let m=l.count,y=f;m<y;m++)a.setX(p+m,u);a.needsUpdate=!0,a.addUpdateRange(p,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((l,o)=>o).sort((l,o)=>i[l].vertexStart-i[o].vertexStart),a=this.geometry;for(let l=0,o=i.length;l<o;l++){const u=r[l],h=i[u];if(h.active!==!1){if(a.index!==null){if(h.indexStart!==t){const{indexStart:p,vertexStart:f,reservedIndexCount:m}=h,y=a.index,x=y.array,w=e-f;for(let S=p;S<p+m;S++)x[S]=x[S]+w;y.array.copyWithin(t,p,p+m),y.addUpdateRange(t,m),y.needsUpdate=!0,h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:p,reservedVertexCount:f}=h,m=a.attributes;for(const y in m){const x=m[y],{array:w,itemSize:S}=x;w.copyWithin(e*S,p*S,(p+f)*S),x.addUpdateRange(e*S,f*S),x.needsUpdate=!0}h.vertexStart=e}e+=h.reservedVertexCount,h.start=a.index?h.indexStart:h.vertexStart,this._nextIndexStart=a.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new or,l=i.index,o=i.attributes.position;for(let u=r.start,h=r.start+r.count;u<h;u++){let p=u;l&&(p=l.getX(p)),a.expandByPoint(xh.fromBufferAttribute(o,p))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new Xi;this.getBoundingBoxAt(e,Xf),Xf.getCenter(a.center);const l=i.index,o=i.attributes.position;let u=0;for(let h=r.start,p=r.start+r.count;h<p;h++){let f=h;l&&(f=l.getX(f)),xh.fromBufferAttribute(o,f),u=Math.max(u,a.center.distanceToSquared(xh))}a.radius=Math.sqrt(u),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(e_);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);fl(this._multiDrawCounts,r),fl(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const l=this._indirectTexture,o=this._matricesTexture,u=this._colorsTexture;l.dispose(),this._initIndirectTexture(),fl(l.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),fl(o.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),fl(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new nn,this._initializeGeometry(a));const l=this.geometry;a.index&&fl(a.index.array,l.index.array);for(const o in a.attributes)fl(a.attributes[o].array,l.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,l=this.geometry;Ki.material=this.material,Ki.geometry.index=l.index,Ki.geometry.attributes=l.attributes,Ki.geometry.boundingBox===null&&(Ki.geometry.boundingBox=new or),Ki.geometry.boundingSphere===null&&(Ki.geometry.boundingSphere=new Xi);for(let o=0,u=i.length;o<u;o++){if(!i[o].visible||!i[o].active)continue;const h=i[o].geometryIndex,p=r[h];Ki.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(o,Ki.matrixWorld).premultiply(a),this.getBoundingBoxAt(h,Ki.geometry.boundingBox),this.getBoundingSphereAt(h,Ki.geometry.boundingSphere),Ki.raycast(e,Zf);for(let f=0,m=Zf.length;f<m;f++){const y=Zf[f];y.object=this,y.batchId=o,t.push(y)}Zf.length=0}Ki.material=null,Ki.geometry.index=null,Ki.geometry.attributes={},Ki.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=r.getIndex(),o=l===null?1:l.array.BYTES_PER_ELEMENT,u=this._instanceInfo,h=this._multiDrawStarts,p=this._multiDrawCounts,f=this._geometryInfo,m=this.perObjectFrustumCulled,y=this._indirectTexture,x=y.image.data,w=i.isArrayCamera?TD:hw;m&&!i.isArrayCamera&&(gr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),hw.setFromProjectionMatrix(gr,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){gr.copy(this.matrixWorld).invert(),xh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(gr),dw.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(gr);for(let _=0,E=u.length;_<E;_++)if(u[_].visible&&u[_].active){const R=u[_].geometryIndex;this.getMatrixAt(_,gr),this.getBoundingSphereAt(R,dl).applyMatrix4(gr);let M=!1;if(m&&(M=!w.intersectsSphere(dl,i)),!M){const D=f[R],O=kD.subVectors(dl.center,xh).dot(dw);t_.push(D.start,D.count,O,_)}}const b=t_.list,v=this.customSort;v===null?b.sort(a.transparent?ED:wD):v.call(this,b,i);for(let _=0,E=b.length;_<E;_++){const R=b[_];h[S]=R.start*o,p[S]=R.count,x[S]=R.index,S++}t_.reset()}else for(let b=0,v=u.length;b<v;b++)if(u[b].visible&&u[b].active){const _=u[b].geometryIndex;let E=!1;if(m&&(this.getMatrixAt(b,gr),this.getBoundingSphereAt(_,dl).applyMatrix4(gr),E=!w.intersectsSphere(dl,i)),!E){const R=f[_];h[S]=R.start*o,p[S]=R.count,x[S]=b,S++}}y.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,l){this.onBeforeRender(e,null,r,a,l)}}class cr extends lr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new jt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Hp=new se,qp=new se,fw=new Jt,Sh=new ad,Jf=new Xi,n_=new se,pw=new se;class Cl extends Sn{constructor(e=new nn,t=new cr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)Hp.fromBufferAttribute(t,r-1),qp.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Hp.distanceTo(qp);e.setAttribute("lineDistance",new gt(i,1))}else Mt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Jf.copy(i.boundingSphere),Jf.applyMatrix4(r),Jf.radius+=a,e.ray.intersectsSphere(Jf)===!1)return;fw.copy(r).invert(),Sh.copy(e.ray).applyMatrix4(fw);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,h=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(p!==null){const y=Math.max(0,l.start),x=Math.min(p.count,l.start+l.count);for(let w=y,S=x-1;w<S;w+=h){const b=p.getX(w),v=p.getX(w+1),_=Qf(this,e,Sh,u,b,v,w);_&&t.push(_)}if(this.isLineLoop){const w=p.getX(x-1),S=p.getX(y),b=Qf(this,e,Sh,u,w,S,x-1);b&&t.push(b)}}else{const y=Math.max(0,l.start),x=Math.min(m.count,l.start+l.count);for(let w=y,S=x-1;w<S;w+=h){const b=Qf(this,e,Sh,u,w,w+1,w);b&&t.push(b)}if(this.isLineLoop){const w=Qf(this,e,Sh,u,x-1,y,x-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function Qf(n,e,t,i,r,a,l){const o=n.geometry.attributes.position;if(Hp.fromBufferAttribute(o,r),qp.fromBufferAttribute(o,a),t.distanceSqToSegment(Hp,qp,n_,pw)>i)return;n_.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(n_);if(!(h<e.near||h>e.far))return{distance:h,point:pw.clone().applyMatrix4(n.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:n}}const mw=new se,gw=new se;class Ua extends Cl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)mw.fromBufferAttribute(t,r),gw.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+mw.distanceTo(gw);e.setAttribute("lineDistance",new gt(i,1))}else Mt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class OD extends Cl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class e2 extends lr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const yw=new Jt,r0=new ad,ep=new Xi,tp=new se;class ND extends Sn{constructor(e=new nn,t=new e2){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ep.copy(i.boundingSphere),ep.applyMatrix4(r),ep.radius+=a,e.ray.intersectsSphere(ep)===!1)return;yw.copy(r).invert(),r0.copy(e.ray).applyMatrix4(yw);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,h=i.index,f=i.attributes.position;if(h!==null){const m=Math.max(0,l.start),y=Math.min(h.count,l.start+l.count);for(let x=m,w=y;x<w;x++){const S=h.getX(x);tp.fromBufferAttribute(f,S),_w(tp,S,u,r,e,t,this)}}else{const m=Math.max(0,l.start),y=Math.min(f.count,l.start+l.count);for(let x=m,w=y;x<w;x++)tp.fromBufferAttribute(f,x),_w(tp,x,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,l=r.length;a<l;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function _w(n,e,t,i,r,a,l){const o=r0.distanceSqToPoint(n);if(o<t){const u=new se;r0.closestPointToPoint(n,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h<r.near||h>r.far)return;a.push({distance:h,distanceToRay:Math.sqrt(o),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class DD extends vi{constructor(e,t,i,r,a=ts,l=ts,o,u,h){super(e,t,i,r,a,l,o,u,h),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const p=this;function f(){p.needsUpdate=!0,p._requestVideoFrameCallbackId=e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(f))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class iG extends DD{constructor(e,t,i,r,a,l,o,u){super({},e,t,i,r,a,l,o,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class rG extends vi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Br,this.minFilter=Br,this.generateMipmaps=!1,this.needsUpdate=!0}}class nb extends vi{constructor(e,t,i,r,a,l,o,u,h,p,f,m){super(null,l,o,u,h,p,r,a,f,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class sG extends nb{constructor(e,t,i,r,a,l){super(e,t,i,a,l),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ks,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class aG extends nb{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,um),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class oG extends vi{constructor(e,t,i,r,a,l,o,u,h){super(e,t,i,r,a,l,o,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ID extends vi{constructor(e,t,i=dm,r,a,l,o=Br,u=Br,h,p=n0,f=1){if(p!==n0&&p!==D3)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:f};super(m,r,a,l,o,u,p,i,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Sl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class lG extends ID{constructor(e,t=dm,i=um,r,a,l=Br,o=Br,u,h=n0){const p={width:e,height:e,depth:1},f=[p,p,p,p,p,p];super(e,e,t,i,r,a,l,o,u,h),this.image=f,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class cG extends vi{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class ib extends nn{constructor(e=1,t=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:a},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const l=[],o=[],u=[],h=[],p=t/2,f=Math.PI/2*e,m=t,y=2*f+m,x=i*2+a,w=r+1,S=new se,b=new se;for(let v=0;v<=x;v++){let _=0,E=0,R=0,M=0;if(v<=i){const L=v/i,j=L*Math.PI/2;E=-p-e*Math.cos(j),R=e*Math.sin(j),M=-e*Math.cos(j),_=L*f}else if(v<=i+a){const L=(v-i)/a;E=-p+L*t,R=e,M=0,_=f+L*m}else{const L=(v-i-a)/i,j=L*Math.PI/2;E=p+e*Math.sin(j),R=e*Math.cos(j),M=e*Math.sin(j),_=f+m+L*f}const D=Math.max(0,Math.min(1,_/y));let O=0;v===0?O=.5/r:v===x&&(O=-.5/r);for(let L=0;L<=r;L++){const j=L/r,X=j*Math.PI*2,G=Math.sin(X),H=Math.cos(X);b.x=-R*H,b.y=E,b.z=R*G,o.push(b.x,b.y,b.z),S.set(-R*H,M,R*G),S.normalize(),u.push(S.x,S.y,S.z),h.push(j+O,D)}if(v>0){const L=(v-1)*w;for(let j=0;j<r;j++){const X=L+j,G=L+j+1,H=v*w+j,$=v*w+j+1;l.push(X,G,H),l.push(G,$,H)}}}this.setIndex(l),this.setAttribute("position",new gt(o,3)),this.setAttribute("normal",new gt(u,3)),this.setAttribute("uv",new gt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ib(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class rb extends nn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],l=[],o=[],u=[],h=new se,p=new Xe;l.push(0,0,0),o.push(0,0,1),u.push(.5,.5);for(let f=0,m=3;f<=t;f++,m+=3){const y=i+f/t*r;h.x=e*Math.cos(y),h.y=e*Math.sin(y),l.push(h.x,h.y,h.z),o.push(0,0,1),p.x=(l[m]/e+1)/2,p.y=(l[m+1]/e+1)/2,u.push(p.x,p.y)}for(let f=1;f<=t;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("normal",new gt(o,3)),this.setAttribute("uv",new gt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class od extends nn{constructor(e=1,t=1,i=1,r=32,a=1,l=!1,o=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:l,thetaStart:o,thetaLength:u};const h=this;r=Math.floor(r),a=Math.floor(a);const p=[],f=[],m=[],y=[];let x=0;const w=[],S=i/2;let b=0;v(),l===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(p),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(m,3)),this.setAttribute("uv",new gt(y,2));function v(){const E=new se,R=new se;let M=0;const D=(t-e)/i;for(let O=0;O<=a;O++){const L=[],j=O/a,X=j*(t-e)+e;for(let G=0;G<=r;G++){const H=G/r,$=H*u+o,Q=Math.sin($),Y=Math.cos($);R.x=X*Q,R.y=-j*i+S,R.z=X*Y,f.push(R.x,R.y,R.z),E.set(Q,D,Y).normalize(),m.push(E.x,E.y,E.z),y.push(H,1-j),L.push(x++)}w.push(L)}for(let O=0;O<r;O++)for(let L=0;L<a;L++){const j=w[L][O],X=w[L+1][O],G=w[L+1][O+1],H=w[L][O+1];(e>0||L!==0)&&(p.push(j,X,H),M+=3),(t>0||L!==a-1)&&(p.push(X,G,H),M+=3)}h.addGroup(b,M,0),b+=M}function _(E){const R=x,M=new Xe,D=new se;let O=0;const L=E===!0?e:t,j=E===!0?1:-1;for(let G=1;G<=r;G++)f.push(0,S*j,0),m.push(0,j,0),y.push(.5,.5),x++;const X=x;for(let G=0;G<=r;G++){const $=G/r*u+o,Q=Math.cos($),Y=Math.sin($);D.x=L*Y,D.y=S*j,D.z=L*Q,f.push(D.x,D.y,D.z),m.push(0,j,0),M.x=Q*.5+.5,M.y=Y*.5*j+.5,y.push(M.x,M.y),x++}for(let G=0;G<r;G++){const H=R+G,$=X+G;E===!0?p.push($,$+1,H):p.push($+1,$,H),O+=3}h.addGroup(b,O,E===!0?1:2),b+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new od(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pm extends od{constructor(e=1,t=1,i=32,r=1,a=!1,l=0,o=Math.PI*2){super(0,e,t,i,r,a,l,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:l,thetaLength:o}}static fromJSON(e){return new pm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ml extends nn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],l=[];o(r),h(i),p(),this.setAttribute("position",new gt(a,3)),this.setAttribute("normal",new gt(a.slice(),3)),this.setAttribute("uv",new gt(l,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(v){const _=new se,E=new se,R=new se;for(let M=0;M<t.length;M+=3)y(t[M+0],_),y(t[M+1],E),y(t[M+2],R),u(_,E,R,v)}function u(v,_,E,R){const M=R+1,D=[];for(let O=0;O<=M;O++){D[O]=[];const L=v.clone().lerp(E,O/M),j=_.clone().lerp(E,O/M),X=M-O;for(let G=0;G<=X;G++)G===0&&O===M?D[O][G]=L:D[O][G]=L.clone().lerp(j,G/X)}for(let O=0;O<M;O++)for(let L=0;L<2*(M-O)-1;L++){const j=Math.floor(L/2);L%2===0?(m(D[O][j+1]),m(D[O+1][j]),m(D[O][j])):(m(D[O][j+1]),m(D[O+1][j+1]),m(D[O+1][j]))}}function h(v){const _=new se;for(let E=0;E<a.length;E+=3)_.x=a[E+0],_.y=a[E+1],_.z=a[E+2],_.normalize().multiplyScalar(v),a[E+0]=_.x,a[E+1]=_.y,a[E+2]=_.z}function p(){const v=new se;for(let _=0;_<a.length;_+=3){v.x=a[_+0],v.y=a[_+1],v.z=a[_+2];const E=S(v)/2/Math.PI+.5,R=b(v)/Math.PI+.5;l.push(E,1-R)}x(),f()}function f(){for(let v=0;v<l.length;v+=6){const _=l[v+0],E=l[v+2],R=l[v+4],M=Math.max(_,E,R),D=Math.min(_,E,R);M>.9&&D<.1&&(_<.2&&(l[v+0]+=1),E<.2&&(l[v+2]+=1),R<.2&&(l[v+4]+=1))}}function m(v){a.push(v.x,v.y,v.z)}function y(v,_){const E=v*3;_.x=e[E+0],_.y=e[E+1],_.z=e[E+2]}function x(){const v=new se,_=new se,E=new se,R=new se,M=new Xe,D=new Xe,O=new Xe;for(let L=0,j=0;L<a.length;L+=9,j+=6){v.set(a[L+0],a[L+1],a[L+2]),_.set(a[L+3],a[L+4],a[L+5]),E.set(a[L+6],a[L+7],a[L+8]),M.set(l[j+0],l[j+1]),D.set(l[j+2],l[j+3]),O.set(l[j+4],l[j+5]),R.copy(v).add(_).add(E).divideScalar(3);const X=S(R);w(M,j+0,v,X),w(D,j+2,_,X),w(O,j+4,E,X)}}function w(v,_,E,R){R<0&&v.x===1&&(l[_]=v.x-1),E.x===0&&E.z===0&&(l[_]=R/2/Math.PI+.5)}function S(v){return Math.atan2(v.z,-v.x)}function b(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ml(e.vertices,e.indices,e.radius,e.detail)}}class sb extends Ml{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sb(e.radius,e.detail)}}const np=new se,ip=new se,i_=new se,rp=new Or;class Dh extends nn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(El*t),l=e.getIndex(),o=e.getAttribute("position"),u=l?l.count:o.count,h=[0,0,0],p=["a","b","c"],f=new Array(3),m={},y=[];for(let x=0;x<u;x+=3){l?(h[0]=l.getX(x),h[1]=l.getX(x+1),h[2]=l.getX(x+2)):(h[0]=x,h[1]=x+1,h[2]=x+2);const{a:w,b:S,c:b}=rp;if(w.fromBufferAttribute(o,h[0]),S.fromBufferAttribute(o,h[1]),b.fromBufferAttribute(o,h[2]),rp.getNormal(i_),f[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,f[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,f[2]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let v=0;v<3;v++){const _=(v+1)%3,E=f[v],R=f[_],M=rp[p[v]],D=rp[p[_]],O=`${E}_${R}`,L=`${R}_${E}`;L in m&&m[L]?(i_.dot(m[L].normal)<=a&&(y.push(M.x,M.y,M.z),y.push(D.x,D.y,D.z)),m[L]=null):O in m||(m[O]={index0:h[v],index1:h[_],normal:i_.clone()})}}for(const x in m)if(m[x]){const{index0:w,index1:S}=m[x];np.fromBufferAttribute(o,w),ip.fromBufferAttribute(o,S),y.push(np.x,np.y,np.z),y.push(ip.x,ip.y,ip.z)}this.setAttribute("position",new gt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Qs{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Mt("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let l;t?l=t:l=e*i[a-1];let o=0,u=a-1,h;for(;o<=u;)if(r=Math.floor(o+(u-o)/2),h=i[r]-l,h<0)o=r+1;else if(h>0)u=r-1;else{u=r;break}if(r=u,i[r]===l)return r/(a-1);const p=i[r],m=i[r+1]-p,y=(l-p)/m;return(r+y)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const l=this.getPoint(r),o=this.getPoint(a),u=t||(l.isVector2?new Xe:new se);return u.copy(o).sub(l).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new se,r=[],a=[],l=[],o=new se,u=new Jt;for(let y=0;y<=e;y++){const x=y/e;r[y]=this.getTangentAt(x,new se)}a[0]=new se,l[0]=new se;let h=Number.MAX_VALUE;const p=Math.abs(r[0].x),f=Math.abs(r[0].y),m=Math.abs(r[0].z);p<=h&&(h=p,i.set(1,0,0)),f<=h&&(h=f,i.set(0,1,0)),m<=h&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],o),l[0].crossVectors(r[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),l[y]=l[y-1].clone(),o.crossVectors(r[y-1],r[y]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(Nt(r[y-1].dot(r[y]),-1,1));a[y].applyMatrix4(u.makeRotationAxis(o,x))}l[y].crossVectors(r[y],a[y])}if(t===!0){let y=Math.acos(Nt(a[0].dot(a[e]),-1,1));y/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let x=1;x<=e;x++)a[x].applyMatrix4(u.makeRotationAxis(r[x],y*x)),l[x].crossVectors(r[x],a[x])}return{tangents:r,normals:a,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ab extends Qs{constructor(e=0,t=0,i=1,r=1,a=0,l=Math.PI*2,o=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=l,this.aClockwise=o,this.aRotation=u}getPoint(e,t=new Xe){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const l=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(l?a=0:a=r),this.aClockwise===!0&&!l&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let u=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const p=Math.cos(this.aRotation),f=Math.sin(this.aRotation),m=u-this.aX,y=h-this.aY;u=m*p-y*f+this.aX,h=m*f+y*p+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class LD extends ab{constructor(e,t,i,r,a,l){super(e,t,i,i,r,a,l),this.isArcCurve=!0,this.type="ArcCurve"}}function ob(){let n=0,e=0,t=0,i=0;function r(a,l,o,u){n=a,e=o,t=-3*a+3*l-2*o-u,i=2*a-2*l+o+u}return{initCatmullRom:function(a,l,o,u,h){r(l,o,h*(o-a),h*(u-l))},initNonuniformCatmullRom:function(a,l,o,u,h,p,f){let m=(l-a)/h-(o-a)/(h+p)+(o-l)/p,y=(o-l)/p-(u-l)/(p+f)+(u-o)/f;m*=p,y*=p,r(l,o,m,y)},calc:function(a){const l=a*a,o=l*a;return n+e*a+t*l+i*o}}}const sp=new se,r_=new ob,s_=new ob,a_=new ob;class BD extends Qs{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new se){const i=t,r=this.points,a=r.length,l=(a-(this.closed?0:1))*e;let o=Math.floor(l),u=l-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:u===0&&o===a-1&&(o=a-2,u=1);let h,p;this.closed||o>0?h=r[(o-1)%a]:(sp.subVectors(r[0],r[1]).add(r[0]),h=sp);const f=r[o%a],m=r[(o+1)%a];if(this.closed||o+2<a?p=r[(o+2)%a]:(sp.subVectors(r[a-1],r[a-2]).add(r[a-1]),p=sp),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let x=Math.pow(h.distanceToSquared(f),y),w=Math.pow(f.distanceToSquared(m),y),S=Math.pow(m.distanceToSquared(p),y);w<1e-4&&(w=1),x<1e-4&&(x=w),S<1e-4&&(S=w),r_.initNonuniformCatmullRom(h.x,f.x,m.x,p.x,x,w,S),s_.initNonuniformCatmullRom(h.y,f.y,m.y,p.y,x,w,S),a_.initNonuniformCatmullRom(h.z,f.z,m.z,p.z,x,w,S)}else this.curveType==="catmullrom"&&(r_.initCatmullRom(h.x,f.x,m.x,p.x,this.tension),s_.initCatmullRom(h.y,f.y,m.y,p.y,this.tension),a_.initCatmullRom(h.z,f.z,m.z,p.z,this.tension));return i.set(r_.calc(u),s_.calc(u),a_.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new se().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function bw(n,e,t,i,r){const a=(i-e)*.5,l=(r-t)*.5,o=n*n,u=n*o;return(2*t-2*i+a+l)*u+(-3*t+3*i-2*a-l)*o+a*n+t}function zD(n,e){const t=1-n;return t*t*e}function PD(n,e){return 2*(1-n)*n*e}function FD(n,e){return n*n*e}function zh(n,e,t,i){return zD(n,e)+PD(n,t)+FD(n,i)}function UD(n,e){const t=1-n;return t*t*t*e}function jD(n,e){const t=1-n;return 3*t*t*n*e}function HD(n,e){return 3*(1-n)*n*n*e}function qD(n,e){return n*n*n*e}function Ph(n,e,t,i,r){return UD(n,e)+jD(n,t)+HD(n,i)+qD(n,r)}class t2 extends Qs{constructor(e=new Xe,t=new Xe,i=new Xe,r=new Xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Xe){const i=t,r=this.v0,a=this.v1,l=this.v2,o=this.v3;return i.set(Ph(e,r.x,a.x,l.x,o.x),Ph(e,r.y,a.y,l.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class VD extends Qs{constructor(e=new se,t=new se,i=new se,r=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new se){const i=t,r=this.v0,a=this.v1,l=this.v2,o=this.v3;return i.set(Ph(e,r.x,a.x,l.x,o.x),Ph(e,r.y,a.y,l.y,o.y),Ph(e,r.z,a.z,l.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class n2 extends Qs{constructor(e=new Xe,t=new Xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Xe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Xe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WD extends Qs{constructor(e=new se,t=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new se){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class i2 extends Qs{constructor(e=new Xe,t=new Xe,i=new Xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Xe){const i=t,r=this.v0,a=this.v1,l=this.v2;return i.set(zh(e,r.x,a.x,l.x),zh(e,r.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class r2 extends Qs{constructor(e=new se,t=new se,i=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new se){const i=t,r=this.v0,a=this.v1,l=this.v2;return i.set(zh(e,r.x,a.x,l.x),zh(e,r.y,a.y,l.y),zh(e,r.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class s2 extends Qs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Xe){const i=t,r=this.points,a=(r.length-1)*e,l=Math.floor(a),o=a-l,u=r[l===0?l:l-1],h=r[l],p=r[l>r.length-2?r.length-1:l+1],f=r[l>r.length-3?r.length-1:l+2];return i.set(bw(o,u.x,h.x,p.x,f.x),bw(o,u.y,h.y,p.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Xe().fromArray(r))}return this}}var Vp=Object.freeze({__proto__:null,ArcCurve:LD,CatmullRomCurve3:BD,CubicBezierCurve:t2,CubicBezierCurve3:VD,EllipseCurve:ab,LineCurve:n2,LineCurve3:WD,QuadraticBezierCurve:i2,QuadraticBezierCurve3:r2,SplineCurve:s2});class $D extends Qs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Vp[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const l=r[a]-i,o=this.curves[a],u=o.getLength(),h=u===0?0:1-l/u;return o.getPointAt(h,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const l=a[r],o=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,u=l.getPoints(o);for(let h=0;h<u.length;h++){const p=u[h];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Vp[r.type]().fromJSON(r))}return this}}class s0 extends $D{constructor(e){super(),this.type="Path",this.currentPoint=new Xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new n2(this.currentPoint.clone(),new Xe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new i2(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,l){const o=new t2(this.currentPoint.clone(),new Xe(e,t),new Xe(i,r),new Xe(a,l));return this.curves.push(o),this.currentPoint.set(a,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new s2(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,l){const o=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+o,t+u,i,r,a,l),this}absarc(e,t,i,r,a,l){return this.absellipse(e,t,i,i,r,a,l),this}ellipse(e,t,i,r,a,l,o,u){const h=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+h,t+p,i,r,a,l,o,u),this}absellipse(e,t,i,r,a,l,o,u){const h=new ab(e,t,i,r,a,l,o,u);if(this.curves.length>0){const f=h.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(h);const p=h.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class tu extends s0{constructor(e){super(e),this.uuid=Dr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new s0().fromJSON(r))}return this}}function GD(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let a=a2(n,0,r,t,!0);const l=[];if(!a||a.next===a.prev)return l;let o,u,h;if(i&&(a=JD(n,e,a,t)),n.length>80*t){o=n[0],u=n[1];let p=o,f=u;for(let m=t;m<r;m+=t){const y=n[m],x=n[m+1];y<o&&(o=y),x<u&&(u=x),y>p&&(p=y),x>f&&(f=x)}h=Math.max(p-o,f-u),h=h!==0?32767/h:0}return Xh(a,l,t,o,u,h,0),l}function a2(n,e,t,i,r){let a;if(r===cI(n,e,t,i)>0)for(let l=e;l<t;l+=i)a=vw(l/i|0,n[l],n[l+1],a);else for(let l=t-i;l>=e;l-=i)a=vw(l/i|0,n[l],n[l+1],a);return a&&su(a,a.next)&&(Jh(a),a=a.next),a}function Al(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(su(t,t.next)||ti(t.prev,t,t.next)===0)){if(Jh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Xh(n,e,t,i,r,a,l){if(!n)return;!l&&a&&iI(n,i,r,a);let o=n;for(;n.prev!==n.next;){const u=n.prev,h=n.next;if(a?YD(n,i,r,a):KD(n)){e.push(u.i,n.i,h.i),Jh(n),n=h.next,o=h.next;continue}if(n=h,n===o){l?l===1?(n=XD(Al(n),e),Xh(n,e,t,i,r,a,2)):l===2&&ZD(n,e,t,i,r,a):Xh(Al(n),e,t,i,r,a,1);break}}}function KD(n){const e=n.prev,t=n,i=n.next;if(ti(e,t,i)>=0)return!1;const r=e.x,a=t.x,l=i.x,o=e.y,u=t.y,h=i.y,p=Math.min(r,a,l),f=Math.min(o,u,h),m=Math.max(r,a,l),y=Math.max(o,u,h);let x=i.next;for(;x!==e;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=y&&Ih(r,o,a,u,l,h,x.x,x.y)&&ti(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function YD(n,e,t,i){const r=n.prev,a=n,l=n.next;if(ti(r,a,l)>=0)return!1;const o=r.x,u=a.x,h=l.x,p=r.y,f=a.y,m=l.y,y=Math.min(o,u,h),x=Math.min(p,f,m),w=Math.max(o,u,h),S=Math.max(p,f,m),b=a0(y,x,e,t,i),v=a0(w,S,e,t,i);let _=n.prevZ,E=n.nextZ;for(;_&&_.z>=b&&E&&E.z<=v;){if(_.x>=y&&_.x<=w&&_.y>=x&&_.y<=S&&_!==r&&_!==l&&Ih(o,p,u,f,h,m,_.x,_.y)&&ti(_.prev,_,_.next)>=0||(_=_.prevZ,E.x>=y&&E.x<=w&&E.y>=x&&E.y<=S&&E!==r&&E!==l&&Ih(o,p,u,f,h,m,E.x,E.y)&&ti(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;_&&_.z>=b;){if(_.x>=y&&_.x<=w&&_.y>=x&&_.y<=S&&_!==r&&_!==l&&Ih(o,p,u,f,h,m,_.x,_.y)&&ti(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;E&&E.z<=v;){if(E.x>=y&&E.x<=w&&E.y>=x&&E.y<=S&&E!==r&&E!==l&&Ih(o,p,u,f,h,m,E.x,E.y)&&ti(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function XD(n,e){let t=n;do{const i=t.prev,r=t.next.next;!su(i,r)&&l2(i,t,t.next,r)&&Zh(i,r)&&Zh(r,i)&&(e.push(i.i,t.i,r.i),Jh(t),Jh(t.next),t=n=r),t=t.next}while(t!==n);return Al(t)}function ZD(n,e,t,i,r,a){let l=n;do{let o=l.next.next;for(;o!==l.prev;){if(l.i!==o.i&&aI(l,o)){let u=c2(l,o);l=Al(l,l.next),u=Al(u,u.next),Xh(l,e,t,i,r,a,0),Xh(u,e,t,i,r,a,0);return}o=o.next}l=l.next}while(l!==n)}function JD(n,e,t,i){const r=[];for(let a=0,l=e.length;a<l;a++){const o=e[a]*i,u=a<l-1?e[a+1]*i:n.length,h=a2(n,o,u,i,!1);h===h.next&&(h.steiner=!0),r.push(sI(h))}r.sort(QD);for(let a=0;a<r.length;a++)t=eI(r[a],t);return t}function QD(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function eI(n,e){const t=tI(n,e);if(!t)return e;const i=c2(t,n);return Al(i,i.next),Al(t,t.next)}function tI(n,e){let t=e;const i=n.x,r=n.y;let a=-1/0,l;if(su(n,t))return t;do{if(su(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>a&&(a=f,l=t.x<t.next.x?t:t.next,f===i))return l}t=t.next}while(t!==e);if(!l)return null;const o=l,u=l.x,h=l.y;let p=1/0;t=l;do{if(i>=t.x&&t.x>=u&&i!==t.x&&o2(r<h?i:a,r,u,h,r<h?a:i,r,t.x,t.y)){const f=Math.abs(r-t.y)/(i-t.x);Zh(t,n)&&(f<p||f===p&&(t.x>l.x||t.x===l.x&&nI(l,t)))&&(l=t,p=f)}t=t.next}while(t!==o);return l}function nI(n,e){return ti(n.prev,n,e.prev)<0&&ti(e.next,n,n.next)<0}function iI(n,e,t,i){let r=n;do r.z===0&&(r.z=a0(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,rI(r)}function rI(n){let e,t=1;do{let i=n,r;n=null;let a=null;for(e=0;i;){e++;let l=i,o=0;for(let h=0;h<t&&(o++,l=l.nextZ,!!l);h++);let u=t;for(;o>0||u>0&&l;)o!==0&&(u===0||!l||i.z<=l.z)?(r=i,i=i.nextZ,o--):(r=l,l=l.nextZ,u--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;i=l}a.nextZ=null,t*=2}while(e>1);return n}function a0(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function sI(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function o2(n,e,t,i,r,a,l,o){return(r-l)*(e-o)>=(n-l)*(a-o)&&(n-l)*(i-o)>=(t-l)*(e-o)&&(t-l)*(a-o)>=(r-l)*(i-o)}function Ih(n,e,t,i,r,a,l,o){return!(n===l&&e===o)&&o2(n,e,t,i,r,a,l,o)}function aI(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!oI(n,e)&&(Zh(n,e)&&Zh(e,n)&&lI(n,e)&&(ti(n.prev,n,e.prev)||ti(n,e.prev,e))||su(n,e)&&ti(n.prev,n,n.next)>0&&ti(e.prev,e,e.next)>0)}function ti(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function su(n,e){return n.x===e.x&&n.y===e.y}function l2(n,e,t,i){const r=op(ti(n,e,t)),a=op(ti(n,e,i)),l=op(ti(t,i,n)),o=op(ti(t,i,e));return!!(r!==a&&l!==o||r===0&&ap(n,t,e)||a===0&&ap(n,i,e)||l===0&&ap(t,n,i)||o===0&&ap(t,e,i))}function ap(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function op(n){return n>0?1:n<0?-1:0}function oI(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&l2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Zh(n,e){return ti(n.prev,n,n.next)<0?ti(n,e,n.next)>=0&&ti(n,n.prev,e)>=0:ti(n,e,n.prev)<0||ti(n,n.next,e)<0}function lI(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function c2(n,e){const t=o0(n.i,n.x,n.y),i=o0(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function vw(n,e,t,i){const r=o0(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Jh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function o0(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function cI(n,e,t,i){let r=0;for(let a=e,l=t-i;a<t;a+=i)r+=(n[l]-n[a])*(n[a+1]+n[l+1]),l=a;return r}class uI{static triangulate(e,t,i=2){return GD(e,t,i)}}class Xs{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Xs.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];xw(e),Sw(i,e);let l=e.length;t.forEach(xw);for(let u=0;u<t.length;u++)r.push(l),l+=t[u].length,Sw(i,t[u]);const o=uI.triangulate(i,r);for(let u=0;u<o.length;u+=3)a.push(o.slice(u,u+3));return a}}function xw(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Sw(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class lb extends nn{constructor(e=new tu([new Xe(.5,.5),new Xe(-.5,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let o=0,u=e.length;o<u;o++){const h=e[o];l(h)}this.setAttribute("position",new gt(r,3)),this.setAttribute("uv",new gt(a,2)),this.computeVertexNormals();function l(o){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:y-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,v=t.UVGenerator!==void 0?t.UVGenerator:hI;let _,E=!1,R,M,D,O;if(b){_=b.getSpacedPoints(p),E=!0,m=!1;const Pe=b.isCatmullRomCurve3?b.closed:!1;R=b.computeFrenetFrames(p,Pe),M=new se,D=new se,O=new se}m||(S=0,y=0,x=0,w=0);const L=o.extractPoints(h);let j=L.shape;const X=L.holes;if(!Xs.isClockWise(j)){j=j.reverse();for(let Pe=0,je=X.length;Pe<je;Pe++){const ze=X[Pe];Xs.isClockWise(ze)&&(X[Pe]=ze.reverse())}}function H(Pe){const ze=10000000000000001e-36;let Ue=Pe[0];for(let st=1;st<=Pe.length;st++){const Rt=st%Pe.length,bt=Pe[Rt],Dt=bt.x-Ue.x,rn=bt.y-Ue.y,Ut=Dt*Dt+rn*rn,Bt=Math.max(Math.abs(bt.x),Math.abs(bt.y),Math.abs(Ue.x),Math.abs(Ue.y)),wn=ze*Bt*Bt;if(Ut<=wn){Pe.splice(Rt,1),st--;continue}Ue=bt}}H(j),X.forEach(H);const $=X.length,Q=j;for(let Pe=0;Pe<$;Pe++){const je=X[Pe];j=j.concat(je)}function Y(Pe,je,ze){return je||xn("ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(je,ze)}const te=j.length;function re(Pe,je,ze){let Ue,st,Rt;const bt=Pe.x-je.x,Dt=Pe.y-je.y,rn=ze.x-Pe.x,Ut=ze.y-Pe.y,Bt=bt*bt+Dt*Dt,wn=bt*Ut-Dt*rn;if(Math.abs(wn)>Number.EPSILON){const Ee=Math.sqrt(Bt),He=Math.sqrt(rn*rn+Ut*Ut),dt=je.x-Dt/Ee,St=je.y+bt/Ee,It=ze.x-Ut/He,On=ze.y+rn/He,zt=((It-dt)*Ut-(On-St)*rn)/(bt*Ut-Dt*rn);Ue=dt+bt*zt-Pe.x,st=St+Dt*zt-Pe.y;const zn=Ue*Ue+st*st;if(zn<=2)return new Xe(Ue,st);Rt=Math.sqrt(zn/2)}else{let Ee=!1;bt>Number.EPSILON?rn>Number.EPSILON&&(Ee=!0):bt<-Number.EPSILON?rn<-Number.EPSILON&&(Ee=!0):Math.sign(Dt)===Math.sign(Ut)&&(Ee=!0),Ee?(Ue=-Dt,st=bt,Rt=Math.sqrt(Bt)):(Ue=bt,st=Dt,Rt=Math.sqrt(Bt/2))}return new Xe(Ue/Rt,st/Rt)}const U=[];for(let Pe=0,je=Q.length,ze=je-1,Ue=Pe+1;Pe<je;Pe++,ze++,Ue++)ze===je&&(ze=0),Ue===je&&(Ue=0),U[Pe]=re(Q[Pe],Q[ze],Q[Ue]);const B=[];let P,Z=U.concat();for(let Pe=0,je=$;Pe<je;Pe++){const ze=X[Pe];P=[];for(let Ue=0,st=ze.length,Rt=st-1,bt=Ue+1;Ue<st;Ue++,Rt++,bt++)Rt===st&&(Rt=0),bt===st&&(bt=0),P[Ue]=re(ze[Ue],ze[Rt],ze[bt]);B.push(P),Z=Z.concat(P)}let V;if(S===0)V=Xs.triangulateShape(Q,X);else{const Pe=[],je=[];for(let ze=0;ze<S;ze++){const Ue=ze/S,st=y*Math.cos(Ue*Math.PI/2),Rt=x*Math.sin(Ue*Math.PI/2)+w;for(let bt=0,Dt=Q.length;bt<Dt;bt++){const rn=Y(Q[bt],U[bt],Rt);Me(rn.x,rn.y,-st),Ue===0&&Pe.push(rn)}for(let bt=0,Dt=$;bt<Dt;bt++){const rn=X[bt];P=B[bt];const Ut=[];for(let Bt=0,wn=rn.length;Bt<wn;Bt++){const Ee=Y(rn[Bt],P[Bt],Rt);Me(Ee.x,Ee.y,-st),Ue===0&&Ut.push(Ee)}Ue===0&&je.push(Ut)}}V=Xs.triangulateShape(Pe,je)}const _e=V.length,we=x+w;for(let Pe=0;Pe<te;Pe++){const je=m?Y(j[Pe],Z[Pe],we):j[Pe];E?(D.copy(R.normals[0]).multiplyScalar(je.x),M.copy(R.binormals[0]).multiplyScalar(je.y),O.copy(_[0]).add(D).add(M),Me(O.x,O.y,O.z)):Me(je.x,je.y,0)}for(let Pe=1;Pe<=p;Pe++)for(let je=0;je<te;je++){const ze=m?Y(j[je],Z[je],we):j[je];E?(D.copy(R.normals[Pe]).multiplyScalar(ze.x),M.copy(R.binormals[Pe]).multiplyScalar(ze.y),O.copy(_[Pe]).add(D).add(M),Me(O.x,O.y,O.z)):Me(ze.x,ze.y,f/p*Pe)}for(let Pe=S-1;Pe>=0;Pe--){const je=Pe/S,ze=y*Math.cos(je*Math.PI/2),Ue=x*Math.sin(je*Math.PI/2)+w;for(let st=0,Rt=Q.length;st<Rt;st++){const bt=Y(Q[st],U[st],Ue);Me(bt.x,bt.y,f+ze)}for(let st=0,Rt=X.length;st<Rt;st++){const bt=X[st];P=B[st];for(let Dt=0,rn=bt.length;Dt<rn;Dt++){const Ut=Y(bt[Dt],P[Dt],Ue);E?Me(Ut.x,Ut.y+_[p-1].y,_[p-1].x+ze):Me(Ut.x,Ut.y,f+ze)}}}De(),le();function De(){const Pe=r.length/3;if(m){let je=0,ze=te*je;for(let Ue=0;Ue<_e;Ue++){const st=V[Ue];xe(st[2]+ze,st[1]+ze,st[0]+ze)}je=p+S*2,ze=te*je;for(let Ue=0;Ue<_e;Ue++){const st=V[Ue];xe(st[0]+ze,st[1]+ze,st[2]+ze)}}else{for(let je=0;je<_e;je++){const ze=V[je];xe(ze[2],ze[1],ze[0])}for(let je=0;je<_e;je++){const ze=V[je];xe(ze[0]+te*p,ze[1]+te*p,ze[2]+te*p)}}i.addGroup(Pe,r.length/3-Pe,0)}function le(){const Pe=r.length/3;let je=0;ee(Q,je),je+=Q.length;for(let ze=0,Ue=X.length;ze<Ue;ze++){const st=X[ze];ee(st,je),je+=st.length}i.addGroup(Pe,r.length/3-Pe,1)}function ee(Pe,je){let ze=Pe.length;for(;--ze>=0;){const Ue=ze;let st=ze-1;st<0&&(st=Pe.length-1);for(let Rt=0,bt=p+S*2;Rt<bt;Rt++){const Dt=te*Rt,rn=te*(Rt+1),Ut=je+Ue+Dt,Bt=je+st+Dt,wn=je+st+rn,Ee=je+Ue+rn;Ze(Ut,Bt,wn,Ee)}}}function Me(Pe,je,ze){u.push(Pe),u.push(je),u.push(ze)}function xe(Pe,je,ze){Le(Pe),Le(je),Le(ze);const Ue=r.length/3,st=v.generateTopUV(i,r,Ue-3,Ue-2,Ue-1);_t(st[0]),_t(st[1]),_t(st[2])}function Ze(Pe,je,ze,Ue){Le(Pe),Le(je),Le(Ue),Le(je),Le(ze),Le(Ue);const st=r.length/3,Rt=v.generateSideWallUV(i,r,st-6,st-3,st-2,st-1);_t(Rt[0]),_t(Rt[1]),_t(Rt[3]),_t(Rt[1]),_t(Rt[2]),_t(Rt[3])}function Le(Pe){r.push(u[Pe*3+0]),r.push(u[Pe*3+1]),r.push(u[Pe*3+2])}function _t(Pe){a.push(Pe.x),a.push(Pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return dI(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,l=e.shapes.length;a<l;a++){const o=t[e.shapes[a]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Vp[r.type]().fromJSON(r)),new lb(i,e.options)}}const hI={generateTopUV:function(n,e,t,i,r){const a=e[t*3],l=e[t*3+1],o=e[i*3],u=e[i*3+1],h=e[r*3],p=e[r*3+1];return[new Xe(a,l),new Xe(o,u),new Xe(h,p)]},generateSideWallUV:function(n,e,t,i,r,a){const l=e[t*3],o=e[t*3+1],u=e[t*3+2],h=e[i*3],p=e[i*3+1],f=e[i*3+2],m=e[r*3],y=e[r*3+1],x=e[r*3+2],w=e[a*3],S=e[a*3+1],b=e[a*3+2];return Math.abs(o-p)<Math.abs(l-h)?[new Xe(l,1-u),new Xe(h,1-f),new Xe(m,1-x),new Xe(w,1-b)]:[new Xe(o,1-u),new Xe(p,1-f),new Xe(y,1-x),new Xe(S,1-b)]}};function dI(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class cb extends Ml{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cb(e.radius,e.detail)}}class ub extends nn{constructor(e=[new Xe(0,-.5),new Xe(.5,0),new Xe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Nt(r,0,Math.PI*2);const a=[],l=[],o=[],u=[],h=[],p=1/t,f=new se,m=new Xe,y=new se,x=new se,w=new se;let S=0,b=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:S=e[v+1].x-e[v].x,b=e[v+1].y-e[v].y,y.x=b*1,y.y=-S,y.z=b*0,w.copy(y),y.normalize(),u.push(y.x,y.y,y.z);break;case e.length-1:u.push(w.x,w.y,w.z);break;default:S=e[v+1].x-e[v].x,b=e[v+1].y-e[v].y,y.x=b*1,y.y=-S,y.z=b*0,x.copy(y),y.x+=w.x,y.y+=w.y,y.z+=w.z,y.normalize(),u.push(y.x,y.y,y.z),w.copy(x)}for(let v=0;v<=t;v++){const _=i+v*p*r,E=Math.sin(_),R=Math.cos(_);for(let M=0;M<=e.length-1;M++){f.x=e[M].x*E,f.y=e[M].y,f.z=e[M].x*R,l.push(f.x,f.y,f.z),m.x=v/t,m.y=M/(e.length-1),o.push(m.x,m.y);const D=u[3*M+0]*E,O=u[3*M+1],L=u[3*M+0]*R;h.push(D,O,L)}}for(let v=0;v<t;v++)for(let _=0;_<e.length-1;_++){const E=_+v*e.length,R=E,M=E+e.length,D=E+e.length+1,O=E+1;a.push(R,M,O),a.push(D,O,M)}this.setIndex(a),this.setAttribute("position",new gt(l,3)),this.setAttribute("uv",new gt(o,2)),this.setAttribute("normal",new gt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ub(e.points,e.segments,e.phiStart,e.phiLength)}}class mm extends Ml{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mm(e.radius,e.detail)}}class hb extends nn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,l=t/2,o=Math.floor(i),u=Math.floor(r),h=o+1,p=u+1,f=e/o,m=t/u,y=[],x=[],w=[],S=[];for(let b=0;b<p;b++){const v=b*m-l;for(let _=0;_<h;_++){const E=_*f-a;x.push(E,-v,0),w.push(0,0,1),S.push(_/o),S.push(1-b/u)}}for(let b=0;b<u;b++)for(let v=0;v<o;v++){const _=v+h*b,E=v+h*(b+1),R=v+1+h*(b+1),M=v+1+h*b;y.push(_,E,M),y.push(E,R,M)}this.setIndex(y),this.setAttribute("position",new gt(x,3)),this.setAttribute("normal",new gt(w,3)),this.setAttribute("uv",new gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hb(e.width,e.height,e.widthSegments,e.heightSegments)}}class db extends nn{constructor(e=.5,t=1,i=32,r=1,a=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:l},i=Math.max(3,i),r=Math.max(1,r);const o=[],u=[],h=[],p=[];let f=e;const m=(t-e)/r,y=new se,x=new Xe;for(let w=0;w<=r;w++){for(let S=0;S<=i;S++){const b=a+S/i*l;y.x=f*Math.cos(b),y.y=f*Math.sin(b),u.push(y.x,y.y,y.z),h.push(0,0,1),x.x=(y.x/t+1)/2,x.y=(y.y/t+1)/2,p.push(x.x,x.y)}f+=m}for(let w=0;w<r;w++){const S=w*(i+1);for(let b=0;b<i;b++){const v=b+S,_=v,E=v+i+1,R=v+i+2,M=v+1;o.push(_,E,M),o.push(E,R,M)}}this.setIndex(o),this.setAttribute("position",new gt(u,3)),this.setAttribute("normal",new gt(h,3)),this.setAttribute("uv",new gt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new db(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class fb extends nn{constructor(e=new tu([new Xe(0,.5),new Xe(-.5,-.5),new Xe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],l=[];let o=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let p=0;p<e.length;p++)h(e[p]),this.addGroup(o,u,p),o+=u,u=0;this.setIndex(i),this.setAttribute("position",new gt(r,3)),this.setAttribute("normal",new gt(a,3)),this.setAttribute("uv",new gt(l,2));function h(p){const f=r.length/3,m=p.extractPoints(t);let y=m.shape;const x=m.holes;Xs.isClockWise(y)===!1&&(y=y.reverse());for(let S=0,b=x.length;S<b;S++){const v=x[S];Xs.isClockWise(v)===!0&&(x[S]=v.reverse())}const w=Xs.triangulateShape(y,x);for(let S=0,b=x.length;S<b;S++){const v=x[S];y=y.concat(v)}for(let S=0,b=y.length;S<b;S++){const v=y[S];r.push(v.x,v.y,0),a.push(0,0,1),l.push(v.x,v.y)}for(let S=0,b=w.length;S<b;S++){const v=w[S],_=v[0]+f,E=v[1]+f,R=v[2]+f;i.push(_,E,R),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return fI(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const l=t[e.shapes[r]];i.push(l)}return new fb(i,e.curveSegments)}}function fI(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class bs extends nn{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,l=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:l,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(l+o,Math.PI);let h=0;const p=[],f=new se,m=new se,y=[],x=[],w=[],S=[];for(let b=0;b<=i;b++){const v=[],_=b/i;let E=0;b===0&&l===0?E=.5/t:b===i&&u===Math.PI&&(E=-.5/t);for(let R=0;R<=t;R++){const M=R/t;f.x=-e*Math.cos(r+M*a)*Math.sin(l+_*o),f.y=e*Math.cos(l+_*o),f.z=e*Math.sin(r+M*a)*Math.sin(l+_*o),x.push(f.x,f.y,f.z),m.copy(f).normalize(),w.push(m.x,m.y,m.z),S.push(M+E,1-_),v.push(h++)}p.push(v)}for(let b=0;b<i;b++)for(let v=0;v<t;v++){const _=p[b][v+1],E=p[b][v],R=p[b+1][v],M=p[b+1][v+1];(b!==0||l>0)&&y.push(_,E,M),(b!==i-1||u<Math.PI)&&y.push(E,R,M)}this.setIndex(y),this.setAttribute("position",new gt(x,3)),this.setAttribute("normal",new gt(w,3)),this.setAttribute("uv",new gt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bs(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class pb extends Ml{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pb(e.radius,e.detail)}}class mb extends nn{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const l=[],o=[],u=[],h=[],p=new se,f=new se,m=new se;for(let y=0;y<=i;y++)for(let x=0;x<=r;x++){const w=x/r*a,S=y/i*Math.PI*2;f.x=(e+t*Math.cos(S))*Math.cos(w),f.y=(e+t*Math.cos(S))*Math.sin(w),f.z=t*Math.sin(S),o.push(f.x,f.y,f.z),p.x=e*Math.cos(w),p.y=e*Math.sin(w),m.subVectors(f,p).normalize(),u.push(m.x,m.y,m.z),h.push(x/r),h.push(y/i)}for(let y=1;y<=i;y++)for(let x=1;x<=r;x++){const w=(r+1)*y+x-1,S=(r+1)*(y-1)+x-1,b=(r+1)*(y-1)+x,v=(r+1)*y+x;l.push(w,S,v),l.push(S,b,v)}this.setIndex(l),this.setAttribute("position",new gt(o,3)),this.setAttribute("normal",new gt(u,3)),this.setAttribute("uv",new gt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class gb extends nn{constructor(e=1,t=.4,i=64,r=8,a=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:l},i=Math.floor(i),r=Math.floor(r);const o=[],u=[],h=[],p=[],f=new se,m=new se,y=new se,x=new se,w=new se,S=new se,b=new se;for(let _=0;_<=i;++_){const E=_/i*a*Math.PI*2;v(E,a,l,e,y),v(E+.01,a,l,e,x),S.subVectors(x,y),b.addVectors(x,y),w.crossVectors(S,b),b.crossVectors(w,S),w.normalize(),b.normalize();for(let R=0;R<=r;++R){const M=R/r*Math.PI*2,D=-t*Math.cos(M),O=t*Math.sin(M);f.x=y.x+(D*b.x+O*w.x),f.y=y.y+(D*b.y+O*w.y),f.z=y.z+(D*b.z+O*w.z),u.push(f.x,f.y,f.z),m.subVectors(f,y).normalize(),h.push(m.x,m.y,m.z),p.push(_/i),p.push(R/r)}}for(let _=1;_<=i;_++)for(let E=1;E<=r;E++){const R=(r+1)*(_-1)+(E-1),M=(r+1)*_+(E-1),D=(r+1)*_+E,O=(r+1)*(_-1)+E;o.push(R,M,O),o.push(M,D,O)}this.setIndex(o),this.setAttribute("position",new gt(u,3)),this.setAttribute("normal",new gt(h,3)),this.setAttribute("uv",new gt(p,2));function v(_,E,R,M,D){const O=Math.cos(_),L=Math.sin(_),j=R/E*_,X=Math.cos(j);D.x=M*(2+X)*.5*O,D.y=M*(2+X)*L*.5,D.z=M*Math.sin(j)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class yb extends nn{constructor(e=new r2(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const o=new se,u=new se,h=new Xe;let p=new se;const f=[],m=[],y=[],x=[];w(),this.setIndex(x),this.setAttribute("position",new gt(f,3)),this.setAttribute("normal",new gt(m,3)),this.setAttribute("uv",new gt(y,2));function w(){for(let _=0;_<t;_++)S(_);S(a===!1?t:0),v(),b()}function S(_){p=e.getPointAt(_/t,p);const E=l.normals[_],R=l.binormals[_];for(let M=0;M<=r;M++){const D=M/r*Math.PI*2,O=Math.sin(D),L=-Math.cos(D);u.x=L*E.x+O*R.x,u.y=L*E.y+O*R.y,u.z=L*E.z+O*R.z,u.normalize(),m.push(u.x,u.y,u.z),o.x=p.x+i*u.x,o.y=p.y+i*u.y,o.z=p.z+i*u.z,f.push(o.x,o.y,o.z)}}function b(){for(let _=1;_<=t;_++)for(let E=1;E<=r;E++){const R=(r+1)*(_-1)+(E-1),M=(r+1)*_+(E-1),D=(r+1)*_+E,O=(r+1)*(_-1)+E;x.push(R,M,O),x.push(M,D,O)}}function v(){for(let _=0;_<=t;_++)for(let E=0;E<=r;E++)h.x=_/t,h.y=E/r,y.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new yb(new Vp[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class pI extends nn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new se,a=new se;if(e.index!==null){const l=e.attributes.position,o=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:o.count,materialIndex:0}]);for(let h=0,p=u.length;h<p;++h){const f=u[h],m=f.start,y=f.count;for(let x=m,w=m+y;x<w;x+=3)for(let S=0;S<3;S++){const b=o.getX(x+S),v=o.getX(x+(S+1)%3);r.fromBufferAttribute(l,b),a.fromBufferAttribute(l,v),ww(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const l=e.attributes.position;for(let o=0,u=l.count/3;o<u;o++)for(let h=0;h<3;h++){const p=3*o+h,f=3*o+(h+1)%3;r.fromBufferAttribute(l,p),a.fromBufferAttribute(l,f),ww(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new gt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ww(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var Ew=Object.freeze({__proto__:null,BoxGeometry:Gn,CapsuleGeometry:ib,CircleGeometry:rb,ConeGeometry:pm,CylinderGeometry:od,DodecahedronGeometry:sb,EdgesGeometry:Dh,ExtrudeGeometry:lb,IcosahedronGeometry:cb,LatheGeometry:ub,OctahedronGeometry:mm,PlaneGeometry:hb,PolyhedronGeometry:Ml,RingGeometry:db,ShapeGeometry:fb,SphereGeometry:bs,TetrahedronGeometry:pb,TorusGeometry:mb,TorusKnotGeometry:gb,TubeGeometry:yb,WireframeGeometry:pI});class mI extends lr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new jt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class gI extends G0{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ld extends lr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yI extends ld{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Nt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new jt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new jt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new jt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _I extends lr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new jt(16777215),this.specular=new jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zs,this.combine=j0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bI extends lr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new jt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class vI extends lr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class xI extends lr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Zs,this.combine=j0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SI extends lr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=SN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wI extends lr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class EI extends lr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new jt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uu,this.normalScale=new Xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class CI extends cr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function wl(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function u2(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function l0(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,l=0;l!==i;++a){const o=t[a]*e;for(let u=0;u!==e;++u)r[l++]=n[o+u]}return r}function _b(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let l=a[i];if(l!==void 0)if(Array.isArray(l))do l=a[i],l!==void 0&&(e.push(a.time),t.push(...l)),a=n[r++];while(a!==void 0);else if(l.toArray!==void 0)do l=a[i],l!==void 0&&(e.push(a.time),l.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do l=a[i],l!==void 0&&(e.push(a.time),t.push(l)),a=n[r++];while(a!==void 0)}function AI(n,e,t,i,r=30){const a=n.clone();a.name=e;const l=[];for(let u=0;u<a.tracks.length;++u){const h=a.tracks[u],p=h.getValueSize(),f=[],m=[];for(let y=0;y<h.times.length;++y){const x=h.times[y]*r;if(!(x<t||x>=i)){f.push(h.times[y]);for(let w=0;w<p;++w)m.push(h.values[y*p+w])}}f.length!==0&&(h.times=wl(f,h.times.constructor),h.values=wl(m,h.values.constructor),l.push(h))}a.tracks=l;let o=1/0;for(let u=0;u<a.tracks.length;++u)o>a.tracks[u].times[0]&&(o=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*o);return a.resetDuration(),a}function TI(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let l=0;l<r;++l){const o=t.tracks[l],u=o.ValueTypeName;if(u==="bool"||u==="string")continue;const h=n.tracks.find(function(b){return b.name===o.name&&b.ValueTypeName===u});if(h===void 0)continue;let p=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=f/3);let m=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=y/3);const x=o.times.length-1;let w;if(a<=o.times[0]){const b=p,v=f-p;w=o.values.slice(b,v)}else if(a>=o.times[x]){const b=x*f+p,v=b+f-p;w=o.values.slice(b,v)}else{const b=o.createInterpolant(),v=p,_=f-p;b.evaluate(a),w=b.resultBuffer.slice(v,_)}u==="quaternion"&&new Ir().fromArray(w).normalize().conjugate().toArray(w);const S=h.times.length;for(let b=0;b<S;++b){const v=b*y+m;if(u==="quaternion")Ir.multiplyQuaternionsFlat(h.values,v,w,0,h.values,v);else{const _=y-m*2;for(let E=0;E<_;++E)h.values[v+E]-=w[E]}}}return n.blendMode=VC,n}class uG{static convertArray(e,t){return wl(e,t)}static isTypedArray(e){return $C(e)}static getKeyframeOrder(e){return u2(e)}static sortedArray(e,t,i){return l0(e,t,i)}static flattenJSON(e,t,i,r){_b(e,t,i,r)}static subclip(e,t,i,r,a=30){return AI(e,t,i,r,a)}static makeClipAdditive(e,t=0,i=e,r=30){return TI(e,t,i,r)}}class gm{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let l;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=t[++i],e<r)break t}l=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(i=2,a=o);for(let u=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=a,a=t[--i-1],e>=a)break t}l=i,i=0;break n}break e}for(;i<l;){const o=i+l>>>1;e<t[o]?l=o:i=o+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let l=0;l!==r;++l)t[l]=i[a+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kI extends gm{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zc,endingEnd:Zc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,l=e+1,o=r[a],u=r[l];if(o===void 0)switch(this.getSettings_().endingStart){case Jc:a=e,o=2*t-i;break;case Fp:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=i}if(u===void 0)switch(this.getSettings_().endingEnd){case Jc:l=e,u=2*i-t;break;case Fp:l=1,u=i+r[1]-r[0];break;default:l=e-1,u=t}const h=(i-t)*.5,p=this.valueSize;this._weightPrev=h/(t-o),this._weightNext=h/(u-i),this._offsetPrev=a*p,this._offsetNext=l*p}interpolate_(e,t,i,r){const a=this.resultBuffer,l=this.sampleValues,o=this.valueSize,u=e*o,h=u-o,p=this._offsetPrev,f=this._offsetNext,m=this._weightPrev,y=this._weightNext,x=(i-t)/(r-t),w=x*x,S=w*x,b=-m*S+2*m*w-m*x,v=(1+m)*S+(-1.5-2*m)*w+(-.5+m)*x+1,_=(-1-y)*S+(1.5+y)*w+.5*x,E=y*S-y*w;for(let R=0;R!==o;++R)a[R]=b*l[p+R]+v*l[h+R]+_*l[u+R]+E*l[f+R];return a}}class h2 extends gm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,l=this.sampleValues,o=this.valueSize,u=e*o,h=u-o,p=(i-t)/(r-t),f=1-p;for(let m=0;m!==o;++m)a[m]=l[h+m]*f+l[u+m]*p;return a}}class MI extends gm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Es{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wl(t,this.TimeBufferType),this.values=wl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:wl(e.times,Array),values:wl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new MI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new h2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new kI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Pp:t=this.InterpolantFactoryMethodDiscrete;break;case i0:t=this.InterpolantFactoryMethodLinear;break;case ky:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Mt("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Pp;case this.InterpolantFactoryMethodLinear:return i0;case this.InterpolantFactoryMethodSmooth:return ky}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,l=r-1;for(;a!==r&&i[a]<e;)++a;for(;l!==-1&&i[l]>t;)--l;if(++l,a!==0||l!==r){a>=l&&(l=Math.max(l,1),a=l-1);const o=this.getValueSize();this.times=i.slice(a,l),this.values=this.values.slice(a*o,l*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(xn("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(xn("KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let o=0;o!==a;o++){const u=i[o];if(typeof u=="number"&&isNaN(u)){xn("KeyframeTrack: Time is not a valid number.",this,o,u),e=!1;break}if(l!==null&&l>u){xn("KeyframeTrack: Out of order keys.",this,o,u,l),e=!1;break}l=u}if(r!==void 0&&$C(r))for(let o=0,u=r.length;o!==u;++o){const h=r[o];if(isNaN(h)){xn("KeyframeTrack: Value is not a valid number.",this,o,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===ky,a=e.length-1;let l=1;for(let o=1;o<a;++o){let u=!1;const h=e[o],p=e[o+1];if(h!==p&&(o!==1||h!==e[0]))if(r)u=!0;else{const f=o*i,m=f-i,y=f+i;for(let x=0;x!==i;++x){const w=t[f+x];if(w!==t[m+x]||w!==t[y+x]){u=!0;break}}}if(u){if(o!==l){e[l]=e[o];const f=o*i,m=l*i;for(let y=0;y!==i;++y)t[m+y]=t[f+y]}++l}}if(a>0){e[l]=e[a];for(let o=a*i,u=l*i,h=0;h!==i;++h)t[u+h]=t[o+h];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Es.prototype.ValueTypeName="";Es.prototype.TimeBufferType=Float32Array;Es.prototype.ValueBufferType=Float32Array;Es.prototype.DefaultInterpolation=i0;class du extends Es{constructor(e,t,i){super(e,t,i)}}du.prototype.ValueTypeName="bool";du.prototype.ValueBufferType=Array;du.prototype.DefaultInterpolation=Pp;du.prototype.InterpolantFactoryMethodLinear=void 0;du.prototype.InterpolantFactoryMethodSmooth=void 0;class d2 extends Es{constructor(e,t,i,r){super(e,t,i,r)}}d2.prototype.ValueTypeName="color";class Wp extends Es{constructor(e,t,i,r){super(e,t,i,r)}}Wp.prototype.ValueTypeName="number";class RI extends gm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,l=this.sampleValues,o=this.valueSize,u=(i-t)/(r-t);let h=e*o;for(let p=h+o;h!==p;h+=4)Ir.slerpFlat(a,0,l,h-o,l,h,u);return a}}class ym extends Es{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new RI(this.times,this.values,this.getValueSize(),e)}}ym.prototype.ValueTypeName="quaternion";ym.prototype.InterpolantFactoryMethodSmooth=void 0;class fu extends Es{constructor(e,t,i){super(e,t,i)}}fu.prototype.ValueTypeName="string";fu.prototype.ValueBufferType=Array;fu.prototype.DefaultInterpolation=Pp;fu.prototype.InterpolantFactoryMethodLinear=void 0;fu.prototype.InterpolantFactoryMethodSmooth=void 0;class $p extends Es{constructor(e,t,i,r){super(e,t,i,r)}}$p.prototype.ValueTypeName="vector";class Gp{constructor(e="",t=-1,i=[],r=V0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Dr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let l=0,o=i.length;l!==o;++l)t.push(NI(i[l]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,l=i.length;a!==l;++a)t.push(Es.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,l=[];for(let o=0;o<a;o++){let u=[],h=[];u.push((o+a-1)%a,o,(o+1)%a),h.push(0,1,0);const p=u2(u);u=l0(u,1,p),h=l0(h,1,p),!r&&u[0]===0&&(u.push(a),h.push(h[0])),l.push(new Wp(".morphTargetInfluences["+t[o].name+"]",u,h).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,u=e.length;o<u;o++){const h=e[o],p=h.name.match(a);if(p&&p.length>1){const f=p[1];let m=r[f];m||(r[f]=m=[]),m.push(h)}}const l=[];for(const o in r)l.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return l}static parseAnimation(e,t){if(Mt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return xn("AnimationClip: No animation in JSONLoader data."),null;const i=function(f,m,y,x,w){if(y.length!==0){const S=[],b=[];_b(y,S,b,x),S.length!==0&&w.push(new f(m,S,b))}},r=[],a=e.name||"default",l=e.fps||30,o=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let f=0;f<h.length;f++){const m=h[f].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const y={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let w=0;w<m[x].morphTargets.length;w++)y[m[x].morphTargets[w]]=-1;for(const w in y){const S=[],b=[];for(let v=0;v!==m[x].morphTargets.length;++v){const _=m[x];S.push(_.time),b.push(_.morphTarget===w?1:0)}r.push(new Wp(".morphTargetInfluence["+w+"]",S,b))}u=y.length*l}else{const y=".bones["+t[f].name+"]";i($p,y+".position",m,"pos",r),i(ym,y+".quaternion",m,"rot",r),i($p,y+".scale",m,"scl",r)}}return r.length===0?null:new this(a,u,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function OI(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wp;case"vector":case"vector2":case"vector3":case"vector4":return $p;case"color":return d2;case"quaternion":return ym;case"bool":case"boolean":return du;case"string":return fu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function NI(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=OI(n.type);if(n.times===void 0){const t=[],i=[];_b(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ia={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class f2{constructor(e,t,i){const r=this;let a=!1,l=0,o=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(p){o++,a===!1&&r.onStart!==void 0&&r.onStart(p,l,o),a=!0},this.itemEnd=function(p){l++,r.onProgress!==void 0&&r.onProgress(p,l,o),l===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,f){return h.push(p,f),this},this.removeHandler=function(p){const f=h.indexOf(p);return f!==-1&&h.splice(f,2),this},this.getHandler=function(p){for(let f=0,m=h.length;f<m;f+=2){const y=h[f],x=h[f+1];if(y.global&&(y.lastIndex=0),y.test(p))return x}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const DI=new f2;class Pr{constructor(e){this.manager=e!==void 0?e:DI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Pr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Oa={};class II extends Error{constructor(e,t){super(e),this.response=t}}class Bo extends Pr{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Ia.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Oa[e]!==void 0){Oa[e].push({onLoad:t,onProgress:i,onError:r});return}Oa[e]=[],Oa[e].push({onLoad:t,onProgress:i,onError:r});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,u=this.responseType;fetch(l).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&Mt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const p=Oa[e],f=h.body.getReader(),m=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),y=m?parseInt(m):0,x=y!==0;let w=0;const S=new ReadableStream({start(b){v();function v(){f.read().then(({done:_,value:E})=>{if(_)b.close();else{w+=E.byteLength;const R=new ProgressEvent("progress",{lengthComputable:x,loaded:w,total:y});for(let M=0,D=p.length;M<D;M++){const O=p[M];O.onProgress&&O.onProgress(R)}b.enqueue(E),v()}},_=>{b.error(_)})}}});return new Response(S)}else throw new II(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(p=>new DOMParser().parseFromString(p,o));case"json":return h.json();default:if(o==="")return h.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),m=f&&f[1]?f[1].toLowerCase():void 0,y=new TextDecoder(m);return h.arrayBuffer().then(x=>y.decode(x))}}}).then(h=>{Ia.add(`file:${e}`,h);const p=Oa[e];delete Oa[e];for(let f=0,m=p.length;f<m;f++){const y=p[f];y.onLoad&&y.onLoad(h)}}).catch(h=>{const p=Oa[e];if(p===void 0)throw this.manager.itemError(e),h;delete Oa[e];for(let f=0,m=p.length;f<m;f++){const y=p[f];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class hG extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new Bo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(u){r?r(u):xn(u),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Gp.parse(e[i]);t.push(r)}return t}}class dG extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=this,l=[],o=new nb,u=new Bo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let h=0;function p(f){u.load(e[f],function(m){const y=a.parse(m,!0);l[f]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&&(y.mipmapCount===1&&(o.minFilter=ts),o.image=l,o.format=y.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let f=0,m=e.length;f<m;++f)p(f);else u.load(e,function(f){const m=a.parse(f,!0);if(m.isCubemap){const y=m.mipmaps.length/m.mipmapCount;for(let x=0;x<y;x++){l[x]={mipmaps:[]};for(let w=0;w<m.mipmapCount;w++)l[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+w]),l[x].format=m.format,l[x].width=m.width,l[x].height=m.height}o.image=l}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=ts),o.format=m.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}const Hc=new WeakMap;class Kp extends Pr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=Ia.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0);else{let f=Hc.get(l);f===void 0&&(f=[],Hc.set(l,f)),f.push({onLoad:t,onError:r})}return l}const o=jp("img");function u(){p(),t&&t(this);const f=Hc.get(this)||[];for(let m=0;m<f.length;m++){const y=f[m];y.onLoad&&y.onLoad(this)}Hc.delete(this),a.manager.itemEnd(e)}function h(f){p(),r&&r(f),Ia.remove(`image:${e}`);const m=Hc.get(this)||[];for(let y=0;y<m.length;y++){const x=m[y];x.onError&&x.onError(f)}Hc.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function p(){o.removeEventListener("load",u,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",u,!1),o.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Ia.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class fG extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=new Y0;a.colorSpace=Jr;const l=new Kp(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let o=0;function u(h){l.load(e[h],function(p){a.images[h]=p,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let h=0;h<e.length;++h)u(h);return a}}class pG extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new za,o=new Bo(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(u){let h;try{h=a.parse(u)}catch(p){if(r!==void 0)r(p);else{p(p);return}}h.image!==void 0?l.image=h.image:h.data!==void 0&&(l.image.width=h.width,l.image.height=h.height,l.image.data=h.data),l.wrapS=h.wrapS!==void 0?h.wrapS:Ks,l.wrapT=h.wrapT!==void 0?h.wrapT:Ks,l.magFilter=h.magFilter!==void 0?h.magFilter:ts,l.minFilter=h.minFilter!==void 0?h.minFilter:ts,l.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(l.colorSpace=h.colorSpace),h.flipY!==void 0&&(l.flipY=h.flipY),h.format!==void 0&&(l.format=h.format),h.type!==void 0&&(l.type=h.type),h.mipmaps!==void 0&&(l.mipmaps=h.mipmaps,l.minFilter=hm),h.mipmapCount===1&&(l.minFilter=ts),h.generateMipmaps!==void 0&&(l.generateMipmaps=h.generateMipmaps),l.needsUpdate=!0,t&&t(l,h)},i,r),l}}class mG extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=new vi,l=new Kp(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class Rl extends Sn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new jt(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class LI extends Rl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new jt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const o_=new Jt,Cw=new se,Aw=new se;class bb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xe(512,512),this.mapType=q0,this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new eb,this._frameExtents=new Xe(1,1),this._viewportCount=1,this._viewports=[new ns(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Cw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Cw),Aw.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Aw),t.updateMatrixWorld(),o_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o_,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(o_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class BI extends bb{constructor(){super(new Qr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=Kh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zI extends Rl{constructor(e,t,i=0,r=Math.PI/3,a=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.distance=i,this.angle=r,this.penumbra=a,this.decay=l,this.map=null,this.shadow=new BI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class PI extends bb{constructor(){super(new Qr(90,1,.5,500)),this.isPointLightShadow=!0}}class FI extends Rl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new PI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class p2 extends K0{constructor(e=-1,t=1,i=1,r=-1,a=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,l=i+e,o=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=h*this.view.offsetX,l=a+h*this.view.width,o-=p*this.view.offsetY,u=o-p*this.view.height}this.projectionMatrix.makeOrthographic(a,l,o,u,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class UI extends bb{constructor(){super(new p2(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jI extends Rl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.shadow=new UI}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class HI extends Rl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class qI extends Rl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class m2{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*r),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*r)),t.addScaledVector(l[5],1.092548*(r*a)),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],1.092548*(i*a)),t.addScaledVector(l[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*r),t.addScaledVector(l[2],2*.511664*a),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*r),t.addScaledVector(l[5],2*.429043*r*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],2*.429043*i*a),t.addScaledVector(l[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class VI extends Rl{constructor(e=new m2,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class vb extends Pr{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,l=new Bo(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(u){r?r(u):xn(u),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&Mt("MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new jt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(r.allowOverride=e.allowOverride),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const l=e.uniforms[a];switch(r.uniforms[a]={},l.type){case"t":r.uniforms[a].value=i(l.value);break;case"c":r.uniforms[a].value=new jt().setHex(l.value);break;case"v2":r.uniforms[a].value=new Xe().fromArray(l.value);break;case"v3":r.uniforms[a].value=new se().fromArray(l.value);break;case"v4":r.uniforms[a].value=new ns().fromArray(l.value);break;case"m3":r.uniforms[a].value=new Js().fromArray(l.value);break;case"m4":r.uniforms[a].value=new Jt().fromArray(l.value);break;default:r.uniforms[a].value=l.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new Xe().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Xe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return vb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:mI,SpriteMaterial:ZC,RawShaderMaterial:gI,ShaderMaterial:G0,PointsMaterial:e2,MeshPhysicalMaterial:yI,MeshStandardMaterial:ld,MeshPhongMaterial:_I,MeshToonMaterial:bI,MeshNormalMaterial:vI,MeshLambertMaterial:xI,MeshDepthMaterial:SI,MeshDistanceMaterial:wI,MeshBasicMaterial:hu,MeshMatcapMaterial:EI,LineDashedMaterial:CI,LineBasicMaterial:cr,Material:lr};return new t[e]}}class Tw{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class WI extends nn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class $I extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new Bo(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(u){r?r(u):xn(u),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,x){if(t[x]!==void 0)return t[x];const S=y.interleavedBuffers[x],b=a(y,S.buffer),v=Qc(S.type,b),_=new J0(v,S.stride);return _.uuid=S.uuid,t[x]=_,_}function a(y,x){if(i[x]!==void 0)return i[x];const S=y.arrayBuffers[x],b=new Uint32Array(S).buffer;return i[x]=b,b}const l=e.isInstancedBufferGeometry?new WI:new nn,o=e.data.index;if(o!==void 0){const y=Qc(o.type,o.array);l.setIndex(new ni(y,1))}const u=e.data.attributes;for(const y in u){const x=u[y];let w;if(x.isInterleavedBufferAttribute){const S=r(e.data,x.data);w=new ru(S,x.itemSize,x.offset,x.normalized)}else{const S=Qc(x.type,x.array),b=x.isInstancedBufferAttribute?Yh:ni;w=new b(S,x.itemSize,x.normalized)}x.name!==void 0&&(w.name=x.name),x.usage!==void 0&&w.setUsage(x.usage),l.setAttribute(y,w)}const h=e.data.morphAttributes;if(h)for(const y in h){const x=h[y],w=[];for(let S=0,b=x.length;S<b;S++){const v=x[S];let _;if(v.isInterleavedBufferAttribute){const E=r(e.data,v.data);_=new ru(E,v.itemSize,v.offset,v.normalized)}else{const E=Qc(v.type,v.array);_=new ni(E,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),w.push(_)}l.morphAttributes[y]=w}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let y=0,x=f.length;y!==x;++y){const w=f[y];l.addGroup(w.start,w.count,w.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(l.boundingSphere=new Xi().fromJSON(m)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class gG extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=this,l=this.path===""?Tw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const o=new Bo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(f){r!==void 0&&r(f),f("ObjectLoader: Can't parse "+e+".",f.message);return}const p=h.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),xn("ObjectLoader: Can't load "+e);return}a.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Tw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new Bo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const l=await a.loadAsync(e,t),o=JSON.parse(l),u=o.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),l=this.parseImages(e.images,function(){t!==void 0&&t(h)}),o=this.parseTextures(e.textures,l),u=this.parseMaterials(e.materials,o),h=this.parseObject(e.object,a,u,o,i),p=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,p),this.bindLightTargets(h),t!==void 0){let f=!1;for(const m in l)if(l[m].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,l),u=this.parseObject(e.object,r,o,l,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new tu().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,l=e.length;a<l;a++){const o=new Q0().fromJSON(e[a],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new $I;for(let a=0,l=e.length;a<l;a++){let o;const u=e[a];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(u);break;default:u.type in Ew?o=Ew[u.type].fromJSON(u,t):Mt(`ObjectLoader: Unsupported geometry type "${u.type}"`)}o.uuid=u.uuid,u.name!==void 0&&(o.name=u.name),u.userData!==void 0&&(o.userData=u.userData),i[u.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new vb;a.setTextures(t);for(let l=0,o=e.length;l<o;l++){const u=e[l];i[u.uuid]===void 0&&(i[u.uuid]=a.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=Gp.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function l(u){return i.manager.itemStart(u),a.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function o(u){if(typeof u=="string"){const h=u,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return l(p)}else return u.data?{data:Qc(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new f2(t);a=new Kp(u),a.setCrossOrigin(this.crossOrigin);for(let h=0,p=e.length;h<p;h++){const f=e[h],m=f.url;if(Array.isArray(m)){const y=[];for(let x=0,w=m.length;x<w;x++){const S=m[x],b=o(S);b!==null&&(b instanceof HTMLImageElement?y.push(b):y.push(new za(b.data,b.width,b.height)))}r[f.uuid]=new Sl(y)}else{const y=o(f.url);r[f.uuid]=new Sl(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(l){if(typeof l=="string"){const o=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(u)}else return l.data?{data:Qc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){r=new Kp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let l=0,o=e.length;l<o;l++){const u=e[l],h=u.url;if(Array.isArray(h)){const p=[];for(let f=0,m=h.length;f<m;f++){const y=h[f],x=await a(y);x!==null&&(x instanceof HTMLImageElement?p.push(x):p.push(new za(x.data,x.width,x.height)))}i[u.uuid]=new Sl(p)}else{const p=await a(u.url);i[u.uuid]=new Sl(p)}}}return i}parseTextures(e,t){function i(a,l){return typeof a=="number"?a:(Mt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),l[a])}const r={};if(e!==void 0)for(let a=0,l=e.length;a<l;a++){const o=e[a];o.image===void 0&&Mt('ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&Mt("ObjectLoader: Undefined image",o.image);const u=t[o.image],h=u.data;let p;Array.isArray(h)?(p=new Y0,h.length===6&&(p.needsUpdate=!0)):(h&&h.data?p=new za:p=new vi,h&&(p.needsUpdate=!0)),p.source=u,p.uuid=o.uuid,o.name!==void 0&&(p.name=o.name),o.mapping!==void 0&&(p.mapping=i(o.mapping,GI)),o.channel!==void 0&&(p.channel=o.channel),o.offset!==void 0&&p.offset.fromArray(o.offset),o.repeat!==void 0&&p.repeat.fromArray(o.repeat),o.center!==void 0&&p.center.fromArray(o.center),o.rotation!==void 0&&(p.rotation=o.rotation),o.wrap!==void 0&&(p.wrapS=i(o.wrap[0],kw),p.wrapT=i(o.wrap[1],kw)),o.format!==void 0&&(p.format=o.format),o.internalFormat!==void 0&&(p.internalFormat=o.internalFormat),o.type!==void 0&&(p.type=o.type),o.colorSpace!==void 0&&(p.colorSpace=o.colorSpace),o.minFilter!==void 0&&(p.minFilter=i(o.minFilter,Mw)),o.magFilter!==void 0&&(p.magFilter=i(o.magFilter,Mw)),o.anisotropy!==void 0&&(p.anisotropy=o.anisotropy),o.flipY!==void 0&&(p.flipY=o.flipY),o.generateMipmaps!==void 0&&(p.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(p.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(p.compareFunction=o.compareFunction),o.userData!==void 0&&(p.userData=o.userData),r[o.uuid]=p}return r}parseObject(e,t,i,r,a){let l;function o(m){return t[m]===void 0&&Mt("ObjectLoader: Undefined geometry",m),t[m]}function u(m){if(m!==void 0){if(Array.isArray(m)){const y=[];for(let x=0,w=m.length;x<w;x++){const S=m[x];i[S]===void 0&&Mt("ObjectLoader: Undefined material",S),y.push(i[S])}return y}return i[m]===void 0&&Mt("ObjectLoader: Undefined material",m),i[m]}}function h(m){return r[m]===void 0&&Mt("ObjectLoader: Undefined texture",m),r[m]}let p,f;switch(e.type){case"Scene":l=new dD,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new jt(e.background):l.background=h(e.background)),e.environment!==void 0&&(l.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Z0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new X0(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new Qr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new p2(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new HI(e.color,e.intensity);break;case"DirectionalLight":l=new jI(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new FI(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new qI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new zI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new LI(e.color,e.groundColor,e.intensity);break;case"LightProbe":const m=new m2().fromArray(e.sh);l=new VI(m,e.intensity);break;case"SkinnedMesh":p=o(e.geometry),f=u(e.material),l=new gD(p,f),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":p=o(e.geometry),f=u(e.material),l=new ws(p,f);break;case"InstancedMesh":p=o(e.geometry),f=u(e.material);const y=e.count,x=e.instanceMatrix,w=e.instanceColor;l=new bD(p,f,y),l.instanceMatrix=new Yh(new Float32Array(x.array),16),w!==void 0&&(l.instanceColor=new Yh(new Float32Array(w.array),w.itemSize));break;case"BatchedMesh":p=o(e.geometry),f=u(e.material),l=new RD(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),l.geometry=p,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(S=>{let b=null,v=null;return S.boundingBox!==void 0&&(b=new or().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(v=new Xi().fromJSON(S.boundingSphere)),{...S,boundingBox:b,boundingSphere:v}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=h(e.matricesTexture.uuid),l._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new Xi().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new or().fromJSON(e.boundingBox));break;case"LOD":l=new pD;break;case"Line":l=new Cl(o(e.geometry),u(e.material));break;case"LineLoop":l=new OD(o(e.geometry),u(e.material));break;case"LineSegments":l=new Ua(o(e.geometry),u(e.material));break;case"PointCloud":case"Points":l=new ND(o(e.geometry),u(e.material));break;case"Sprite":l=new fD(u(e.material));break;case"Group":l=new Nh;break;case"Bone":l=new QC;break;default:l=new Sn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let y=0;y<m.length;y++)l.add(this.parseObject(m[y],t,i,r,a))}if(e.animations!==void 0){const m=e.animations;for(let y=0;y<m.length;y++){const x=m[y];l.animations.push(a[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const m=e.levels;for(let y=0;y<m.length;y++){const x=m[y],w=l.getObjectByProperty("uuid",x.object);w!==void 0&&l.addLevel(w,x.distance,x.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?Mt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Sn}})}}const GI={UVMapping:H0,CubeReflectionMapping:um,CubeRefractionMapping:m3,EquirectangularReflectionMapping:g3,EquirectangularRefractionMapping:y3,CubeUVReflectionMapping:_3},kw={RepeatWrapping:e0,ClampToEdgeWrapping:Ks,MirroredRepeatWrapping:t0},Mw={NearestFilter:Br,NearestMipmapNearestFilter:b3,NearestMipmapLinearFilter:v3,LinearFilter:ts,LinearMipmapNearestFilter:x3,LinearMipmapLinearFilter:hm},l_=new WeakMap;class yG extends Pr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Mt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Mt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,l=Ia.get(`image-bitmap:${e}`);if(l!==void 0){if(a.manager.itemStart(e),l.then){l.then(h=>{if(l_.has(l)===!0)r&&r(l_.get(l)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(h),a.manager.itemEnd(e),h});return}return setTimeout(function(){t&&t(l),a.manager.itemEnd(e)},0),l}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const u=fetch(e,o).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(h){return Ia.add(`image-bitmap:${e}`,h),t&&t(h),a.manager.itemEnd(e),h}).catch(function(h){r&&r(h),l_.set(u,h),Ia.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});Ia.add(`image-bitmap:${e}`,u),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let lp,g2=class{static getContext(){return lp===void 0&&(lp=new(window.AudioContext||window.webkitAudioContext)),lp}static setContext(e){lp=e}};class bG extends Pr{constructor(e){super(e)}load(e,t,i,r){const a=this,l=new Bo(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const h=u.slice(0);g2.getContext().decodeAudioData(h,function(f){t(f)}).catch(o)}catch(h){o(h)}},i,r);function o(u){r?r(u):xn(u),a.manager.itemError(e)}}}const Rw=new Jt,Ow=new Jt,pl=new Jt;class vG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,pl.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,l=t.near*Math.tan(El*t.fov*.5)/t.zoom;let o,u;Ow.elements[12]=-r,Rw.elements[12]=r,o=-l*t.aspect+a,u=l*t.aspect+a,pl.elements[0]=2*t.near/(u-o),pl.elements[8]=(u+o)/(u-o),this.cameraL.projectionMatrix.copy(pl),o=-l*t.aspect-a,u=l*t.aspect-a,pl.elements[0]=2*t.near/(u-o),pl.elements[8]=(u+o)/(u-o),this.cameraR.projectionMatrix.copy(pl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ow),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Rw)}}class xG extends Qr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class KI{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const ml=new se,c_=new Ir,YI=new se,gl=new se,yl=new se;class SG extends Sn{constructor(){super(),this.type="AudioListener",this.context=g2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KI}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ml,c_,YI),gl.set(0,0,-1).applyQuaternion(c_),yl.set(0,1,0).applyQuaternion(c_),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ml.x,i),t.positionY.linearRampToValueAtTime(ml.y,i),t.positionZ.linearRampToValueAtTime(ml.z,i),t.forwardX.linearRampToValueAtTime(gl.x,i),t.forwardY.linearRampToValueAtTime(gl.y,i),t.forwardZ.linearRampToValueAtTime(gl.z,i),t.upX.linearRampToValueAtTime(yl.x,i),t.upY.linearRampToValueAtTime(yl.y,i),t.upZ.linearRampToValueAtTime(yl.z,i)}else t.setPosition(ml.x,ml.y,ml.z),t.setOrientation(gl.x,gl.y,gl.z,yl.x,yl.y,yl.z)}}class XI extends Sn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Mt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Mt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Mt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(Mt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const _l=new se,Nw=new Ir,ZI=new se,bl=new se;class wG extends XI{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_l,Nw,ZI),bl.set(0,0,1).applyQuaternion(Nw);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_l.x,i),t.positionY.linearRampToValueAtTime(_l.y,i),t.positionZ.linearRampToValueAtTime(_l.z,i),t.orientationX.linearRampToValueAtTime(bl.x,i),t.orientationY.linearRampToValueAtTime(bl.y,i),t.orientationZ.linearRampToValueAtTime(bl.z,i)}else t.setPosition(_l.x,_l.y,_l.z),t.setOrientation(bl.x,bl.y,bl.z)}}class EG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class JI{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,l;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let l=this.cumulativeWeight;if(l===0){for(let o=0;o!==r;++o)i[a+o]=i[o];l=t}else{l+=t;const o=t/l;this._mixBufferRegion(i,a,0,o,r)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-a,t)}l>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(i[u]!==i[u+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,l=r;a!==l;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let l=0;l!==a;++l)e[t+l]=e[i+l]}_slerp(e,t,i,r){Ir.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const l=this._workIndex*a;Ir.multiplyQuaternionsFlat(e,l,e,t,e,i),Ir.slerpFlat(e,t,e,t,e,l,r)}_lerp(e,t,i,r,a){const l=1-r;for(let o=0;o!==a;++o){const u=t+o;e[u]=e[u]*l+e[i+o]*r}}_lerpAdditive(e,t,i,r,a){for(let l=0;l!==a;++l){const o=t+l;e[o]=e[o]+e[i+l]*r}}}const xb="\\[\\]\\.:\\/",QI=new RegExp("["+xb+"]","g"),Sb="[^"+xb+"]",e5="[^"+xb.replace("\\.","")+"]",t5=/((?:WC+[\/:])*)/.source.replace("WC",Sb),n5=/(WCOD+)?/.source.replace("WCOD",e5),i5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Sb),r5=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Sb),s5=new RegExp("^"+t5+n5+i5+r5+"$"),a5=["material","materials","bones","map"];class o5{constructor(e,t,i){const r=i||vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class vn{constructor(e,t,i){this.path=t,this.parsedPath=i||vn.parseTrackName(t),this.node=vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new vn.Composite(e,t,i):new vn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(QI,"")}static parseTrackName(e){const t=s5.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);a5.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let l=0;l<a.length;l++){const o=a[l];if(o.name===t||o.uuid===t)return o;const u=i(o.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=vn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Mt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){xn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){xn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){xn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===h){h=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){xn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){xn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){xn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){xn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const l=e[r];if(l===void 0){const h=t.nodeName;xn("PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){xn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){xn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else l.fromArray!==void 0&&l.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(u=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vn.Composite=o5;vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vn.prototype.GetterByBindingType=[vn.prototype._getValue_direct,vn.prototype._getValue_array,vn.prototype._getValue_arrayElement,vn.prototype._getValue_toArray];vn.prototype.SetterByBindingTypeAndVersioning=[[vn.prototype._setValue_direct,vn.prototype._setValue_direct_setNeedsUpdate,vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_array,vn.prototype._setValue_array_setNeedsUpdate,vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_arrayElement,vn.prototype._setValue_arrayElement_setNeedsUpdate,vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_fromArray,vn.prototype._setValue_fromArray_setNeedsUpdate,vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class CG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Dr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,l=a.length;let o,u=e.length,h=this.nCachedObjects_;for(let p=0,f=arguments.length;p!==f;++p){const m=arguments[p],y=m.uuid;let x=t[y];if(x===void 0){x=u++,t[y]=x,e.push(m);for(let w=0,S=l;w!==S;++w)a[w].push(new vn(m,i[w],r[w]))}else if(x<h){o=e[x];const w=--h,S=e[w];t[S.uuid]=x,e[x]=S,t[y]=w,e[w]=m;for(let b=0,v=l;b!==v;++b){const _=a[b],E=_[w];let R=_[x];_[x]=E,R===void 0&&(R=new vn(m,i[b],r[b])),_[w]=R}}else e[x]!==o&&xn("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let l=0,o=arguments.length;l!==o;++l){const u=arguments[l],h=u.uuid,p=t[h];if(p!==void 0&&p>=a){const f=a++,m=e[f];t[m.uuid]=p,e[p]=m,t[h]=f,e[f]=u;for(let y=0,x=r;y!==x;++y){const w=i[y],S=w[f],b=w[p];w[p]=S,w[f]=b}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,l=e.length;for(let o=0,u=arguments.length;o!==u;++o){const h=arguments[o],p=h.uuid,f=t[p];if(f!==void 0)if(delete t[p],f<a){const m=--a,y=e[m],x=--l,w=e[x];t[y.uuid]=f,e[f]=y,t[w.uuid]=m,e[m]=w,e.pop();for(let S=0,b=r;S!==b;++S){const v=i[S],_=v[m],E=v[x];v[f]=_,v[m]=E,v.pop()}}else{const m=--l,y=e[m];m>0&&(t[y.uuid]=f),e[f]=y,e.pop();for(let x=0,w=r;x!==w;++x){const S=i[x];S[f]=S[m],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const l=this._paths,o=this._parsedPaths,u=this._objects,h=u.length,p=this.nCachedObjects_,f=new Array(h);r=a.length,i[e]=r,l.push(e),o.push(t),a.push(f);for(let m=p,y=u.length;m!==y;++m){const x=u[m];f[m]=new vn(x,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,l=this._bindings,o=l.length-1,u=l[o],h=e[o];t[h]=i,l[i]=u,l.pop(),a[i]=a[o],a.pop(),r[i]=r[o],r.pop()}}}class l5{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,l=a.length,o=new Array(l),u={endingStart:Zc,endingEnd:Zc};for(let h=0;h!==l;++h){const p=a[h].createInterpolant(null);o[h]=p,p.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,a=e._clip.duration,l=a/r,o=r/a;e.warp(1,l,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,l=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const u=o.parameterPositions,h=o.sampleValues;return u[0]=a,u[1]=a+i,h[0]=e/l,h[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const u=(e-a)*i;u<0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const l=this._updateTime(t),o=this._updateWeight(e);if(o>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case VC:for(let p=0,f=u.length;p!==f;++p)u[p].evaluate(l),h[p].accumulateAdditive(o);break;case V0:default:for(let p=0,f=u.length;p!==f;++p)u[p].evaluate(l),h[p].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const l=i===xN;if(e===0)return a===-1?r:l&&(a&1)===1?t-r:r;if(i===bN){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(l&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Jc,r.endingEnd=Jc):(e?r.endingStart=this.zeroSlopeAtStart?Jc:Zc:r.endingStart=Fp,t?r.endingEnd=this.zeroSlopeAtEnd?Jc:Zc:r.endingEnd=Fp)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let l=this._weightInterpolant;l===null&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);const o=l.parameterPositions,u=l.sampleValues;return o[0]=a,u[0]=t,o[1]=a+e,u[1]=i,this}}const c5=new Float32Array(1);class AG extends Po{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,l=e._propertyBindings,o=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName;let p=h[u];p===void 0&&(p={},h[u]=p);for(let f=0;f!==a;++f){const m=r[f],y=m.name;let x=p[y];if(x!==void 0)++x.referenceCount,l[f]=x;else{if(x=l[f],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,u,y));continue}const w=t&&t._propertyBindings[f].binding.parsedPath;x=new JI(vn.create(i,y,w),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,u,y),l[f]=x}o[f].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let l=a[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{const o=l.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,l=this._actionsByClip,o=l[a],u=o.knownActions,h=u[u.length-1],p=e._byClipCacheIndex;h._byClipCacheIndex=p,u[p]=h,u.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete f[m],u.length===0&&delete l[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let l=r[t];l===void 0&&(l={},r[t]=l),l[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,l=this._bindingsByRootAndName,o=l[r],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete o[a],Object.keys(o).length===0&&delete l[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new h2(new Float32Array(2),new Float32Array(2),1,c5),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let l=typeof e=="string"?Gp.findByName(r,e):e;const o=l!==null?l.uuid:e,u=this._actionsByClip[o];let h=null;if(i===void 0&&(l!==null?i=l.blendMode:i=V0),u!==void 0){const f=u.actionByRoot[a];if(f!==void 0&&f.blendMode===i)return f;h=u.knownActions[0],l===null&&(l=h._clip)}if(l===null)return null;const p=new l5(this,l,t,i);return this._bindAction(p,h),this._addInactiveAction(p,o,a),p}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?Gp.findByName(i,e):e,l=a?a.uuid:e,o=this._actionsByClip[l];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,a,l);const o=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)o[h].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const l=a.knownActions;for(let o=0,u=l.length;o!==u;++o){const h=l[o];this._deactivateAction(h);const p=h._cacheIndex,f=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,f._cacheIndex=p,t[p]=f,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const o=i[l].actionByRoot,u=o[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const l in a){const o=a[l];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class TG extends GC{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new KC(null,e,t,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class y2{constructor(e){this.value=e}clone(){return new y2(this.value.clone===void 0?this.value:this.value.clone())}}let u5=0;class kG extends Po{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:u5++}),this.name="",this.usage=Up,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let l=0;l<a.length;l++)this.uniforms.push(a[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class MG extends J0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class RG{constructor(e,t,i,r,a,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Dw=new Jt;class OG{constructor(e,t,i=0,r=1/0){this.ray=new ad(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new YC,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):xn("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Dw.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Dw),this}intersectObject(e,t=!0,i=[]){return c0(e,this,i,t),i.sort(Iw),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)c0(e[r],this,i,t);return i.sort(Iw),i}}function Iw(n,e){return n.distance-e.distance}function c0(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let l=0,o=a.length;l<o;l++)c0(a[l],e,t,!0)}}class NG{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=h5.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function h5(){this._document.hidden===!1&&this.reset()}class DG{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Nt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Nt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class IG{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class _2{constructor(e,t,i,r){_2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const Lw=new Xe;class LG{constructor(e=new Xe(1/0,1/0),t=new Xe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Lw.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Lw).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bw=new se,cp=new se,qc=new se,Vc=new se,u_=new se,d5=new se,f5=new se;class BG{constructor(e=new se,t=new se){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Bw.subVectors(e,this.start),cp.subVectors(this.end,this.start);const i=cp.dot(cp);let a=cp.dot(Bw)/i;return t&&(a=Nt(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=d5,i=f5){const r=10000000000000001e-32;let a,l;const o=this.start,u=e.start,h=this.end,p=e.end;qc.subVectors(h,o),Vc.subVectors(p,u),u_.subVectors(o,u);const f=qc.dot(qc),m=Vc.dot(Vc),y=Vc.dot(u_);if(f<=r&&m<=r)return t.copy(o),i.copy(u),t.sub(i),t.dot(t);if(f<=r)a=0,l=y/m,l=Nt(l,0,1);else{const x=qc.dot(u_);if(m<=r)l=0,a=Nt(-x/f,0,1);else{const w=qc.dot(Vc),S=f*m-w*w;S!==0?a=Nt((w*y-x*m)/S,0,1):a=0,l=(w*a+y)/m,l<0?(l=0,a=Nt(-x/f,0,1)):l>1&&(l=1,a=Nt((w-x)/f,0,1))}}return t.copy(o).add(qc.multiplyScalar(a)),i.copy(u).add(Vc.multiplyScalar(l)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const zw=new se;class zG extends Sn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new nn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,o=1,u=32;l<u;l++,o++){const h=l/u*Math.PI*2,p=o/u*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new gt(r,3));const a=new cr({fog:!1,toneMapped:!1});this.cone=new Ua(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),zw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(zw),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Mo=new se,up=new Jt,h_=new Jt;class PG extends Ua{constructor(e){const t=b2(e),i=new nn,r=[],a=[];for(let h=0;h<t.length;h++){const p=t[h];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new gt(r,3)),i.setAttribute("color",new gt(a,3));const l=new cr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new jt(255),u=new jt(65280);this.setColors(o,u)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");h_.copy(this.root.matrixWorld).invert();for(let a=0,l=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(up.multiplyMatrices(h_,o.matrixWorld),Mo.setFromMatrixPosition(up),r.setXYZ(l,Mo.x,Mo.y,Mo.z),up.multiplyMatrices(h_,o.parent.matrixWorld),Mo.setFromMatrixPosition(up),r.setXYZ(l+1,Mo.x,Mo.y,Mo.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function b2(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...b2(n.children[t]));return e}class FG extends ws{constructor(e,t,i){const r=new bs(t,4,2),a=new hu({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const p5=new se,Pw=new jt,Fw=new jt;class UG extends Sn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new mm(t);r.rotateY(Math.PI*.5),this.material=new hu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),l=new Float32Array(a.count*3);r.setAttribute("color",new ni(l,3)),this.add(new ws(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Pw.copy(this.light.color),Fw.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?Pw:Fw;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(p5.setFromMatrixPosition(this.light.matrixWorld).negate())}}class jG extends Ua{constructor(e=10,t=10,i=4473924,r=8947848){i=new jt(i),r=new jt(r);const a=t/2,l=e/t,o=e/2,u=[],h=[];for(let m=0,y=0,x=-o;m<=t;m++,x+=l){u.push(-o,0,x,o,0,x),u.push(x,0,-o,x,0,o);const w=m===a?i:r;w.toArray(h,y),y+=3,w.toArray(h,y),y+=3,w.toArray(h,y),y+=3,w.toArray(h,y),y+=3}const p=new nn;p.setAttribute("position",new gt(u,3)),p.setAttribute("color",new gt(h,3));const f=new cr({vertexColors:!0,toneMapped:!1});super(p,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class HG extends Ua{constructor(e=10,t=16,i=8,r=64,a=4473924,l=8947848){a=new jt(a),l=new jt(l);const o=[],u=[];if(t>1)for(let f=0;f<t;f++){const m=f/t*(Math.PI*2),y=Math.sin(m)*e,x=Math.cos(m)*e;o.push(0,0,0),o.push(y,0,x);const w=f&1?a:l;u.push(w.r,w.g,w.b),u.push(w.r,w.g,w.b)}for(let f=0;f<i;f++){const m=f&1?a:l,y=e-e/i*f;for(let x=0;x<r;x++){let w=x/r*(Math.PI*2),S=Math.sin(w)*y,b=Math.cos(w)*y;o.push(S,0,b),u.push(m.r,m.g,m.b),w=(x+1)/r*(Math.PI*2),S=Math.sin(w)*y,b=Math.cos(w)*y,o.push(S,0,b),u.push(m.r,m.g,m.b)}}const h=new nn;h.setAttribute("position",new gt(o,3)),h.setAttribute("color",new gt(u,3));const p=new cr({vertexColors:!0,toneMapped:!1});super(h,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Uw=new se,hp=new se,jw=new se;class qG extends Sn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new nn;r.setAttribute("position",new gt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new cr({fog:!1,toneMapped:!1});this.lightPlane=new Cl(r,a),this.add(this.lightPlane),r=new nn,r.setAttribute("position",new gt([0,0,0,0,0,1],3)),this.targetLine=new Cl(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Uw.setFromMatrixPosition(this.light.matrixWorld),hp.setFromMatrixPosition(this.light.target.matrixWorld),jw.subVectors(hp,Uw),this.lightPlane.lookAt(hp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(hp),this.targetLine.scale.z=jw.length()}}const dp=new se,ai=new K0;class VG extends Ua{constructor(e){const t=new nn,i=new cr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],l={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(x,w){u(x),u(w)}function u(x){r.push(0,0,0),a.push(0,0,0),l[x]===void 0&&(l[x]=[]),l[x].push(r.length/3-1)}t.setAttribute("position",new gt(r,3)),t.setAttribute("color",new gt(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const h=new jt(16755200),p=new jt(16711680),f=new jt(43775),m=new jt(16777215),y=new jt(3355443);this.setColors(h,p,f,m,y)}setColors(e,t,i,r,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;let a,l;if(ai.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,l=0;else if(this.camera.coordinateSystem===Ys)a=-1,l=1;else if(this.camera.coordinateSystem===Gh)a=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);ui("c",t,e,ai,0,0,a),ui("t",t,e,ai,0,0,l),ui("n1",t,e,ai,-i,-r,a),ui("n2",t,e,ai,i,-r,a),ui("n3",t,e,ai,-i,r,a),ui("n4",t,e,ai,i,r,a),ui("f1",t,e,ai,-i,-r,l),ui("f2",t,e,ai,i,-r,l),ui("f3",t,e,ai,-i,r,l),ui("f4",t,e,ai,i,r,l),ui("u1",t,e,ai,i*.7,r*1.1,a),ui("u2",t,e,ai,-i*.7,r*1.1,a),ui("u3",t,e,ai,0,r*2,a),ui("cf1",t,e,ai,-i,0,l),ui("cf2",t,e,ai,i,0,l),ui("cf3",t,e,ai,0,-r,l),ui("cf4",t,e,ai,0,r,l),ui("cn1",t,e,ai,-i,0,a),ui("cn2",t,e,ai,i,0,a),ui("cn3",t,e,ai,0,-r,a),ui("cn4",t,e,ai,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ui(n,e,t,i,r,a,l){dp.set(r,a,l).unproject(i);const o=e[n];if(o!==void 0){const u=t.getAttribute("position");for(let h=0,p=o.length;h<p;h++)u.setXYZ(o[h],dp.x,dp.y,dp.z)}}const fp=new or;class WG extends Ua{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new nn;a.setIndex(new ni(i,1)),a.setAttribute("position",new ni(r,3)),super(a,new cr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&fp.setFromObject(this.object),fp.isEmpty())return;const e=fp.min,t=fp.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $G extends Ua{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new nn;a.setIndex(new ni(i,1)),a.setAttribute("position",new gt(r,3)),super(a,new cr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class GG extends Cl{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new nn;l.setAttribute("position",new gt(a,3)),l.computeBoundingSphere(),super(l,new cr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new nn;u.setAttribute("position",new gt(o,3)),u.computeBoundingSphere(),this.add(new ws(u,new hu({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Hw=new se;let pp,d_;class KG extends Sn{constructor(e=new se(0,0,1),t=new se(0,0,0),i=1,r=16776960,a=i*.2,l=a*.2){super(),this.type="ArrowHelper",pp===void 0&&(pp=new nn,pp.setAttribute("position",new gt([0,0,0,0,1,0],3)),d_=new pm(.5,1,5,1),d_.translate(0,-.5,0)),this.position.copy(t),this.line=new Cl(pp,new cr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ws(d_,new hu({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Hw.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Hw,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class YG extends Ua{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new nn;r.setAttribute("position",new gt(t,3)),r.setAttribute("color",new gt(i,3));const a=new cr({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new jt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class XG{constructor(){this.type="ShapePath",this.color=new jt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new s0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,l){return this.currentPath.bezierCurveTo(e,t,i,r,a,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const v=[];for(let _=0,E=b.length;_<E;_++){const R=b[_],M=new tu;M.curves=R.curves,v.push(M)}return v}function i(b,v){const _=v.length;let E=!1;for(let R=_-1,M=0;M<_;R=M++){let D=v[R],O=v[M],L=O.x-D.x,j=O.y-D.y;if(Math.abs(j)>Number.EPSILON){if(j<0&&(D=v[M],L=-L,O=v[R],j=-j),b.y<D.y||b.y>O.y)continue;if(b.y===D.y){if(b.x===D.x)return!0}else{const X=j*(b.x-D.x)-L*(b.y-D.y);if(X===0)return!0;if(X<0)continue;E=!E}}else{if(b.y!==D.y)continue;if(O.x<=b.x&&b.x<=D.x||D.x<=b.x&&b.x<=O.x)return!0}}return E}const r=Xs.isClockWise,a=this.subPaths;if(a.length===0)return[];let l,o,u;const h=[];if(a.length===1)return o=a[0],u=new tu,u.curves=o.curves,h.push(u),h;let p=!r(a[0].getPoints());p=e?!p:p;const f=[],m=[];let y=[],x=0,w;m[x]=void 0,y[x]=[];for(let b=0,v=a.length;b<v;b++)o=a[b],w=o.getPoints(),l=r(w),l=e?!l:l,l?(!p&&m[x]&&x++,m[x]={s:new tu,p:w},m[x].s.curves=o.curves,p&&x++,y[x]=[]):y[x].push({h:o,p:w[0]});if(!m[0])return t(a);if(m.length>1){let b=!1,v=0;for(let _=0,E=m.length;_<E;_++)f[_]=[];for(let _=0,E=m.length;_<E;_++){const R=y[_];for(let M=0;M<R.length;M++){const D=R[M];let O=!0;for(let L=0;L<m.length;L++)i(D.p,m[L].p)&&(_!==L&&v++,O?(O=!1,f[L].push(D)):b=!0);O&&f[_].push(D)}}v>0&&b===!1&&(y=f)}let S;for(let b=0,v=m.length;b<v;b++){u=m[b].s,h.push(u),S=y[b];for(let _=0,E=S.length;_<E;_++)u.holes.push(S[_].h)}return h}}class ZG extends Po{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Mt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function m5(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function g5(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function y5(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function _5(n,e,t,i){const r=b5(i);switch(t){case O3:return n*e;case HC:return n*e/r.components*r.byteLength;case qC:return n*e/r.components*r.byteLength;case I3:return n*e*2/r.components*r.byteLength;case L3:return n*e*2/r.components*r.byteLength;case N3:return n*e*3/r.components*r.byteLength;case $h:return n*e*4/r.components*r.byteLength;case B3:return n*e*4/r.components*r.byteLength;case z3:case P3:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case F3:case U3:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case H3:case V3:return Math.max(n,16)*Math.max(e,8)/4;case j3:case q3:return Math.max(n,8)*Math.max(e,8)/2;case W3:case $3:case K3:case Y3:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case G3:case X3:case Z3:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case J3:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Q3:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case eN:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case tN:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case nN:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case iN:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case rN:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case sN:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case aN:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case oN:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case lN:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case cN:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case uN:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case hN:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case dN:case fN:case pN:return Math.ceil(n/4)*Math.ceil(e/4)*16;case mN:case gN:return Math.ceil(n/4)*Math.ceil(e/4)*8;case yN:case _N:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function b5(n){switch(n){case q0:case S3:return{byteLength:1,components:1};case E3:case w3:case A3:return{byteLength:2,components:1};case T3:case k3:return{byteLength:2,components:4};case dm:case C3:case iu:return{byteLength:4,components:1};case M3:case R3:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class JG{static contain(e,t){return m5(e,t)}static cover(e,t){return g5(e,t)}static fill(e){return y5(e)}static getByteLength(e,t,i,r){return _5(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:UC}}));typeof window<"u"&&(window.__THREE__?Mt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=UC);const Yp={robot:{type:"robot",label:"Robot",description:"Standard humanoid robot",head:{},torso:{},armL:{},armR:{},legL:{visible:!1},legR:{visible:!1},hovers:!0,baseY:.2},mech:{type:"mech",label:"Mech",description:"Bulkier torso, wider stance, angular head",head:{geometry:new Gn(.34,.2,.3),position:[0,1.36,0]},torso:{geometry:new Gn(.42,.44,.26),position:[0,.87,0]},armL:{geometry:new Gn(.11,.3,.11),position:[-.27,1.07,0]},armR:{geometry:new Gn(.11,.3,.11),position:[.27,1.07,0]},legL:{visible:!1},legR:{visible:!1},hovers:!0,baseY:.2},drone:{type:"drone",label:"Drone",description:"Smaller hovering unit with antenna array",head:{geometry:new bs(.14,8,8),position:[0,1.2,0]},torso:{geometry:new Gn(.28,.18,.28),position:[0,.95,0]},armL:{geometry:new Gn(.22,.04,.06),position:[-.25,.95,0]},armR:{geometry:new Gn(.22,.04,.06),position:[.25,.95,0]},legL:{visible:!1},legR:{visible:!1},hovers:!0,baseY:.3},spider:{type:"spider",label:"Spider",description:"Low body with 4 stubby legs",head:{geometry:new bs(.12,8,8),position:[0,.85,.1]},torso:{geometry:new Gn(.36,.14,.32),position:[0,.65,0]},armL:{geometry:new Gn(.06,.22,.06),position:[-.2,.65,-.12],scale:[1,1,1]},armR:{geometry:new Gn(.06,.22,.06),position:[.2,.65,-.12],scale:[1,1,1]},legL:{visible:!1},legR:{visible:!1},hovers:!0,baseY:.05},orb:{type:"orb",label:"Orb",description:"Spherical body with stubby arms and short legs",head:{geometry:new bs(.1,8,8),position:[0,1.28,0]},torso:{geometry:new bs(.22,12,12),position:[0,.92,0]},armL:{geometry:new Gn(.06,.18,.06),position:[-.24,.92,0]},armR:{geometry:new Gn(.06,.18,.06),position:[.24,.92,0]},legL:{visible:!1},legR:{visible:!1},hovers:!0,baseY:.2},tank:{type:"tank",label:"Tank",description:"Wide body with one thick arm, treads for legs",head:{geometry:new Gn(.24,.18,.22),position:[0,1.24,0]},torso:{geometry:new Gn(.44,.3,.26),position:[0,.87,0]},armL:{visible:!1},armR:{geometry:new Gn(.14,.34,.14),position:[.3,.87,0]},legL:{visible:!1},legR:{visible:!1},hovers:!0,baseY:.15}},v5=["robot","mech","drone","spider","orb","tank"];function QG(n){return Yp[n]??Yp.robot}function v2(n){return Yp[n]?.label??"Robot"}function x5(n){return Yp[n]?.description??""}const S5="_panel_9dulv_7",w5="_section_9dulv_12",E5="_tabs_9dulv_18",C5="_tab_9dulv_18",A5="_active_9dulv_21",T5="_autosaveIndicator_9dulv_30",k5="_visible_9dulv_31",M5="_themeGrid_9dulv_36",R5="_themeSwatch_9dulv_37",O5="_swatchColors_9dulv_40",N5="_swatchLabel_9dulv_42",D5="_fontSizeControl_9dulv_46",I5="_fontBtn_9dulv_47",L5="_fontSizeDisplay_9dulv_49",B5="_fontSizeSlider_9dulv_50",z5="_soundControls_9dulv_76",P5="_toggleLabel_9dulv_77",F5="_toggleSwitch_9dulv_80",U5="_volumeControl_9dulv_85",j5="_volumeDisplay_9dulv_87",H5="_soundActionGrid_9dulv_90",q5="_soundCategoryLabel_9dulv_94",V5="_soundActionRow_9dulv_95",W5="_soundActionLabel_9dulv_97",$5="_soundActionSelect_9dulv_98",G5="_soundPreviewBtn_9dulv_101",K5="_densityControl_9dulv_106",Y5="_densityBtn_9dulv_107",X5="_densityBtnLabel_9dulv_110",Z5="_densityBtnDesc_9dulv_111",J5="_densityActions_9dulv_112",Q5="_densityStatus_9dulv_113",eL="_hookStatusDot_9dulv_114",tL="_installed_9dulv_115",nL="_advancedActions_9dulv_118",iL="_settingsHint_9dulv_119",rL="_apiKeyRow_9dulv_122",sL="_apiKeyInput_9dulv_123",aL="_apiKeyToggle_9dulv_125",$e={panel:S5,section:w5,tabs:E5,tab:C5,active:A5,autosaveIndicator:T5,visible:k5,themeGrid:M5,themeSwatch:R5,swatchColors:O5,swatchLabel:N5,fontSizeControl:D5,fontBtn:I5,fontSizeDisplay:L5,fontSizeSlider:B5,soundControls:z5,toggleLabel:P5,toggleSwitch:F5,volumeControl:U5,volumeDisplay:j5,soundActionGrid:H5,soundCategoryLabel:q5,soundActionRow:V5,soundActionLabel:W5,soundActionSelect:$5,soundPreviewBtn:G5,densityControl:K5,densityBtn:Y5,densityBtnLabel:X5,densityBtnDesc:Z5,densityActions:J5,densityStatus:Q5,hookStatusDot:eL,installed:tL,advancedActions:nL,settingsHint:iL,apiKeyRow:rL,apiKeyInput:sL,apiKeyToggle:aL};function oL(){const n=Vt(m=>m.themeName),e=Vt(m=>m.fontSize),t=Vt(m=>m.scanlineEnabled),i=Vt(m=>m.animationIntensity),r=Vt(m=>m.animationSpeed),a=Vt(m=>m.characterModel),l=Vt(m=>m.setThemeName),o=Vt(m=>m.setFontSize),u=Vt(m=>m.setScanlineEnabled),h=Vt(m=>m.setAnimationIntensity),p=Vt(m=>m.setAnimationSpeed),f=Vt(m=>m.setCharacterModel);return N.jsxs("div",{children:[N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Theme"}),N.jsx("div",{className:$e.themeGrid,children:gO.map(m=>N.jsxs("button",{className:`${$e.themeSwatch}${n===m.name?` ${$e.active}`:""}`,onClick:()=>l(m.name),title:m.label,children:[N.jsx("div",{className:$e.swatchColors,children:m.colors.map((y,x)=>N.jsx("span",{style:{background:y}},x))}),N.jsx("span",{className:$e.swatchLabel,children:m.label})]},m.name))})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"3D Character Model"}),N.jsx("p",{style:{fontSize:"10px",color:"var(--text-dim)",marginBottom:"8px"},children:"Choose the robot model shown in the Cyberdrome"}),N.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px"},children:v5.map(m=>{const y=a===m;return N.jsxs("button",{onClick:()=>f(m),title:x5(m),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",padding:"8px 4px",borderRadius:"4px",cursor:"pointer",transition:"all 0.15s ease",border:y?"1px solid var(--accent-cyan, #00e5ff)":"1px solid var(--border-subtle, rgba(255,255,255,0.08))",background:y?"rgba(0, 229, 255, 0.1)":"rgba(255, 255, 255, 0.02)",color:y?"var(--accent-cyan, #00e5ff)":"var(--text-secondary, #8888aa)",fontFamily:"var(--font-mono)",fontSize:"10px",letterSpacing:"0.5px"},children:[N.jsx(lL,{type:m,active:y}),N.jsx("span",{style:{textTransform:"uppercase",fontWeight:y?700:400},children:v2(m)})]},m)})})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Font Size"}),N.jsxs("div",{className:$e.fontSizeControl,children:[N.jsx("button",{className:$e.fontBtn,onClick:()=>o(Math.max(10,e-1)),children:"A-"}),N.jsxs("span",{className:$e.fontSizeDisplay,children:[e,"px"]}),N.jsx("button",{className:$e.fontBtn,onClick:()=>o(Math.min(20,e+1)),children:"A+"}),N.jsx("input",{type:"range",className:$e.fontSizeSlider,min:10,max:20,step:1,value:e,onChange:m=>o(Number(m.target.value))})]})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Scanline Effect"}),N.jsxs("label",{className:$e.toggleLabel,children:[N.jsx("input",{type:"checkbox",checked:t,onChange:m=>u(m.target.checked)}),N.jsx("span",{className:$e.toggleSwitch}),N.jsx("span",{children:"Enable scanline overlay"})]})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Animation"}),N.jsx("label",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px",display:"block"},children:"Intensity (range of 3D robot movement)"}),N.jsxs("div",{className:$e.volumeControl,children:[N.jsx("span",{children:"Low"}),N.jsx("input",{type:"range",min:0,max:200,step:10,value:i,onChange:m=>h(Number(m.target.value))}),N.jsxs("span",{style:{minWidth:"40px",textAlign:"right"},children:[i,"%"]})]}),N.jsx("label",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px",marginTop:"8px",display:"block"},children:"Speed (3D robot animation speed)"}),N.jsxs("div",{className:$e.volumeControl,children:[N.jsx("span",{children:"Slow"}),N.jsx("input",{type:"range",min:30,max:200,step:10,value:r,onChange:m=>p(Number(m.target.value))}),N.jsxs("span",{style:{minWidth:"40px",textAlign:"right"},children:[r,"%"]})]})]})]})}function lL({type:n,active:e}){const t=e?"#00e5ff":"#666",i=28;switch(n){case"robot":return N.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",children:[N.jsx("rect",{x:"8",y:"2",width:"8",height:"6",rx:"1",stroke:t,strokeWidth:"1.5"}),N.jsx("rect",{x:"7",y:"9",width:"10",height:"8",rx:"1",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"9",y1:"17",x2:"9",y2:"22",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"15",y1:"17",x2:"15",y2:"22",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"5",y1:"12",x2:"7",y2:"12",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"17",y1:"12",x2:"19",y2:"12",stroke:t,strokeWidth:"1.5"})]});case"mech":return N.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",children:[N.jsx("rect",{x:"7",y:"2",width:"10",height:"5",rx:"1",stroke:t,strokeWidth:"1.5"}),N.jsx("rect",{x:"5",y:"8",width:"14",height:"9",rx:"1",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"8",y1:"17",x2:"7",y2:"22",stroke:t,strokeWidth:"2"}),N.jsx("line",{x1:"16",y1:"17",x2:"17",y2:"22",stroke:t,strokeWidth:"2"}),N.jsx("line",{x1:"3",y1:"11",x2:"5",y2:"11",stroke:t,strokeWidth:"2"}),N.jsx("line",{x1:"19",y1:"11",x2:"21",y2:"11",stroke:t,strokeWidth:"2"})]});case"drone":return N.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",children:[N.jsx("circle",{cx:"12",cy:"10",r:"4",stroke:t,strokeWidth:"1.5"}),N.jsx("rect",{x:"8",y:"12",width:"8",height:"4",rx:"1",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"4",y1:"13",x2:"8",y2:"13",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"16",y1:"13",x2:"20",y2:"13",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"6",stroke:t,strokeWidth:"1.5"}),N.jsx("circle",{cx:"12",cy:"3",r:"1",fill:t})]});case"spider":return N.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",children:[N.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"3",stroke:t,strokeWidth:"1.5"}),N.jsx("circle",{cx:"12",cy:"9",r:"2.5",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"7",y1:"13",x2:"3",y2:"18",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"17",y1:"13",x2:"21",y2:"18",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"8",y1:"14",x2:"5",y2:"20",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"16",y1:"14",x2:"19",y2:"20",stroke:t,strokeWidth:"1.5"})]});case"orb":return N.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",children:[N.jsx("circle",{cx:"12",cy:"11",r:"6",stroke:t,strokeWidth:"1.5"}),N.jsx("circle",{cx:"12",cy:"5",r:"2",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"9",y1:"17",x2:"8",y2:"21",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"15",y1:"17",x2:"16",y2:"21",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"6",y1:"10",x2:"3",y2:"9",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"18",y1:"10",x2:"21",y2:"9",stroke:t,strokeWidth:"1.5"})]});case"tank":return N.jsxs("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",children:[N.jsx("rect",{x:"7",y:"3",width:"8",height:"5",rx:"1",stroke:t,strokeWidth:"1.5"}),N.jsx("rect",{x:"4",y:"9",width:"14",height:"7",rx:"1",stroke:t,strokeWidth:"1.5"}),N.jsx("rect",{x:"5",y:"17",width:"5",height:"3",rx:"0.5",stroke:t,strokeWidth:"1.5"}),N.jsx("rect",{x:"14",y:"17",width:"5",height:"3",rx:"0.5",stroke:t,strokeWidth:"1.5"}),N.jsx("line",{x1:"18",y1:"11",x2:"22",y2:"11",stroke:t,strokeWidth:"2"})]});default:return null}}class cL{ctx=null;nodes=null;currentPreset="off";volume=.3;getCtx(){return this.ctx||(this.ctx=new AudioContext),this.ctx.state==="suspended"&&this.ctx.resume().catch(()=>{}),this.ctx}createNoiseBuffer(e){const t=e.sampleRate,i=e.createBuffer(1,t,t),r=i.getChannelData(0);for(let a=0;a<t;a++)r[a]=Math.random()*2-1;return i}createNoiseSource(e){const t=e.createBufferSource();return t.buffer=this.createNoiseBuffer(e),t.loop=!0,t}buildRain(e,t){const i=[],r=[],a=[],l=[],o=this.createNoiseSource(e),u=e.createGain();u.gain.setValueAtTime(.4,e.currentTime);const h=e.createBiquadFilter();h.type="bandpass",h.frequency.setValueAtTime(3e3,e.currentTime),h.Q.setValueAtTime(.5,e.currentTime);const p=e.createBiquadFilter();p.type="highshelf",p.frequency.setValueAtTime(6e3,e.currentTime),p.gain.setValueAtTime(-6,e.currentTime),o.connect(h),h.connect(p),p.connect(u),u.connect(t),o.start(),i.push(o),r.push(u);const f=setInterval(()=>{if(!this.ctx||this.currentPreset!=="rain")return;const m=2e3+Math.random()*3e3,y=e.createOscillator(),x=e.createGain();y.type="sine",y.frequency.setValueAtTime(m,e.currentTime),y.frequency.exponentialRampToValueAtTime(m*.5,e.currentTime+.05),x.gain.setValueAtTime(.06*Math.random(),e.currentTime),x.gain.exponentialRampToValueAtTime(.001,e.currentTime+.06),y.connect(x),x.connect(t),y.start(e.currentTime),y.stop(e.currentTime+.06)},80+Math.random()*120);return a.push(f),{sources:i,gains:r,master:t,intervals:a,timeouts:l}}buildLofi(e,t){const i=[],r=[],a=e.createOscillator();a.type="sine",a.frequency.setValueAtTime(60,e.currentTime);const l=e.createOscillator();l.type="sine",l.frequency.setValueAtTime(.3,e.currentTime);const o=e.createGain();o.gain.setValueAtTime(5,e.currentTime),l.connect(o),o.connect(a.frequency);const u=e.createGain();u.gain.setValueAtTime(.35,e.currentTime),a.connect(u),u.connect(t),a.start(),l.start(),i.push(a,l),r.push(u,o);const h=this.createNoiseSource(e),p=e.createGain();p.gain.setValueAtTime(.08,e.currentTime);const f=e.createBiquadFilter();return f.type="lowpass",f.frequency.setValueAtTime(400,e.currentTime),h.connect(f),f.connect(p),p.connect(t),h.start(),i.push(h),r.push(p),{sources:i,gains:r,master:t,intervals:[],timeouts:[]}}buildServerRoom(e,t){const i=[],r=[],a=this.createNoiseSource(e),l=e.createGain();l.gain.setValueAtTime(.25,e.currentTime);const o=e.createBiquadFilter();o.type="bandpass",o.frequency.setValueAtTime(500,e.currentTime),o.Q.setValueAtTime(.3,e.currentTime),a.connect(o),o.connect(l),l.connect(t),a.start(),i.push(a),r.push(l);const u=e.createOscillator();u.type="triangle",u.frequency.setValueAtTime(120,e.currentTime);const h=e.createOscillator();h.type="sine",h.frequency.setValueAtTime(.1,e.currentTime);const p=e.createGain();p.gain.setValueAtTime(3,e.currentTime),h.connect(p),p.connect(u.frequency);const f=e.createGain();f.gain.setValueAtTime(.15,e.currentTime),u.connect(f),f.connect(t),u.start(),h.start(),i.push(u,h),r.push(f,p);const m=e.createOscillator();m.type="sine",m.frequency.setValueAtTime(8e3,e.currentTime);const y=e.createGain();return y.gain.setValueAtTime(.02,e.currentTime),m.connect(y),y.connect(t),m.start(),i.push(m),r.push(y),{sources:i,gains:r,master:t,intervals:[],timeouts:[]}}buildDeepSpace(e,t){const i=[],r=[],a=e.createOscillator();a.type="sine",a.frequency.setValueAtTime(40,e.currentTime);const l=e.createOscillator();l.type="sine",l.frequency.setValueAtTime(.05,e.currentTime);const o=e.createGain();o.gain.setValueAtTime(8,e.currentTime),l.connect(o),o.connect(a.frequency);const u=e.createGain();u.gain.setValueAtTime(.3,e.currentTime),a.connect(u);const h=e.createConvolver(),p=e.sampleRate*3,f=e.createBuffer(2,p,e.sampleRate);for(let x=0;x<2;x++){const w=f.getChannelData(x);for(let S=0;S<p;S++)w[S]=(Math.random()*2-1)*Math.pow(1-S/p,2.5)}h.buffer=f,u.connect(h),h.connect(t),a.start(),l.start(),i.push(a,l),r.push(u,o);const m=e.createOscillator();m.type="sine",m.frequency.setValueAtTime(80,e.currentTime);const y=e.createGain();return y.gain.setValueAtTime(.08,e.currentTime),m.connect(y),y.connect(h),m.start(),i.push(m),r.push(y),{sources:i,gains:r,master:t,intervals:[],timeouts:[]}}buildCoffeeShop(e,t){const i=[],r=[],a=[],l=[],o=this.createNoiseSource(e),u=e.createGain();u.gain.setValueAtTime(.15,e.currentTime);const h=e.createBiquadFilter();h.type="lowpass",h.frequency.setValueAtTime(1200,e.currentTime);const p=e.createBiquadFilter();p.type="highpass",p.frequency.setValueAtTime(200,e.currentTime),o.connect(p),p.connect(h),h.connect(u),u.connect(t),o.start(),i.push(o),r.push(u);const f=setInterval(()=>{if(!this.ctx||this.currentPreset!=="coffeeShop")return;const m=1500+Math.random()*2e3,y=e.createOscillator(),x=e.createGain();y.type="triangle",y.frequency.setValueAtTime(m,e.currentTime),x.gain.setValueAtTime(.03*Math.random(),e.currentTime),x.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2),y.connect(x),x.connect(t),y.start(e.currentTime),y.stop(e.currentTime+.2)},2e3+Math.random()*4e3);return a.push(f),{sources:i,gains:r,master:t,intervals:a,timeouts:l}}start(e,t){if(this.stop(),e==="off")return;t!==void 0&&(this.volume=Math.max(0,Math.min(1,t)));const i=this.getCtx();this.currentPreset=e;const r=i.createGain();r.gain.setValueAtTime(this.volume,i.currentTime),r.connect(i.destination);const l={rain:(o,u)=>this.buildRain(o,u),lofi:(o,u)=>this.buildLofi(o,u),serverRoom:(o,u)=>this.buildServerRoom(o,u),deepSpace:(o,u)=>this.buildDeepSpace(o,u),coffeeShop:(o,u)=>this.buildCoffeeShop(o,u)}[e];l&&(this.nodes=l(i,r))}stop(){if(this.nodes){for(const e of this.nodes.intervals)clearInterval(e);for(const e of this.nodes.timeouts)clearTimeout(e);for(const e of this.nodes.sources)try{e.stop()}catch{}for(const e of this.nodes.gains)e.disconnect();this.nodes.master.disconnect(),this.nodes=null,this.currentPreset="off"}}setVolume(e){if(this.volume=Math.max(0,Math.min(1,e)),this.nodes){const t=this.getCtx();this.nodes.master.gain.setValueAtTime(this.volume,t.currentTime)}}getVolume(){return this.volume}getCurrentPreset(){return this.currentPreset}isPlaying(){return this.nodes!==null&&this.currentPreset!=="off"}dispose(){this.stop(),this.ctx&&(this.ctx.close().catch(()=>{}),this.ctx=null)}}const wh=new cL,qw=[{id:"claude",label:"Claude"},{id:"gemini",label:"Gemini"},{id:"codex",label:"Codex"},{id:"openclaw",label:"OpenClaw"}],uL=_s.getSoundNames(),hL=[{value:"off",label:"Off"},{value:"rain",label:"Rain"},{value:"lofi",label:"Lo-fi Hum"},{value:"serverRoom",label:"Server Room"},{value:"deepSpace",label:"Deep Space"},{value:"coffeeShop",label:"Coffee Shop"}];function dL(){const[n,e]=K.useState("claude"),t=Vt(_=>_.soundSettings.enabled),i=Vt(_=>_.soundSettings.volume),r=Vt(_=>_.updateSoundSettings),a=Vt(_=>_.soundSettings.perCli),l=Vt(_=>_.updateCliSoundConfig),o=Vt(_=>_.setCliActionSound),u=Vt(_=>_.ambientSettings),h=Vt(_=>_.updateAmbientSettings),p=Vt(_=>_.activityFeedVisible),f=Vt(_=>_.setActivityFeedVisible),m=Vt(_=>_.toastEnabled),y=Vt(_=>_.setToastEnabled),x=a[n];function w(_){_s.preview(_)}function S(_){h({preset:_}),_==="off"?wh.stop():u.enabled&&wh.start(_,u.volume)}function b(_){h({enabled:_}),_&&u.preset!=="off"?wh.start(u.preset,u.volume):wh.stop()}function v(_){h({volume:_}),wh.setVolume(_)}return N.jsxs("div",{children:[N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Master Sound"}),N.jsxs("div",{className:$e.soundControls,children:[N.jsxs("label",{className:$e.toggleLabel,children:[N.jsx("input",{type:"checkbox",checked:t,onChange:_=>r({enabled:_.target.checked})}),N.jsx("span",{className:$e.toggleSwitch}),N.jsx("span",{children:"Enable sound effects"})]}),N.jsxs("div",{className:$e.volumeControl,children:[N.jsx("span",{children:"Master Volume"}),N.jsx("input",{type:"range",min:0,max:1,step:.05,value:i,onChange:_=>r({volume:Number(_.target.value)})}),N.jsxs("span",{className:$e.volumeDisplay,children:[Math.round(i*100),"%"]})]})]})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Per-CLI Sound Profiles"}),N.jsx("div",{className:$e.tabs,style:{marginBottom:0,paddingLeft:0},children:qw.map(_=>N.jsx("button",{className:`${$e.tab}${n===_.id?` ${$e.active}`:""}`,onClick:()=>e(_.id),children:_.label},_.id))}),N.jsxs("div",{style:{padding:"12px 0"},children:[N.jsxs("div",{className:$e.soundControls,style:{marginBottom:12},children:[N.jsxs("label",{className:$e.toggleLabel,children:[N.jsx("input",{type:"checkbox",checked:x.enabled,onChange:_=>l(n,{enabled:_.target.checked})}),N.jsx("span",{className:$e.toggleSwitch}),N.jsxs("span",{children:["Enable ",qw.find(_=>_.id===n)?.label," sounds"]})]}),N.jsxs("div",{className:$e.volumeControl,children:[N.jsx("span",{children:"Volume"}),N.jsx("input",{type:"range",min:0,max:1,step:.05,value:x.volume,onChange:_=>l(n,{volume:Number(_.target.value)})}),N.jsxs("span",{className:$e.volumeDisplay,children:[Math.round(x.volume*100),"%"]})]})]}),N.jsx("div",{className:$e.soundActionGrid,children:pO.map(_=>N.jsxs("div",{children:[N.jsx("div",{className:$e.soundCategoryLabel,children:_.label}),_.actions.map(E=>{const R=x.actions[E]??"none";return N.jsxs("div",{className:$e.soundActionRow,children:[N.jsx("span",{className:$e.soundActionLabel,children:fO[E]}),N.jsx("select",{className:$e.soundActionSelect,value:R,onChange:M=>o(n,E,M.target.value),children:uL.map(M=>N.jsx("option",{value:M,children:M},M))}),N.jsx("button",{className:$e.soundPreviewBtn,title:"Preview sound",onClick:()=>w(R),children:""})]},E)})]},_.label))})]})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Ambient & White Noise"}),N.jsxs("div",{className:$e.soundControls,children:[N.jsxs("label",{className:$e.toggleLabel,children:[N.jsx("input",{type:"checkbox",checked:u.enabled,onChange:_=>b(_.target.checked)}),N.jsx("span",{className:$e.toggleSwitch}),N.jsx("span",{children:"Enable ambient sounds"})]}),N.jsxs("div",{className:$e.volumeControl,children:[N.jsx("span",{children:"Volume"}),N.jsx("input",{type:"range",min:0,max:1,step:.05,value:u.volume,onChange:_=>v(Number(_.target.value))}),N.jsxs("span",{className:$e.volumeDisplay,children:[Math.round(u.volume*100),"%"]})]}),N.jsxs("div",{className:$e.soundActionRow,style:{padding:0},children:[N.jsx("span",{className:$e.soundActionLabel,children:"Preset"}),N.jsx("select",{className:$e.soundActionSelect,style:{width:140},value:u.preset,onChange:_=>S(_.target.value),children:hL.map(_=>N.jsx("option",{value:_.value,children:_.label},_.value))})]}),N.jsxs("label",{className:$e.toggleLabel,style:{marginTop:8},children:[N.jsx("input",{type:"checkbox",checked:u.roomSounds,onChange:_=>h({roomSounds:_.target.checked})}),N.jsx("span",{className:$e.toggleSwitch}),N.jsx("span",{children:"Room activity sounds"})]}),u.roomSounds&&N.jsxs("div",{className:$e.volumeControl,children:[N.jsx("span",{children:"Room Volume"}),N.jsx("input",{type:"range",min:0,max:1,step:.05,value:u.roomVolume,onChange:_=>h({roomVolume:Number(_.target.value)})}),N.jsxs("span",{className:$e.volumeDisplay,children:[Math.round(u.roomVolume*100),"%"]})]})]})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Notifications"}),N.jsxs("label",{className:$e.toggleLabel,children:[N.jsx("input",{type:"checkbox",checked:p,onChange:_=>f(_.target.checked)}),N.jsx("span",{className:$e.toggleSwitch}),N.jsx("span",{children:"Show activity feed"})]}),N.jsxs("label",{className:$e.toggleLabel,children:[N.jsx("input",{type:"checkbox",checked:m,onChange:_=>y(_.target.checked)}),N.jsx("span",{className:$e.toggleSwitch}),N.jsx("span",{children:"Show toast notifications"})]})]})]})}const fL=[{value:"high",label:"High",desc:"All events (full monitoring)"},{value:"medium",label:"Medium",desc:"Balanced (default)"},{value:"low",label:"Low",desc:"Minimal (start/stop only)"}];function pL(){const n=Vt(_=>_.hookDensity),e=Vt(_=>_.setHookDensity),t=Vt(_=>_.autoSendQueue),i=Vt(_=>_.setAutoSendQueue),r=Vt(_=>_.defaultTerminalTheme),a=Vt(_=>_.setDefaultTerminalTheme),[l,o]=K.useState(null),[u,h]=K.useState(n==="off"?"medium":n),[p,f]=K.useState(!1),[m,y]=K.useState(!1),[x,w]=K.useState(null),S=K.useCallback(async()=>{try{const E=await(await fetch("/api/hooks/status")).json();o(E),E.installed&&E.density!=="off"&&E.density!=="custom"&&h(E.density)}catch{o(null)}},[]);K.useEffect(()=>{S()},[S]);async function b(){f(!0),w(null);try{const _=await fetch("/api/hooks/install",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({density:u})}),E=await _.json();if(!_.ok)throw new Error(E.error||"Install failed");e(u),await S()}catch(_){w(_ instanceof Error?_.message:"Install failed")}finally{f(!1)}}async function v(){y(!0),w(null);try{const _=await fetch("/api/hooks/uninstall",{method:"POST"}),E=await _.json();if(!_.ok)throw new Error(E.error||"Uninstall failed");e("off"),await S()}catch(_){w(_ instanceof Error?_.message:"Uninstall failed")}finally{y(!1)}}return N.jsxs("div",{children:[N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Hook Density"}),N.jsx("p",{className:$e.settingsHint,children:"Controls which Claude events are monitored. Higher density provides more detail but slightly increases hook overhead."}),N.jsx("div",{className:$e.densityControl,children:fL.map(_=>N.jsxs("button",{className:`${$e.densityBtn}${u===_.value?` ${$e.active}`:""}`,onClick:()=>h(_.value),children:[N.jsx("span",{className:$e.densityBtnLabel,children:_.label}),N.jsx("span",{className:$e.densityBtnDesc,children:_.desc})]},_.value))}),N.jsxs("div",{className:$e.densityActions,children:[N.jsx("button",{className:$e.fontBtn,onClick:b,disabled:p,children:p?"Installing...":l?.installed?"Re-install":"Install"}),l?.installed&&N.jsx("button",{className:$e.fontBtn,onClick:v,disabled:m,children:m?"Removing...":"Uninstall"})]}),N.jsxs("div",{className:$e.densityStatus,children:[N.jsx("span",{className:`${$e.hookStatusDot}${l?.installed?` ${$e.installed}`:""}`}),l?.installed?N.jsxs("span",{children:["Installed: ",N.jsx("strong",{children:l.density})," (",l.events.length," events)"]}):N.jsx("span",{children:"Not installed"})]}),x&&N.jsx("div",{style:{color:"var(--accent-red)",fontSize:"11px",marginTop:"8px"},children:x})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Queue"}),N.jsxs("label",{className:$e.toggleLabel,children:[N.jsx("input",{type:"checkbox",checked:t,onChange:_=>i(_.target.checked)}),N.jsx("span",{className:$e.toggleSwitch}),N.jsx("span",{children:"Auto-send queued prompts when session becomes idle"})]})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Default Terminal Theme"}),N.jsxs("select",{style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--border-accent)",color:"var(--text-primary)",fontFamily:"var(--font-mono)",fontSize:"12px",padding:"6px 10px",borderRadius:"4px",outline:"none",cursor:"pointer"},value:r,onChange:_=>a(_.target.value),children:[N.jsx("option",{value:"auto",children:"Auto (match dashboard)"}),N.jsx("option",{value:"dark",children:"Dark"}),N.jsx("option",{value:"light",children:"Light"}),N.jsx("option",{value:"solarized-dark",children:"Solarized Dark"}),N.jsx("option",{value:"solarized-light",children:"Solarized Light"}),N.jsx("option",{value:"dracula",children:"Dracula"}),N.jsx("option",{value:"monokai",children:"Monokai"})]})]})]})}function f_({label:n,provider:e,placeholder:t}){const i={anthropic:"anthropicApiKey",openai:"openaiApiKey",gemini:"geminiApiKey"},r=Vt(w=>w[i[e]]),a=Vt(w=>w.setApiKey),[l,o]=K.useState(!1),[u,h]=K.useState(r),[p,f]=K.useState(r?"Key saved in browser":""),[m,y]=K.useState("");function x(){const w=u.trim();a(e,w),w?(f("Saved"),y("var(--accent-green, #4caf50)")):(f("Cleared"),y("var(--text-dim)")),setTimeout(()=>{f(w?"Key saved in browser":""),y("")},2e3)}return N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:n}),N.jsxs("div",{className:$e.apiKeyRow,children:[N.jsx("input",{type:l?"text":"password",className:$e.apiKeyInput,placeholder:t,value:u,onChange:w=>h(w.target.value)}),N.jsx("button",{className:$e.apiKeyToggle,onClick:()=>o(!l),children:l?"HIDE":"SHOW"}),N.jsx("button",{className:$e.fontBtn,onClick:x,children:"Save"})]}),p&&N.jsx("div",{style:{fontSize:"10px",color:m||"var(--text-dim)",marginTop:"4px"},children:p})]})}function mL(){return N.jsxs("div",{children:[N.jsx("p",{className:$e.settingsHint,children:"API keys are stored in your browser only (IndexedDB). They are never sent to the server except when explicitly used for summarization or AI features."}),N.jsx(f_,{label:"Anthropic API Key",provider:"anthropic",placeholder:"sk-ant-..."}),N.jsx(f_,{label:"OpenAI API Key",provider:"openai",placeholder:"sk-..."}),N.jsx(f_,{label:"Google (Gemini) API Key",provider:"gemini",placeholder:"AI..."})]})}function gL(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function yL(){const[n,e]=K.useState([]),[t,i]=K.useState(null),[r,a]=K.useState(""),[l,o]=K.useState(""),u=K.useCallback(async()=>{try{const x=await Wt.summaryPrompts.toArray();e(x)}catch{e([])}},[]);K.useEffect(()=>{u()},[u]);async function h(){const x=r.trim(),w=l.trim();if(!x||!w)return;const S=Date.now();if(t!==null){const b=await Wt.summaryPrompts.get(t);b&&await Wt.summaryPrompts.put({...b,name:x,prompt:w,updatedAt:S})}else await Wt.summaryPrompts.add({name:x,prompt:w,isDefault:0,createdAt:S,updatedAt:S});a(""),o(""),i(null),await u()}async function p(x){const w=await Wt.summaryPrompts.toArray();for(const b of w)b.isDefault&&b.id!==x&&await Wt.summaryPrompts.put({...b,isDefault:0,updatedAt:Date.now()});const S=w.find(b=>b.id===x);S&&await Wt.summaryPrompts.put({...S,isDefault:1,updatedAt:Date.now()}),await u()}async function f(x){const w=await Wt.summaryPrompts.get(x);w&&(i(x),a(w.name),o(w.prompt))}async function m(x){await Wt.summaryPrompts.delete(x),await u()}function y(){i(null),a(""),o("")}return N.jsx("div",{children:N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Summary Prompt Templates"}),N.jsx("p",{className:$e.settingsHint,children:"Manage templates for AI-generated session summaries. Star a template to make it the default."}),N.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px",marginBottom:"14px",maxHeight:"300px",overflowY:"auto"},children:n.length===0?N.jsx("div",{style:{color:"var(--text-dim)",padding:"8px",fontSize:"12px"},children:"No prompt templates"}):n.map(x=>N.jsxs("div",{style:{padding:"8px 12px",border:`1px solid ${x.isDefault?"rgba(0, 229, 255, 0.25)":"var(--border-subtle)"}`,borderRadius:"6px",background:"var(--bg-card)"},children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[N.jsx("button",{onClick:()=>x.id!=null&&p(x.id),title:x.isDefault?"Default":"Set as default",style:{background:"none",border:"none",color:x.isDefault?"var(--accent-cyan)":"var(--text-dim)",cursor:"pointer",fontSize:"14px",padding:"0 2px"},children:""}),N.jsx("span",{style:{flex:1,fontSize:"12px",fontWeight:500,color:"var(--text-primary)"},children:gL(x.name)}),x.isDefault?N.jsx("span",{style:{fontSize:"9px",padding:"1px 5px",borderRadius:"3px",background:"rgba(0, 229, 255, 0.1)",color:"var(--accent-cyan)",border:"1px solid rgba(0, 229, 255, 0.2)",textTransform:"uppercase"},children:"DEFAULT"}):null,N.jsx("button",{onClick:()=>x.id!=null&&f(x.id),title:"Edit",style:{background:"none",border:"1px solid var(--border-subtle)",color:"var(--text-secondary)",cursor:"pointer",borderRadius:"3px",padding:"1px 5px",fontSize:"12px"},children:""}),N.jsx("button",{onClick:()=>x.id!=null&&m(x.id),title:"Delete",style:{background:"none",border:"1px solid var(--border-subtle)",color:"var(--text-secondary)",cursor:"pointer",borderRadius:"3px",padding:"1px 5px",fontSize:"12px"},children:""})]}),N.jsxs("div",{style:{fontSize:"10px",color:"var(--text-dim)",marginTop:"4px",lineHeight:1.3,maxHeight:"28px",overflow:"hidden"},children:[x.prompt.substring(0,120),x.prompt.length>120?"...":""]})]},x.id))}),N.jsxs("div",{style:{marginTop:"10px"},children:[N.jsx("input",{type:"text",placeholder:"Template name",value:r,onChange:x=>a(x.target.value),style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--border-subtle)",color:"var(--text-primary)",fontFamily:"var(--font-mono)",fontSize:"12px",borderRadius:"6px",padding:"8px 10px",marginBottom:"8px",outline:"none",boxSizing:"border-box"}}),N.jsx("textarea",{placeholder:"Prompt template text...",value:l,onChange:x=>o(x.target.value),rows:4,style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--border-subtle)",color:"var(--text-primary)",fontFamily:"var(--font-mono)",fontSize:"12px",borderRadius:"6px",padding:"8px 10px",marginBottom:"8px",resize:"vertical",outline:"none",boxSizing:"border-box"}}),N.jsxs("div",{style:{display:"flex",gap:"8px"},children:[N.jsx("button",{className:$e.fontBtn,onClick:h,children:t!==null?"Update Template":"Add Template"}),t!==null&&N.jsx("button",{className:$e.fontBtn,onClick:y,children:"Cancel"})]})]})]})})}const _L=[{id:"appearance",label:"APPEARANCE"},{id:"sound",label:"SOUND"},{id:"hooks",label:"HOOKS"},{id:"apikeys",label:"API KEYS"},{id:"advanced",label:"ADVANCED"}];function bL(){const[n,e]=K.useState("appearance"),t=Vt(o=>o.autosaveVisible),i=Vt(o=>o.resetDefaults),r=K.useRef(null);function a(){const o=Vt.getState(),u={},h=new Set(["loadFromDb","saveToDb","updateSoundSettings","updateLabelAlarms","setThemeName","setTheme","setFontSize","setScanlineEnabled","setAnimationIntensity","setAnimationSpeed","setCharacterModel","setHookDensity","setCompactMode","setShowArchived","setGroupBy","setSortBy","setActivityFeedVisible","setToastEnabled","setAutoSendQueue","setDefaultTerminalTheme","setSoundAction","setMovementAction","setApiKey","persistSetting","flashAutosave","resetDefaults","autosaveVisible"]);for(const[y,x]of Object.entries(o))!h.has(y)&&typeof x!="function"&&(u[y]=x);const p=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),f=URL.createObjectURL(p),m=document.createElement("a");m.href=f,m.download="claude-dashboard-settings.json",m.click(),URL.revokeObjectURL(f)}async function l(o){try{const u=await o.text(),h=JSON.parse(u),p=Vt.getState();p.loadFromDb(h);for(const[f,m]of Object.entries(h))typeof m!="function"&&await p.persistSetting(f,typeof m=="object"?JSON.stringify(m):m)}catch{}}return N.jsx(cm,{modalId:"settings",title:"Settings",children:N.jsxs("div",{className:$e.panel,children:[N.jsx("div",{className:`${$e.autosaveIndicator}${t?` ${$e.visible}`:""}`,style:{marginBottom:"8px"},children:"SAVED"}),N.jsx("div",{className:$e.tabs,children:_L.map(o=>N.jsx("button",{className:`${$e.tab}${n===o.id?` ${$e.active}`:""}`,onClick:()=>e(o.id),children:o.label},o.id))}),N.jsxs("div",{style:{padding:"16px 0",overflowY:"auto",maxHeight:"55vh"},children:[n==="appearance"&&N.jsx(oL,{}),n==="sound"&&N.jsx(dL,{}),n==="hooks"&&N.jsx(pL,{}),n==="apikeys"&&N.jsx(mL,{}),n==="advanced"&&N.jsx(xL,{onExport:a,onImportClick:()=>r.current?.click(),onReset:i})]}),N.jsx("input",{ref:r,type:"file",accept:".json",style:{display:"none"},onChange:o=>{const u=o.target.files?.[0];u&&l(u),o.target.value=""}})]})})}function vL(){const n=bi(e=>e.openModal);return N.jsx("button",{onClick:()=>n("settings"),title:"Settings",style:{background:"none",border:"1px solid var(--border-subtle)",color:"var(--text-secondary)",fontSize:"18px",cursor:"pointer",padding:"4px 10px",borderRadius:"4px",transition:"all 0.2s",marginLeft:"8px"},children:""})}function xL({onExport:n,onImportClick:e,onReset:t}){return N.jsxs("div",{children:[N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Summary Prompts"}),N.jsx(yL,{})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Import / Export"}),N.jsx("p",{className:$e.settingsHint,children:"Export all settings to a JSON file, or import settings from a previously exported file."}),N.jsxs("div",{className:$e.advancedActions,children:[N.jsx("button",{className:$e.fontBtn,onClick:n,children:"Export Settings"}),N.jsx("button",{className:$e.fontBtn,onClick:e,children:"Import Settings"})]})]}),N.jsxs("div",{className:$e.section,children:[N.jsx("h4",{children:"Reset"}),N.jsx("p",{className:$e.settingsHint,children:"Reset all settings to their default values. This cannot be undone."}),N.jsx("button",{className:$e.fontBtn,style:{color:"var(--accent-red)",borderColor:"var(--accent-red)"},onClick:t,children:"Reset to Defaults"})]})]})}const SL="_header_19eax_6",wL="_title_19eax_18",EL="_stats_19eax_35",p_={header:SL,title:wL,stats:EL};function CL(){return N.jsxs("header",{className:p_.header,children:[N.jsx("div",{className:p_.title,children:"AI AGENT SESSION CENTER"}),N.jsx("div",{className:p_.stats,children:N.jsx(vL,{})})]})}function AL(n,e,t=!0){K.useEffect(()=>{if(!t)return;function i(r){n.current&&!n.current.contains(r.target)&&e()}return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[n,e,t])}const TL=3e3,u0=new Set;function Ct(n,e="info",t=TL){const i={id:`${Date.now()}-${Math.random().toString(36).slice(2,6)}`,message:n,type:e,duration:t};for(const r of u0)r(i)}const kL={info:"var(--accent-cyan, #00e5ff)",success:"var(--accent-green, #00ff88)",error:"var(--accent-red, #ff3355)",warning:"var(--accent-orange, #ff9100)"};function ML(){const[n,e]=K.useState([]),t=K.useCallback(i=>{e(r=>[...r,i])},[]);return K.useEffect(()=>(u0.add(t),()=>{u0.delete(t)}),[t]),K.useEffect(()=>{if(n.length===0)return;const i=n.map(r=>setTimeout(()=>{e(a=>a.filter(l=>l.id!==r.id))},r.duration));return()=>i.forEach(clearTimeout)},[n]),n.length===0?null:N.jsx("div",{className:ot.toastContainer,children:n.map(i=>N.jsx("div",{className:ot.toast,style:{borderColor:kL[i.type]},children:N.jsx("span",{className:ot.toastMsg,children:i.message})},i.id))})}const RL="workdir-history";function Vw(){try{return JSON.parse(localStorage.getItem(RL)||"[]")}catch{return[]}}function OL(n,e){const t=new Set(n),i=[...n];for(const r of e)t.has(r)||(t.add(r),i.push(r));return i}function wb(){const[n,e]=K.useState(()=>Vw());return K.useEffect(()=>{let t=!1;return fetch("/api/known-projects").then(i=>i.json()).then(i=>{if(t)return;const r=Vw();e(OL(r,i.paths??[]))}).catch(()=>{}),()=>{t=!0}},[]),n}const NL="_wrapper_1lqre_6",DL="_triggerBtn_1lqre_10",IL="_open_1lqre_30",LL="_dropdown_1lqre_37",BL="_dropdownHeader_1lqre_62",zL="_dirItem_1lqre_75",PL="_dirInfo_1lqre_94",FL="_dirName_1lqre_102",UL="_dirPath_1lqre_112",jL="_dirRemove_1lqre_121",HL="_empty_1lqre_146",ms={wrapper:NL,triggerBtn:DL,open:IL,dropdown:LL,dropdownHeader:BL,dirItem:zL,dirInfo:PL,dirName:FL,dirPath:UL,dirRemove:jL,empty:HL},x2="workdir-history",qL="lastSession";function VL(){try{return JSON.parse(localStorage.getItem(x2)||"[]")}catch{return[]}}function WL(n){localStorage.setItem(x2,JSON.stringify(n))}function $L(){try{return JSON.parse(localStorage.getItem(qL)||"{}")}catch{return{}}}function Ww(n){const e=n.replace(/\/+$/,"");if(e==="~"||e==="/")return e;const t=e.split("/");return t[t.length-1]||e}function GL(){const[n,e]=K.useState(!1),[t,i]=K.useState([]),r=wb(),a=K.useRef(null),l=K.useCallback(()=>e(!1),[]);AL(a,l,n),K.useEffect(()=>{if(n){const h=VL(),p=new Set(h),f=[...h];for(const m of r)p.has(m)||(p.add(m),f.push(m));i(f)}},[n,r]),K.useEffect(()=>{if(!n)return;function h(p){p.key==="Escape"&&(p.stopPropagation(),l())}return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[n,l]);async function o(h){l();const p=$L();try{const m=await(await fetch("/api/terminals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:p.host||window.location.hostname||"localhost",port:p.port||void 0,username:p.username||void 0,authMethod:p.authMethod||void 0,privateKeyPath:p.privateKeyPath||void 0,workingDir:h,command:p.command||"claude"})})).json();m.ok?(m.terminalId&&mn.getState().selectSession(m.terminalId),Ct(`Session launched in ${Ww(h)}`,"success")):Ct(m.error||"Failed to launch session","error")}catch{Ct("Network error launching session","error")}}function u(h,p){p.stopPropagation();const f=t.filter(m=>m!==h);i(f),WL(f)}return N.jsxs("div",{className:ms.wrapper,ref:a,children:[N.jsx("button",{className:`${ms.triggerBtn} ${n?ms.open:""}`,onClick:()=>e(h=>!h),title:"Recent working directories",children:"DIRS"}),n&&N.jsxs("div",{className:ms.dropdown,children:[N.jsx("div",{className:ms.dropdownHeader,children:"Recent Directories"}),t.length===0?N.jsx("div",{className:ms.empty,children:"No directory history yet. Launch a session to start recording."}):t.map(h=>N.jsxs("div",{className:ms.dirItem,onClick:()=>o(h),title:`Launch session in ${h}`,children:[N.jsxs("div",{className:ms.dirInfo,children:[N.jsx("span",{className:ms.dirName,children:Ww(h)}),N.jsx("span",{className:ms.dirPath,children:h})]}),N.jsx("button",{className:ms.dirRemove,onClick:p=>u(h,p),title:"Remove from history",children:"x"})]},h))]})]})}const KL="_nav_agtd9_8",YL="_navBtn_agtd9_20",XL="_active_agtd9_28",ZL="_spacer_agtd9_30",JL="_actions_agtd9_34",QL="_actionsItems_agtd9_35",e4="_qaBtn_agtd9_45",t4="_terminal_agtd9_54",n4="_quick_agtd9_56",i4="_shortcutsBtn_agtd9_61",gs={nav:KL,navBtn:YL,active:XL,spacer:ZL,actions:JL,actionsItems:QL,qaBtn:e4,terminal:t4,quick:n4,shortcutsBtn:i4},r4=[{to:"/",label:"LIVE"},{to:"/history",label:"HISTORY"},{to:"/timeline",label:"TIMELINE"},{to:"/analytics",label:"ANALYTICS"},{to:"/queue",label:"QUEUE"}];function s4(){const n=bi(e=>e.openModal);return N.jsxs("nav",{className:gs.nav,children:[N.jsxs("div",{className:gs.actions,children:[N.jsxs("div",{className:gs.actionsItems,children:[N.jsx("button",{className:`${gs.qaBtn} ${gs.terminal}`,onClick:()=>n("new-session"),children:"+ NEW"}),N.jsx("button",{className:`${gs.qaBtn} ${gs.quick}`,onClick:()=>n("quick-session"),children:"QUICK"}),N.jsx(GL,{})]}),N.jsx("button",{className:gs.shortcutsBtn,onClick:()=>n("shortcuts"),title:"Keyboard shortcuts (?)",children:"?"})]}),N.jsx("div",{className:gs.spacer}),r4.map(e=>N.jsx(MC,{to:e.to,end:e.to==="/",className:({isActive:t})=>`${gs.navBtn} ${t?gs.active:""}`,children:e.label},e.to))]})}const a4="_feed_ffix7_29",o4="_feedHeader_ffix7_36",l4="_feedEntries_ffix7_43",c4="_entry_ffix7_48",u4="_feedTime_ffix7_54",h4="_feedProject_ffix7_55",d4="_feedDetail_ffix7_56",f4="_collapseBtn_ffix7_62",p4="_collapsed_ffix7_69",js={feed:a4,feedHeader:o4,feedEntries:l4,entry:c4,feedTime:u4,feedProject:h4,feedDetail:d4,collapseBtn:f4,collapsed:p4};function m4(){const n=mn(l=>l.sessions),e=bi(l=>l.activityFeedOpen),t=bi(l=>l.setActivityFeedOpen),i=mn(l=>l.selectSession),[r]=K.useState(50),a=K.useMemo(()=>{const l=[];for(const o of n.values())for(const u of o.events)l.push({sessionId:o.sessionId,projectName:o.projectName||"Unknown",type:u.type,detail:u.detail,timestamp:u.timestamp});return l.sort((o,u)=>u.timestamp-o.timestamp),l.slice(0,r)},[n,r]);return N.jsxs("div",{className:`${js.feed} ${e?"":js.collapsed}`,children:[N.jsxs("div",{className:js.feedHeader,children:[N.jsxs("span",{children:["ACTIVITY FEED (",a.length,")"]}),N.jsx("button",{className:js.collapseBtn,onClick:()=>t(!e),children:e?"":""})]}),e&&N.jsxs("div",{className:js.feedEntries,children:[a.length===0&&N.jsx("div",{className:js.entry,style:{textAlign:"center",color:"var(--text-dim)"},children:"No activity yet"}),a.map((l,o)=>N.jsxs("div",{onClick:()=>i(l.sessionId),className:js.entry,style:{cursor:"pointer"},children:[N.jsx("span",{className:js.feedTime,children:new Date(l.timestamp).toLocaleTimeString()}),N.jsx("span",{className:js.feedProject,children:l.projectName}),N.jsxs("span",{className:js.feedDetail,children:["[",l.type,"] ",l.detail]})]},`${l.sessionId}-${l.timestamp}-${o}`))]})]})}const g4="_wrapper_1rshg_1",y4="_inputWrapper_1rshg_5",_4="_input_1rshg_5",b4="_arrowBtn_1rshg_30",v4="_arrowBtnOpen_1rshg_52",x4="_dropdown_1rshg_57",S4="_item_1rshg_84",w4="_itemHighlighted_1rshg_101",E4="_empty_1rshg_107",Hs={wrapper:g4,inputWrapper:y4,input:_4,arrowBtn:b4,arrowBtnOpen:v4,dropdown:x4,item:S4,itemHighlighted:w4,empty:E4};function xl({value:n,onChange:e,items:t,placeholder:i,className:r}){const[a,l]=K.useState(!1),[o,u]=K.useState(-1),[h,p]=K.useState(!1),f=K.useRef(null),m=K.useRef(null),y=K.useRef(null);K.useEffect(()=>{if(!a)return;function _(E){f.current&&!f.current.contains(E.target)&&l(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[a]);const x=K.useMemo(()=>{if(h||!n.trim())return t;const _=n.toLowerCase();return t.filter(E=>E.toLowerCase().includes(_))},[t,n,h]);K.useEffect(()=>{u(-1)},[x]),K.useEffect(()=>{o>=0&&m.current&&m.current.children[o]?.scrollIntoView({block:"nearest"})},[o]);function w(_){e(_.target.value),p(!1),a||l(!0)}function S(){a?l(!1):(p(!0),l(!0),y.current?.focus())}function b(_){e(_),l(!1),u(-1)}function v(_){_.key==="ArrowDown"?(_.preventDefault(),a||(p(!0),l(!0)),u(E=>E<x.length-1?E+1:0)):_.key==="ArrowUp"?(_.preventDefault(),a||(p(!0),l(!0)),u(E=>E>0?E-1:x.length-1)):_.key==="Enter"?a&&o>=0&&o<x.length&&(_.preventDefault(),b(x[o])):_.key==="Escape"&&a&&(_.stopPropagation(),l(!1))}return N.jsxs("div",{ref:f,className:`${Hs.wrapper} ${r??""}`,children:[N.jsxs("div",{className:Hs.inputWrapper,children:[N.jsx("input",{ref:y,value:n,onChange:w,onKeyDown:v,placeholder:i,className:Hs.input,role:"combobox","aria-expanded":a,"aria-activedescendant":o>=0?`cb-item-${o}`:void 0,"aria-autocomplete":"list"}),N.jsx("button",{type:"button",className:`${Hs.arrowBtn}${a?` ${Hs.arrowBtnOpen}`:""}`,onClick:S,tabIndex:-1,"aria-label":"Toggle dropdown",children:""})]}),a&&x.length>0&&N.jsx("ul",{ref:m,className:Hs.dropdown,role:"listbox",children:x.map((_,E)=>N.jsx("li",{id:`cb-item-${E}`,role:"option","aria-selected":E===o,className:`${Hs.item} ${E===o?Hs.itemHighlighted:""}`,onMouseDown:R=>{R.preventDefault(),b(_)},onMouseEnter:()=>u(E),children:_},_))}),a&&x.length===0&&N.jsx("div",{className:Hs.dropdown,children:N.jsx("div",{className:Hs.empty,children:"No matches"})})]})}const S2="workdir-history",C4=20,w2="lastSession";function A4(){try{return JSON.parse(localStorage.getItem(w2)||"{}")}catch{return{}}}function T4(n){try{localStorage.setItem(w2,JSON.stringify(n))}catch{}}function k4(){try{return JSON.parse(localStorage.getItem(S2)||"[]")}catch{return[]}}function M4(n){if(!n)return;const e=k4().filter(t=>t!==n);e.unshift(n),localStorage.setItem(S2,JSON.stringify(e.slice(0,C4)))}const E2="command-history",R4=20,O4=["claude","claude --resume","claude --continue","claude --model sonnet","claude --model opus","claude --dangerously-skip-permissions","claude --verbose","gemini","codex","aider"];function C2(){try{return JSON.parse(localStorage.getItem(E2)||"[]")}catch{return[]}}function N4(){const n=C2(),e=new Set(n),t=[...n];for(const i of O4)e.has(i)||t.push(i);return t}function D4(n){if(!n)return;const e=C2().filter(t=>t!==n);e.unshift(n),localStorage.setItem(E2,JSON.stringify(e.slice(0,R4)))}function I4(){const n=bi(we=>we.closeModal),[e]=K.useState(()=>A4()),[t,i]=K.useState(e.host||window.location.hostname||""),[r,a]=K.useState(String(e.port||22)),[l,o]=K.useState(e.username||""),[u,h]=K.useState(e.authMethod||"key"),[p,f]=K.useState(e.privateKeyPath||""),[m,y]=K.useState(""),[x,w]=K.useState(e.workingDir||"~"),[S,b]=K.useState(e.command||""),[v,_]=K.useState(""),[E,R]=K.useState(""),[M,D]=K.useState(""),[O,L]=K.useState(!1),[j,X]=K.useState({}),[G,H]=K.useState([]),$=wb(),Q=K.useMemo(()=>N4(),[]);K.useEffect(()=>{fetch("/api/ssh-keys").then(we=>we.json()).then(we=>H(we.keys??[])).catch(()=>{})},[]);const Y=we=>()=>X(De=>({...De,[we]:!0})),te=Number(r),re=Number.isInteger(te)&&te>=1&&te<=65535,U=t.trim().length>0,B=l.trim().length>0,P=x.trim().length>0,Z=S.trim().length>0,V=re&&U&&B&&P&&Z;async function _e(){if(X({host:!0,port:!0,username:!0,workingDir:!0,command:!0}),O||!V)return;L(!0);const we={host:t||window.location.hostname||"localhost",port:te||22,username:l||"",authMethod:u,privateKeyPath:u==="key"&&p?p:void 0,password:u==="password"&&m?m:void 0,workingDir:x||"~",command:S||void 0,apiKey:v||void 0,sessionTitle:E||void 0,label:M||void 0};try{const le=await(await fetch("/api/terminals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)})).json();le.ok?(M4(x),S&&D4(S),T4({host:we.host,port:we.port,username:we.username,authMethod:u,privateKeyPath:u==="key"?p:void 0,workingDir:x||"~",command:S||void 0}),le.terminalId&&mn.getState().selectSession(le.terminalId),Ct("Terminal session created","success"),n()):Ct(le.error||"Failed to create terminal","error")}catch{Ct("Network error creating terminal","error")}finally{L(!1)}}return N.jsxs(cm,{modalId:"new-session",title:"New Terminal Session",panelClassName:ot.newSessionPanel,children:[N.jsxs("div",{className:ot.newSessionBody,children:[N.jsxs("div",{className:ot.sshFieldRow,children:[N.jsxs("div",{className:`${ot.sshField} ${ot.sshFieldGrow}`,children:[N.jsxs("label",{children:["Host ",N.jsx("span",{className:ot.sshFieldRequired,children:"*"})]}),N.jsx("input",{value:t,onChange:we=>i(we.target.value),onBlur:Y("host"),placeholder:"hostname / IP / domain",style:j.host&&!U?{borderColor:"#ff5555"}:void 0}),j.host&&!U&&N.jsx("span",{className:ot.sshFieldError,children:"Required"})]}),N.jsxs("div",{className:`${ot.sshField} ${ot.sshFieldSmall}`,children:[N.jsxs("label",{children:["Port ",N.jsx("span",{className:ot.sshFieldRequired,children:"*"})]}),N.jsx("input",{value:r,onChange:we=>a(we.target.value),onBlur:Y("port"),placeholder:"22",style:r&&!re?{borderColor:"#ff5555"}:void 0}),r&&!re&&N.jsx("span",{className:ot.sshFieldError,children:"1-65535"})]})]}),N.jsxs("div",{className:ot.sshField,children:[N.jsxs("label",{children:["Username ",N.jsx("span",{className:ot.sshFieldRequired,children:"*"})]}),N.jsx("input",{value:l,onChange:we=>o(we.target.value),onBlur:Y("username"),placeholder:"e.g. root",style:j.username&&!B?{borderColor:"#ff5555"}:void 0}),j.username&&!B&&N.jsx("span",{className:ot.sshFieldError,children:"Required"})]}),N.jsxs("div",{className:ot.sshField,children:[N.jsx("label",{children:"Auth Method"}),N.jsx(xl,{value:u==="key"?"SSH Key":"Password",onChange:we=>h(we==="Password"?"password":"key"),items:["SSH Key","Password"],placeholder:"SSH Key"})]}),u==="key"?N.jsxs("div",{className:ot.sshField,children:[N.jsxs("label",{children:["Private Key Path ",N.jsx("span",{className:ot.sshFieldHint,children:"(optional)"})]}),N.jsx(xl,{value:p,onChange:f,items:G.map(we=>we.path),placeholder:"Default (~/.ssh/id_*)"})]}):N.jsxs("div",{className:ot.sshField,children:[N.jsx("label",{children:"Password"}),N.jsx("input",{type:"password",value:m,onChange:we=>y(we.target.value),placeholder:"SSH password"})]}),N.jsxs("div",{className:ot.sshField,children:[N.jsxs("label",{children:["Working Directory ",N.jsx("span",{className:ot.sshFieldRequired,children:"*"})]}),N.jsx(xl,{value:x,onChange:w,items:$,placeholder:"~"}),j.workingDir&&!P&&N.jsx("span",{className:ot.sshFieldError,children:"Required"})]}),N.jsxs("div",{className:ot.sshField,children:[N.jsxs("label",{children:["Command ",N.jsx("span",{className:ot.sshFieldRequired,children:"*"})," ",N.jsx("span",{className:ot.sshFieldHint,children:"(runs after connect)"})]}),N.jsx(xl,{value:S,onChange:b,items:Q,placeholder:"e.g. claude"}),j.command&&!Z&&N.jsx("span",{className:ot.sshFieldError,children:"Required"})]}),N.jsxs("div",{className:ot.sshFieldRow,children:[N.jsxs("div",{className:`${ot.sshField} ${ot.sshFieldGrow}`,children:[N.jsx("label",{children:"Session Title"}),N.jsx("input",{value:E,onChange:we=>R(we.target.value),placeholder:"Optional"})]}),N.jsxs("div",{className:`${ot.sshField} ${ot.sshFieldGrow}`,children:[N.jsx("label",{children:"Label"}),N.jsx(xl,{value:M,onChange:D,items:["ONEOFF","HEAVY","IMPORTANT"],placeholder:"None"})]})]}),N.jsxs("div",{className:ot.sshField,children:[N.jsxs("label",{children:["API Key ",N.jsx("span",{className:ot.sshFieldHint,children:"(override ANTHROPIC_API_KEY)"})]}),N.jsx("input",{type:"password",value:v,onChange:we=>_(we.target.value),placeholder:"Optional"})]})]}),N.jsxs("div",{className:ot.newSessionFooter,children:[N.jsx("button",{type:"button",className:ot.closeBtn,onClick:()=>n(),style:{fontSize:"11px",letterSpacing:"1px"},children:"CANCEL"}),N.jsx("button",{type:"button",onClick:_e,disabled:O||!V,style:{padding:"6px 16px",background:"rgba(0, 229, 255, 0.15)",border:"1px solid var(--accent-cyan)",borderRadius:"4px",color:"var(--accent-cyan)",fontFamily:"var(--font-mono)",fontSize:"11px",fontWeight:700,letterSpacing:"1px",cursor:O?"not-allowed":"pointer",opacity:O?.5:1},children:O?"CREATING...":"CREATE"})]})]})}const $w=["claude","claude --resume","claude --continue","claude --model sonnet","claude --model opus","gemini","codex","aider"],L4="command-history";function B4(){try{const n=JSON.parse(localStorage.getItem(L4)||"[]"),e=new Set(n),t=[...n];for(const i of $w)e.has(i)||t.push(i);return t}catch{return $w}}const A2="custom-labels";function z4(){try{return JSON.parse(localStorage.getItem(A2)||"[]")}catch{return[]}}function Gw(n){localStorage.setItem(A2,JSON.stringify(n))}const P4="workdir-history";function F4(){try{return JSON.parse(localStorage.getItem(P4)||"[]")}catch{return[]}}const mp=["ONEOFF","HEAVY","IMPORTANT"];function U4(){const n=bi(O=>O.closeModal),[e,t]=K.useState(""),[i,r]=K.useState(""),[a,l]=K.useState(z4),[o,u]=K.useState(""),[h,p]=K.useState(()=>F4()[0]||"~"),[f,m]=K.useState("claude"),[y,x]=K.useState(!1),w=wb(),S=K.useMemo(()=>B4(),[]),b=h.trim().length>0,v=f.trim().length>0,_=b&&v,E=K.useMemo(()=>[...mp,...a.filter(O=>!mp.includes(O))],[a]);function R(){const O=i.trim().toUpperCase();if(!O||E.includes(O))return;const L=[...a,O];l(L),Gw(L),r(""),t(O)}function M(O){if(mp.includes(O))return;const L=a.filter(j=>j!==O);l(L),Gw(L),e===O&&t("")}async function D(){if(!(y||!_)){x(!0);try{const L=await(await fetch("/api/terminals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:window.location.hostname||"localhost",workingDir:h||"~",command:f||"claude",label:e||void 0,sessionTitle:o.trim()||void 0})})).json();L.ok?(Ct(`Quick session launched${e?` [${e}]`:""}`,"success"),L.terminalId&&mn.getState().selectSession(L.terminalId),n()):Ct(L.error||"Failed to launch session","error")}catch{Ct("Network error launching session","error")}finally{x(!1)}}}return N.jsx(cm,{modalId:"quick-session",children:N.jsxs("div",{className:ot.quickSessionPanel,children:[N.jsx("div",{className:ot.quickSessionHeader,children:N.jsx("h3",{children:"QUICK LAUNCH"})}),N.jsxs("div",{className:ot.quickSessionBody,children:[N.jsx("p",{className:ot.quickSessionHint,children:"Launch a local Claude session with optional label"}),N.jsxs("div",{className:ot.quickLabelChips,children:[E.length===0&&N.jsx("span",{className:ot.quickLabelEmpty,children:"No labels configured"}),E.map(O=>N.jsxs("button",{type:"button",className:`${ot.quickLabelChip} ${e===O?ot.active:""}`,onClick:()=>t(e===O?"":O),children:[N.jsx("span",{className:ot.labelText,children:O}),!mp.includes(O)&&N.jsx("span",{className:ot.labelDelete,onClick:L=>{L.stopPropagation(),M(O)},children:"x"})]},O))]}),N.jsx("div",{className:ot.quickLabelInputRow,children:N.jsx("input",{value:i,onChange:O=>r(O.target.value),onKeyDown:O=>O.key==="Enter"&&R(),placeholder:"Add custom label..."})}),N.jsxs("div",{className:ot.quickWorkdirRow,children:[N.jsxs("label",{children:["Session Title ",N.jsx("span",{style:{opacity:.4,fontWeight:400},children:"(optional)"})]}),N.jsx("input",{value:o,onChange:O=>u(O.target.value),placeholder:"Auto-generated if empty"})]}),N.jsxs("div",{className:ot.quickWorkdirRow,children:[N.jsxs("label",{children:["Working Directory ",N.jsx("span",{style:{color:"var(--accent-cyan)",fontWeight:700},children:"*"})]}),N.jsx(xl,{value:h,onChange:p,items:w,placeholder:"~"})]}),N.jsxs("div",{className:ot.quickWorkdirRow,children:[N.jsxs("label",{children:["Command ",N.jsx("span",{style:{color:"var(--accent-cyan)",fontWeight:700},children:"*"})]}),N.jsx(xl,{value:f,onChange:m,items:S,placeholder:"e.g. claude"})]})]}),N.jsxs("div",{className:ot.quickSessionFooter,children:[N.jsx("button",{type:"button",onClick:()=>n(),style:{padding:"6px 14px",background:"transparent",border:"1px solid var(--border-subtle)",borderRadius:"4px",color:"var(--text-secondary)",fontFamily:"var(--font-mono)",fontSize:"11px",letterSpacing:"1px",cursor:"pointer"},children:"CANCEL"}),N.jsx("button",{type:"button",onClick:D,disabled:y||!_,style:{padding:"6px 16px",background:"rgba(0, 229, 255, 0.15)",border:"1px solid var(--accent-cyan)",borderRadius:"4px",color:"var(--accent-cyan)",fontFamily:"var(--font-mono)",fontSize:"11px",fontWeight:700,letterSpacing:"1px",cursor:y||!_?"not-allowed":"pointer",opacity:y||!_?.5:1},children:y?"LAUNCHING...":"LAUNCH"})]})]})})}const j4=[{section:"Navigation",items:[{key:"/",description:"Focus search"},{key:"Escape",description:"Close modal / deselect session"},{key:"?",description:"Toggle this panel"}]},{section:"Actions",items:[{key:"T",description:"New terminal session"},{key:"S",description:"Toggle settings"},{key:"M",description:"Mute / unmute all"}]},{section:"Terminal",items:[{key:"Alt+Cmd/Ctrl+R",description:"Refresh terminal"},{key:"Alt+F11",description:"Toggle fullscreen"}]},{section:"Selected Session",items:[{key:"K",description:"Kill selected session"},{key:"A",description:"Archive selected session"}]}];function H4(){return N.jsx(cm,{modalId:"shortcuts",children:N.jsxs("div",{className:ot.shortcutsPanel,children:[N.jsx("div",{className:ot.shortcutsHeader,children:N.jsx("h3",{children:"KEYBOARD SHORTCUTS"})}),N.jsx("div",{className:ot.shortcutsBody,children:j4.map(n=>N.jsxs("div",{className:ot.shortcutsSection,children:[N.jsx("h4",{children:n.section}),N.jsx("div",{className:ot.shortcutList,children:n.items.map(e=>N.jsxs("div",{className:ot.shortcutRow,children:[N.jsx("span",{children:e.description}),N.jsx("kbd",{children:e.key})]},e.key))})]},n.section))})]})})}const q4="_overlay_1r6b5_9",V4="_panel_1r6b5_20",W4="_resizing_1r6b5_32",$4="_resizeHandle_1r6b5_35",G4="_active_1r6b5_40",K4="_closeBtn_1r6b5_45",Y4="_header_1r6b5_56",X4="_charPreview_1r6b5_62",Z4="_headerText_1r6b5_65",J4="_headerTop_1r6b5_66",Q4="_headerTitles_1r6b5_67",eB="_titleRow_1r6b5_70",tB="_meta_1r6b5_79",nB="_detailStatusBadge_1r6b5_80",iB="_detailModel_1r6b5_81",rB="_detailDuration_1r6b5_82",sB="_tabs_1r6b5_87",aB="_tab_1r6b5_87",oB="_splitToggle_1r6b5_95",lB="_tabSplit_1r6b5_110",cB="_splitView_1r6b5_114",uB="_splitLeft_1r6b5_120",hB="_splitDivider_1r6b5_128",dB="_splitRight_1r6b5_133",fB="_tabContent_1r6b5_144",pB="_tabEmpty_1r6b5_148",mB="_convEntry_1r6b5_152",gB="_convUser_1r6b5_153",yB="_convRole_1r6b5_157",_B="_convTime_1r6b5_162",bB="_convText_1r6b5_163",vB="_convHeader_1r6b5_167",xB="_convCopy_1r6b5_168",SB="_activityEntry_1r6b5_179",wB="_activityTool_1r6b5_180",EB="_activityEvent_1r6b5_181",CB="_activityResponse_1r6b5_182",AB="_activityTime_1r6b5_184",TB="_activityBadge_1r6b5_185",kB="_activityBadgeTool_1r6b5_186",MB="_activityBadgeEvent_1r6b5_187",RB="_activityBadgeResponse_1r6b5_188",OB="_activityDetail_1r6b5_189",NB="_ctrlBar_1r6b5_195",DB="_ctrlBtn_1r6b5_196",IB="_resume_1r6b5_198",LB="_kill_1r6b5_201",BB="_archive_1r6b5_203",zB="_alert_1r6b5_209",PB="_summarize_1r6b5_211",FB="_ctrlSelect_1r6b5_217",UB="_notesCompose_1r6b5_223",jB="_noteTextarea_1r6b5_224",HB="_saveNote_1r6b5_226",qB="_noteEntry_1r6b5_228",VB="_noteMeta_1r6b5_229",WB="_noteTime_1r6b5_230",$B="_noteDelete_1r6b5_231",GB="_noteText_1r6b5_224",KB="_summaryText_1r6b5_236",YB="_prevSessionSection_1r6b5_239",XB="_prevSessionHeader_1r6b5_240",ZB="_prevSessionToggle_1r6b5_242",JB="_collapsed_1r6b5_243",QB="_prevSessionContent_1r6b5_244",e6="_prevSessionEntry_1r6b5_246",t6="_terminalWithQueue_1r6b5_250",n6="_terminalSection_1r6b5_257",Ke={overlay:q4,panel:V4,resizing:W4,resizeHandle:$4,active:G4,closeBtn:K4,header:Y4,charPreview:X4,headerText:Z4,headerTop:J4,headerTitles:Q4,titleRow:eB,meta:tB,detailStatusBadge:nB,detailModel:iB,detailDuration:rB,tabs:sB,tab:aB,splitToggle:oB,tabSplit:lB,splitView:cB,splitLeft:uB,splitDivider:hB,splitRight:dB,tabContent:fB,tabEmpty:pB,convEntry:mB,convUser:gB,convRole:yB,convTime:_B,convText:bB,convHeader:vB,convCopy:xB,activityEntry:SB,activityTool:wB,activityEvent:EB,activityResponse:CB,activityTime:AB,activityBadge:TB,activityBadgeTool:kB,activityBadgeEvent:MB,activityBadgeResponse:RB,activityDetail:OB,ctrlBar:NB,ctrlBtn:DB,resume:IB,kill:LB,archive:BB,delete:"_delete_1r6b5_205",alert:zB,summarize:PB,ctrlSelect:FB,notesCompose:UB,noteTextarea:jB,saveNote:HB,noteEntry:qB,noteMeta:VB,noteTime:WB,noteDelete:$B,noteText:GB,summaryText:KB,prevSessionSection:YB,prevSessionHeader:XB,prevSessionToggle:ZB,collapsed:JB,prevSessionContent:QB,prevSessionEntry:e6,terminalWithQueue:t6,terminalSection:n6},T2="detail-panel-width";function i6(n,e,t){try{const i=localStorage.getItem(T2);if(i){const r=Number(i);if(Number.isFinite(r))return Math.min(t,Math.max(e,r))}}catch{}return n}function r6({children:n,initialWidth:e=400,minWidth:t=280,maxWidth:i=800,side:r="right",className:a}){const l=K.useRef(null),[o,u]=K.useState(!1),h=K.useRef(i6(e,t,i)),p=K.useCallback(f=>{f.preventDefault();const m=l.current;if(!m)return;u(!0);const y=f.clientX,x=m.getBoundingClientRect().width;function w(b){if(!m)return;const v=r==="right"?y-b.clientX:b.clientX-y,_=Math.min(i,Math.max(t,x+v));m.style.width=`${_}px`}function S(){if(u(!1),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S),document.body.style.cursor="",document.body.style.userSelect="",m){const b=m.getBoundingClientRect().width;h.current=b;try{localStorage.setItem(T2,String(Math.round(b)))}catch{}}}document.body.style.cursor="col-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",w),document.addEventListener("mouseup",S)},[t,i,r]);return N.jsxs("div",{ref:l,className:`${Ke.panel} ${o?Ke.resizing:""} ${a??""}`,style:{width:`${h.current}px`},children:[N.jsx("div",{onMouseDown:p,className:`${Ke.resizeHandle} ${o?Ke.active:""}`,style:{[r==="right"?"left":"right"]:"-3px"}}),n]})}const Kw="active-tab",Yw="split-terminal-project",s6=700,a6=[{id:"terminal",label:"TERMINAL"},{id:"conversation",label:"PROMPTS"},{id:"project",label:"PROJECT"},{id:"queue",label:"QUEUE"},{id:"notes",label:"NOTES"},{id:"activity",label:"ACTIVITY"},{id:"summary",label:"SUMMARY"}];function o6(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[N.jsx("rect",{x:"1",y:"1",width:"5",height:"12",rx:"1",stroke:"currentColor",strokeWidth:"1.3"}),N.jsx("rect",{x:"8",y:"1",width:"5",height:"12",rx:"1",stroke:"currentColor",strokeWidth:"1.3"})]})}function l6(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[N.jsx("rect",{x:"1",y:"1",width:"12",height:"12",rx:"1",stroke:"currentColor",strokeWidth:"1.3"}),N.jsx("line",{x1:"7",y1:"1",x2:"7",y2:"13",stroke:"currentColor",strokeWidth:"1.3",strokeDasharray:"2 1.5"})]})}function c6({terminalContent:n,promptsContent:e,notesContent:t,activityContent:i,summaryContent:r,queueContent:a,projectContent:l,onTabChange:o}){const[u,h]=K.useState(()=>{try{return localStorage.getItem(Kw)||"terminal"}catch{return"terminal"}}),[p,f]=K.useState(()=>{try{return localStorage.getItem(Yw)==="1"}catch{return!1}}),m=typeof window<"u"&&window.innerWidth>=s6,y=K.useCallback(v=>{h(v);try{localStorage.setItem(Kw,v)}catch{}o?.(v)},[o]),x=K.useCallback(()=>{f(v=>{const _=!v;try{localStorage.setItem(Yw,_?"1":"0")}catch{}return _})},[]),w=p&&m,S=w&&(u==="terminal"||u==="project")?"split":u,b={terminal:n,conversation:e,project:l,queue:a,notes:t,activity:i,summary:r,split:N.jsxs("div",{className:Ke.splitView,children:[N.jsx("div",{className:Ke.splitLeft,children:n}),N.jsx("div",{className:Ke.splitDivider}),N.jsx("div",{className:Ke.splitRight,children:l})]})};return N.jsxs(N.Fragment,{children:[N.jsx("div",{className:Ke.tabs,children:a6.map(v=>{const _=w&&(v.id==="terminal"||v.id==="project")?u==="terminal"||u==="project":u===v.id;return N.jsxs("button",{className:`${Ke.tab}${_?` ${Ke.active}`:""}${w&&(v.id==="terminal"||v.id==="project")?` ${Ke.tabSplit}`:""}`,onClick:()=>y(v.id),"data-tab":v.id,children:[v.label,v.id==="project"&&m&&N.jsx("span",{className:Ke.splitToggle,onClick:E=>{E.stopPropagation(),x(),!p&&u!=="terminal"&&u!=="project"&&y("project")},title:p?"Separate tabs":"Merge Terminal + Project",children:p?N.jsx(l6,{}):N.jsx(o6,{})})]},v.id)})}),N.jsx("div",{className:Ke.tabContent,children:b[S]})]})}function Op(n){return new Date(n).toLocaleTimeString("en-US",{hour12:!1})}function u6({prev:n,index:e}){const[t,i]=K.useState(!0),r=[...n.promptHistory||[]].sort((o,u)=>u.timestamp-o.timestamp),a=n.startedAt?Op(n.startedAt):"?",l=n.endedAt?Op(n.endedAt):"?";return N.jsxs("div",{className:`${Ke.prevSessionSection}${t?` ${Ke.collapsed}`:""}`,children:[N.jsxs("div",{className:Ke.prevSessionHeader,onClick:()=>i(o=>!o),children:[N.jsx("span",{className:Ke.prevSessionToggle,children:""}),"Previous Session #",e+1," (",a," - ",l,") "," ",r.length," prompts"]}),!t&&N.jsx("div",{className:Ke.prevSessionContent,children:r.length>0?r.map((o,u)=>N.jsxs("div",{className:`${Ke.convEntry} ${Ke.convUser} ${Ke.prevSessionEntry}`,children:[N.jsxs("div",{className:Ke.convHeader,children:[N.jsxs("span",{className:Ke.convRole,children:["#",r.length-u]}),N.jsx("span",{className:Ke.convTime,children:Op(o.timestamp)})]}),N.jsx("div",{className:Ke.convText,children:o.text})]},o.timestamp)):N.jsx("div",{className:Ke.tabEmpty,children:"No prompts in this session"})})]})}function h6({text:n}){const[e,t]=K.useState(!1),i=K.useCallback(async r=>{r.stopPropagation();try{await navigator.clipboard.writeText(n.trim()),t(!0),setTimeout(()=>t(!1),1500)}catch{}},[n]);return N.jsx("button",{className:Ke.convCopy,onClick:i,children:e?"COPIED":"COPY"})}function d6({prompts:n,previousSessions:e,searchQuery:t}){const i=[...n].sort((a,l)=>l.timestamp-a.timestamp),r=t?.toLowerCase()||"";return N.jsxs("div",{children:[e&&e.length>0&&[...e].reverse().map((a,l)=>N.jsx(u6,{prev:a,index:l},a.sessionId)),i.length>0?i.map((a,l)=>{const o=r&&a.text.toLowerCase().includes(r);return N.jsxs("div",{className:`${Ke.convEntry} ${Ke.convUser}${o?" search-highlight":""}`,children:[N.jsxs("div",{className:Ke.convHeader,children:[N.jsxs("span",{className:Ke.convRole,children:["#",i.length-l]}),N.jsx("span",{className:Ke.convTime,children:Op(a.timestamp)}),N.jsx(h6,{text:a.text})]}),N.jsx("div",{className:Ke.convText,children:a.text})]},a.timestamp)}):e&&e.length>0?null:N.jsx("div",{className:Ke.tabEmpty,children:"No prompts yet"})]})}function m_(n){return new Date(n).toLocaleTimeString("en-US",{hour12:!1})}function f6({events:n,toolLog:e,responseLog:t,searchQuery:i}){const r=[];for(const l of n)r.push({kind:"event",type:l.type,detail:l.detail,timestamp:l.timestamp});for(const l of e)r.push({kind:"tool",tool:l.tool,input:l.input,timestamp:l.timestamp});for(const l of t)r.push({kind:"response",text:l.text,timestamp:l.timestamp});r.sort((l,o)=>o.timestamp-l.timestamp);const a=i?.toLowerCase()||"";return r.length===0?N.jsx("div",{className:Ke.tabEmpty,children:"No activity yet"}):N.jsx("div",{children:r.map((l,o)=>{const u=`${l.kind}-${l.timestamp}-${o}`,h=l.kind==="tool"?`${l.tool} ${l.input}`:l.kind==="response"?l.text:`${l.type} ${l.detail}`,p=a&&(h||"").toLowerCase().includes(a);return l.kind==="tool"?N.jsxs("div",{className:`${Ke.activityEntry} ${Ke.activityTool}${p?" search-highlight":""}`,children:[N.jsx("span",{className:Ke.activityTime,children:m_(l.timestamp)}),N.jsx("span",{className:`${Ke.activityBadge} ${Ke.activityBadgeTool}`,children:l.tool}),N.jsx("span",{className:Ke.activityDetail,children:l.input})]},u):l.kind==="response"?N.jsxs("div",{className:`${Ke.activityEntry} ${Ke.activityResponse}${p?" search-highlight":""}`,children:[N.jsx("span",{className:Ke.activityTime,children:m_(l.timestamp)}),N.jsx("span",{className:`${Ke.activityBadge} ${Ke.activityBadgeResponse}`,children:"RESPONSE"}),N.jsx("span",{className:Ke.activityDetail,children:l.text})]},u):N.jsxs("div",{className:`${Ke.activityEntry} ${Ke.activityEvent}${p?" search-highlight":""}`,children:[N.jsx("span",{className:Ke.activityTime,children:m_(l.timestamp)}),N.jsx("span",{className:`${Ke.activityBadge} ${Ke.activityBadgeEvent}`,children:l.type}),N.jsx("span",{className:Ke.activityDetail,children:l.detail})]},u)})})}function p6(n){return new Date(n).toLocaleTimeString("en-US",{hour12:!1})}function m6({sessionId:n}){const[e,t]=K.useState([]),[i,r]=K.useState(""),[a,l]=K.useState(!1),[o,u]=K.useState(!1),h=K.useCallback(async()=>{try{u(!1);const m=await fetch(`/api/db/sessions/${n}/notes`);if(m.ok){const y=await m.json();t(y.notes||[])}else u(!0),Ct("Failed to load notes","error")}catch{u(!0),Ct("Network error loading notes","error")}},[n]);K.useEffect(()=>{h()},[h]);const p=K.useCallback(async()=>{const m=i.trim();if(!(!m||a)){l(!0);try{(await fetch(`/api/db/sessions/${n}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:m})})).ok?(r(""),await h()):Ct("Failed to save note","error")}catch{Ct("Failed to save note","error")}finally{l(!1)}}},[n,i,a,h]),f=K.useCallback(async m=>{try{await fetch(`/api/db/sessions/${n}/notes/${m}`,{method:"DELETE"}),await h()}catch{Ct("Failed to delete note","error")}},[n,h]);return N.jsxs("div",{children:[N.jsxs("div",{className:Ke.notesCompose,children:[N.jsx("textarea",{className:Ke.noteTextarea,placeholder:"Add a note...",rows:3,value:i,onChange:m=>r(m.target.value),onKeyDown:m=>{m.key==="Enter"&&(m.metaKey||m.ctrlKey)&&p()}}),N.jsx("button",{className:`${Ke.ctrlBtn} ${Ke.saveNote}`,onClick:p,disabled:a||!i.trim(),children:a?"SAVING...":"SAVE NOTE"})]}),e.length>0?e.sort((m,y)=>y.createdAt-m.createdAt).map(m=>N.jsxs("div",{className:Ke.noteEntry,children:[N.jsxs("div",{className:Ke.noteMeta,children:[N.jsx("span",{className:Ke.noteTime,children:p6(m.createdAt)}),N.jsx("button",{className:Ke.noteDelete,onClick:()=>f(m.id),title:"Delete note",children:"DELETE"})]}),N.jsx("div",{className:Ke.noteText,children:m.text})]},m.id)):o?N.jsxs("div",{className:Ke.tabEmpty,children:["Failed to load notes  ",N.jsx("button",{onClick:h,style:{background:"none",border:"none",color:"var(--accent-cyan)",cursor:"pointer",fontFamily:"inherit"},children:"retry"})]}):N.jsx("div",{className:Ke.tabEmpty,children:"No notes yet"})]})}function g6({summary:n}){return n?N.jsx("div",{className:Ke.summaryText,children:n.split(`
`).map((e,t)=>N.jsxs("span",{children:[e,t<n.split(`
`).length-1&&N.jsx("br",{})]},t))}):N.jsx("div",{className:Ke.tabEmpty,children:"No summary yet  click SUMMARIZE to generate one with AI"})}const h0=new Set,$s=kl(n=>({queues:new Map,add:(e,t)=>n(i=>{const r=new Map(i.queues),a=[...r.get(e)??[],t];return r.set(e,a),{queues:r}}),remove:(e,t)=>n(i=>{const r=new Map(i.queues),a=(r.get(e)??[]).filter(l=>l.id!==t);return r.set(e,a),{queues:r}}),reorder:(e,t)=>n(i=>{const r=new Map(i.queues),a=r.get(e)??[],l=new Map(a.map(u=>[u.id,u])),o=t.map((u,h)=>{const p=l.get(u);return p?{...p,position:h}:null}).filter(u=>u!==null);return r.set(e,o),{queues:r}}),moveToSession:(e,t,i)=>n(r=>{const a=new Map(r.queues),l=a.get(t)??[],o=[...a.get(i)??[]],u=new Set(e),h=[],p=[];for(const m of l)u.has(m.id)?h.push(m):p.push(m);let f=o.length>0?Math.max(...o.map(m=>m.position)):-1;for(const m of h)f++,o.push({...m,sessionId:i,position:f});return a.set(t,p),a.set(i,o),{queues:a}}),setQueue:(e,t)=>n(i=>{const r=new Map(i.queues);return r.set(e,t),{queues:r}}),loadFromDb:async()=>{try{const e=await Wt.promptQueue.toArray();if(e.length===0)return;const t=new Map;for(const i of e){const r=t.get(i.sessionId)??[];r.push({id:i.id,sessionId:i.sessionId,text:i.text,position:i.position,createdAt:i.createdAt}),t.set(i.sessionId,r)}for(const i of t.keys())h0.add(i);for(const[i,r]of t)r.sort((a,l)=>a.position-l.position),$s.getState().setQueue(i,r);setTimeout(()=>h0.clear(),0)}catch{}}}));let g_=new Map;$s.subscribe(n=>{const e=n.queues,t=[];for(const[i,r]of e)g_.get(i)!==r&&t.push(i);for(const i of g_.keys())e.has(i)||t.push(i);g_=e;for(const i of t){if(h0.has(i))continue;const r=e.get(i)??[];y6(i,r)}});async function y6(n,e){try{const i=(await Wt.promptQueue.where("sessionId").equals(n).toArray()).map(r=>r.id).filter(r=>r!=null);i.length>0&&await Wt.promptQueue.bulkDelete(i),e.length>0&&await Wt.promptQueue.bulkAdd(e.map((r,a)=>({sessionId:n,text:r.text,position:a,createdAt:r.createdAt})))}catch{}}const _6="_wrapper_6mwat_9",b6="_placeholder_6mwat_13",v6="_reconnectPlaceholderBtn_6mwat_20",x6="_toolbar_6mwat_45",S6="_themeSelect_6mwat_50",w6="_toolbarBtn_6mwat_57",E6="_reconnectBtn_6mwat_73",C6="_container_6mwat_86",A6="_queuePanel_6mwat_101",T6="_queueToggle_6mwat_107",k6="_queueToggleArrow_6mwat_115",M6="_collapsed_6mwat_116",R6="_queueCount_6mwat_117",O6="_queueBody_6mwat_119",N6="_queueCompose_6mwat_123",D6="_queueTextarea_6mwat_124",I6="_queueAddBtn_6mwat_127",L6="_queueList_6mwat_130",B6="_queueListEmpty_6mwat_132",z6="_queueItem_6mwat_135",P6="_queuePos_6mwat_140",F6="_queueText_6mwat_124",U6="_queueActions_6mwat_142",j6="_queueActionBtn_6mwat_144",H6="_queueSend_6mwat_146",q6="_queueEdit_6mwat_148",V6="_queueDelete_6mwat_150",W6="_queueMove_6mwat_152",$6="_dragging_6mwat_158",G6="_queueEditTextarea_6mwat_164",K6="_saving_6mwat_166",Y6="_fullscreenOverlay_6mwat_207",X6="_fullscreenTopbar_6mwat_208",Z6="_fullscreenTitle_6mwat_214",J6="_fullscreenContainer_6mwat_217",Ft={wrapper:_6,placeholder:b6,reconnectPlaceholderBtn:v6,toolbar:x6,themeSelect:S6,toolbarBtn:w6,reconnectBtn:E6,container:C6,queuePanel:A6,queueToggle:T6,queueToggleArrow:k6,collapsed:M6,queueCount:R6,queueBody:O6,queueCompose:N6,queueTextarea:D6,queueAddBtn:I6,queueList:L6,queueListEmpty:B6,queueItem:z6,queuePos:P6,queueText:F6,queueActions:U6,queueActionBtn:j6,queueSend:H6,queueEdit:q6,queueDelete:V6,queueMove:W6,dragging:$6,queueEditTextarea:G6,saving:K6,fullscreenOverlay:Y6,fullscreenTopbar:X6,fullscreenTitle:Z6,fullscreenContainer:J6};let Q6=Date.now();function ez(){return Q6++}const tz=[];function k2({sessionId:n,sessionStatus:e,terminalId:t,onQueueCountChange:i}){const r=$s(te=>te.queues.get(n)??tz),a=$s(te=>te.add),l=$s(te=>te.remove),o=$s(te=>te.reorder),u=$s(te=>te.moveToSession),h=mn(te=>te.sessions),[p,f]=K.useState(""),[m,y]=K.useState(null),[x,w]=K.useState(""),[S,b]=K.useState(!1),[v,_]=K.useState(null),[E,R]=K.useState(null),M=K.useRef(e);K.useEffect(()=>{y(null),w(""),_(null)},[n]),K.useEffect(()=>{i?.(n,r.length)},[r.length,n,i]);const D=K.useCallback(async te=>{if(!t)return Ct("No terminal attached","error"),!1;try{return(await fetch(`/api/terminals/${t}/write`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:te+`
`})})).ok?!0:(Ct("Failed to send to terminal","error"),!1)}catch{return Ct("Network error sending to terminal","error"),!1}},[t]);K.useEffect(()=>{const te=M.current;if(M.current=e,te===e||!(e==="waiting"||e==="input")||r.length===0||!t)return;const U=r[0];D(U.text).then(B=>{B&&(l(n,U.id),Ct("Auto-sent queued prompt","info",2e3))})},[e,r,n,t,l,D]);const O=K.useCallback(()=>{const te=p.trim();if(!te)return;const re={id:ez(),sessionId:n,text:te,position:r.length,createdAt:Date.now()};a(n,re),f("")},[p,n,r.length,a]),L=K.useCallback(te=>{y(te.id),w(te.text)},[]),j=K.useCallback(()=>{if(m===null)return;const te=x.trim();if(!te)l(n,m);else{const re=r.findIndex(U=>U.id===m);if(re>=0){const U={...r[re],text:te},B=[...r];B[re]=U,$s.getState().reorder(n,B.map(P=>P.id)),$s.getState().setQueue(n,B)}}y(null),w("")},[m,x,r,n,l]),X=K.useCallback(async te=>{await D(te.text)&&l(n,te.id)},[D,l,n]),G=K.useCallback(te=>{v!==null&&(u([v],n,te),_(null),Ct("Prompt moved","info",2e3))},[v,n,u]),H=K.useCallback(te=>{R(te)},[]),$=K.useCallback((te,re)=>{if(te.preventDefault(),E===null||E===re)return;const U=[...r],[B]=U.splice(E,1);U.splice(re,0,B),U.length===r.length&&(o(n,U.map(P=>P.id)),R(re))},[E,r,o,n]),Q=K.useCallback(()=>{R(null)},[]),Y=Array.from(h.entries()).filter(([te])=>te!==n);return N.jsxs("div",{className:`${Ft.queuePanel}${S?` ${Ft.collapsed}`:""}`,children:[N.jsxs("button",{className:Ft.queueToggle,onClick:()=>b(!S),children:[N.jsx("span",{className:Ft.queueToggleArrow,children:""}),"QUEUE"," ",N.jsxs("span",{className:Ft.queueCount,children:["(",r.length,")"]})]}),N.jsxs("div",{className:Ft.queueBody,children:[N.jsxs("div",{className:Ft.queueCompose,children:[N.jsx("textarea",{className:Ft.queueTextarea,placeholder:"Add a prompt to the queue...",rows:2,value:p,onChange:te=>f(te.target.value),onKeyDown:te=>{te.key==="Enter"&&(te.metaKey||te.ctrlKey)&&(te.preventDefault(),O())}}),N.jsx("button",{className:`${Ft.toolbarBtn} ${Ft.queueAddBtn}`,onClick:O,disabled:!p.trim(),children:"ADD"})]}),N.jsx("div",{className:Ft.queueList,children:r.length===0?N.jsx("div",{className:Ft.queueListEmpty,children:"Queue is empty. Add prompts to auto-send when session is waiting."}):r.map((te,re)=>N.jsxs("div",{className:`${Ft.queueItem}${E===re?` ${Ft.dragging}`:""}`,draggable:!0,onDragStart:()=>H(re),onDragOver:U=>$(U,re),onDragEnd:Q,children:[N.jsx("span",{className:Ft.queuePos,children:re+1}),m===te.id?N.jsx("textarea",{className:Ft.queueEditTextarea,value:x,onChange:U=>w(U.target.value),onKeyDown:U=>{U.key==="Enter"&&(U.metaKey||U.ctrlKey)&&(U.preventDefault(),j()),U.key==="Escape"&&(y(null),w(""))},autoFocus:!0,rows:2}):N.jsx("span",{className:Ft.queueText,children:te.text}),N.jsx("div",{className:Ft.queueActions,children:m===te.id?N.jsx("button",{className:`${Ft.queueActionBtn} ${Ft.queueEdit} ${Ft.saving}`,onClick:j,children:"SAVE"}):N.jsxs(N.Fragment,{children:[N.jsx("button",{className:`${Ft.queueActionBtn} ${Ft.queueSend}`,onClick:()=>X(te),title:"Send now",children:"SEND"}),N.jsx("button",{className:`${Ft.queueActionBtn} ${Ft.queueEdit}`,onClick:()=>L(te),title:"Edit",children:"EDIT"}),N.jsx("button",{className:`${Ft.queueActionBtn} ${Ft.queueMove}`,onClick:()=>_(v===te.id?null:te.id),title:"Move to another session",children:"MOVE"}),N.jsx("button",{className:`${Ft.queueActionBtn} ${Ft.queueDelete}`,onClick:()=>l(n,te.id),title:"Remove",children:"DEL"})]})}),v===te.id&&N.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:10,background:"var(--surface-card, #12122a)",border:"1px solid var(--border-subtle, rgba(255,255,255,0.08))",borderRadius:"4px",padding:"4px",maxHeight:"160px",overflowY:"auto"},children:Y.length===0?N.jsx("div",{style:{padding:"8px",color:"var(--text-dim)",fontSize:"10px",textAlign:"center"},children:"No other sessions"}):Y.map(([U,B])=>N.jsxs("button",{onClick:()=>G(U),style:{display:"block",width:"100%",padding:"4px 8px",background:"transparent",border:"none",color:"var(--text-primary, #e0e0e0)",fontFamily:"var(--font-mono)",fontSize:"10px",textAlign:"left",cursor:"pointer",borderRadius:"3px"},onMouseEnter:P=>{P.target.style.background="rgba(0,229,255,0.1)"},onMouseLeave:P=>{P.target.style.background="transparent"},children:[B.projectName||U.slice(0,8),B.title?`  ${B.title}`:""]},U))})]},te.id))})]})]})}function nz(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const iz=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,rz=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sz={};function Xw(n,e){return(sz.jsx?rz:iz).test(n)}const az=/[ \t\n\f\r]/g;function oz(n){return typeof n=="object"?n.type==="text"?Zw(n.value):!1:Zw(n)}function Zw(n){return n.replace(az,"")===""}class cd{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}cd.prototype.normal={};cd.prototype.property={};cd.prototype.space=void 0;function M2(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new cd(t,i,e)}function d0(n){return n.toLowerCase()}class br{constructor(e,t){this.attribute=t,this.property=e}}br.prototype.attribute="";br.prototype.booleanish=!1;br.prototype.boolean=!1;br.prototype.commaOrSpaceSeparated=!1;br.prototype.commaSeparated=!1;br.prototype.defined=!1;br.prototype.mustUseProperty=!1;br.prototype.number=!1;br.prototype.overloadedBoolean=!1;br.prototype.property="";br.prototype.spaceSeparated=!1;br.prototype.space=void 0;let lz=0;const Zt=Ol(),_i=Ol(),f0=Ol(),Ye=Ol(),Hn=Ol(),nu=Ol(),Mr=Ol();function Ol(){return 2**++lz}const p0=Object.freeze(Object.defineProperty({__proto__:null,boolean:Zt,booleanish:_i,commaOrSpaceSeparated:Mr,commaSeparated:nu,number:Ye,overloadedBoolean:f0,spaceSeparated:Hn},Symbol.toStringTag,{value:"Module"})),y_=Object.keys(p0);class Eb extends br{constructor(e,t,i,r){let a=-1;if(super(e,t),Jw(this,"space",r),typeof i=="number")for(;++a<y_.length;){const l=y_[a];Jw(this,y_[a],(i&p0[l])===p0[l])}}}Eb.prototype.defined=!0;function Jw(n,e,t){t&&(n[e]=t)}function pu(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const a=new Eb(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(a.mustUseProperty=!0),e[i]=a,t[d0(i)]=i,t[d0(a.attribute)]=i}return new cd(e,t,n.space)}const R2=pu({properties:{ariaActiveDescendant:null,ariaAtomic:_i,ariaAutoComplete:null,ariaBusy:_i,ariaChecked:_i,ariaColCount:Ye,ariaColIndex:Ye,ariaColSpan:Ye,ariaControls:Hn,ariaCurrent:null,ariaDescribedBy:Hn,ariaDetails:null,ariaDisabled:_i,ariaDropEffect:Hn,ariaErrorMessage:null,ariaExpanded:_i,ariaFlowTo:Hn,ariaGrabbed:_i,ariaHasPopup:null,ariaHidden:_i,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Hn,ariaLevel:Ye,ariaLive:null,ariaModal:_i,ariaMultiLine:_i,ariaMultiSelectable:_i,ariaOrientation:null,ariaOwns:Hn,ariaPlaceholder:null,ariaPosInSet:Ye,ariaPressed:_i,ariaReadOnly:_i,ariaRelevant:null,ariaRequired:_i,ariaRoleDescription:Hn,ariaRowCount:Ye,ariaRowIndex:Ye,ariaRowSpan:Ye,ariaSelected:_i,ariaSetSize:Ye,ariaSort:null,ariaValueMax:Ye,ariaValueMin:Ye,ariaValueNow:Ye,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function O2(n,e){return e in n?n[e]:e}function N2(n,e){return O2(n,e.toLowerCase())}const cz=pu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:nu,acceptCharset:Hn,accessKey:Hn,action:null,allow:null,allowFullScreen:Zt,allowPaymentRequest:Zt,allowUserMedia:Zt,alt:null,as:null,async:Zt,autoCapitalize:null,autoComplete:Hn,autoFocus:Zt,autoPlay:Zt,blocking:Hn,capture:null,charSet:null,checked:Zt,cite:null,className:Hn,cols:Ye,colSpan:null,content:null,contentEditable:_i,controls:Zt,controlsList:Hn,coords:Ye|nu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Zt,defer:Zt,dir:null,dirName:null,disabled:Zt,download:f0,draggable:_i,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Zt,formTarget:null,headers:Hn,height:Ye,hidden:f0,high:Ye,href:null,hrefLang:null,htmlFor:Hn,httpEquiv:Hn,id:null,imageSizes:null,imageSrcSet:null,inert:Zt,inputMode:null,integrity:null,is:null,isMap:Zt,itemId:null,itemProp:Hn,itemRef:Hn,itemScope:Zt,itemType:Hn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Zt,low:Ye,manifest:null,max:null,maxLength:Ye,media:null,method:null,min:null,minLength:Ye,multiple:Zt,muted:Zt,name:null,nonce:null,noModule:Zt,noValidate:Zt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Zt,optimum:Ye,pattern:null,ping:Hn,placeholder:null,playsInline:Zt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Zt,referrerPolicy:null,rel:Hn,required:Zt,reversed:Zt,rows:Ye,rowSpan:Ye,sandbox:Hn,scope:null,scoped:Zt,seamless:Zt,selected:Zt,shadowRootClonable:Zt,shadowRootDelegatesFocus:Zt,shadowRootMode:null,shape:null,size:Ye,sizes:null,slot:null,span:Ye,spellCheck:_i,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ye,step:null,style:null,tabIndex:Ye,target:null,title:null,translate:null,type:null,typeMustMatch:Zt,useMap:null,value:_i,width:Ye,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Hn,axis:null,background:null,bgColor:null,border:Ye,borderColor:null,bottomMargin:Ye,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Zt,declare:Zt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ye,leftMargin:Ye,link:null,longDesc:null,lowSrc:null,marginHeight:Ye,marginWidth:Ye,noResize:Zt,noHref:Zt,noShade:Zt,noWrap:Zt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ye,rules:null,scheme:null,scrolling:_i,standby:null,summary:null,text:null,topMargin:Ye,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ye,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Zt,disableRemotePlayback:Zt,prefix:null,property:null,results:Ye,security:null,unselectable:null},space:"html",transform:N2}),uz=pu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Mr,accentHeight:Ye,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ye,amplitude:Ye,arabicForm:null,ascent:Ye,attributeName:null,attributeType:null,azimuth:Ye,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ye,by:null,calcMode:null,capHeight:Ye,className:Hn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ye,diffuseConstant:Ye,direction:null,display:null,dur:null,divisor:Ye,dominantBaseline:null,download:Zt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ye,enableBackground:null,end:null,event:null,exponent:Ye,externalResourcesRequired:null,fill:null,fillOpacity:Ye,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:nu,g2:nu,glyphName:nu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ye,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ye,horizOriginX:Ye,horizOriginY:Ye,id:null,ideographic:Ye,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ye,k:Ye,k1:Ye,k2:Ye,k3:Ye,k4:Ye,kernelMatrix:Mr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ye,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ye,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ye,overlineThickness:Ye,paintOrder:null,panose1:null,path:null,pathLength:Ye,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Hn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ye,pointsAtY:Ye,pointsAtZ:Ye,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Mr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Mr,rev:Mr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Mr,requiredFeatures:Mr,requiredFonts:Mr,requiredFormats:Mr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ye,specularExponent:Ye,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ye,strikethroughThickness:Ye,string:null,stroke:null,strokeDashArray:Mr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ye,strokeOpacity:Ye,strokeWidth:null,style:null,surfaceScale:Ye,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Mr,tabIndex:Ye,tableValues:null,target:null,targetX:Ye,targetY:Ye,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Mr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ye,underlineThickness:Ye,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ye,values:null,vAlphabetic:Ye,vMathematical:Ye,vectorEffect:null,vHanging:Ye,vIdeographic:Ye,version:null,vertAdvY:Ye,vertOriginX:Ye,vertOriginY:Ye,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ye,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:O2}),D2=pu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),I2=pu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:N2}),L2=pu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),hz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},dz=/[A-Z]/g,Qw=/-[a-z]/g,fz=/^data[-\w.:]+$/i;function pz(n,e){const t=d0(e);let i=e,r=br;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&fz.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(Qw,gz);i="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!Qw.test(a)){let l=a.replace(dz,mz);l.charAt(0)!=="-"&&(l="-"+l),e="data"+l}}r=Eb}return new r(i,e)}function mz(n){return"-"+n.toLowerCase()}function gz(n){return n.charAt(1).toUpperCase()}const yz=M2([R2,cz,D2,I2,L2],"html"),Cb=M2([R2,uz,D2,I2,L2],"svg");function _z(n){return n.join(" ").trim()}var Wc={},__,eE;function bz(){if(eE)return __;eE=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,o=/^\s+|\s+$/g,u=`
`,h="/",p="*",f="",m="comment",y="declaration";function x(S,b){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];b=b||{};var v=1,_=1;function E($){var Q=$.match(e);Q&&(v+=Q.length);var Y=$.lastIndexOf(u);_=~Y?$.length-Y:_+$.length}function R(){var $={line:v,column:_};return function(Q){return Q.position=new M($),L(),Q}}function M($){this.start=$,this.end={line:v,column:_},this.source=b.source}M.prototype.content=S;function D($){var Q=new Error(b.source+":"+v+":"+_+": "+$);if(Q.reason=$,Q.filename=b.source,Q.line=v,Q.column=_,Q.source=S,!b.silent)throw Q}function O($){var Q=$.exec(S);if(Q){var Y=Q[0];return E(Y),S=S.slice(Y.length),Q}}function L(){O(t)}function j($){var Q;for($=$||[];Q=X();)Q!==!1&&$.push(Q);return $}function X(){var $=R();if(!(h!=S.charAt(0)||p!=S.charAt(1))){for(var Q=2;f!=S.charAt(Q)&&(p!=S.charAt(Q)||h!=S.charAt(Q+1));)++Q;if(Q+=2,f===S.charAt(Q-1))return D("End of comment missing");var Y=S.slice(2,Q-2);return _+=2,E(Y),S=S.slice(Q),_+=2,$({type:m,comment:Y})}}function G(){var $=R(),Q=O(i);if(Q){if(X(),!O(r))return D("property missing ':'");var Y=O(a),te=$({type:y,property:w(Q[0].replace(n,f)),value:Y?w(Y[0].replace(n,f)):f});return O(l),te}}function H(){var $=[];j($);for(var Q;Q=G();)Q!==!1&&($.push(Q),j($));return $}return L(),H()}function w(S){return S?S.replace(o,f):f}return __=x,__}var tE;function vz(){if(tE)return Wc;tE=1;var n=Wc&&Wc.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.default=t;const e=n(bz());function t(i,r){let a=null;if(!i||typeof i!="string")return a;const l=(0,e.default)(i),o=typeof r=="function";return l.forEach(u=>{if(u.type!=="declaration")return;const{property:h,value:p}=u;o?r(h,p,u):p&&(a=a||{},a[h]=p)}),a}return Wc}var Eh={},nE;function xz(){if(nE)return Eh;nE=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,a=function(h){return!h||t.test(h)||n.test(h)},l=function(h,p){return p.toUpperCase()},o=function(h,p){return"".concat(p,"-")},u=function(h,p){return p===void 0&&(p={}),a(h)?h:(h=h.toLowerCase(),p.reactCompat?h=h.replace(r,o):h=h.replace(i,o),h.replace(e,l))};return Eh.camelCase=u,Eh}var Ch,iE;function Sz(){if(iE)return Ch;iE=1;var n=Ch&&Ch.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(vz()),t=xz();function i(r,a){var l={};return!r||typeof r!="string"||(0,e.default)(r,function(o,u){o&&u&&(l[(0,t.camelCase)(o,a)]=u)}),l}return i.default=i,Ch=i,Ch}var wz=Sz();const Ez=nd(wz),B2=z2("end"),Ab=z2("start");function z2(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Cz(n){const e=Ab(n),t=B2(n);if(e&&t)return{start:e,end:t}}function Fh(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?rE(n.position):"start"in n||"end"in n?rE(n):"line"in n||"column"in n?m0(n):""}function m0(n){return sE(n&&n.line)+":"+sE(n&&n.column)}function rE(n){return m0(n&&n.start)+"-"+m0(n&&n.end)}function sE(n){return n&&typeof n=="number"?n:1}class Zi extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",a={},l=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?r=e:!a.cause&&e&&(l=!0,r=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof i=="string"){const u=i.indexOf(":");u===-1?a.ruleId=i:(a.source=i.slice(0,u),a.ruleId=i.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=o?o.line:void 0,this.name=Fh(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Zi.prototype.file="";Zi.prototype.name="";Zi.prototype.reason="";Zi.prototype.message="";Zi.prototype.stack="";Zi.prototype.column=void 0;Zi.prototype.line=void 0;Zi.prototype.ancestors=void 0;Zi.prototype.cause=void 0;Zi.prototype.fatal=void 0;Zi.prototype.place=void 0;Zi.prototype.ruleId=void 0;Zi.prototype.source=void 0;const Tb={}.hasOwnProperty,Az=new Map,Tz=/[A-Z]/g,kz=new Set(["table","tbody","thead","tfoot","tr"]),Mz=new Set(["td","th"]),P2="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Rz(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Pz(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=zz(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Cb:yz,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=F2(r,n,void 0);return a&&typeof a!="string"?a:r.create(n,r.Fragment,{children:a||void 0},void 0)}function F2(n,e,t){if(e.type==="element")return Oz(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Nz(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Iz(n,e,t);if(e.type==="mdxjsEsm")return Dz(n,e);if(e.type==="root")return Lz(n,e,t);if(e.type==="text")return Bz(n,e)}function Oz(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Cb,n.schema=r),n.ancestors.push(e);const a=j2(n,e.tagName,!1),l=Fz(n,e);let o=Mb(n,e);return kz.has(e.tagName)&&(o=o.filter(function(u){return typeof u=="string"?!oz(u):!0})),U2(n,l,a,e),kb(l,o),n.ancestors.pop(),n.schema=i,n.create(e,a,l,t)}function Nz(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}Qh(n,e.position)}function Dz(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);Qh(n,e.position)}function Iz(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=Cb,n.schema=r),n.ancestors.push(e);const a=e.name===null?n.Fragment:j2(n,e.name,!0),l=Uz(n,e),o=Mb(n,e);return U2(n,l,a,e),kb(l,o),n.ancestors.pop(),n.schema=i,n.create(e,a,l,t)}function Lz(n,e,t){const i={};return kb(i,Mb(n,e)),n.create(e,n.Fragment,i,t)}function Bz(n,e){return e.value}function U2(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function kb(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function zz(n,e,t){return i;function i(r,a,l,o){const h=Array.isArray(l.children)?t:e;return o?h(a,l,o):h(a,l)}}function Pz(n,e){return t;function t(i,r,a,l){const o=Array.isArray(a.children),u=Ab(i);return e(r,a,l,o,{columnNumber:u?u.column-1:void 0,fileName:n,lineNumber:u?u.line:void 0},void 0)}}function Fz(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&Tb.call(e.properties,r)){const a=jz(n,r,e.properties[r]);if(a){const[l,o]=a;n.tableCellAlignToStyle&&l==="align"&&typeof o=="string"&&Mz.has(e.tagName)?i=o:t[l]=o}}if(i){const a=t.style||(t.style={});a[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function Uz(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const a=i.data.estree.body[0];a.type;const l=a.expression;l.type;const o=l.properties[0];o.type,Object.assign(t,n.evaluater.evaluateExpression(o.argument))}else Qh(n,e.position);else{const r=i.name;let a;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const o=i.value.data.estree.body[0];o.type,a=n.evaluater.evaluateExpression(o.expression)}else Qh(n,e.position);else a=i.value===null?!0:i.value;t[r]=a}return t}function Mb(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:Az;for(;++i<e.children.length;){const a=e.children[i];let l;if(n.passKeys){const u=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(u){const h=r.get(u)||0;l=u+"-"+h,r.set(u,h+1)}}const o=F2(n,a,l);o!==void 0&&t.push(o)}return t}function jz(n,e,t){const i=pz(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?nz(t):_z(t)),i.property==="style"){let r=typeof t=="object"?t:Hz(n,String(t));return n.stylePropertyNameCase==="css"&&(r=qz(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?hz[i.property]||i.property:i.attribute,t]}}function Hz(n,e){try{return Ez(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new Zi("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=P2+"#cannot-parse-style-attribute",r}}function j2(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let a=-1,l;for(;++a<r.length;){const o=Xw(r[a])?{type:"Identifier",name:r[a]}:{type:"Literal",value:r[a]};l=l?{type:"MemberExpression",object:l,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}i=l}else i=Xw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return Tb.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);Qh(n)}function Qh(n,e){const t=new Zi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=P2+"#cannot-handle-mdx-estrees-without-createevaluater",t}function qz(n){const e={};let t;for(t in n)Tb.call(n,t)&&(e[Vz(t)]=n[t]);return e}function Vz(n){let e=n.replace(Tz,Wz);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Wz(n){return"-"+n.toLowerCase()}const b_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},$z={};function Rb(n,e){const t=$z,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return H2(n,i,r)}function H2(n,e,t){if(Gz(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return aE(n.children,e,t)}return Array.isArray(n)?aE(n,e,t):""}function aE(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=H2(n[r],e,t);return i.join("")}function Gz(n){return!!(n&&typeof n=="object")}const oE=document.createElement("i");function Ob(n){const e="&"+n+";";oE.innerHTML=e;const t=oE.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function Lr(n,e,t,i){const r=n.length;let a=0,l;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)l=Array.from(i),l.unshift(e,t),n.splice(...l);else for(t&&n.splice(e,t);a<i.length;)l=i.slice(a,a+1e4),l.unshift(e,0),n.splice(...l),a+=1e4,e+=1e4}function es(n,e){return n.length>0?(Lr(n,n.length,0,e),n):e}const lE={}.hasOwnProperty;function q2(n){const e={};let t=-1;for(;++t<n.length;)Kz(e,n[t]);return e}function Kz(n,e){let t;for(t in e){const r=(lE.call(n,t)?n[t]:void 0)||(n[t]={}),a=e[t];let l;if(a)for(l in a){lE.call(r,l)||(r[l]=[]);const o=a[l];Yz(r[l],Array.isArray(o)?o:o?[o]:[])}}}function Yz(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);Lr(n,0,0,i)}function V2(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function vs(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ar=Fo(/[A-Za-z]/),Yi=Fo(/[\dA-Za-z]/),Xz=Fo(/[#-'*+\--9=?A-Z^-~]/);function Xp(n){return n!==null&&(n<32||n===127)}const g0=Fo(/\d/),Zz=Fo(/[\dA-Fa-f]/),Jz=Fo(/[!-/:-@[-`{-~]/);function Tt(n){return n!==null&&n<-2}function Fn(n){return n!==null&&(n<0||n===32)}function on(n){return n===-2||n===-1||n===32}const _m=Fo(new RegExp("\\p{P}|\\p{S}","u")),Tl=Fo(/\s/);function Fo(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function mu(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const a=n.charCodeAt(t);let l="";if(a===37&&Yi(n.charCodeAt(t+1))&&Yi(n.charCodeAt(t+2)))r=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const o=n.charCodeAt(t+1);a<56320&&o>56319&&o<57344?(l=String.fromCharCode(a,o),r=1):l=""}else l=String.fromCharCode(a);l&&(e.push(n.slice(i,t),encodeURIComponent(l)),i=t+r+1,l=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function fn(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(u){return on(u)?(n.enter(t),o(u)):e(u)}function o(u){return on(u)&&a++<r?(n.consume(u),o):(n.exit(t),e(u))}}const Qz={tokenize:eP};function eP(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),fn(n,e,"linePrefix")}function r(o){return n.enter("paragraph"),a(o)}function a(o){const u=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=u),t=u,l(o)}function l(o){if(o===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(o);return}return Tt(o)?(n.consume(o),n.exit("chunkText"),a):(n.consume(o),l)}}const tP={tokenize:nP},cE={tokenize:iP};function nP(n){const e=this,t=[];let i=0,r,a,l;return o;function o(_){if(i<t.length){const E=t[i];return e.containerState=E[1],n.attempt(E[0].continuation,u,h)(_)}return h(_)}function u(_){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&v();const E=e.events.length;let R=E,M;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){M=e.events[R][1].end;break}b(i);let D=E;for(;D<e.events.length;)e.events[D][1].end={...M},D++;return Lr(e.events,R+1,0,e.events.slice(E)),e.events.length=D,h(_)}return o(_)}function h(_){if(i===t.length){if(!r)return m(_);if(r.currentConstruct&&r.currentConstruct.concrete)return x(_);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(cE,p,f)(_)}function p(_){return r&&v(),b(i),m(_)}function f(_){return e.parser.lazy[e.now().line]=i!==t.length,l=e.now().offset,x(_)}function m(_){return e.containerState={},n.attempt(cE,y,x)(_)}function y(_){return i++,t.push([e.currentConstruct,e.containerState]),m(_)}function x(_){if(_===null){r&&v(),b(0),n.consume(_);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:a}),w(_)}function w(_){if(_===null){S(n.exit("chunkFlow"),!0),b(0),n.consume(_);return}return Tt(_)?(n.consume(_),S(n.exit("chunkFlow")),i=0,e.interrupt=void 0,o):(n.consume(_),w)}function S(_,E){const R=e.sliceStream(_);if(E&&R.push(null),_.previous=a,a&&(a.next=_),a=_,r.defineSkip(_.start),r.write(R),e.parser.lazy[_.start.line]){let M=r.events.length;for(;M--;)if(r.events[M][1].start.offset<l&&(!r.events[M][1].end||r.events[M][1].end.offset>l))return;const D=e.events.length;let O=D,L,j;for(;O--;)if(e.events[O][0]==="exit"&&e.events[O][1].type==="chunkFlow"){if(L){j=e.events[O][1].end;break}L=!0}for(b(i),M=D;M<e.events.length;)e.events[M][1].end={...j},M++;Lr(e.events,O+1,0,e.events.slice(D)),e.events.length=M}}function b(_){let E=t.length;for(;E-- >_;){const R=t[E];e.containerState=R[1],R[0].exit.call(e,n)}t.length=_}function v(){r.write([null]),a=void 0,r=void 0,e.containerState._closeFlow=void 0}}function iP(n,e,t){return fn(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function au(n){if(n===null||Fn(n)||Tl(n))return 1;if(_m(n))return 2}function bm(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const a=n[r].resolveAll;a&&!i.includes(a)&&(e=a(e,t),i.push(a))}return e}const y0={name:"attention",resolveAll:rP,tokenize:sP};function rP(n,e){let t=-1,i,r,a,l,o,u,h,p;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;u=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const f={...n[i][1].end},m={...n[t][1].start};uE(f,-u),uE(m,u),l={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...n[i][1].end}},o={type:u>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:m},a={type:u>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:u>1?"strong":"emphasis",start:{...l.start},end:{...o.end}},n[i][1].end={...l.start},n[t][1].start={...o.end},h=[],n[i][1].end.offset-n[i][1].start.offset&&(h=es(h,[["enter",n[i][1],e],["exit",n[i][1],e]])),h=es(h,[["enter",r,e],["enter",l,e],["exit",l,e],["enter",a,e]]),h=es(h,bm(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),h=es(h,[["exit",a,e],["enter",o,e],["exit",o,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(p=2,h=es(h,[["enter",n[t][1],e],["exit",n[t][1],e]])):p=0,Lr(n,i-1,t-i+3,h),t=i+h.length-p-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function sP(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=au(i);let a;return l;function l(u){return a=u,n.enter("attentionSequence"),o(u)}function o(u){if(u===a)return n.consume(u),o;const h=n.exit("attentionSequence"),p=au(u),f=!p||p===2&&r||t.includes(u),m=!r||r===2&&p||t.includes(i);return h._open=!!(a===42?f:f&&(r||!m)),h._close=!!(a===42?m:m&&(p||!f)),e(u)}}function uE(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const aP={name:"autolink",tokenize:oP};function oP(n,e,t){let i=0;return r;function r(y){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),a}function a(y){return ar(y)?(n.consume(y),l):y===64?t(y):h(y)}function l(y){return y===43||y===45||y===46||Yi(y)?(i=1,o(y)):h(y)}function o(y){return y===58?(n.consume(y),i=0,u):(y===43||y===45||y===46||Yi(y))&&i++<32?(n.consume(y),o):(i=0,h(y))}function u(y){return y===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.exit("autolink"),e):y===null||y===32||y===60||Xp(y)?t(y):(n.consume(y),u)}function h(y){return y===64?(n.consume(y),p):Xz(y)?(n.consume(y),h):t(y)}function p(y){return Yi(y)?f(y):t(y)}function f(y){return y===46?(n.consume(y),i=0,p):y===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(y),n.exit("autolinkMarker"),n.exit("autolink"),e):m(y)}function m(y){if((y===45||Yi(y))&&i++<63){const x=y===45?m:f;return n.consume(y),x}return t(y)}}const ud={partial:!0,tokenize:lP};function lP(n,e,t){return i;function i(a){return on(a)?fn(n,r,"linePrefix")(a):r(a)}function r(a){return a===null||Tt(a)?e(a):t(a)}}const W2={continuation:{tokenize:uP},exit:hP,name:"blockQuote",tokenize:cP};function cP(n,e,t){const i=this;return r;function r(l){if(l===62){const o=i.containerState;return o.open||(n.enter("blockQuote",{_container:!0}),o.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(l),n.exit("blockQuoteMarker"),a}return t(l)}function a(l){return on(l)?(n.enter("blockQuotePrefixWhitespace"),n.consume(l),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(l))}}function uP(n,e,t){const i=this;return r;function r(l){return on(l)?fn(n,a,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return n.attempt(W2,e,t)(l)}}function hP(n){n.exit("blockQuote")}const $2={name:"characterEscape",tokenize:dP};function dP(n,e,t){return i;function i(a){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(a),n.exit("escapeMarker"),r}function r(a){return Jz(a)?(n.enter("characterEscapeValue"),n.consume(a),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(a)}}const G2={name:"characterReference",tokenize:fP};function fP(n,e,t){const i=this;let r=0,a,l;return o;function o(f){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(f),n.exit("characterReferenceMarker"),u}function u(f){return f===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(f),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),a=31,l=Yi,p(f))}function h(f){return f===88||f===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(f),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),a=6,l=Zz,p):(n.enter("characterReferenceValue"),a=7,l=g0,p(f))}function p(f){if(f===59&&r){const m=n.exit("characterReferenceValue");return l===Yi&&!Ob(i.sliceSerialize(m))?t(f):(n.enter("characterReferenceMarker"),n.consume(f),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return l(f)&&r++<a?(n.consume(f),p):t(f)}}const hE={partial:!0,tokenize:mP},dE={concrete:!0,name:"codeFenced",tokenize:pP};function pP(n,e,t){const i=this,r={partial:!0,tokenize:R};let a=0,l=0,o;return u;function u(M){return h(M)}function h(M){const D=i.events[i.events.length-1];return a=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,o=M,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),p(M)}function p(M){return M===o?(l++,n.consume(M),p):l<3?t(M):(n.exit("codeFencedFenceSequence"),on(M)?fn(n,f,"whitespace")(M):f(M))}function f(M){return M===null||Tt(M)?(n.exit("codeFencedFence"),i.interrupt?e(M):n.check(hE,w,E)(M)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),m(M))}function m(M){return M===null||Tt(M)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),f(M)):on(M)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),fn(n,y,"whitespace")(M)):M===96&&M===o?t(M):(n.consume(M),m)}function y(M){return M===null||Tt(M)?f(M):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),x(M))}function x(M){return M===null||Tt(M)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),f(M)):M===96&&M===o?t(M):(n.consume(M),x)}function w(M){return n.attempt(r,E,S)(M)}function S(M){return n.enter("lineEnding"),n.consume(M),n.exit("lineEnding"),b}function b(M){return a>0&&on(M)?fn(n,v,"linePrefix",a+1)(M):v(M)}function v(M){return M===null||Tt(M)?n.check(hE,w,E)(M):(n.enter("codeFlowValue"),_(M))}function _(M){return M===null||Tt(M)?(n.exit("codeFlowValue"),v(M)):(n.consume(M),_)}function E(M){return n.exit("codeFenced"),e(M)}function R(M,D,O){let L=0;return j;function j(Q){return M.enter("lineEnding"),M.consume(Q),M.exit("lineEnding"),X}function X(Q){return M.enter("codeFencedFence"),on(Q)?fn(M,G,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):G(Q)}function G(Q){return Q===o?(M.enter("codeFencedFenceSequence"),H(Q)):O(Q)}function H(Q){return Q===o?(L++,M.consume(Q),H):L>=l?(M.exit("codeFencedFenceSequence"),on(Q)?fn(M,$,"whitespace")(Q):$(Q)):O(Q)}function $(Q){return Q===null||Tt(Q)?(M.exit("codeFencedFence"),D(Q)):O(Q)}}}function mP(n,e,t){const i=this;return r;function r(l){return l===null?t(l):(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),a)}function a(l){return i.parser.lazy[i.now().line]?t(l):e(l)}}const v_={name:"codeIndented",tokenize:yP},gP={partial:!0,tokenize:_P};function yP(n,e,t){const i=this;return r;function r(h){return n.enter("codeIndented"),fn(n,a,"linePrefix",5)(h)}function a(h){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?l(h):t(h)}function l(h){return h===null?u(h):Tt(h)?n.attempt(gP,l,u)(h):(n.enter("codeFlowValue"),o(h))}function o(h){return h===null||Tt(h)?(n.exit("codeFlowValue"),l(h)):(n.consume(h),o)}function u(h){return n.exit("codeIndented"),e(h)}}function _P(n,e,t){const i=this;return r;function r(l){return i.parser.lazy[i.now().line]?t(l):Tt(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),r):fn(n,a,"linePrefix",5)(l)}function a(l){const o=i.events[i.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(l):Tt(l)?r(l):t(l)}}const bP={name:"codeText",previous:xP,resolve:vP,tokenize:SP};function vP(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function xP(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function SP(n,e,t){let i=0,r,a;return l;function l(f){return n.enter("codeText"),n.enter("codeTextSequence"),o(f)}function o(f){return f===96?(n.consume(f),i++,o):(n.exit("codeTextSequence"),u(f))}function u(f){return f===null?t(f):f===32?(n.enter("space"),n.consume(f),n.exit("space"),u):f===96?(a=n.enter("codeTextSequence"),r=0,p(f)):Tt(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),u):(n.enter("codeTextData"),h(f))}function h(f){return f===null||f===32||f===96||Tt(f)?(n.exit("codeTextData"),u(f)):(n.consume(f),h)}function p(f){return f===96?(n.consume(f),r++,p):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(f)):(a.type="codeTextData",h(f))}}class wP{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Ah(this.left,i),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ah(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ah(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Ah(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ah(this.left,t.reverse())}}}function Ah(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function K2(n){const e={};let t=-1,i,r,a,l,o,u,h;const p=new wP(n);for(;++t<p.length;){for(;t in e;)t=e[t];if(i=p.get(t),t&&i[1].type==="chunkFlow"&&p.get(t-1)[1].type==="listItemPrefix"&&(u=i[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,EP(p,t)),t=e[t],h=!0);else if(i[1]._container){for(a=t,r=void 0;a--;)if(l=p.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(r&&(p.get(r)[1].type="lineEndingBlank"),l[1].type="lineEnding",r=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;r&&(i[1].end={...p.get(r)[1].start},o=p.slice(r,t),o.unshift(i),p.splice(r,t-r+1,o))}}return Lr(n,0,Number.POSITIVE_INFINITY,p.slice(0)),!h}function EP(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const a=[];let l=t._tokenizer;l||(l=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const o=l.events,u=[],h={};let p,f,m=-1,y=t,x=0,w=0;const S=[w];for(;y;){for(;n.get(++r)[1]!==y;);a.push(r),y._tokenizer||(p=i.sliceStream(y),y.next||p.push(null),f&&l.defineSkip(y.start),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(p),y._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),f=y,y=y.next}for(y=t;++m<o.length;)o[m][0]==="exit"&&o[m-1][0]==="enter"&&o[m][1].type===o[m-1][1].type&&o[m][1].start.line!==o[m][1].end.line&&(w=m+1,S.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(l.events=[],y?(y._tokenizer=void 0,y.previous=void 0):S.pop(),m=S.length;m--;){const b=o.slice(S[m],S[m+1]),v=a.pop();u.push([v,v+b.length-1]),n.splice(v,2,b)}for(u.reverse(),m=-1;++m<u.length;)h[x+u[m][0]]=x+u[m][1],x+=u[m][1]-u[m][0]-1;return h}const CP={resolve:TP,tokenize:kP},AP={partial:!0,tokenize:MP};function TP(n){return K2(n),n}function kP(n,e){let t;return i;function i(o){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?a(o):Tt(o)?n.check(AP,l,a)(o):(n.consume(o),r)}function a(o){return n.exit("chunkContent"),n.exit("content"),e(o)}function l(o){return n.consume(o),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function MP(n,e,t){const i=this;return r;function r(l){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),fn(n,a,"linePrefix")}function a(l){if(l===null||Tt(l))return t(l);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(l):n.interrupt(i.parser.constructs.flow,t,e)(l)}}function Y2(n,e,t,i,r,a,l,o,u){const h=u||Number.POSITIVE_INFINITY;let p=0;return f;function f(b){return b===60?(n.enter(i),n.enter(r),n.enter(a),n.consume(b),n.exit(a),m):b===null||b===32||b===41||Xp(b)?t(b):(n.enter(i),n.enter(l),n.enter(o),n.enter("chunkString",{contentType:"string"}),w(b))}function m(b){return b===62?(n.enter(a),n.consume(b),n.exit(a),n.exit(r),n.exit(i),e):(n.enter(o),n.enter("chunkString",{contentType:"string"}),y(b))}function y(b){return b===62?(n.exit("chunkString"),n.exit(o),m(b)):b===null||b===60||Tt(b)?t(b):(n.consume(b),b===92?x:y)}function x(b){return b===60||b===62||b===92?(n.consume(b),y):y(b)}function w(b){return!p&&(b===null||b===41||Fn(b))?(n.exit("chunkString"),n.exit(o),n.exit(l),n.exit(i),e(b)):p<h&&b===40?(n.consume(b),p++,w):b===41?(n.consume(b),p--,w):b===null||b===32||b===40||Xp(b)?t(b):(n.consume(b),b===92?S:w)}function S(b){return b===40||b===41||b===92?(n.consume(b),w):w(b)}}function X2(n,e,t,i,r,a){const l=this;let o=0,u;return h;function h(y){return n.enter(i),n.enter(r),n.consume(y),n.exit(r),n.enter(a),p}function p(y){return o>999||y===null||y===91||y===93&&!u||y===94&&!o&&"_hiddenFootnoteSupport"in l.parser.constructs?t(y):y===93?(n.exit(a),n.enter(r),n.consume(y),n.exit(r),n.exit(i),e):Tt(y)?(n.enter("lineEnding"),n.consume(y),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===null||y===91||y===93||Tt(y)||o++>999?(n.exit("chunkString"),p(y)):(n.consume(y),u||(u=!on(y)),y===92?m:f)}function m(y){return y===91||y===92||y===93?(n.consume(y),o++,f):f(y)}}function Z2(n,e,t,i,r,a){let l;return o;function o(m){return m===34||m===39||m===40?(n.enter(i),n.enter(r),n.consume(m),n.exit(r),l=m===40?41:m,u):t(m)}function u(m){return m===l?(n.enter(r),n.consume(m),n.exit(r),n.exit(i),e):(n.enter(a),h(m))}function h(m){return m===l?(n.exit(a),u(l)):m===null?t(m):Tt(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),fn(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(m))}function p(m){return m===l||m===null||Tt(m)?(n.exit("chunkString"),h(m)):(n.consume(m),m===92?f:p)}function f(m){return m===l||m===92?(n.consume(m),p):p(m)}}function Uh(n,e){let t;return i;function i(r){return Tt(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):on(r)?fn(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const RP={name:"definition",tokenize:NP},OP={partial:!0,tokenize:DP};function NP(n,e,t){const i=this;let r;return a;function a(y){return n.enter("definition"),l(y)}function l(y){return X2.call(i,n,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function o(y){return r=vs(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),y===58?(n.enter("definitionMarker"),n.consume(y),n.exit("definitionMarker"),u):t(y)}function u(y){return Fn(y)?Uh(n,h)(y):h(y)}function h(y){return Y2(n,p,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function p(y){return n.attempt(OP,f,f)(y)}function f(y){return on(y)?fn(n,m,"whitespace")(y):m(y)}function m(y){return y===null||Tt(y)?(n.exit("definition"),i.parser.defined.push(r),e(y)):t(y)}}function DP(n,e,t){return i;function i(o){return Fn(o)?Uh(n,r)(o):t(o)}function r(o){return Z2(n,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return on(o)?fn(n,l,"whitespace")(o):l(o)}function l(o){return o===null||Tt(o)?e(o):t(o)}}const IP={name:"hardBreakEscape",tokenize:LP};function LP(n,e,t){return i;function i(a){return n.enter("hardBreakEscape"),n.consume(a),r}function r(a){return Tt(a)?(n.exit("hardBreakEscape"),e(a)):t(a)}}const BP={name:"headingAtx",resolve:zP,tokenize:PP};function zP(n,e){let t=n.length-2,i=3,r,a;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},a={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},Lr(n,i,t-i+1,[["enter",r,e],["enter",a,e],["exit",a,e],["exit",r,e]])),n}function PP(n,e,t){let i=0;return r;function r(p){return n.enter("atxHeading"),a(p)}function a(p){return n.enter("atxHeadingSequence"),l(p)}function l(p){return p===35&&i++<6?(n.consume(p),l):p===null||Fn(p)?(n.exit("atxHeadingSequence"),o(p)):t(p)}function o(p){return p===35?(n.enter("atxHeadingSequence"),u(p)):p===null||Tt(p)?(n.exit("atxHeading"),e(p)):on(p)?fn(n,o,"whitespace")(p):(n.enter("atxHeadingText"),h(p))}function u(p){return p===35?(n.consume(p),u):(n.exit("atxHeadingSequence"),o(p))}function h(p){return p===null||p===35||Fn(p)?(n.exit("atxHeadingText"),o(p)):(n.consume(p),h)}}const FP=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fE=["pre","script","style","textarea"],UP={concrete:!0,name:"htmlFlow",resolveTo:qP,tokenize:VP},jP={partial:!0,tokenize:$P},HP={partial:!0,tokenize:WP};function qP(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function VP(n,e,t){const i=this;let r,a,l,o,u;return h;function h(V){return p(V)}function p(V){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(V),f}function f(V){return V===33?(n.consume(V),m):V===47?(n.consume(V),a=!0,w):V===63?(n.consume(V),r=3,i.interrupt?e:B):ar(V)?(n.consume(V),l=String.fromCharCode(V),S):t(V)}function m(V){return V===45?(n.consume(V),r=2,y):V===91?(n.consume(V),r=5,o=0,x):ar(V)?(n.consume(V),r=4,i.interrupt?e:B):t(V)}function y(V){return V===45?(n.consume(V),i.interrupt?e:B):t(V)}function x(V){const _e="CDATA[";return V===_e.charCodeAt(o++)?(n.consume(V),o===_e.length?i.interrupt?e:G:x):t(V)}function w(V){return ar(V)?(n.consume(V),l=String.fromCharCode(V),S):t(V)}function S(V){if(V===null||V===47||V===62||Fn(V)){const _e=V===47,we=l.toLowerCase();return!_e&&!a&&fE.includes(we)?(r=1,i.interrupt?e(V):G(V)):FP.includes(l.toLowerCase())?(r=6,_e?(n.consume(V),b):i.interrupt?e(V):G(V)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(V):a?v(V):_(V))}return V===45||Yi(V)?(n.consume(V),l+=String.fromCharCode(V),S):t(V)}function b(V){return V===62?(n.consume(V),i.interrupt?e:G):t(V)}function v(V){return on(V)?(n.consume(V),v):j(V)}function _(V){return V===47?(n.consume(V),j):V===58||V===95||ar(V)?(n.consume(V),E):on(V)?(n.consume(V),_):j(V)}function E(V){return V===45||V===46||V===58||V===95||Yi(V)?(n.consume(V),E):R(V)}function R(V){return V===61?(n.consume(V),M):on(V)?(n.consume(V),R):_(V)}function M(V){return V===null||V===60||V===61||V===62||V===96?t(V):V===34||V===39?(n.consume(V),u=V,D):on(V)?(n.consume(V),M):O(V)}function D(V){return V===u?(n.consume(V),u=null,L):V===null||Tt(V)?t(V):(n.consume(V),D)}function O(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Fn(V)?R(V):(n.consume(V),O)}function L(V){return V===47||V===62||on(V)?_(V):t(V)}function j(V){return V===62?(n.consume(V),X):t(V)}function X(V){return V===null||Tt(V)?G(V):on(V)?(n.consume(V),X):t(V)}function G(V){return V===45&&r===2?(n.consume(V),Y):V===60&&r===1?(n.consume(V),te):V===62&&r===4?(n.consume(V),P):V===63&&r===3?(n.consume(V),B):V===93&&r===5?(n.consume(V),U):Tt(V)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(jP,Z,H)(V)):V===null||Tt(V)?(n.exit("htmlFlowData"),H(V)):(n.consume(V),G)}function H(V){return n.check(HP,$,Z)(V)}function $(V){return n.enter("lineEnding"),n.consume(V),n.exit("lineEnding"),Q}function Q(V){return V===null||Tt(V)?H(V):(n.enter("htmlFlowData"),G(V))}function Y(V){return V===45?(n.consume(V),B):G(V)}function te(V){return V===47?(n.consume(V),l="",re):G(V)}function re(V){if(V===62){const _e=l.toLowerCase();return fE.includes(_e)?(n.consume(V),P):G(V)}return ar(V)&&l.length<8?(n.consume(V),l+=String.fromCharCode(V),re):G(V)}function U(V){return V===93?(n.consume(V),B):G(V)}function B(V){return V===62?(n.consume(V),P):V===45&&r===2?(n.consume(V),B):G(V)}function P(V){return V===null||Tt(V)?(n.exit("htmlFlowData"),Z(V)):(n.consume(V),P)}function Z(V){return n.exit("htmlFlow"),e(V)}}function WP(n,e,t){const i=this;return r;function r(l){return Tt(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),a):t(l)}function a(l){return i.parser.lazy[i.now().line]?t(l):e(l)}}function $P(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(ud,e,t)}}const GP={name:"htmlText",tokenize:KP};function KP(n,e,t){const i=this;let r,a,l;return o;function o(B){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(B),u}function u(B){return B===33?(n.consume(B),h):B===47?(n.consume(B),R):B===63?(n.consume(B),_):ar(B)?(n.consume(B),O):t(B)}function h(B){return B===45?(n.consume(B),p):B===91?(n.consume(B),a=0,x):ar(B)?(n.consume(B),v):t(B)}function p(B){return B===45?(n.consume(B),y):t(B)}function f(B){return B===null?t(B):B===45?(n.consume(B),m):Tt(B)?(l=f,te(B)):(n.consume(B),f)}function m(B){return B===45?(n.consume(B),y):f(B)}function y(B){return B===62?Y(B):B===45?m(B):f(B)}function x(B){const P="CDATA[";return B===P.charCodeAt(a++)?(n.consume(B),a===P.length?w:x):t(B)}function w(B){return B===null?t(B):B===93?(n.consume(B),S):Tt(B)?(l=w,te(B)):(n.consume(B),w)}function S(B){return B===93?(n.consume(B),b):w(B)}function b(B){return B===62?Y(B):B===93?(n.consume(B),b):w(B)}function v(B){return B===null||B===62?Y(B):Tt(B)?(l=v,te(B)):(n.consume(B),v)}function _(B){return B===null?t(B):B===63?(n.consume(B),E):Tt(B)?(l=_,te(B)):(n.consume(B),_)}function E(B){return B===62?Y(B):_(B)}function R(B){return ar(B)?(n.consume(B),M):t(B)}function M(B){return B===45||Yi(B)?(n.consume(B),M):D(B)}function D(B){return Tt(B)?(l=D,te(B)):on(B)?(n.consume(B),D):Y(B)}function O(B){return B===45||Yi(B)?(n.consume(B),O):B===47||B===62||Fn(B)?L(B):t(B)}function L(B){return B===47?(n.consume(B),Y):B===58||B===95||ar(B)?(n.consume(B),j):Tt(B)?(l=L,te(B)):on(B)?(n.consume(B),L):Y(B)}function j(B){return B===45||B===46||B===58||B===95||Yi(B)?(n.consume(B),j):X(B)}function X(B){return B===61?(n.consume(B),G):Tt(B)?(l=X,te(B)):on(B)?(n.consume(B),X):L(B)}function G(B){return B===null||B===60||B===61||B===62||B===96?t(B):B===34||B===39?(n.consume(B),r=B,H):Tt(B)?(l=G,te(B)):on(B)?(n.consume(B),G):(n.consume(B),$)}function H(B){return B===r?(n.consume(B),r=void 0,Q):B===null?t(B):Tt(B)?(l=H,te(B)):(n.consume(B),H)}function $(B){return B===null||B===34||B===39||B===60||B===61||B===96?t(B):B===47||B===62||Fn(B)?L(B):(n.consume(B),$)}function Q(B){return B===47||B===62||Fn(B)?L(B):t(B)}function Y(B){return B===62?(n.consume(B),n.exit("htmlTextData"),n.exit("htmlText"),e):t(B)}function te(B){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(B),n.exit("lineEnding"),re}function re(B){return on(B)?fn(n,U,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):U(B)}function U(B){return n.enter("htmlTextData"),l(B)}}const Nb={name:"labelEnd",resolveAll:JP,resolveTo:QP,tokenize:e8},YP={tokenize:t8},XP={tokenize:n8},ZP={tokenize:i8};function JP(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&Lr(n,0,n.length,t),n}function QP(n,e){let t=n.length,i=0,r,a,l,o;for(;t--;)if(r=n[t][1],a){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(l){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(a=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(l=t);const u={type:n[a][1].type==="labelLink"?"link":"image",start:{...n[a][1].start},end:{...n[n.length-1][1].end}},h={type:"label",start:{...n[a][1].start},end:{...n[l][1].end}},p={type:"labelText",start:{...n[a+i+2][1].end},end:{...n[l-2][1].start}};return o=[["enter",u,e],["enter",h,e]],o=es(o,n.slice(a+1,a+i+3)),o=es(o,[["enter",p,e]]),o=es(o,bm(e.parser.constructs.insideSpan.null,n.slice(a+i+4,l-3),e)),o=es(o,[["exit",p,e],n[l-2],n[l-1],["exit",h,e]]),o=es(o,n.slice(l+1)),o=es(o,[["exit",u,e]]),Lr(n,a,n.length,o),n}function e8(n,e,t){const i=this;let r=i.events.length,a,l;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){a=i.events[r][1];break}return o;function o(m){return a?a._inactive?f(m):(l=i.parser.defined.includes(vs(i.sliceSerialize({start:a.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(m),n.exit("labelMarker"),n.exit("labelEnd"),u):t(m)}function u(m){return m===40?n.attempt(YP,p,l?p:f)(m):m===91?n.attempt(XP,p,l?h:f)(m):l?p(m):f(m)}function h(m){return n.attempt(ZP,p,f)(m)}function p(m){return e(m)}function f(m){return a._balanced=!0,t(m)}}function t8(n,e,t){return i;function i(f){return n.enter("resource"),n.enter("resourceMarker"),n.consume(f),n.exit("resourceMarker"),r}function r(f){return Fn(f)?Uh(n,a)(f):a(f)}function a(f){return f===41?p(f):Y2(n,l,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function l(f){return Fn(f)?Uh(n,u)(f):p(f)}function o(f){return t(f)}function u(f){return f===34||f===39||f===40?Z2(n,h,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):p(f)}function h(f){return Fn(f)?Uh(n,p)(f):p(f)}function p(f){return f===41?(n.enter("resourceMarker"),n.consume(f),n.exit("resourceMarker"),n.exit("resource"),e):t(f)}}function n8(n,e,t){const i=this;return r;function r(o){return X2.call(i,n,a,l,"reference","referenceMarker","referenceString")(o)}function a(o){return i.parser.defined.includes(vs(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(o):t(o)}function l(o){return t(o)}}function i8(n,e,t){return i;function i(a){return n.enter("reference"),n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),r}function r(a){return a===93?(n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),n.exit("reference"),e):t(a)}}const r8={name:"labelStartImage",resolveAll:Nb.resolveAll,tokenize:s8};function s8(n,e,t){const i=this;return r;function r(o){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(o),n.exit("labelImageMarker"),a}function a(o){return o===91?(n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelImage"),l):t(o)}function l(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(o):e(o)}}const a8={name:"labelStartLink",resolveAll:Nb.resolveAll,tokenize:o8};function o8(n,e,t){const i=this;return r;function r(l){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(l),n.exit("labelMarker"),n.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(l):e(l)}}const x_={name:"lineEnding",tokenize:l8};function l8(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),fn(n,e,"linePrefix")}}const Np={name:"thematicBreak",tokenize:c8};function c8(n,e,t){let i=0,r;return a;function a(h){return n.enter("thematicBreak"),l(h)}function l(h){return r=h,o(h)}function o(h){return h===r?(n.enter("thematicBreakSequence"),u(h)):i>=3&&(h===null||Tt(h))?(n.exit("thematicBreak"),e(h)):t(h)}function u(h){return h===r?(n.consume(h),i++,u):(n.exit("thematicBreakSequence"),on(h)?fn(n,o,"whitespace")(h):o(h))}}const _r={continuation:{tokenize:f8},exit:m8,name:"list",tokenize:d8},u8={partial:!0,tokenize:g8},h8={partial:!0,tokenize:p8};function d8(n,e,t){const i=this,r=i.events[i.events.length-1];let a=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,l=0;return o;function o(y){const x=i.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!i.containerState.marker||y===i.containerState.marker:g0(y)){if(i.containerState.type||(i.containerState.type=x,n.enter(x,{_container:!0})),x==="listUnordered")return n.enter("listItemPrefix"),y===42||y===45?n.check(Np,t,h)(y):h(y);if(!i.interrupt||y===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),u(y)}return t(y)}function u(y){return g0(y)&&++l<10?(n.consume(y),u):(!i.interrupt||l<2)&&(i.containerState.marker?y===i.containerState.marker:y===41||y===46)?(n.exit("listItemValue"),h(y)):t(y)}function h(y){return n.enter("listItemMarker"),n.consume(y),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||y,n.check(ud,i.interrupt?t:p,n.attempt(u8,m,f))}function p(y){return i.containerState.initialBlankLine=!0,a++,m(y)}function f(y){return on(y)?(n.enter("listItemPrefixWhitespace"),n.consume(y),n.exit("listItemPrefixWhitespace"),m):t(y)}function m(y){return i.containerState.size=a+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(y)}}function f8(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(ud,r,a);function r(o){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,fn(n,e,"listItemIndent",i.containerState.size+1)(o)}function a(o){return i.containerState.furtherBlankLines||!on(o)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,l(o)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(h8,e,l)(o))}function l(o){return i.containerState._closeFlow=!0,i.interrupt=void 0,fn(n,n.attempt(_r,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function p8(n,e,t){const i=this;return fn(n,r,"listItemIndent",i.containerState.size+1);function r(a){const l=i.events[i.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===i.containerState.size?e(a):t(a)}}function m8(n){n.exit(this.containerState.type)}function g8(n,e,t){const i=this;return fn(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(a){const l=i.events[i.events.length-1];return!on(a)&&l&&l[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const pE={name:"setextUnderline",resolveTo:y8,tokenize:_8};function y8(n,e){let t=n.length,i,r,a;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!a&&n[t][1].type==="definition"&&(a=t);const l={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",a?(n.splice(r,0,["enter",l,e]),n.splice(a+1,0,["exit",n[i][1],e]),n[i][1].end={...n[a][1].end}):n[i][1]=l,n.push(["exit",l,e]),n}function _8(n,e,t){const i=this;let r;return a;function a(h){let p=i.events.length,f;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){f=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||f)?(n.enter("setextHeadingLine"),r=h,l(h)):t(h)}function l(h){return n.enter("setextHeadingLineSequence"),o(h)}function o(h){return h===r?(n.consume(h),o):(n.exit("setextHeadingLineSequence"),on(h)?fn(n,u,"lineSuffix")(h):u(h))}function u(h){return h===null||Tt(h)?(n.exit("setextHeadingLine"),e(h)):t(h)}}const b8={tokenize:v8};function v8(n){const e=this,t=n.attempt(ud,i,n.attempt(this.parser.constructs.flowInitial,r,fn(n,n.attempt(this.parser.constructs.flow,r,n.attempt(CP,r)),"linePrefix")));return t;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEndingBlank"),n.consume(a),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const x8={resolveAll:Q2()},S8=J2("string"),w8=J2("text");function J2(n){return{resolveAll:Q2(n==="text"?E8:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],a=t.attempt(r,l,o);return l;function l(p){return h(p)?a(p):o(p)}function o(p){if(p===null){t.consume(p);return}return t.enter("data"),t.consume(p),u}function u(p){return h(p)?(t.exit("data"),a(p)):(t.consume(p),u)}function h(p){if(p===null)return!0;const f=r[p];let m=-1;if(f)for(;++m<f.length;){const y=f[m];if(!y.previous||y.previous.call(i,i.previous))return!0}return!1}}}function Q2(n){return e;function e(t,i){let r=-1,a;for(;++r<=t.length;)a===void 0?t[r]&&t[r][1].type==="data"&&(a=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==a+2&&(t[a][1].end=t[r-1][1].end,t.splice(a+2,r-a-2),r=a+2),a=void 0);return n?n(t,i):t}}function E8(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let a=r.length,l=-1,o=0,u;for(;a--;){const h=r[a];if(typeof h=="string"){for(l=h.length;h.charCodeAt(l-1)===32;)o++,l--;if(l)break;l=-1}else if(h===-2)u=!0,o++;else if(h!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(o=0),o){const h={type:t===n.length||u||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:i.start._bufferIndex+l,_index:i.start._index+a,line:i.end.line,column:i.end.column-o,offset:i.end.offset-o},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(n.splice(t,0,["enter",h,e],["exit",h,e]),t+=2)}t++}return n}const C8={42:_r,43:_r,45:_r,48:_r,49:_r,50:_r,51:_r,52:_r,53:_r,54:_r,55:_r,56:_r,57:_r,62:W2},A8={91:RP},T8={[-2]:v_,[-1]:v_,32:v_},k8={35:BP,42:Np,45:[pE,Np],60:UP,61:pE,95:Np,96:dE,126:dE},M8={38:G2,92:$2},R8={[-5]:x_,[-4]:x_,[-3]:x_,33:r8,38:G2,42:y0,60:[aP,GP],91:a8,92:[IP,$2],93:Nb,95:y0,96:bP},O8={null:[y0,x8]},N8={null:[42,95]},D8={null:[]},I8=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:N8,contentInitial:A8,disable:D8,document:C8,flow:k8,flowInitial:T8,insideSpan:O8,string:M8,text:R8},Symbol.toStringTag,{value:"Module"}));function L8(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},a=[];let l=[],o=[];const u={attempt:D(R),check:D(M),consume:v,enter:_,exit:E,interrupt:D(M,{interrupt:!0})},h={code:null,containerState:{},defineSkip:w,events:[],now:x,parser:n,previous:null,sliceSerialize:m,sliceStream:y,write:f};let p=e.tokenize.call(h,u);return e.resolveAll&&a.push(e),h;function f(X){return l=es(l,X),S(),l[l.length-1]!==null?[]:(O(e,0),h.events=bm(a,h.events,h),h.events)}function m(X,G){return z8(y(X),G)}function y(X){return B8(l,X)}function x(){const{_bufferIndex:X,_index:G,line:H,column:$,offset:Q}=i;return{_bufferIndex:X,_index:G,line:H,column:$,offset:Q}}function w(X){r[X.line]=X.column,j()}function S(){let X;for(;i._index<l.length;){const G=l[i._index];if(typeof G=="string")for(X=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===X&&i._bufferIndex<G.length;)b(G.charCodeAt(i._bufferIndex));else b(G)}}function b(X){p=p(X)}function v(X){Tt(X)?(i.line++,i.column=1,i.offset+=X===-3?2:1,j()):X!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===l[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=X}function _(X,G){const H=G||{};return H.type=X,H.start=x(),h.events.push(["enter",H,h]),o.push(H),H}function E(X){const G=o.pop();return G.end=x(),h.events.push(["exit",G,h]),G}function R(X,G){O(X,G.from)}function M(X,G){G.restore()}function D(X,G){return H;function H($,Q,Y){let te,re,U,B;return Array.isArray($)?Z($):"tokenize"in $?Z([$]):P($);function P(De){return le;function le(ee){const Me=ee!==null&&De[ee],xe=ee!==null&&De.null,Ze=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return Z(Ze)(ee)}}function Z(De){return te=De,re=0,De.length===0?Y:V(De[re])}function V(De){return le;function le(ee){return B=L(),U=De,De.partial||(h.currentConstruct=De),De.name&&h.parser.constructs.disable.null.includes(De.name)?we():De.tokenize.call(G?Object.assign(Object.create(h),G):h,u,_e,we)(ee)}}function _e(De){return X(U,B),Q}function we(De){return B.restore(),++re<te.length?V(te[re]):Y}}}function O(X,G){X.resolveAll&&!a.includes(X)&&a.push(X),X.resolve&&Lr(h.events,G,h.events.length-G,X.resolve(h.events.slice(G),h)),X.resolveTo&&(h.events=X.resolveTo(h.events,h))}function L(){const X=x(),G=h.previous,H=h.currentConstruct,$=h.events.length,Q=Array.from(o);return{from:$,restore:Y};function Y(){i=X,h.previous=G,h.currentConstruct=H,h.events.length=$,o=Q,j()}}function j(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function B8(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,a=e.end._bufferIndex;let l;if(t===r)l=[n[t].slice(i,a)];else{if(l=n.slice(t,r),i>-1){const o=l[0];typeof o=="string"?l[0]=o.slice(i):l.shift()}a>0&&l.push(n[r].slice(0,a))}return l}function z8(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const a=n[t];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=e?" ":"	";break}case-1:{if(!e&&r)continue;l=" ";break}default:l=String.fromCharCode(a)}r=a===-2,i.push(l)}return i.join("")}function P8(n){const i={constructs:q2([I8,...(n||{}).extensions||[]]),content:r(Qz),defined:[],document:r(tP),flow:r(b8),lazy:{},string:r(S8),text:r(w8)};return i;function r(a){return l;function l(o){return L8(i,a,o)}}}function F8(n){for(;!K2(n););return n}const mE=/[\0\t\n\r]/g;function U8(){let n=1,e="",t=!0,i;return r;function r(a,l,o){const u=[];let h,p,f,m,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),f=0,e="",t&&(a.charCodeAt(0)===65279&&f++,t=void 0);f<a.length;){if(mE.lastIndex=f,h=mE.exec(a),m=h&&h.index!==void 0?h.index:a.length,y=a.charCodeAt(m),!h){e=a.slice(f);break}if(y===10&&f===m&&i)u.push(-3),i=void 0;else switch(i&&(u.push(-5),i=void 0),f<m&&(u.push(a.slice(f,m)),n+=m-f),y){case 0:{u.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,u.push(-2);n++<p;)u.push(-1);break}case 10:{u.push(-4),n=1;break}default:i=!0,n=1}f=m+1}return o&&(i&&u.push(-5),e&&u.push(e),u.push(null)),u}}const j8=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function H8(n){return n.replace(j8,q8)}function q8(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),a=r===120||r===88;return V2(t.slice(a?2:1),a?16:10)}return Ob(t)||n}const eA={}.hasOwnProperty;function V8(n,e,t){return e&&typeof e=="object"&&(t=e,e=void 0),W8(t)(F8(P8(t).document().write(U8()(n,e,!0))))}function W8(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Rt),autolinkProtocol:L,autolinkEmail:L,atxHeading:a(je),blockQuote:a(xe),characterEscape:L,characterReference:L,codeFenced:a(Ze),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Ze,l),codeText:a(Le,l),codeTextData:L,data:L,codeFlowValue:L,definition:a(_t),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(Pe),hardBreakEscape:a(ze),hardBreakTrailing:a(ze),htmlFlow:a(Ue,l),htmlFlowData:L,htmlText:a(Ue,l),htmlTextData:L,image:a(st),label:l,link:a(Rt),listItem:a(Dt),listItemValue:m,listOrdered:a(bt,f),listUnordered:a(bt),paragraph:a(rn),reference:V,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(je),strong:a(Ut),thematicBreak:a(wn)},exit:{atxHeading:u(),atxHeadingSequence:R,autolink:u(),autolinkEmail:Me,autolinkProtocol:ee,blockQuote:u(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:we,characterReferenceMarkerNumeric:we,characterReferenceValue:De,characterReference:le,codeFenced:u(S),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:x,codeFlowValue:j,codeIndented:u(b),codeText:u(Q),codeTextData:j,data:j,definition:u(),definitionDestinationString:E,definitionLabelString:v,definitionTitleString:_,emphasis:u(),hardBreakEscape:u(G),hardBreakTrailing:u(G),htmlFlow:u(H),htmlFlowData:j,htmlText:u($),htmlTextData:j,image:u(te),label:U,labelText:re,lineEnding:X,link:u(Y),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:_e,resourceDestinationString:B,resourceTitleString:P,resource:Z,setextHeading:u(O),setextHeadingLineSequence:D,setextHeadingText:M,strong:u(),thematicBreak:u()}};tA(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(Ee){let He={type:"root",children:[]};const dt={stack:[He],tokenStack:[],config:e,enter:o,exit:h,buffer:l,resume:p,data:t},St=[];let It=-1;for(;++It<Ee.length;)if(Ee[It][1].type==="listOrdered"||Ee[It][1].type==="listUnordered")if(Ee[It][0]==="enter")St.push(It);else{const On=St.pop();It=r(Ee,On,It)}for(It=-1;++It<Ee.length;){const On=e[Ee[It][0]];eA.call(On,Ee[It][1].type)&&On[Ee[It][1].type].call(Object.assign({sliceSerialize:Ee[It][2].sliceSerialize},dt),Ee[It][1])}if(dt.tokenStack.length>0){const On=dt.tokenStack[dt.tokenStack.length-1];(On[1]||gE).call(dt,void 0,On[0])}for(He.position={start:Ro(Ee.length>0?Ee[0][1].start:{line:1,column:1,offset:0}),end:Ro(Ee.length>0?Ee[Ee.length-2][1].end:{line:1,column:1,offset:0})},It=-1;++It<e.transforms.length;)He=e.transforms[It](He)||He;return He}function r(Ee,He,dt){let St=He-1,It=-1,On=!1,zt,zn,Un,qn;for(;++St<=dt;){const Je=Ee[St];switch(Je[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Je[0]==="enter"?It++:It--,qn=void 0;break}case"lineEndingBlank":{Je[0]==="enter"&&(zt&&!qn&&!It&&!Un&&(Un=St),qn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:qn=void 0}if(!It&&Je[0]==="enter"&&Je[1].type==="listItemPrefix"||It===-1&&Je[0]==="exit"&&(Je[1].type==="listUnordered"||Je[1].type==="listOrdered")){if(zt){let Fi=St;for(zn=void 0;Fi--;){const Zn=Ee[Fi];if(Zn[1].type==="lineEnding"||Zn[1].type==="lineEndingBlank"){if(Zn[0]==="exit")continue;zn&&(Ee[zn][1].type="lineEndingBlank",On=!0),Zn[1].type="lineEnding",zn=Fi}else if(!(Zn[1].type==="linePrefix"||Zn[1].type==="blockQuotePrefix"||Zn[1].type==="blockQuotePrefixWhitespace"||Zn[1].type==="blockQuoteMarker"||Zn[1].type==="listItemIndent"))break}Un&&(!zn||Un<zn)&&(zt._spread=!0),zt.end=Object.assign({},zn?Ee[zn][1].start:Je[1].end),Ee.splice(zn||St,0,["exit",zt,Je[2]]),St++,dt++}if(Je[1].type==="listItemPrefix"){const Fi={type:"listItem",_spread:!1,start:Object.assign({},Je[1].start),end:void 0};zt=Fi,Ee.splice(St,0,["enter",Fi,Je[2]]),St++,dt++,Un=void 0,qn=!0}}}return Ee[He][1]._spread=On,dt}function a(Ee,He){return dt;function dt(St){o.call(this,Ee(St),St),He&&He.call(this,St)}}function l(){this.stack.push({type:"fragment",children:[]})}function o(Ee,He,dt){this.stack[this.stack.length-1].children.push(Ee),this.stack.push(Ee),this.tokenStack.push([He,dt||void 0]),Ee.position={start:Ro(He.start),end:void 0}}function u(Ee){return He;function He(dt){Ee&&Ee.call(this,dt),h.call(this,dt)}}function h(Ee,He){const dt=this.stack.pop(),St=this.tokenStack.pop();if(St)St[0].type!==Ee.type&&(He?He.call(this,Ee,St[0]):(St[1]||gE).call(this,Ee,St[0]));else throw new Error("Cannot close `"+Ee.type+"` ("+Fh({start:Ee.start,end:Ee.end})+"): its not open");dt.position.end=Ro(Ee.end)}function p(){return Rb(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(Ee){if(this.data.expectingFirstListItemValue){const He=this.stack[this.stack.length-2];He.start=Number.parseInt(this.sliceSerialize(Ee),10),this.data.expectingFirstListItemValue=void 0}}function y(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.lang=Ee}function x(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.meta=Ee}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.value=Ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.value=Ee.replace(/(\r?\n|\r)$/g,"")}function v(Ee){const He=this.resume(),dt=this.stack[this.stack.length-1];dt.label=He,dt.identifier=vs(this.sliceSerialize(Ee)).toLowerCase()}function _(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.title=Ee}function E(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.url=Ee}function R(Ee){const He=this.stack[this.stack.length-1];if(!He.depth){const dt=this.sliceSerialize(Ee).length;He.depth=dt}}function M(){this.data.setextHeadingSlurpLineEnding=!0}function D(Ee){const He=this.stack[this.stack.length-1];He.depth=this.sliceSerialize(Ee).codePointAt(0)===61?1:2}function O(){this.data.setextHeadingSlurpLineEnding=void 0}function L(Ee){const dt=this.stack[this.stack.length-1].children;let St=dt[dt.length-1];(!St||St.type!=="text")&&(St=Bt(),St.position={start:Ro(Ee.start),end:void 0},dt.push(St)),this.stack.push(St)}function j(Ee){const He=this.stack.pop();He.value+=this.sliceSerialize(Ee),He.position.end=Ro(Ee.end)}function X(Ee){const He=this.stack[this.stack.length-1];if(this.data.atHardBreak){const dt=He.children[He.children.length-1];dt.position.end=Ro(Ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(He.type)&&(L.call(this,Ee),j.call(this,Ee))}function G(){this.data.atHardBreak=!0}function H(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.value=Ee}function $(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.value=Ee}function Q(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.value=Ee}function Y(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const He=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=He,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function te(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const He=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=He,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function re(Ee){const He=this.sliceSerialize(Ee),dt=this.stack[this.stack.length-2];dt.label=H8(He),dt.identifier=vs(He).toLowerCase()}function U(){const Ee=this.stack[this.stack.length-1],He=this.resume(),dt=this.stack[this.stack.length-1];if(this.data.inReference=!0,dt.type==="link"){const St=Ee.children;dt.children=St}else dt.alt=He}function B(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.url=Ee}function P(){const Ee=this.resume(),He=this.stack[this.stack.length-1];He.title=Ee}function Z(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function _e(Ee){const He=this.resume(),dt=this.stack[this.stack.length-1];dt.label=He,dt.identifier=vs(this.sliceSerialize(Ee)).toLowerCase(),this.data.referenceType="full"}function we(Ee){this.data.characterReferenceType=Ee.type}function De(Ee){const He=this.sliceSerialize(Ee),dt=this.data.characterReferenceType;let St;dt?(St=V2(He,dt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):St=Ob(He);const It=this.stack[this.stack.length-1];It.value+=St}function le(Ee){const He=this.stack.pop();He.position.end=Ro(Ee.end)}function ee(Ee){j.call(this,Ee);const He=this.stack[this.stack.length-1];He.url=this.sliceSerialize(Ee)}function Me(Ee){j.call(this,Ee);const He=this.stack[this.stack.length-1];He.url="mailto:"+this.sliceSerialize(Ee)}function xe(){return{type:"blockquote",children:[]}}function Ze(){return{type:"code",lang:null,meta:null,value:""}}function Le(){return{type:"inlineCode",value:""}}function _t(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Pe(){return{type:"emphasis",children:[]}}function je(){return{type:"heading",depth:0,children:[]}}function ze(){return{type:"break"}}function Ue(){return{type:"html",value:""}}function st(){return{type:"image",title:null,url:"",alt:null}}function Rt(){return{type:"link",title:null,url:"",children:[]}}function bt(Ee){return{type:"list",ordered:Ee.type==="listOrdered",start:null,spread:Ee._spread,children:[]}}function Dt(Ee){return{type:"listItem",spread:Ee._spread,checked:null,children:[]}}function rn(){return{type:"paragraph",children:[]}}function Ut(){return{type:"strong",children:[]}}function Bt(){return{type:"text",value:""}}function wn(){return{type:"thematicBreak"}}}function Ro(n){return{line:n.line,column:n.column,offset:n.offset}}function tA(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?tA(n,i):$8(n,i)}}function $8(n,e){let t;for(t in e)if(eA.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function gE(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Fh({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Fh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Fh({start:e.start,end:e.end})+") is still open")}function G8(n){const e=this;e.parser=t;function t(i){return V8(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function K8(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function Y8(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function X8(n,e){const t=e.value?e.value+`
`:"",i={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let a={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(a.data={meta:e.meta}),n.patch(e,a),a=n.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},n.patch(e,a),a}function Z8(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function J8(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Q8(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=mu(i.toLowerCase()),a=n.footnoteOrder.indexOf(i);let l,o=n.footnoteCounts.get(i);o===void 0?(o=0,n.footnoteOrder.push(i),l=n.footnoteOrder.length):l=a+1,o+=1,n.footnoteCounts.set(i,o);const u={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};n.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return n.patch(e,h),n.applyData(e,h)}function eF(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function tF(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function nA(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),a=r[0];a&&a.type==="text"?a.value="["+a.value:r.unshift({type:"text",value:"["});const l=r[r.length-1];return l&&l.type==="text"?l.value+=i:r.push({type:"text",value:i}),r}function nF(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return nA(n,e);const r={src:mu(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const a={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,a),n.applyData(e,a)}function iF(n,e){const t={src:mu(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function rF(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function sF(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return nA(n,e);const r={href:mu(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const a={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,a),n.applyData(e,a)}function aF(n,e){const t={href:mu(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function oF(n,e,t){const i=n.all(e),r=t?lF(t):iA(e),a={},l=[];if(typeof e.checked=="boolean"){const p=i[0];let f;p&&p.type==="element"&&p.tagName==="p"?f=p:(f={type:"element",tagName:"p",properties:{},children:[]},i.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<i.length;){const p=i[o];(r||o!==0||p.type!=="element"||p.tagName!=="p")&&l.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!r?l.push(...p.children):l.push(p)}const u=i[i.length-1];u&&(r||u.type!=="element"||u.tagName!=="p")&&l.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:a,children:l};return n.patch(e,h),n.applyData(e,h)}function lF(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=iA(t[i])}return e}function iA(n){const e=n.spread;return e??n.children.length>1}function cF(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const l=i[r];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,a),n.applyData(e,a)}function uF(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function hF(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function dF(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function fF(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const l={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],l),r.push(l)}if(t.length>0){const l={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},o=Ab(e.children[1]),u=B2(e.children[e.children.length-1]);o&&u&&(l.position={start:o,end:u}),r.push(l)}const a={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,a),n.applyData(e,a)}function pF(n,e,t){const i=t?t.children:void 0,a=(i?i.indexOf(e):1)===0?"th":"td",l=t&&t.type==="table"?t.align:void 0,o=l?l.length:e.children.length;let u=-1;const h=[];for(;++u<o;){const f=e.children[u],m={},y=l?l[u]:void 0;y&&(m.align=y);let x={type:"element",tagName:a,properties:m,children:[]};f&&(x.children=n.all(f),n.patch(f,x),x=n.applyData(f,x)),h.push(x)}const p={type:"element",tagName:"tr",properties:{},children:n.wrap(h,!0)};return n.patch(e,p),n.applyData(e,p)}function mF(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const yE=9,_E=32;function gF(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const a=[];for(;i;)a.push(bE(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return a.push(bE(e.slice(r),r>0,!1)),a.join("")}function bE(n,e,t){let i=0,r=n.length;if(e){let a=n.codePointAt(i);for(;a===yE||a===_E;)i++,a=n.codePointAt(i)}if(t){let a=n.codePointAt(r-1);for(;a===yE||a===_E;)r--,a=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function yF(n,e){const t={type:"text",value:gF(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function _F(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const bF={blockquote:K8,break:Y8,code:X8,delete:Z8,emphasis:J8,footnoteReference:Q8,heading:eF,html:tF,imageReference:nF,image:iF,inlineCode:rF,linkReference:sF,link:aF,listItem:oF,list:cF,paragraph:uF,root:hF,strong:dF,table:fF,tableCell:mF,tableRow:pF,text:yF,thematicBreak:_F,toml:gp,yaml:gp,definition:gp,footnoteDefinition:gp};function gp(){}const rA=-1,vm=0,jh=1,Zp=2,Db=3,Ib=4,Lb=5,Bb=6,sA=7,aA=8,vE=typeof self=="object"?self:globalThis,vF=(n,e)=>{const t=(r,a)=>(n.set(a,r),r),i=r=>{if(n.has(r))return n.get(r);const[a,l]=e[r];switch(a){case vm:case rA:return t(l,r);case jh:{const o=t([],r);for(const u of l)o.push(i(u));return o}case Zp:{const o=t({},r);for(const[u,h]of l)o[i(u)]=i(h);return o}case Db:return t(new Date(l),r);case Ib:{const{source:o,flags:u}=l;return t(new RegExp(o,u),r)}case Lb:{const o=t(new Map,r);for(const[u,h]of l)o.set(i(u),i(h));return o}case Bb:{const o=t(new Set,r);for(const u of l)o.add(i(u));return o}case sA:{const{name:o,message:u}=l;return t(new vE[o](u),r)}case aA:return t(BigInt(l),r);case"BigInt":return t(Object(BigInt(l)),r);case"ArrayBuffer":return t(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:o}=new Uint8Array(l);return t(new DataView(o),l)}}return t(new vE[a](l),r)};return i},xE=n=>vF(new Map,n)(0),$c="",{toString:xF}={},{keys:SF}=Object,Th=n=>{const e=typeof n;if(e!=="object"||!n)return[vm,e];const t=xF.call(n).slice(8,-1);switch(t){case"Array":return[jh,$c];case"Object":return[Zp,$c];case"Date":return[Db,$c];case"RegExp":return[Ib,$c];case"Map":return[Lb,$c];case"Set":return[Bb,$c];case"DataView":return[jh,t]}return t.includes("Array")?[jh,t]:t.includes("Error")?[sA,t]:[Zp,t]},yp=([n,e])=>n===vm&&(e==="function"||e==="symbol"),wF=(n,e,t,i)=>{const r=(l,o)=>{const u=i.push(l)-1;return t.set(o,u),u},a=l=>{if(t.has(l))return t.get(l);let[o,u]=Th(l);switch(o){case vm:{let p=l;switch(u){case"bigint":o=aA,p=l.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+u);p=null;break;case"undefined":return r([rA],l)}return r([o,p],l)}case jh:{if(u){let m=l;return u==="DataView"?m=new Uint8Array(l.buffer):u==="ArrayBuffer"&&(m=new Uint8Array(l)),r([u,[...m]],l)}const p=[],f=r([o,p],l);for(const m of l)p.push(a(m));return f}case Zp:{if(u)switch(u){case"BigInt":return r([u,l.toString()],l);case"Boolean":case"Number":case"String":return r([u,l.valueOf()],l)}if(e&&"toJSON"in l)return a(l.toJSON());const p=[],f=r([o,p],l);for(const m of SF(l))(n||!yp(Th(l[m])))&&p.push([a(m),a(l[m])]);return f}case Db:return r([o,l.toISOString()],l);case Ib:{const{source:p,flags:f}=l;return r([o,{source:p,flags:f}],l)}case Lb:{const p=[],f=r([o,p],l);for(const[m,y]of l)(n||!(yp(Th(m))||yp(Th(y))))&&p.push([a(m),a(y)]);return f}case Bb:{const p=[],f=r([o,p],l);for(const m of l)(n||!yp(Th(m)))&&p.push(a(m));return f}}const{message:h}=l;return r([o,{name:u,message:h}],l)};return a},SE=(n,{json:e,lossy:t}={})=>{const i=[];return wF(!(e||t),!!e,new Map,i)(n),i},Jp=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?xE(SE(n,e)):structuredClone(n):(n,e)=>xE(SE(n,e));function EF(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function CF(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function AF(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||EF,i=n.options.footnoteBackLabel||CF,r=n.options.footnoteLabel||"Footnotes",a=n.options.footnoteLabelTagName||"h2",l=n.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let u=-1;for(;++u<n.footnoteOrder.length;){const h=n.footnoteById.get(n.footnoteOrder[u]);if(!h)continue;const p=n.all(h),f=String(h.identifier).toUpperCase(),m=mu(f.toLowerCase());let y=0;const x=[],w=n.footnoteCounts.get(f);for(;w!==void 0&&++y<=w;){x.length>0&&x.push({type:"text",value:" "});let v=typeof t=="string"?t:t(u,y);typeof v=="string"&&(v={type:"text",value:v}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(u,y),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const S=p[p.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const v=S.children[S.children.length-1];v&&v.type==="text"?v.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...x)}else p.push(...x);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:n.wrap(p,!0)};n.patch(h,b),o.push(b)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Jp(l),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(o,!0)},{type:"text",value:`
`}]}}const hd=(function(n){if(n==null)return RF;if(typeof n=="function")return xm(n);if(typeof n=="object")return Array.isArray(n)?TF(n):kF(n);if(typeof n=="string")return MF(n);throw new Error("Expected function, string, or object as test")});function TF(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=hd(n[t]);return xm(i);function i(...r){let a=-1;for(;++a<e.length;)if(e[a].apply(this,r))return!0;return!1}}function kF(n){const e=n;return xm(t);function t(i){const r=i;let a;for(a in n)if(r[a]!==e[a])return!1;return!0}}function MF(n){return xm(e);function e(t){return t&&t.type===n}}function xm(n){return e;function e(t,i,r){return!!(OF(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function RF(){return!0}function OF(n){return n!==null&&typeof n=="object"&&"type"in n}const oA=[],NF=!0,_0=!1,DF="skip";function lA(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const a=hd(r),l=i?-1:1;o(n,void 0,[])();function o(u,h,p){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const y=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(u.type+(y?"<"+y+">":""))+")"})}return m;function m(){let y=oA,x,w,S;if((!e||a(u,h,p[p.length-1]||void 0))&&(y=IF(t(u,p)),y[0]===_0))return y;if("children"in u&&u.children){const b=u;if(b.children&&y[0]!==DF)for(w=(i?b.children.length:-1)+l,S=p.concat(b);w>-1&&w<b.children.length;){const v=b.children[w];if(x=o(v,w,S)(),x[0]===_0)return x;w=typeof x[1]=="number"?x[1]:w+l}}return y}}}function IF(n){return Array.isArray(n)?n:typeof n=="number"?[NF,n]:n==null?oA:[n]}function Sm(n,e,t,i){let r,a,l;typeof e=="function"&&typeof t!="function"?(a=void 0,l=e,r=t):(a=e,l=t,r=i),lA(n,a,o,r);function o(u,h){const p=h[h.length-1],f=p?p.children.indexOf(u):void 0;return l(u,f,p)}}const b0={}.hasOwnProperty,LF={};function BF(n,e){const t=e||LF,i=new Map,r=new Map,a=new Map,l={...bF,...t.handlers},o={all:h,applyData:PF,definitionById:i,footnoteById:r,footnoteCounts:a,footnoteOrder:[],handlers:l,one:u,options:t,patch:zF,wrap:UF};return Sm(n,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const f=p.type==="definition"?i:r,m=String(p.identifier).toUpperCase();f.has(m)||f.set(m,p)}}),o;function u(p,f){const m=p.type,y=o.handlers[m];if(b0.call(o.handlers,m)&&y)return y(o,p,f);if(o.options.passThrough&&o.options.passThrough.includes(m)){if("children"in p){const{children:w,...S}=p,b=Jp(S);return b.children=o.all(p),b}return Jp(p)}return(o.options.unknownHandler||FF)(o,p,f)}function h(p){const f=[];if("children"in p){const m=p.children;let y=-1;for(;++y<m.length;){const x=o.one(m[y],p);if(x){if(y&&m[y-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=wE(x.value)),!Array.isArray(x)&&x.type==="element")){const w=x.children[0];w&&w.type==="text"&&(w.value=wE(w.value))}Array.isArray(x)?f.push(...x):f.push(x)}}}return f}}function zF(n,e){n.position&&(e.position=Cz(n))}function PF(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,a=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const l="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:l}}t.type==="element"&&a&&Object.assign(t.properties,Jp(a)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function FF(n,e){const t=e.data||{},i="value"in e&&!(b0.call(t,"hProperties")||b0.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function UF(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function wE(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function EE(n,e){const t=BF(n,e),i=t.one(n,void 0),r=AF(t),a=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&a.children.push({type:"text",value:`
`},r),a}function jF(n,e){return n&&"run"in n?async function(t,i){const r=EE(t,{file:i,...e});await n.run(r,i)}:function(t,i){return EE(t,{file:i,...n||e})}}function CE(n){if(n)throw n}var S_,AE;function HF(){if(AE)return S_;AE=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},a=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var p=n.call(h,"constructor"),f=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!p&&!f)return!1;var m;for(m in h);return typeof m>"u"||n.call(h,m)},l=function(h,p){t&&p.name==="__proto__"?t(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},o=function(h,p){if(p==="__proto__")if(n.call(h,p)){if(i)return i(h,p).value}else return;return h[p]};return S_=function u(){var h,p,f,m,y,x,w=arguments[0],S=1,b=arguments.length,v=!1;for(typeof w=="boolean"&&(v=w,w=arguments[1]||{},S=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});S<b;++S)if(h=arguments[S],h!=null)for(p in h)f=o(w,p),m=o(h,p),w!==m&&(v&&m&&(a(m)||(y=r(m)))?(y?(y=!1,x=f&&r(f)?f:[]):x=f&&a(f)?f:{},l(w,{name:p,newValue:u(v,x,m)})):typeof m<"u"&&l(w,{name:p,newValue:m}));return w},S_}var qF=HF();const w_=nd(qF);function v0(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function VF(){const n=[],e={run:t,use:i};return e;function t(...r){let a=-1;const l=r.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);o(null,...r);function o(u,...h){const p=n[++a];let f=-1;if(u){l(u);return}for(;++f<r.length;)(h[f]===null||h[f]===void 0)&&(h[f]=r[f]);r=h,p?WF(p,o)(...h):l(null,...h)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function WF(n,e){let t;return i;function i(...l){const o=n.length>l.length;let u;o&&l.push(r);try{u=n.apply(this,l)}catch(h){const p=h;if(o&&t)throw p;return r(p)}o||(u&&u.then&&typeof u.then=="function"?u.then(a,r):u instanceof Error?r(u):a(u))}function r(l,...o){t||(t=!0,e(l,...o))}function a(l){r(null,l)}}const Vs={basename:$F,dirname:GF,extname:KF,join:YF,sep:"/"};function $F(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');dd(n);let t=0,i=-1,r=n.length,a;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(a){t=r+1;break}}else i<0&&(a=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let l=-1,o=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(a){t=r+1;break}}else l<0&&(a=!0,l=r+1),o>-1&&(n.codePointAt(r)===e.codePointAt(o--)?o<0&&(i=r):(o=-1,i=l));return t===i?i=l:i<0&&(i=n.length),n.slice(t,i)}function GF(n){if(dd(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function KF(n){dd(n);let e=n.length,t=-1,i=0,r=-1,a=0,l;for(;e--;){const o=n.codePointAt(e);if(o===47){if(l){i=e+1;break}continue}t<0&&(l=!0,t=e+1),o===46?r<0?r=e:a!==1&&(a=1):r>-1&&(a=-1)}return r<0||t<0||a===0||a===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function YF(...n){let e=-1,t;for(;++e<n.length;)dd(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":XF(t)}function XF(n){dd(n);const e=n.codePointAt(0)===47;let t=ZF(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function ZF(n,e){let t="",i=0,r=-1,a=0,l=-1,o,u;for(;++l<=n.length;){if(l<n.length)o=n.codePointAt(l);else{if(o===47)break;o=47}if(o===47){if(!(r===l-1||a===1))if(r!==l-1&&a===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(u=t.lastIndexOf("/"),u!==t.length-1){u<0?(t="",i=0):(t=t.slice(0,u),i=t.length-1-t.lastIndexOf("/")),r=l,a=0;continue}}else if(t.length>0){t="",i=0,r=l,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,l):t=n.slice(r+1,l),i=l-r-1;r=l,a=0}else o===46&&a>-1?a++:a=-1}return t}function dd(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const JF={cwd:QF};function QF(){return"/"}function x0(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function e9(n){if(typeof n=="string")n=new URL(n);else if(!x0(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return t9(n)}function t9(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const E_=["history","path","basename","stem","extname","dirname"];class cA{constructor(e){let t;e?x0(e)?t={path:e}:typeof e=="string"||n9(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":JF.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<E_.length;){const a=E_[i];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let r;for(r in t)E_.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?Vs.basename(this.path):void 0}set basename(e){A_(e,"basename"),C_(e,"basename"),this.path=Vs.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Vs.dirname(this.path):void 0}set dirname(e){TE(this.basename,"dirname"),this.path=Vs.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Vs.extname(this.path):void 0}set extname(e){if(C_(e,"extname"),TE(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vs.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){x0(e)&&(e=e9(e)),A_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Vs.basename(this.path,this.extname):void 0}set stem(e){A_(e,"stem"),C_(e,"stem"),this.path=Vs.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new Zi(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function C_(n,e){if(n&&n.includes(Vs.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Vs.sep+"`")}function A_(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function TE(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function n9(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const i9=(function(n){const i=this.constructor.prototype,r=i[n],a=function(){return r.apply(a,arguments)};return Object.setPrototypeOf(a,i),a}),r9={}.hasOwnProperty;class zb extends i9{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=VF()}copy(){const e=new zb;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(w_(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(M_("data",this.frozen),this.namespace[e]=t,this):r9.call(this.namespace,e)&&this.namespace[e]||void 0:e?(M_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=_p(e),i=this.parser||this.Parser;return T_("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),T_("process",this.parser||this.Parser),k_("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(a,l){const o=_p(e),u=i.parse(o);i.run(u,o,function(p,f,m){if(p||!f||!m)return h(p);const y=f,x=i.stringify(y,m);o9(x)?m.value=x:m.result=x,h(p,m)});function h(p,f){p||!f?l(p):a?a(f):t(void 0,f)}}}processSync(e){let t=!1,i;return this.freeze(),T_("processSync",this.parser||this.Parser),k_("processSync",this.compiler||this.Compiler),this.process(e,r),ME("processSync","process",t),i;function r(a,l){t=!0,CE(a),i=l}}run(e,t,i){kE(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?a(void 0,i):new Promise(a);function a(l,o){const u=_p(t);r.run(e,u,h);function h(p,f,m){const y=f||e;p?o(p):l?l(y):i(void 0,y,m)}}}runSync(e,t){let i=!1,r;return this.run(e,t,a),ME("runSync","run",i),r;function a(l,o){CE(l),r=o,i=!0}}stringify(e,t){this.freeze();const i=_p(t),r=this.compiler||this.Compiler;return k_("stringify",r),kE(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(M_("use",this.frozen),e!=null)if(typeof e=="function")u(e,t);else if(typeof e=="object")Array.isArray(e)?o(e):l(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[p,...f]=h;u(p,f)}else l(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function l(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(h.plugins),h.settings&&(r.settings=w_(!0,r.settings,h.settings))}function o(h){let p=-1;if(h!=null)if(Array.isArray(h))for(;++p<h.length;){const f=h[p];a(f)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,p){let f=-1,m=-1;for(;++f<i.length;)if(i[f][0]===h){m=f;break}if(m===-1)i.push([h,...p]);else if(p.length>0){let[y,...x]=p;const w=i[m][1];v0(w)&&v0(y)&&(y=w_(!0,w,y)),i[m]=[h,y,...x]}}}}const s9=new zb().freeze();function T_(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function k_(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function M_(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kE(n){if(!v0(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function ME(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function _p(n){return a9(n)?n:new cA(n)}function a9(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function o9(n){return typeof n=="string"||l9(n)}function l9(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const c9="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",RE=[],OE={allowDangerousHtml:!0},u9=/^(https?|ircs?|mailto|xmpp)$/i,h9=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function d9(n){const e=f9(n),t=p9(n);return m9(e.runSync(e.parse(t),t),n)}function f9(n){const e=n.rehypePlugins||RE,t=n.remarkPlugins||RE,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...OE}:OE;return s9().use(G8).use(t).use(jF,i).use(e)}function p9(n){const e=n.children||"",t=new cA;return typeof e=="string"&&(t.value=e),t}function m9(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,a=e.disallowedElements,l=e.skipHtml,o=e.unwrapDisallowed,u=e.urlTransform||g9;for(const p of h9)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+c9+p.id,void 0);return Sm(n,h),Rz(n,{Fragment:N.Fragment,components:r,ignoreInvalidStyle:!0,jsx:N.jsx,jsxs:N.jsxs,passKeys:!0,passNode:!0});function h(p,f,m){if(p.type==="raw"&&m&&typeof f=="number")return l?m.children.splice(f,1):m.children[f]={type:"text",value:p.value},f;if(p.type==="element"){let y;for(y in b_)if(Object.hasOwn(b_,y)&&Object.hasOwn(p.properties,y)){const x=p.properties[y],w=b_[y];(w===null||w.includes(p.tagName))&&(p.properties[y]=u(String(x||""),y,p))}}if(p.type==="element"){let y=t?!t.includes(p.tagName):a?a.includes(p.tagName):!1;if(!y&&i&&typeof f=="number"&&(y=!i(p,f,m)),y&&m&&typeof f=="number")return o&&p.children?m.children.splice(f,1,...p.children):m.children.splice(f,1),f}}}function g9(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||u9.test(n.slice(0,e))?n:""}function NE(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=t.indexOf(e);for(;r!==-1;)i++,r=t.indexOf(e,r+e.length);return i}function y9(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function _9(n,e,t){const r=hd((t||{}).ignore||[]),a=b9(e);let l=-1;for(;++l<a.length;)lA(n,"text",o);function o(h,p){let f=-1,m;for(;++f<p.length;){const y=p[f],x=m?m.children:void 0;if(r(y,x?x.indexOf(y):void 0,m))return;m=y}if(m)return u(h,p)}function u(h,p){const f=p[p.length-1],m=a[l][0],y=a[l][1];let x=0;const S=f.children.indexOf(h);let b=!1,v=[];m.lastIndex=0;let _=m.exec(h.value);for(;_;){const E=_.index,R={index:_.index,input:_.input,stack:[...p,h]};let M=y(..._,R);if(typeof M=="string"&&(M=M.length>0?{type:"text",value:M}:void 0),M===!1?m.lastIndex=E+1:(x!==E&&v.push({type:"text",value:h.value.slice(x,E)}),Array.isArray(M)?v.push(...M):M&&v.push(M),x=E+_[0].length,b=!0),!m.global)break;_=m.exec(h.value)}return b?(x<h.value.length&&v.push({type:"text",value:h.value.slice(x)}),f.children.splice(S,1,...v)):v=[h],S+v.length}}function b9(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let i=-1;for(;++i<t.length;){const r=t[i];e.push([v9(r[0]),x9(r[1])])}return e}function v9(n){return typeof n=="string"?new RegExp(y9(n),"g"):n}function x9(n){return typeof n=="function"?n:function(){return n}}const R_="phrasing",O_=["autolink","link","image","label"];function S9(){return{transforms:[M9],enter:{literalAutolink:E9,literalAutolinkEmail:N_,literalAutolinkHttp:N_,literalAutolinkWww:N_},exit:{literalAutolink:k9,literalAutolinkEmail:T9,literalAutolinkHttp:C9,literalAutolinkWww:A9}}}function w9(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:R_,notInConstruct:O_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:R_,notInConstruct:O_},{character:":",before:"[ps]",after:"\\/",inConstruct:R_,notInConstruct:O_}]}}function E9(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function N_(n){this.config.enter.autolinkProtocol.call(this,n)}function C9(n){this.config.exit.autolinkProtocol.call(this,n)}function A9(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function T9(n){this.config.exit.autolinkEmail.call(this,n)}function k9(n){this.exit(n)}function M9(n){_9(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,R9],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),O9]],{ignore:["link","linkReference"]})}function R9(n,e,t,i,r){let a="";if(!uA(r)||(/^w/i.test(e)&&(t=e+t,e="",a="http://"),!N9(t)))return!1;const l=D9(t+i);if(!l[0])return!1;const o={type:"link",title:null,url:a+e+l[0],children:[{type:"text",value:e+l[0]}]};return l[1]?[o,{type:"text",value:l[1]}]:o}function O9(n,e,t,i){return!uA(i,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function N9(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function D9(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],i=t.indexOf(")");const r=NE(n,"(");let a=NE(n,")");for(;i!==-1&&r>a;)n+=t.slice(0,i+1),t=t.slice(i+1),i=t.indexOf(")"),a++;return[n,t]}function uA(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||Tl(t)||_m(t))&&(!e||t!==47)}hA.peek=H9;function I9(){this.buffer()}function L9(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function B9(){this.buffer()}function z9(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function P9(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=vs(this.sliceSerialize(n)).toLowerCase(),t.label=e}function F9(n){this.exit(n)}function U9(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=vs(this.sliceSerialize(n)).toLowerCase(),t.label=e}function j9(n){this.exit(n)}function H9(){return"["}function hA(n,e,t,i){const r=t.createTracker(i);let a=r.move("[^");const l=t.enter("footnoteReference"),o=t.enter("reference");return a+=r.move(t.safe(t.associationId(n),{after:"]",before:a})),o(),l(),a+=r.move("]"),a}function q9(){return{enter:{gfmFootnoteCallString:I9,gfmFootnoteCall:L9,gfmFootnoteDefinitionLabelString:B9,gfmFootnoteDefinition:z9},exit:{gfmFootnoteCallString:P9,gfmFootnoteCall:F9,gfmFootnoteDefinitionLabelString:U9,gfmFootnoteDefinition:j9}}}function V9(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:hA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(i,r,a,l){const o=a.createTracker(l);let u=o.move("[^");const h=a.enter("footnoteDefinition"),p=a.enter("label");return u+=o.move(a.safe(a.associationId(i),{before:u,after:"]"})),p(),u+=o.move("]:"),i.children&&i.children.length>0&&(o.shift(4),u+=o.move((e?`
`:" ")+a.indentLines(a.containerFlow(i,o.current()),e?dA:W9))),h(),u}}function W9(n,e,t){return e===0?n:dA(n,e,t)}function dA(n,e,t){return(t?"":"    ")+n}const $9=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];fA.peek=Z9;function G9(){return{canContainEols:["delete"],enter:{strikethrough:Y9},exit:{strikethrough:X9}}}function K9(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:$9}],handlers:{delete:fA}}}function Y9(n){this.enter({type:"delete",children:[]},n)}function X9(n){this.exit(n)}function fA(n,e,t,i){const r=t.createTracker(i),a=t.enter("strikethrough");let l=r.move("~~");return l+=t.containerPhrasing(n,{...r.current(),before:l,after:"~"}),l+=r.move("~~"),a(),l}function Z9(){return"~"}function J9(n){return n.length}function Q9(n,e){const t=e||{},i=(t.align||[]).concat(),r=t.stringLength||J9,a=[],l=[],o=[],u=[];let h=0,p=-1;for(;++p<n.length;){const w=[],S=[];let b=-1;for(n[p].length>h&&(h=n[p].length);++b<n[p].length;){const v=e7(n[p][b]);if(t.alignDelimiters!==!1){const _=r(v);S[b]=_,(u[b]===void 0||_>u[b])&&(u[b]=_)}w.push(v)}l[p]=w,o[p]=S}let f=-1;if(typeof i=="object"&&"length"in i)for(;++f<h;)a[f]=DE(i[f]);else{const w=DE(i);for(;++f<h;)a[f]=w}f=-1;const m=[],y=[];for(;++f<h;){const w=a[f];let S="",b="";w===99?(S=":",b=":"):w===108?S=":":w===114&&(b=":");let v=t.alignDelimiters===!1?1:Math.max(1,u[f]-S.length-b.length);const _=S+"-".repeat(v)+b;t.alignDelimiters!==!1&&(v=S.length+v+b.length,v>u[f]&&(u[f]=v),y[f]=v),m[f]=_}l.splice(1,0,m),o.splice(1,0,y),p=-1;const x=[];for(;++p<l.length;){const w=l[p],S=o[p];f=-1;const b=[];for(;++f<h;){const v=w[f]||"";let _="",E="";if(t.alignDelimiters!==!1){const R=u[f]-(S[f]||0),M=a[f];M===114?_=" ".repeat(R):M===99?R%2?(_=" ".repeat(R/2+.5),E=" ".repeat(R/2-.5)):(_=" ".repeat(R/2),E=_):E=" ".repeat(R)}t.delimiterStart!==!1&&!f&&b.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&v==="")&&(t.delimiterStart!==!1||f)&&b.push(" "),t.alignDelimiters!==!1&&b.push(_),b.push(v),t.alignDelimiters!==!1&&b.push(E),t.padding!==!1&&b.push(" "),(t.delimiterEnd!==!1||f!==h-1)&&b.push("|")}x.push(t.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return x.join(`
`)}function e7(n){return n==null?"":String(n)}function DE(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function t7(n,e,t,i){const r=t.enter("blockquote"),a=t.createTracker(i);a.move("> "),a.shift(2);const l=t.indentLines(t.containerFlow(n,a.current()),n7);return r(),l}function n7(n,e,t){return">"+(t?"":" ")+n}function i7(n,e){return IE(n,e.inConstruct,!0)&&!IE(n,e.notInConstruct,!1)}function IE(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let i=-1;for(;++i<e.length;)if(n.includes(e[i]))return!0;return!1}function LE(n,e,t,i){let r=-1;for(;++r<t.unsafe.length;)if(t.unsafe[r].character===`
`&&i7(t.stack,t.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function r7(n,e){const t=String(n);let i=t.indexOf(e),r=i,a=0,l=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++a>l&&(l=a):a=1,r=i+e.length,i=t.indexOf(e,r);return l}function s7(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function a7(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function o7(n,e,t,i){const r=a7(t),a=n.value||"",l=r==="`"?"GraveAccent":"Tilde";if(s7(n,t)){const f=t.enter("codeIndented"),m=t.indentLines(a,l7);return f(),m}const o=t.createTracker(i),u=r.repeat(Math.max(r7(a,r)+1,3)),h=t.enter("codeFenced");let p=o.move(u);if(n.lang){const f=t.enter(`codeFencedLang${l}`);p+=o.move(t.safe(n.lang,{before:p,after:" ",encode:["`"],...o.current()})),f()}if(n.lang&&n.meta){const f=t.enter(`codeFencedMeta${l}`);p+=o.move(" "),p+=o.move(t.safe(n.meta,{before:p,after:`
`,encode:["`"],...o.current()})),f()}return p+=o.move(`
`),a&&(p+=o.move(a+`
`)),p+=o.move(u),h(),p}function l7(n,e,t){return(t?"":"    ")+n}function Pb(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function c7(n,e,t,i){const r=Pb(t),a=r==='"'?"Quote":"Apostrophe",l=t.enter("definition");let o=t.enter("label");const u=t.createTracker(i);let h=u.move("[");return h+=u.move(t.safe(t.associationId(n),{before:h,after:"]",...u.current()})),h+=u.move("]: "),o(),!n.url||/[\0- \u007F]/.test(n.url)?(o=t.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(t.safe(n.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(o=t.enter("destinationRaw"),h+=u.move(t.safe(n.url,{before:h,after:n.title?" ":`
`,...u.current()}))),o(),n.title&&(o=t.enter(`title${a}`),h+=u.move(" "+r),h+=u.move(t.safe(n.title,{before:h,after:r,...u.current()})),h+=u.move(r),o()),l(),h}function u7(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function ed(n){return"&#x"+n.toString(16).toUpperCase()+";"}function Qp(n,e,t){const i=au(n),r=au(e);return i===void 0?r===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}pA.peek=h7;function pA(n,e,t,i){const r=u7(t),a=t.enter("emphasis"),l=t.createTracker(i),o=l.move(r);let u=l.move(t.containerPhrasing(n,{after:r,before:o,...l.current()}));const h=u.charCodeAt(0),p=Qp(i.before.charCodeAt(i.before.length-1),h,r);p.inside&&(u=ed(h)+u.slice(1));const f=u.charCodeAt(u.length-1),m=Qp(i.after.charCodeAt(0),f,r);m.inside&&(u=u.slice(0,-1)+ed(f));const y=l.move(r);return a(),t.attentionEncodeSurroundingInfo={after:m.outside,before:p.outside},o+u+y}function h7(n,e,t){return t.options.emphasis||"*"}function d7(n,e){let t=!1;return Sm(n,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,_0}),!!((!n.depth||n.depth<3)&&Rb(n)&&(e.options.setext||t))}function f7(n,e,t,i){const r=Math.max(Math.min(6,n.depth||1),1),a=t.createTracker(i);if(d7(n,t)){const p=t.enter("headingSetext"),f=t.enter("phrasing"),m=t.containerPhrasing(n,{...a.current(),before:`
`,after:`
`});return f(),p(),m+`
`+(r===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const l="#".repeat(r),o=t.enter("headingAtx"),u=t.enter("phrasing");a.move(l+" ");let h=t.containerPhrasing(n,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(h)&&(h=ed(h.charCodeAt(0))+h.slice(1)),h=h?l+" "+h:l,t.options.closeAtx&&(h+=" "+l),u(),o(),h}mA.peek=p7;function mA(n){return n.value||""}function p7(){return"<"}gA.peek=m7;function gA(n,e,t,i){const r=Pb(t),a=r==='"'?"Quote":"Apostrophe",l=t.enter("image");let o=t.enter("label");const u=t.createTracker(i);let h=u.move("![");return h+=u.move(t.safe(n.alt,{before:h,after:"]",...u.current()})),h+=u.move("]("),o(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(o=t.enter("destinationLiteral"),h+=u.move("<"),h+=u.move(t.safe(n.url,{before:h,after:">",...u.current()})),h+=u.move(">")):(o=t.enter("destinationRaw"),h+=u.move(t.safe(n.url,{before:h,after:n.title?" ":")",...u.current()}))),o(),n.title&&(o=t.enter(`title${a}`),h+=u.move(" "+r),h+=u.move(t.safe(n.title,{before:h,after:r,...u.current()})),h+=u.move(r),o()),h+=u.move(")"),l(),h}function m7(){return"!"}yA.peek=g7;function yA(n,e,t,i){const r=n.referenceType,a=t.enter("imageReference");let l=t.enter("label");const o=t.createTracker(i);let u=o.move("![");const h=t.safe(n.alt,{before:u,after:"]",...o.current()});u+=o.move(h+"]["),l();const p=t.stack;t.stack=[],l=t.enter("reference");const f=t.safe(t.associationId(n),{before:u,after:"]",...o.current()});return l(),t.stack=p,a(),r==="full"||!h||h!==f?u+=o.move(f+"]"):r==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function g7(){return"!"}_A.peek=y7;function _A(n,e,t){let i=n.value||"",r="`",a=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++a<t.unsafe.length;){const l=t.unsafe[a],o=t.compilePattern(l);let u;if(l.atBreak)for(;u=o.exec(i);){let h=u.index;i.charCodeAt(h)===10&&i.charCodeAt(h-1)===13&&h--,i=i.slice(0,h)+" "+i.slice(u.index+1)}}return r+i+r}function y7(){return"`"}function bA(n,e){const t=Rb(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}vA.peek=_7;function vA(n,e,t,i){const r=Pb(t),a=r==='"'?"Quote":"Apostrophe",l=t.createTracker(i);let o,u;if(bA(n,t)){const p=t.stack;t.stack=[],o=t.enter("autolink");let f=l.move("<");return f+=l.move(t.containerPhrasing(n,{before:f,after:">",...l.current()})),f+=l.move(">"),o(),t.stack=p,f}o=t.enter("link"),u=t.enter("label");let h=l.move("[");return h+=l.move(t.containerPhrasing(n,{before:h,after:"](",...l.current()})),h+=l.move("]("),u(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(u=t.enter("destinationLiteral"),h+=l.move("<"),h+=l.move(t.safe(n.url,{before:h,after:">",...l.current()})),h+=l.move(">")):(u=t.enter("destinationRaw"),h+=l.move(t.safe(n.url,{before:h,after:n.title?" ":")",...l.current()}))),u(),n.title&&(u=t.enter(`title${a}`),h+=l.move(" "+r),h+=l.move(t.safe(n.title,{before:h,after:r,...l.current()})),h+=l.move(r),u()),h+=l.move(")"),o(),h}function _7(n,e,t){return bA(n,t)?"<":"["}xA.peek=b7;function xA(n,e,t,i){const r=n.referenceType,a=t.enter("linkReference");let l=t.enter("label");const o=t.createTracker(i);let u=o.move("[");const h=t.containerPhrasing(n,{before:u,after:"]",...o.current()});u+=o.move(h+"]["),l();const p=t.stack;t.stack=[],l=t.enter("reference");const f=t.safe(t.associationId(n),{before:u,after:"]",...o.current()});return l(),t.stack=p,a(),r==="full"||!h||h!==f?u+=o.move(f+"]"):r==="shortcut"?u=u.slice(0,-1):u+=o.move("]"),u}function b7(){return"["}function Fb(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function v7(n){const e=Fb(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function x7(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function SA(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function S7(n,e,t,i){const r=t.enter("list"),a=t.bulletCurrent;let l=n.ordered?x7(t):Fb(t);const o=n.ordered?l==="."?")":".":v7(t);let u=e&&t.bulletLastUsed?l===t.bulletLastUsed:!1;if(!n.ordered){const p=n.children?n.children[0]:void 0;if((l==="*"||l==="-")&&p&&(!p.children||!p.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(u=!0),SA(t)===l&&p){let f=-1;for(;++f<n.children.length;){const m=n.children[f];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(l=o),t.bulletCurrent=l;const h=t.containerFlow(n,i);return t.bulletLastUsed=l,t.bulletCurrent=a,r(),h}function w7(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function E7(n,e,t,i){const r=w7(t);let a=t.bulletCurrent||Fb(t);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+a);let l=a.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(l=Math.ceil(l/4)*4);const o=t.createTracker(i);o.move(a+" ".repeat(l-a.length)),o.shift(l);const u=t.enter("listItem"),h=t.indentLines(t.containerFlow(n,o.current()),p);return u(),h;function p(f,m,y){return m?(y?"":" ".repeat(l))+f:(y?a:a+" ".repeat(l-a.length))+f}}function C7(n,e,t,i){const r=t.enter("paragraph"),a=t.enter("phrasing"),l=t.containerPhrasing(n,i);return a(),r(),l}const A7=hd(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function T7(n,e,t,i){return(n.children.some(function(l){return A7(l)})?t.containerPhrasing:t.containerFlow).call(t,n,i)}function k7(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}wA.peek=M7;function wA(n,e,t,i){const r=k7(t),a=t.enter("strong"),l=t.createTracker(i),o=l.move(r+r);let u=l.move(t.containerPhrasing(n,{after:r,before:o,...l.current()}));const h=u.charCodeAt(0),p=Qp(i.before.charCodeAt(i.before.length-1),h,r);p.inside&&(u=ed(h)+u.slice(1));const f=u.charCodeAt(u.length-1),m=Qp(i.after.charCodeAt(0),f,r);m.inside&&(u=u.slice(0,-1)+ed(f));const y=l.move(r+r);return a(),t.attentionEncodeSurroundingInfo={after:m.outside,before:p.outside},o+u+y}function M7(n,e,t){return t.options.strong||"*"}function R7(n,e,t,i){return t.safe(n.value,i)}function O7(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function N7(n,e,t){const i=(SA(t)+(t.options.ruleSpaces?" ":"")).repeat(O7(t));return t.options.ruleSpaces?i.slice(0,-1):i}const EA={blockquote:t7,break:LE,code:o7,definition:c7,emphasis:pA,hardBreak:LE,heading:f7,html:mA,image:gA,imageReference:yA,inlineCode:_A,link:vA,linkReference:xA,list:S7,listItem:E7,paragraph:C7,root:T7,strong:wA,text:R7,thematicBreak:N7};function D7(){return{enter:{table:I7,tableData:BE,tableHeader:BE,tableRow:B7},exit:{codeText:z7,table:L7,tableData:D_,tableHeader:D_,tableRow:D_}}}function I7(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function L7(n){this.exit(n),this.data.inTable=void 0}function B7(n){this.enter({type:"tableRow",children:[]},n)}function D_(n){this.exit(n)}function BE(n){this.enter({type:"tableCell",children:[]},n)}function z7(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,P7));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function P7(n,e){return e==="|"?e:n}function F7(n){const e=n||{},t=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,a=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:l,tableCell:u,tableRow:o}};function l(y,x,w,S){return h(p(y,w,S),y.align)}function o(y,x,w,S){const b=f(y,w,S),v=h([b]);return v.slice(0,v.indexOf(`
`))}function u(y,x,w,S){const b=w.enter("tableCell"),v=w.enter("phrasing"),_=w.containerPhrasing(y,{...S,before:a,after:a});return v(),b(),_}function h(y,x){return Q9(y,{align:x,alignDelimiters:i,padding:t,stringLength:r})}function p(y,x,w){const S=y.children;let b=-1;const v=[],_=x.enter("table");for(;++b<S.length;)v[b]=f(S[b],x,w);return _(),v}function f(y,x,w){const S=y.children;let b=-1;const v=[],_=x.enter("tableRow");for(;++b<S.length;)v[b]=u(S[b],y,x,w);return _(),v}function m(y,x,w){let S=EA.inlineCode(y,x,w);return w.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function U7(){return{exit:{taskListCheckValueChecked:zE,taskListCheckValueUnchecked:zE,paragraph:H7}}}function j7(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:q7}}}function zE(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function H7(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const i=t.children[0];if(i&&i.type==="text"){const r=e.children;let a=-1,l;for(;++a<r.length;){const o=r[a];if(o.type==="paragraph"){l=o;break}}l===t&&(i.value=i.value.slice(1),i.value.length===0?t.children.shift():t.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,t.position.start=Object.assign({},i.position.start)))}}this.exit(n)}function q7(n,e,t,i){const r=n.children[0],a=typeof n.checked=="boolean"&&r&&r.type==="paragraph",l="["+(n.checked?"x":" ")+"] ",o=t.createTracker(i);a&&o.move(l);let u=EA.listItem(n,e,t,{...i,...o.current()});return a&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),u;function h(p){return p+l}}function V7(){return[S9(),q9(),G9(),D7(),U7()]}function W7(n){return{extensions:[w9(),V9(n),K9(),F7(n),j7()]}}const $7={tokenize:J7,partial:!0},CA={tokenize:Q7,partial:!0},AA={tokenize:eU,partial:!0},TA={tokenize:tU,partial:!0},G7={tokenize:nU,partial:!0},kA={name:"wwwAutolink",tokenize:X7,previous:RA},MA={name:"protocolAutolink",tokenize:Z7,previous:OA},ja={name:"emailAutolink",tokenize:Y7,previous:NA},ea={};function K7(){return{text:ea}}let vl=48;for(;vl<123;)ea[vl]=ja,vl++,vl===58?vl=65:vl===91&&(vl=97);ea[43]=ja;ea[45]=ja;ea[46]=ja;ea[95]=ja;ea[72]=[ja,MA];ea[104]=[ja,MA];ea[87]=[ja,kA];ea[119]=[ja,kA];function Y7(n,e,t){const i=this;let r,a;return l;function l(f){return!S0(f)||!NA.call(i,i.previous)||Ub(i.events)?t(f):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),o(f))}function o(f){return S0(f)?(n.consume(f),o):f===64?(n.consume(f),u):t(f)}function u(f){return f===46?n.check(G7,p,h)(f):f===45||f===95||Yi(f)?(a=!0,n.consume(f),u):p(f)}function h(f){return n.consume(f),r=!0,u}function p(f){return a&&r&&ar(i.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(f)):t(f)}}function X7(n,e,t){const i=this;return r;function r(l){return l!==87&&l!==119||!RA.call(i,i.previous)||Ub(i.events)?t(l):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check($7,n.attempt(CA,n.attempt(AA,a),t),t)(l))}function a(l){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(l)}}function Z7(n,e,t){const i=this;let r="",a=!1;return l;function l(f){return(f===72||f===104)&&OA.call(i,i.previous)&&!Ub(i.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),r+=String.fromCodePoint(f),n.consume(f),o):t(f)}function o(f){if(ar(f)&&r.length<5)return r+=String.fromCodePoint(f),n.consume(f),o;if(f===58){const m=r.toLowerCase();if(m==="http"||m==="https")return n.consume(f),u}return t(f)}function u(f){return f===47?(n.consume(f),a?h:(a=!0,u)):t(f)}function h(f){return f===null||Xp(f)||Fn(f)||Tl(f)||_m(f)?t(f):n.attempt(CA,n.attempt(AA,p),t)(f)}function p(f){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(f)}}function J7(n,e,t){let i=0;return r;function r(l){return(l===87||l===119)&&i<3?(i++,n.consume(l),r):l===46&&i===3?(n.consume(l),a):t(l)}function a(l){return l===null?t(l):e(l)}}function Q7(n,e,t){let i,r,a;return l;function l(h){return h===46||h===95?n.check(TA,u,o)(h):h===null||Fn(h)||Tl(h)||h!==45&&_m(h)?u(h):(a=!0,n.consume(h),l)}function o(h){return h===95?i=!0:(r=i,i=void 0),n.consume(h),l}function u(h){return r||i||!a?t(h):e(h)}}function eU(n,e){let t=0,i=0;return r;function r(l){return l===40?(t++,n.consume(l),r):l===41&&i<t?a(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?n.check(TA,e,a)(l):l===null||Fn(l)||Tl(l)?e(l):(n.consume(l),r)}function a(l){return l===41&&i++,n.consume(l),r}}function tU(n,e,t){return i;function i(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(n.consume(o),i):o===38?(n.consume(o),a):o===93?(n.consume(o),r):o===60||o===null||Fn(o)||Tl(o)?e(o):t(o)}function r(o){return o===null||o===40||o===91||Fn(o)||Tl(o)?e(o):i(o)}function a(o){return ar(o)?l(o):t(o)}function l(o){return o===59?(n.consume(o),i):ar(o)?(n.consume(o),l):t(o)}}function nU(n,e,t){return i;function i(a){return n.consume(a),r}function r(a){return Yi(a)?t(a):e(a)}}function RA(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||Fn(n)}function OA(n){return!ar(n)}function NA(n){return!(n===47||S0(n))}function S0(n){return n===43||n===45||n===46||n===95||Yi(n)}function Ub(n){let e=n.length,t=!1;for(;e--;){const i=n[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){t=!0;break}if(i._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const iU={tokenize:hU,partial:!0};function rU(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:lU,continuation:{tokenize:cU},exit:uU}},text:{91:{name:"gfmFootnoteCall",tokenize:oU},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:sU,resolveTo:aU}}}}function sU(n,e,t){const i=this;let r=i.events.length;const a=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l;for(;r--;){const u=i.events[r][1];if(u.type==="labelImage"){l=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return o;function o(u){if(!l||!l._balanced)return t(u);const h=vs(i.sliceSerialize({start:l.end,end:i.now()}));return h.codePointAt(0)!==94||!a.includes(h.slice(1))?t(u):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(u),n.exit("gfmFootnoteCallLabelMarker"),e(u))}}function aU(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},n[n.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[n[t+1],n[t+2],["enter",i,e],n[t+3],n[t+4],["enter",r,e],["exit",r,e],["enter",a,e],["enter",l,e],["exit",l,e],["exit",a,e],n[n.length-2],n[n.length-1],["exit",i,e]];return n.splice(t,n.length-t+1,...o),n}function oU(n,e,t){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a=0,l;return o;function o(f){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(f),n.exit("gfmFootnoteCallLabelMarker"),u}function u(f){return f!==94?t(f):(n.enter("gfmFootnoteCallMarker"),n.consume(f),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",h)}function h(f){if(a>999||f===93&&!l||f===null||f===91||Fn(f))return t(f);if(f===93){n.exit("chunkString");const m=n.exit("gfmFootnoteCallString");return r.includes(vs(i.sliceSerialize(m)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(f),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(f)}return Fn(f)||(l=!0),a++,n.consume(f),f===92?p:h}function p(f){return f===91||f===92||f===93?(n.consume(f),a++,h):h(f)}}function lU(n,e,t){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let a,l=0,o;return u;function u(x){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(x),n.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(x){return x===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(x),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",p):t(x)}function p(x){if(l>999||x===93&&!o||x===null||x===91||Fn(x))return t(x);if(x===93){n.exit("chunkString");const w=n.exit("gfmFootnoteDefinitionLabelString");return a=vs(i.sliceSerialize(w)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(x),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),m}return Fn(x)||(o=!0),l++,n.consume(x),x===92?f:p}function f(x){return x===91||x===92||x===93?(n.consume(x),l++,p):p(x)}function m(x){return x===58?(n.enter("definitionMarker"),n.consume(x),n.exit("definitionMarker"),r.includes(a)||r.push(a),fn(n,y,"gfmFootnoteDefinitionWhitespace")):t(x)}function y(x){return e(x)}}function cU(n,e,t){return n.check(ud,e,n.attempt(iU,e,t))}function uU(n){n.exit("gfmFootnoteDefinition")}function hU(n,e,t){const i=this;return fn(n,r,"gfmFootnoteDefinitionIndent",5);function r(a){const l=i.events[i.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?e(a):t(a)}}function dU(n){let t=(n||{}).singleTilde;const i={name:"strikethrough",tokenize:a,resolveAll:r};return t==null&&(t=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(l,o){let u=-1;for(;++u<l.length;)if(l[u][0]==="enter"&&l[u][1].type==="strikethroughSequenceTemporary"&&l[u][1]._close){let h=u;for(;h--;)if(l[h][0]==="exit"&&l[h][1].type==="strikethroughSequenceTemporary"&&l[h][1]._open&&l[u][1].end.offset-l[u][1].start.offset===l[h][1].end.offset-l[h][1].start.offset){l[u][1].type="strikethroughSequence",l[h][1].type="strikethroughSequence";const p={type:"strikethrough",start:Object.assign({},l[h][1].start),end:Object.assign({},l[u][1].end)},f={type:"strikethroughText",start:Object.assign({},l[h][1].end),end:Object.assign({},l[u][1].start)},m=[["enter",p,o],["enter",l[h][1],o],["exit",l[h][1],o],["enter",f,o]],y=o.parser.constructs.insideSpan.null;y&&Lr(m,m.length,0,bm(y,l.slice(h+1,u),o)),Lr(m,m.length,0,[["exit",f,o],["enter",l[u][1],o],["exit",l[u][1],o],["exit",p,o]]),Lr(l,h-1,u-h+3,m),u=h+m.length-2;break}}for(u=-1;++u<l.length;)l[u][1].type==="strikethroughSequenceTemporary"&&(l[u][1].type="data");return l}function a(l,o,u){const h=this.previous,p=this.events;let f=0;return m;function m(x){return h===126&&p[p.length-1][1].type!=="characterEscape"?u(x):(l.enter("strikethroughSequenceTemporary"),y(x))}function y(x){const w=au(h);if(x===126)return f>1?u(x):(l.consume(x),f++,y);if(f<2&&!t)return u(x);const S=l.exit("strikethroughSequenceTemporary"),b=au(x);return S._open=!b||b===2&&!!w,S._close=!w||w===2&&!!b,o(x)}}}class fU{constructor(){this.map=[]}add(e,t,i){pU(this,e,t,i)}consume(e){if(this.map.sort(function(a,l){return a[0]-l[0]}),this.map.length===0)return;let t=this.map.length;const i=[];for(;t>0;)t-=1,i.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const a of r)e.push(a);r=i.pop()}this.map.length=0}}function pU(n,e,t,i){let r=0;if(!(t===0&&i.length===0)){for(;r<n.map.length;){if(n.map[r][0]===e){n.map[r][1]+=t,n.map[r][2].push(...i);return}r+=1}n.map.push([e,t,i])}}function mU(n,e){let t=!1;const i=[];for(;e<n.length;){const r=n[e];if(t){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const a=i.length-1;i[a]=i[a]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return i}function gU(){return{flow:{null:{name:"table",tokenize:yU,resolveAll:_U}}}}function yU(n,e,t){const i=this;let r=0,a=0,l;return o;function o(j){let X=i.events.length-1;for(;X>-1;){const $=i.events[X][1].type;if($==="lineEnding"||$==="linePrefix")X--;else break}const G=X>-1?i.events[X][1].type:null,H=G==="tableHead"||G==="tableRow"?M:u;return H===M&&i.parser.lazy[i.now().line]?t(j):H(j)}function u(j){return n.enter("tableHead"),n.enter("tableRow"),h(j)}function h(j){return j===124||(l=!0,a+=1),p(j)}function p(j){return j===null?t(j):Tt(j)?a>1?(a=0,i.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(j),n.exit("lineEnding"),y):t(j):on(j)?fn(n,p,"whitespace")(j):(a+=1,l&&(l=!1,r+=1),j===124?(n.enter("tableCellDivider"),n.consume(j),n.exit("tableCellDivider"),l=!0,p):(n.enter("data"),f(j)))}function f(j){return j===null||j===124||Fn(j)?(n.exit("data"),p(j)):(n.consume(j),j===92?m:f)}function m(j){return j===92||j===124?(n.consume(j),f):f(j)}function y(j){return i.interrupt=!1,i.parser.lazy[i.now().line]?t(j):(n.enter("tableDelimiterRow"),l=!1,on(j)?fn(n,x,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):x(j))}function x(j){return j===45||j===58?S(j):j===124?(l=!0,n.enter("tableCellDivider"),n.consume(j),n.exit("tableCellDivider"),w):R(j)}function w(j){return on(j)?fn(n,S,"whitespace")(j):S(j)}function S(j){return j===58?(a+=1,l=!0,n.enter("tableDelimiterMarker"),n.consume(j),n.exit("tableDelimiterMarker"),b):j===45?(a+=1,b(j)):j===null||Tt(j)?E(j):R(j)}function b(j){return j===45?(n.enter("tableDelimiterFiller"),v(j)):R(j)}function v(j){return j===45?(n.consume(j),v):j===58?(l=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(j),n.exit("tableDelimiterMarker"),_):(n.exit("tableDelimiterFiller"),_(j))}function _(j){return on(j)?fn(n,E,"whitespace")(j):E(j)}function E(j){return j===124?x(j):j===null||Tt(j)?!l||r!==a?R(j):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(j)):R(j)}function R(j){return t(j)}function M(j){return n.enter("tableRow"),D(j)}function D(j){return j===124?(n.enter("tableCellDivider"),n.consume(j),n.exit("tableCellDivider"),D):j===null||Tt(j)?(n.exit("tableRow"),e(j)):on(j)?fn(n,D,"whitespace")(j):(n.enter("data"),O(j))}function O(j){return j===null||j===124||Fn(j)?(n.exit("data"),D(j)):(n.consume(j),j===92?L:O)}function L(j){return j===92||j===124?(n.consume(j),O):O(j)}}function _U(n,e){let t=-1,i=!0,r=0,a=[0,0,0,0],l=[0,0,0,0],o=!1,u=0,h,p,f;const m=new fU;for(;++t<n.length;){const y=n[t],x=y[1];y[0]==="enter"?x.type==="tableHead"?(o=!1,u!==0&&(PE(m,e,u,h,p),p=void 0,u=0),h={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(t,0,[["enter",h,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(i=!0,f=void 0,a=[0,0,0,0],l=[0,t+1,0,0],o&&(o=!1,p={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(t,0,[["enter",p,e]])),r=x.type==="tableDelimiterRow"?2:p?3:1):r&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(i=!1,l[2]===0&&(a[1]!==0&&(l[0]=l[1],f=bp(m,e,a,r,void 0,f),a=[0,0,0,0]),l[2]=t)):x.type==="tableCellDivider"&&(i?i=!1:(a[1]!==0&&(l[0]=l[1],f=bp(m,e,a,r,void 0,f)),a=l,l=[a[1],t,0,0])):x.type==="tableHead"?(o=!0,u=t):x.type==="tableRow"||x.type==="tableDelimiterRow"?(u=t,a[1]!==0?(l[0]=l[1],f=bp(m,e,a,r,t,f)):l[1]!==0&&(f=bp(m,e,l,r,t,f)),r=0):r&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(l[3]=t)}for(u!==0&&PE(m,e,u,h,p),m.consume(e.events),t=-1;++t<e.events.length;){const y=e.events[t];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=mU(e.events,t))}return n}function bp(n,e,t,i,r,a){const l=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",o="tableContent";t[0]!==0&&(a.end=Object.assign({},Gc(e.events,t[0])),n.add(t[0],0,[["exit",a,e]]));const u=Gc(e.events,t[1]);if(a={type:l,start:Object.assign({},u),end:Object.assign({},u)},n.add(t[1],0,[["enter",a,e]]),t[2]!==0){const h=Gc(e.events,t[2]),p=Gc(e.events,t[3]),f={type:o,start:Object.assign({},h),end:Object.assign({},p)};if(n.add(t[2],0,[["enter",f,e]]),i!==2){const m=e.events[t[2]],y=e.events[t[3]];if(m[1].end=Object.assign({},y[1].end),m[1].type="chunkText",m[1].contentType="text",t[3]>t[2]+1){const x=t[2]+1,w=t[3]-t[2]-1;n.add(x,w,[])}}n.add(t[3]+1,0,[["exit",f,e]])}return r!==void 0&&(a.end=Object.assign({},Gc(e.events,r)),n.add(r,0,[["exit",a,e]]),a=void 0),a}function PE(n,e,t,i,r){const a=[],l=Gc(e.events,t);r&&(r.end=Object.assign({},l),a.push(["exit",r,e])),i.end=Object.assign({},l),a.push(["exit",i,e]),n.add(t+1,0,a)}function Gc(n,e){const t=n[e],i=t[0]==="enter"?"start":"end";return t[1][i]}const bU={name:"tasklistCheck",tokenize:xU};function vU(){return{text:{91:bU}}}function xU(n,e,t){const i=this;return r;function r(u){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?t(u):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(u),n.exit("taskListCheckMarker"),a)}function a(u){return Fn(u)?(n.enter("taskListCheckValueUnchecked"),n.consume(u),n.exit("taskListCheckValueUnchecked"),l):u===88||u===120?(n.enter("taskListCheckValueChecked"),n.consume(u),n.exit("taskListCheckValueChecked"),l):t(u)}function l(u){return u===93?(n.enter("taskListCheckMarker"),n.consume(u),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),o):t(u)}function o(u){return Tt(u)?e(u):on(u)?n.check({tokenize:SU},e,t)(u):t(u)}}function SU(n,e,t){return fn(n,i,"whitespace");function i(r){return r===null?t(r):e(r)}}function wU(n){return q2([K7(),rU(),dU(n),gU(),vU()])}const EU={};function CU(n){const e=this,t=n||EU,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),a=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),l=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(wU(t)),a.push(V7()),l.push(W7(t))}const FE=(function(n,e,t){const i=hd(t);if(!n||!n.type||!n.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=n.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<n.children.length;)if(i(n.children[e],e,n))return n.children[e]}),Nl=(function(n){if(n==null)return kU;if(typeof n=="string")return TU(n);if(typeof n=="object")return AU(n);if(typeof n=="function")return jb(n);throw new Error("Expected function, string, or array as `test`")});function AU(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Nl(n[t]);return jb(i);function i(...r){let a=-1;for(;++a<e.length;)if(e[a].apply(this,r))return!0;return!1}}function TU(n){return jb(e);function e(t){return t.tagName===n}}function jb(n){return e;function e(t,i,r){return!!(MU(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function kU(n){return!!(n&&typeof n=="object"&&"type"in n&&n.type==="element"&&"tagName"in n&&typeof n.tagName=="string")}function MU(n){return n!==null&&typeof n=="object"&&"type"in n&&"tagName"in n}const UE=/\n/g,jE=/[\t ]+/g,w0=Nl("br"),HE=Nl(zU),RU=Nl("p"),qE=Nl("tr"),OU=Nl(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",BU,PU]),DA=Nl(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function NU(n,e){const t=e||{},i="children"in n?n.children:[],r=DA(n),a=BA(n,{whitespace:t.whitespace||"normal"}),l=[];(n.type==="text"||n.type==="comment")&&l.push(...LA(n,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<i.length;)l.push(...IA(i[o],n,{whitespace:a,breakBefore:o?void 0:r,breakAfter:o<i.length-1?w0(i[o+1]):r}));const u=[];let h;for(o=-1;++o<l.length;){const p=l[o];typeof p=="number"?h!==void 0&&p>h&&(h=p):p&&(h!==void 0&&h>-1&&u.push(`
`.repeat(h)||" "),h=-1,u.push(p))}return u.join("")}function IA(n,e,t){return n.type==="element"?DU(n,e,t):n.type==="text"?t.whitespace==="normal"?LA(n,t):IU(n):[]}function DU(n,e,t){const i=BA(n,t),r=n.children||[];let a=-1,l=[];if(OU(n))return l;let o,u;for(w0(n)||qE(n)&&FE(e,n,qE)?u=`
`:RU(n)?(o=2,u=2):DA(n)&&(o=1,u=1);++a<r.length;)l=l.concat(IA(r[a],n,{whitespace:i,breakBefore:a?void 0:o,breakAfter:a<r.length-1?w0(r[a+1]):u}));return HE(n)&&FE(e,n,HE)&&l.push("	"),o&&l.unshift(o),u&&l.push(u),l}function LA(n,e){const t=String(n.value),i=[],r=[];let a=0;for(;a<=t.length;){UE.lastIndex=a;const u=UE.exec(t),h=u&&"index"in u?u.index:t.length;i.push(LU(t.slice(a,h).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),a===0?e.breakBefore:!0,h===t.length?e.breakAfter:!0)),a=h+1}let l=-1,o;for(;++l<i.length;)i[l].charCodeAt(i[l].length-1)===8203||l<i.length-1&&i[l+1].charCodeAt(0)===8203?(r.push(i[l]),o=void 0):i[l]?(typeof o=="number"&&r.push(o),r.push(i[l]),o=0):(l===0||l===i.length-1)&&r.push(0);return r}function IU(n){return[String(n.value)]}function LU(n,e,t){const i=[];let r=0,a;for(;r<n.length;){jE.lastIndex=r;const l=jE.exec(n);a=l?l.index:n.length,!r&&!a&&l&&!e&&i.push(""),r!==a&&i.push(n.slice(r,a)),r=l?a+l[0].length:a}return r!==a&&!t&&i.push(""),i.join(" ")}function BA(n,e){if(n.type==="element"){const t=n.properties||{};switch(n.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return t.wrap?"pre-wrap":"pre";case"td":case"th":return t.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function BU(n){return!!(n.properties||{}).hidden}function zU(n){return n.tagName==="td"||n.tagName==="th"}function PU(n){return n.tagName==="dialog"&&!(n.properties||{}).open}function FU(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",l="(?!struct)("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:e.optional(r)+n.IDENT_RE,relevance:0},y=e.optional(r)+n.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],w=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],S=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],b=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],E={type:w,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:S},R={className:"function.dispatch",relevance:0,keywords:{_hint:b},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,n.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},M=[R,f,o,t,n.C_BLOCK_COMMENT_MODE,p,h],D={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:E,contains:M.concat([{begin:/\(/,end:/\)/,keywords:E,contains:M.concat(["self"]),relevance:0}]),relevance:0},O={className:"function",begin:"("+l+"[\\*&\\s]+)+"+y,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:E,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:E,relevance:0},{begin:y,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,p]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,h,p,o,{begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,h,p,o]}]},o,t,n.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:E,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(D,O,R,M,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:E,contains:["self",o]},{begin:n.IDENT_RE+"::",keywords:E},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function UU(n){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},t=FU(n),i=t.keywords;return i.type=[...i.type,...e.type],i.literal=[...i.literal,...e.literal],i.built_in=[...i.built_in,...e.built_in],i._hints=e._hints,t.name="Arduino",t.aliases=["ino"],t.supersetOf="cpp",t}function jU(n){const e=n.regex,t={},i={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[t]}]};Object.assign(t,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},i]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[n.BACKSLASH_ESCAPE]},a=n.inherit(n.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),l={begin:/<<-?\s*(?=\w+)/,starts:{contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},o={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,t,r]};r.contains.push(o);const u={match:/\\"/},h={className:"string",begin:/'/,end:/'/},p={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},n.NUMBER_MODE,t]},m=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],y=n.SHEBANG({binary:`(${m.join("|")})`,relevance:10}),x={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[n.inherit(n.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},w=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],S=["true","false"],b={match:/(\/[a-z._-]+)+/},v=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],_=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],E=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],R=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:w,literal:S,built_in:[...v,..._,"set","shopt",...E,...R]},contains:[y,n.SHEBANG(),x,f,a,l,b,o,u,h,p,t]}}function HU(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",l="("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:e.optional(r)+n.IDENT_RE,relevance:0},y=e.optional(r)+n.IDENT_RE+"\\s*\\(",S={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},b=[f,o,t,n.C_BLOCK_COMMENT_MODE,p,h],v={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:S,contains:b.concat([{begin:/\(/,end:/\)/,keywords:S,contains:b.concat(["self"]),relevance:0}]),relevance:0},_={begin:"("+l+"[\\*&\\s]+)+"+y,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:S,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:S,relevance:0},{begin:y,returnBegin:!0,contains:[n.inherit(m,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,h,p,o,{begin:/\(/,end:/\)/,keywords:S,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,h,p,o]}]},o,t,n.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:S,disableAutodetect:!0,illegal:"</",contains:[].concat(v,_,b,[f,{begin:n.IDENT_RE+"::",keywords:S},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},n.TITLE_MODE]}]),exports:{preprocessor:f,strings:h,keywords:S}}}function qU(n){const e=n.regex,t=n.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",l="(?!struct)("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",o={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},h={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},n.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},p={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(h,{className:"string"}),{className:"string",begin:/<.*?>/},t,n.C_BLOCK_COMMENT_MODE]},m={className:"title",begin:e.optional(r)+n.IDENT_RE,relevance:0},y=e.optional(r)+n.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],w=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],S=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],b=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],E={type:w,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:S},R={className:"function.dispatch",relevance:0,keywords:{_hint:b},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,n.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},M=[R,f,o,t,n.C_BLOCK_COMMENT_MODE,p,h],D={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:E,contains:M.concat([{begin:/\(/,end:/\)/,keywords:E,contains:M.concat(["self"]),relevance:0}]),relevance:0},O={className:"function",begin:"("+l+"[\\*&\\s]+)+"+y,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:E,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:E,relevance:0},{begin:y,returnBegin:!0,contains:[m],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[h,p]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:[t,n.C_BLOCK_COMMENT_MODE,h,p,o,{begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:["self",t,n.C_BLOCK_COMMENT_MODE,h,p,o]}]},o,t,n.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:E,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(D,O,R,M,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:E,contains:["self",o]},{begin:n.IDENT_RE+"::",keywords:E},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function VU(n){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],t=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],i=["default","false","null","true"],r=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],a=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],l={keyword:r.concat(a),built_in:e,literal:i},o=n.inherit(n.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),u={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},h={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},p={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=n.inherit(p,{illegal:/\n/}),m={className:"subst",begin:/\{/,end:/\}/,keywords:l},y=n.inherit(m,{illegal:/\n/}),x={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},n.BACKSLASH_ESCAPE,y]},w={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},m]},S=n.inherit(w,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},y]});m.contains=[w,x,p,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,n.C_BLOCK_COMMENT_MODE],y.contains=[S,x,f,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,n.inherit(n.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const b={variants:[h,w,x,p,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},v={begin:"<",end:">",contains:[{beginKeywords:"in out"},o]},_=n.IDENT_RE+"(<"+n.IDENT_RE+"(\\s*,\\s*"+n.IDENT_RE+")*>)?(\\[\\])?",E={begin:"@"+n.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:l,illegal:/::/,contains:[n.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},b,u,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},o,v,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[o,v,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+_+"\\s+)+"+n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:l,contains:[{beginKeywords:t.join(" "),relevance:0},{begin:n.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[n.TITLE_MODE,v],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,relevance:0,contains:[b,u,n.C_BLOCK_COMMENT_MODE]},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},E]}}const WU=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),$U=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],GU=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],KU=[...$U,...GU],YU=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),XU=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),ZU=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),JU=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function QU(n){const e=n.regex,t=WU(n),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},r="and or not only",a=/@-?\w[\w]*(-\w+)*/,l="[a-zA-Z-][a-zA-Z0-9_-]*",o=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,i,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+l,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+XU.join("|")+")"},{begin:":(:)?("+ZU.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+JU.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:a},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:YU.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+KU.join("|")+")\\b"}]}}function ej(n){const e=n.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function tj(n){const a={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:a,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:a,illegal:/["']/}]}]}}function nj(n){const e=n.regex,t=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[n.HASH_COMMENT_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(t,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function ij(n){const e=n.regex,t={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:n.NUMBER_RE}]},i=n.COMMENT();i.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const r={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},a={className:"literal",begin:/\bon|off|true|false|yes|no\b/},l={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},o={begin:/\[/,end:/\]/,contains:[i,a,r,l,t,"self"],relevance:0},u=/[A-Za-z0-9_-]+/,h=/"(\\"|[^"])*"/,p=/'[^']*'/,f=e.either(u,h,p),m=e.concat(f,"(\\s*\\.\\s*",f,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[i,{className:"section",begin:/\[+/,end:/\]+/},{begin:m,className:"attr",starts:{end:/$/,contains:[i,o,a,r,l,t]}}]}}var Kc="[0-9](_*[0-9])*",vp=`\\.(${Kc})`,xp="[0-9a-fA-F](_*[0-9a-fA-F])*",VE={className:"number",variants:[{begin:`(\\b(${Kc})((${vp})|\\.)?|(${vp}))[eE][+-]?(${Kc})[fFdD]?\\b`},{begin:`\\b(${Kc})((${vp})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${vp})[fFdD]?\\b`},{begin:`\\b(${Kc})[fFdD]\\b`},{begin:`\\b0[xX]((${xp})\\.?|(${xp})?\\.(${xp}))[pP][+-]?(${Kc})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${xp})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function zA(n,e,t){return t===-1?"":n.replace(e,i=>zA(n,e,t-1))}function rj(n){const e=n.regex,t="[-a-zA-Z_$][-a-zA-Z_$0-9]*",i=t+zA("(?:<"+t+"~~~(?:\\s*,\\s*"+t+"~~~)*>)?",/~~~/g,2),u={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},h={className:"meta",begin:"@"+t,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},p={className:"params",begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:[n.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:u,illegal:/<\/|#/,contains:[n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[n.BACKSLASH_ESCAPE]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,t],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,t),/\s+/,t,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,t],className:{1:"keyword",3:"title.class"},contains:[p,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+i+"\\s+)",n.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:u,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:u,relevance:0,contains:[h,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,VE,n.C_BLOCK_COMMENT_MODE]},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},VE,h]}}const WE="[A-Za-z$_][0-9A-Za-z$_]*",sj=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],aj=["true","false","null","undefined","NaN","Infinity"],PA=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],FA=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],UA=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],oj=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],lj=[].concat(UA,PA,FA);function cj(n){const e=n.regex,t=(re,{after:U})=>{const B="</"+re[0].slice(1);return re.input.indexOf(B,U)!==-1},i=WE,r={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,U)=>{const B=re[0].length+re.index,P=re.input[B];if(P==="<"||P===","){U.ignoreMatch();return}P===">"&&(t(re,{after:B})||U.ignoreMatch());let Z;const V=re.input.substring(B);if(Z=V.match(/^\s*=/)){U.ignoreMatch();return}if((Z=V.match(/^\s+extends\s+/))&&Z.index===0){U.ignoreMatch();return}}},o={$pattern:WE,keyword:sj,literal:aj,built_in:lj,"variable.language":oj},u="[0-9](_?[0-9])*",h=`\\.(${u})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${u})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},y={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,m],subLanguage:"css"}},w={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,m]},v={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},_=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,x,w,S,{match:/\$\d+/},f];m.contains=_.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(_)});const E=[].concat(v,m.contains),R=E.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(E)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:R},D={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},O={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...PA,...FA]}},L={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},j={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},X={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function G(re){return e.concat("(?!",re.join("|"),")")}const H={match:e.concat(/\b/,G([...UA,"super","import"].map(re=>`${re}\\s*\\(`)),i,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},$={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Q={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},Y="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",te={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(Y)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:R,CLASS_REFERENCE:O},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),L,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,x,w,S,v,{match:/\$\d+/},f,O,{scope:"attr",match:i+e.lookahead(":"),relevance:0},te,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[v,n.REGEXP_MODE,{className:"function",begin:Y,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:R}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:a},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},j,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,n.inherit(n.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},$,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},H,X,D,Q,{match:/\$[(.]/}]}}function uj(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},i=["true","false","null"],r={scope:"literal",beginKeywords:i.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:i},contains:[e,t,n.QUOTE_STRING_MODE,r,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Yc="[0-9](_*[0-9])*",Sp=`\\.(${Yc})`,wp="[0-9a-fA-F](_*[0-9a-fA-F])*",hj={className:"number",variants:[{begin:`(\\b(${Yc})((${Sp})|\\.)?|(${Sp}))[eE][+-]?(${Yc})[fFdD]?\\b`},{begin:`\\b(${Yc})((${Sp})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Sp})[fFdD]?\\b`},{begin:`\\b(${Yc})[fFdD]\\b`},{begin:`\\b0[xX]((${wp})\\.?|(${wp})?\\.(${wp}))[pP][+-]?(${Yc})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${wp})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function dj(n){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},t={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},i={className:"symbol",begin:n.UNDERSCORE_IDENT_RE+"@"},r={className:"subst",begin:/\$\{/,end:/\}/,contains:[n.C_NUMBER_MODE]},a={className:"variable",begin:"\\$"+n.UNDERSCORE_IDENT_RE},l={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[a,r]},{begin:"'",end:"'",illegal:/\n/,contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,a,r]}]};r.contains.push(l);const o={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+n.UNDERSCORE_IDENT_RE+")?"},u={className:"meta",begin:"@"+n.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[n.inherit(l,{className:"string"}),"self"]}]},h=hj,p=n.COMMENT("/\\*","\\*/",{contains:[n.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:n.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},m=f;return m.variants[1].contains=[f],f.variants[1].contains=[m],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),n.C_LINE_COMMENT_MODE,p,t,i,o,u,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:n.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[n.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,n.C_LINE_COMMENT_MODE,p],relevance:0},n.C_LINE_COMMENT_MODE,p,o,u,l,n.C_NUMBER_MODE]},p]},{begin:[/class|interface|trait/,/\s+/,n.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},n.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},o,u]},l,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},h]}}const fj=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),pj=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],mj=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],gj=[...pj,...mj],yj=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),jA=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),HA=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),_j=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),bj=jA.concat(HA).sort().reverse();function vj(n){const e=fj(n),t=bj,i="and or not only",r="[\\w-]+",a="("+r+"|@\\{"+r+"\\})",l=[],o=[],u=function(_){return{className:"string",begin:"~?"+_+".*?"+_}},h=function(_,E,R){return{className:_,begin:E,relevance:R}},p={$pattern:/[a-z-]+/,keyword:i,attribute:yj.join(" ")},f={begin:"\\(",end:"\\)",contains:o,keywords:p,relevance:0};o.push(n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,u("'"),u('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,f,h("variable","@@?"+r,10),h("variable","@\\{"+r+"\\}"),h("built_in","~?`[^`]*?`"),{className:"attribute",begin:r+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const m=o.concat({begin:/\{/,end:/\}/,contains:l}),y={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(o)},x={begin:a+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+_j.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:o}}]},w={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:p,returnEnd:!0,contains:o,relevance:0}},S={className:"variable",variants:[{begin:"@"+r+"\\s*:",relevance:15},{begin:"@"+r}],starts:{end:"[;}]",returnEnd:!0,contains:m}},b={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:a,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,y,h("keyword","all\\b"),h("variable","@\\{"+r+"\\}"),{begin:"\\b("+gj.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,h("selector-tag",a,0),h("selector-id","#"+a),h("selector-class","\\."+a,0),h("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+jA.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+HA.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:m},{begin:"!important"},e.FUNCTION_DISPATCH]},v={begin:r+`:(:)?(${t.join("|")})`,returnBegin:!0,contains:[b]};return l.push(n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,w,S,v,x,b,y,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:l}}function xj(n){const e="\\[=*\\[",t="\\]=*\\]",i={begin:e,end:t,contains:["self"]},r=[n.COMMENT("--(?!"+e+")","$"),n.COMMENT("--"+e,t,{contains:[i],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:n.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:r.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[n.inherit(n.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:r}].concat(r)},n.C_NUMBER_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,{className:"string",begin:e,end:t,contains:[i],relevance:5}])}}function Sj(n){const e={className:"variable",variants:[{begin:"\\$\\("+n.UNDERSCORE_IDENT_RE+"\\)",contains:[n.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},t={className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,e]},i={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,t]},r={begin:"^"+n.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},a={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},l={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[n.HASH_COMMENT_MODE,e,t,i,r,a,l]}}function wj(n){const e=n.regex,t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},r={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},a={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},l={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},o=/[A-Za-z][A-Za-z0-9+.-]*/,u={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,o,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},h={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},p={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=n.inherit(h,{contains:[]}),m=n.inherit(p,{contains:[]});h.contains.push(m),p.contains.push(f);let y=[t,u];return[h,p,f,m].forEach(b=>{b.contains=b.contains.concat(y)}),y=y.concat(h,p),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:y},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:y}]}]},t,a,h,p,{className:"quote",begin:"^>\\s+",contains:y,end:"$"},r,i,u,l,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function Ej(n){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},t=/[a-zA-Z@][a-zA-Z0-9_]*/,o={"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},u={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:o,illegal:"</",contains:[e,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.C_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+u.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:u,contains:[n.UNDERSCORE_TITLE_MODE]},{begin:"\\."+n.UNDERSCORE_IDENT_RE,relevance:0}]}}function Cj(n){const e=n.regex,t=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],i=/[dualxmsipngr]{0,12}/,r={$pattern:/[\w.]+/,keyword:t.join(" ")},a={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:r},l={begin:/->\{/,end:/\}/},o={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},u={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[o]},h={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},p=[n.BACKSLASH_ESCAPE,a,u],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],m=(w,S,b="\\1")=>{const v=b==="\\1"?b:e.concat(b,S);return e.concat(e.concat("(?:",w,")"),S,/(?:\\.|[^\\\/])*?/,v,/(?:\\.|[^\\\/])*?/,b,i)},y=(w,S,b)=>e.concat(e.concat("(?:",w,")"),S,/(?:\\.|[^\\\/])*?/,b,i),x=[u,n.HASH_COMMENT_MODE,n.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),l,{className:"string",contains:p,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},h,{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:m("s|tr|y",e.either(...f,{capture:!0}))},{begin:m("s|tr|y","\\(","\\)")},{begin:m("s|tr|y","\\[","\\]")},{begin:m("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:y("(?:m|qr)?",/\//,/\//)},{begin:y("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:y("m|qr",/\(/,/\)/)},{begin:y("m|qr",/\[/,/\]/)},{begin:y("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE,o]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE,o,h]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return a.contains=x,l.contains=x,{name:"Perl",aliases:["pl","pm"],keywords:r,contains:x}}function Aj(n){const e=n.regex,t=/(?![A-Za-z0-9])(?![$])/,i=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,t),r=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,t),a=e.concat(/[A-Z]+/,t),l={scope:"variable",match:"\\$+"+i},o={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},u={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},h=n.inherit(n.APOS_STRING_MODE,{illegal:null}),p=n.inherit(n.QUOTE_STRING_MODE,{illegal:null,contains:n.QUOTE_STRING_MODE.contains.concat(u)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:n.QUOTE_STRING_MODE.contains.concat(u),"on:begin":($,Q)=>{Q.data._beginMatch=$[1]||$[2]},"on:end":($,Q)=>{Q.data._beginMatch!==$[1]&&Q.ignoreMatch()}},m=n.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),y=`[ 	
]`,x={scope:"string",variants:[p,h,f,m]},w={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},S=["false","null","true"],b=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],v=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],E={keyword:b,literal:($=>{const Q=[];return $.forEach(Y=>{Q.push(Y),Y.toLowerCase()===Y?Q.push(Y.toUpperCase()):Q.push(Y.toLowerCase())}),Q})(S),built_in:v},R=$=>$.map(Q=>Q.replace(/\|\d+$/,"")),M={variants:[{match:[/new/,e.concat(y,"+"),e.concat("(?!",R(v).join("\\b|"),"\\b)"),r],scope:{1:"keyword",4:"title.class"}}]},D=e.concat(i,"\\b(?!\\()"),O={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),D],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[r,e.concat(/::/,e.lookahead(/(?!class\b)/)),D],scope:{1:"title.class",3:"variable.constant"}},{match:[r,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[r,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},L={scope:"attr",match:e.concat(i,e.lookahead(":"),e.lookahead(/(?!::)/))},j={relevance:0,begin:/\(/,end:/\)/,keywords:E,contains:[L,l,O,n.C_BLOCK_COMMENT_MODE,x,w,M]},X={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",R(b).join("\\b|"),"|",R(v).join("\\b|"),"\\b)"),i,e.concat(y,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[j]};j.contains.push(X);const G=[L,O,n.C_BLOCK_COMMENT_MODE,x,w,M],H={begin:e.concat(/#\[\s*\\?/,e.either(r,a)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:S,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:S,keyword:["new","array"]},contains:["self",...G]},...G,{scope:"meta",variants:[{match:r},{match:a}]}]};return{case_insensitive:!1,keywords:E,contains:[H,n.HASH_COMMENT_MODE,n.COMMENT("//","$"),n.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:n.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},o,{scope:"variable.language",match:/\$this\b/},l,X,O,{match:[/const/,/\s/,i],scope:{1:"keyword",3:"variable.constant"}},M,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},n.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:E,contains:["self",H,l,O,n.C_BLOCK_COMMENT_MODE,x,w]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[n.inherit(n.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},n.UNDERSCORE_TITLE_MODE]},x,w]}}function Tj(n){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function kj(n){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function Mj(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],o={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},u={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:o,illegal:/#/},p={begin:/\{\{/,relevance:0},f={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,u],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,u],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,u,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,u,p,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,p,h]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},m="[0-9](_?[0-9])*",y=`(\\b(${m}))?\\.(${m})|\\b(${m})\\.`,x=`\\b|${i.join("|")}`,w={className:"number",relevance:0,variants:[{begin:`(\\b(${m})|(${y}))[eE][+-]?(${m})[jJ]?(?=${x})`},{begin:`(${y})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${x})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${x})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${x})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${x})`},{begin:`\\b(${m})[jJ](?=${x})`}]},S={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:o,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},b={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:["self",u,w,f,n.HASH_COMMENT_MODE]}]};return h.contains=[f,w,u],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:o,illegal:/(<\/|\?)|=>/,contains:[u,w,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,S,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[b]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[w,b,f]}]}}function Rj(n){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function Oj(n){const e=n.regex,t=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,i=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),r=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,a=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:t,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[n.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:t},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),n.HASH_COMMENT_MODE,{scope:"string",contains:[n.BACKSLASH_ESCAPE],variants:[n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),n.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[r,i]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,i]},{scope:{1:"punctuation",2:"number"},match:[a,i]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,i]}]},{scope:{3:"operator"},match:[t,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:r},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:a},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function Nj(n){const e=n.regex,t="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",i=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),r=e.concat(i,/(::\w+)*/),l={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},o={className:"doctag",begin:"@[A-Za-z]+"},u={begin:"#<",end:">"},h=[n.COMMENT("#","$",{contains:[o]}),n.COMMENT("^=begin","^=end",{contains:[o],relevance:10}),n.COMMENT("^__END__",n.MATCH_NOTHING_RE)],p={className:"subst",begin:/#\{/,end:/\}/,keywords:l},f={className:"string",contains:[n.BACKSLASH_ESCAPE,p],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[n.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[n.BACKSLASH_ESCAPE,p]})]}]},m="[1-9](_?[0-9])*|0",y="[0-9](_?[0-9])*",x={className:"number",relevance:0,variants:[{begin:`\\b(${m})(\\.(${y}))?([eE][+-]?(${y})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},w={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:l}]},M=[f,{variants:[{match:[/class\s+/,r,/\s+<\s+/,r]},{match:[/\b(class|module)\s+/,r]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:l},{match:[/(include|extend)\s+/,r],scope:{2:"title.class"},keywords:l},{relevance:0,match:[r,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:i,scope:"title.class"},{match:[/def/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[w]},{begin:n.IDENT_RE+"::"},{className:"symbol",begin:n.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:t}],relevance:0},x,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:l},{begin:"("+n.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[n.BACKSLASH_ESCAPE,p],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(u,h),relevance:0}].concat(u,h);p.contains=M,w.contains=M;const j=[{begin:/^\s*=>/,starts:{end:"$",contains:M}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:l,contains:M}}];return h.unshift(u),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:l,illegal:/\/\*/,contains:[n.SHEBANG({binary:"ruby"})].concat(j).concat(h).concat(M)}}function Dj(n){const e=n.regex,t=/(r#)?/,i=e.concat(t,n.UNDERSCORE_IDENT_RE),r=e.concat(t,n.IDENT_RE),a={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,r,e.lookahead(/\s*\(/))},l="([ui](8|16|32|64|128|size)|f(32|64))?",o=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],u=["true","false","Some","None","Ok","Err"],h=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],p=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:n.IDENT_RE+"!?",type:p,keyword:o,literal:u,built_in:h},illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*","\\*/",{contains:["self"]}),n.inherit(n.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+l},{begin:"\\b0o([0-7_]+)"+l},{begin:"\\b0x([A-Fa-f0-9_]+)"+l},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+l}],relevance:0},{begin:[/fn/,/\s+/,i],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[n.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,i],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,i,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:n.IDENT_RE+"::",keywords:{keyword:"Self",built_in:h,type:p}},{className:"punctuation",begin:"->"},a]}}const Ij=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Lj=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Bj=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],zj=[...Lj,...Bj],Pj=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Fj=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Uj=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),jj=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function Hj(n){const e=Ij(n),t=Uj,i=Fj,r="@[a-z-]+",a="and or not only",o={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+zj.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+t.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+jj.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,o,e.HEXCOLOR,e.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:r,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:Pj.join(" ")},contains:[{begin:r,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function qj(n){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function Vj(n){const e=n.regex,t=n.COMMENT("--","$"),i={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},r={begin:/"/,end:/"/,contains:[{match:/""/}]},a=["true","false","unknown"],l=["double precision","large object","with timezone","without timezone"],o=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],u=["add","asc","collation","desc","final","first","last","view"],h=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],p=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],m=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],y=p,x=[...h,...u].filter(R=>!p.includes(R)),w={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},S={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},b={match:e.concat(/\b/,e.either(...y),/\s*\(/),relevance:0,keywords:{built_in:y}};function v(R){return e.concat(/\b/,e.either(...R.map(M=>M.replace(/\s+/,"\\s+"))),/\b/)}const _={scope:"keyword",match:v(m),relevance:0};function E(R,{exceptions:M,when:D}={}){const O=D;return M=M||[],R.map(L=>L.match(/\|\d+$/)||M.includes(L)?L:O(L)?`${L}|0`:L)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:E(x,{when:R=>R.length<3}),literal:a,type:o,built_in:f},contains:[{scope:"type",match:v(l)},_,b,w,i,r,n.C_NUMBER_MODE,n.C_BLOCK_COMMENT_MODE,t,S]}}function qA(n){return n?typeof n=="string"?n:n.source:null}function kh(n){return Bn("(?=",n,")")}function Bn(...n){return n.map(t=>qA(t)).join("")}function Wj(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function ir(...n){return"("+(Wj(n).capture?"":"?:")+n.map(i=>qA(i)).join("|")+")"}const Hb=n=>Bn(/\b/,n,/\w$/.test(n)?/\b/:/\B/),$j=["Protocol","Type"].map(Hb),$E=["init","self"].map(Hb),Gj=["Any","Self"],I_=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],GE=["false","nil","true"],Kj=["assignment","associativity","higherThan","left","lowerThan","none","right"],Yj=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],KE=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],VA=ir(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),WA=ir(VA,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),L_=Bn(VA,WA,"*"),$A=ir(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),em=ir($A,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),qs=Bn($A,em,"*"),Ep=Bn(/[A-Z]/,em,"*"),Xj=["attached","autoclosure",Bn(/convention\(/,ir("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Bn(/objc\(/,qs,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],Zj=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function Jj(n){const e={match:/\s+/,relevance:0},t=n.COMMENT("/\\*","\\*/",{contains:["self"]}),i=[n.C_LINE_COMMENT_MODE,t],r={match:[/\./,ir(...$j,...$E)],className:{2:"keyword"}},a={match:Bn(/\./,ir(...I_)),relevance:0},l=I_.filter(ze=>typeof ze=="string").concat(["_|0"]),o=I_.filter(ze=>typeof ze!="string").concat(Gj).map(Hb),u={variants:[{className:"keyword",match:ir(...o,...$E)}]},h={$pattern:ir(/\b\w+/,/#\w+/),keyword:l.concat(Yj),literal:GE},p=[r,a,u],f={match:Bn(/\./,ir(...KE)),relevance:0},m={className:"built_in",match:Bn(/\b/,ir(...KE),/(?=\()/)},y=[f,m],x={match:/->/,relevance:0},w={className:"operator",relevance:0,variants:[{match:L_},{match:`\\.(\\.|${WA})+`}]},S=[x,w],b="([0-9]_*)+",v="([0-9a-fA-F]_*)+",_={className:"number",relevance:0,variants:[{match:`\\b(${b})(\\.(${b}))?([eE][+-]?(${b}))?\\b`},{match:`\\b0x(${v})(\\.(${v}))?([pP][+-]?(${b}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},E=(ze="")=>({className:"subst",variants:[{match:Bn(/\\/,ze,/[0\\tnr"']/)},{match:Bn(/\\/,ze,/u\{[0-9a-fA-F]{1,8}\}/)}]}),R=(ze="")=>({className:"subst",match:Bn(/\\/,ze,/[\t ]*(?:[\r\n]|\r\n)/)}),M=(ze="")=>({className:"subst",label:"interpol",begin:Bn(/\\/,ze,/\(/),end:/\)/}),D=(ze="")=>({begin:Bn(ze,/"""/),end:Bn(/"""/,ze),contains:[E(ze),R(ze),M(ze)]}),O=(ze="")=>({begin:Bn(ze,/"/),end:Bn(/"/,ze),contains:[E(ze),M(ze)]}),L={className:"string",variants:[D(),D("#"),D("##"),D("###"),O(),O("#"),O("##"),O("###")]},j=[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}],X={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:j},G=ze=>{const Ue=Bn(ze,/\//),st=Bn(/\//,ze);return{begin:Ue,end:st,contains:[...j,{scope:"comment",begin:`#(?!.*${st})`,end:/$/}]}},H={scope:"regexp",variants:[G("###"),G("##"),G("#"),X]},$={match:Bn(/`/,qs,/`/)},Q={className:"variable",match:/\$\d+/},Y={className:"variable",match:`\\$${em}+`},te=[$,Q,Y],re={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:Zj,contains:[...S,_,L]}]}},U={scope:"keyword",match:Bn(/@/,ir(...Xj),kh(ir(/\(/,/\s+/)))},B={scope:"meta",match:Bn(/@/,qs)},P=[re,U,B],Z={match:kh(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Bn(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,em,"+")},{className:"type",match:Ep,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Bn(/\s+&\s+/,kh(Ep)),relevance:0}]},V={begin:/</,end:/>/,keywords:h,contains:[...i,...p,...P,x,Z]};Z.contains.push(V);const _e={match:Bn(qs,/\s*:/),keywords:"_|0",relevance:0},we={begin:/\(/,end:/\)/,relevance:0,keywords:h,contains:["self",_e,...i,H,...p,...y,...S,_,L,...te,...P,Z]},De={begin:/</,end:/>/,keywords:"repeat each",contains:[...i,Z]},le={begin:ir(kh(Bn(qs,/\s*:/)),kh(Bn(qs,/\s+/,qs,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:qs}]},ee={begin:/\(/,end:/\)/,keywords:h,contains:[le,...i,...p,...S,_,L,...P,Z,we],endsParent:!0,illegal:/["']/},Me={match:[/(func|macro)/,/\s+/,ir($.match,qs,L_)],className:{1:"keyword",3:"title.function"},contains:[De,ee,e],illegal:[/\[/,/%/]},xe={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[De,ee,e],illegal:/\[|%/},Ze={match:[/operator/,/\s+/,L_],className:{1:"keyword",3:"title"}},Le={begin:[/precedencegroup/,/\s+/,Ep],className:{1:"keyword",3:"title"},contains:[Z],keywords:[...Kj,...GE],end:/}/},_t={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Pe={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},je={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,qs,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:h,contains:[De,...p,{begin:/:/,end:/\{/,keywords:h,contains:[{scope:"title.class.inherited",match:Ep},...p],relevance:0}]};for(const ze of L.variants){const Ue=ze.contains.find(Rt=>Rt.label==="interpol");Ue.keywords=h;const st=[...p,...y,...S,_,L,...te];Ue.contains=[...st,{begin:/\(/,end:/\)/,contains:["self",...st]}]}return{name:"Swift",keywords:h,contains:[...i,Me,xe,_t,Pe,je,Ze,Le,{beginKeywords:"import",end:/$/,contains:[...i],relevance:0},H,...p,...y,...S,_,L,...te,...P,Z,we]}}const tm="[A-Za-z$_][0-9A-Za-z$_]*",GA=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],KA=["true","false","null","undefined","NaN","Infinity"],YA=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],XA=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],ZA=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],JA=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],QA=[].concat(ZA,YA,XA);function Qj(n){const e=n.regex,t=(re,{after:U})=>{const B="</"+re[0].slice(1);return re.input.indexOf(B,U)!==-1},i=tm,r={begin:"<>",end:"</>"},a=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(re,U)=>{const B=re[0].length+re.index,P=re.input[B];if(P==="<"||P===","){U.ignoreMatch();return}P===">"&&(t(re,{after:B})||U.ignoreMatch());let Z;const V=re.input.substring(B);if(Z=V.match(/^\s*=/)){U.ignoreMatch();return}if((Z=V.match(/^\s+extends\s+/))&&Z.index===0){U.ignoreMatch();return}}},o={$pattern:tm,keyword:GA,literal:KA,built_in:QA,"variable.language":JA},u="[0-9](_?[0-9])*",h=`\\.(${u})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",f={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${u})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},m={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},y={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,m],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,m],subLanguage:"css"}},w={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,m],subLanguage:"graphql"}},S={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,m]},v={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},_=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,x,w,S,{match:/\$\d+/},f];m.contains=_.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(_)});const E=[].concat(v,m.contains),R=E.concat([{begin:/(\s*)\(/,end:/\)/,keywords:o,contains:["self"].concat(E)}]),M={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:R},D={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},O={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...YA,...XA]}},L={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},j={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[M],illegal:/%/},X={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function G(re){return e.concat("(?!",re.join("|"),")")}const H={match:e.concat(/\b/,G([...ZA,"super","import"].map(re=>`${re}\\s*\\(`)),i,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},$={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Q={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},M]},Y="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",te={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(Y)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[M]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:R,CLASS_REFERENCE:O},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),L,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,y,x,w,S,v,{match:/\$\d+/},f,O,{scope:"attr",match:i+e.lookahead(":"),relevance:0},te,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[v,n.REGEXP_MODE,{className:"function",begin:Y,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:R}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:a},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},j,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[M,n.inherit(n.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},$,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[M]},H,X,D,Q,{match:/\$[(.]/}]}}function eH(n){const e=n.regex,t=Qj(n),i=tm,r=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],a={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},l={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:r},contains:[t.exports.CLASS_REFERENCE]},o={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},u=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:tm,keyword:GA.concat(u),literal:KA,built_in:QA.concat(r),"variable.language":JA},p={className:"meta",begin:"@"+i},f=(w,S,b)=>{const v=w.contains.findIndex(_=>_.label===S);if(v===-1)throw new Error("can not find mode to replace");w.contains.splice(v,1,b)};Object.assign(t.keywords,h),t.exports.PARAMS_CONTAINS.push(p);const m=t.contains.find(w=>w.scope==="attr"),y=Object.assign({},m,{match:e.concat(i,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,m,y]),t.contains=t.contains.concat([p,a,l,y]),f(t,"shebang",n.SHEBANG()),f(t,"use_strict",o);const x=t.contains.find(w=>w.label==="func.def");return x.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function tH(n){const e=n.regex,t={className:"string",begin:/"(""|[^/n])"C\b/},i={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},r=/\d{1,2}\/\d{1,2}\/\d{4}/,a=/\d{4}-\d{1,2}-\d{1,2}/,l=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,u={className:"literal",variants:[{begin:e.concat(/# */,e.either(a,r),/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,l,/ *#/)},{begin:e.concat(/# */,e.either(a,r),/ +/,e.either(l,o),/ *#/)}]},h={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},p={className:"label",begin:/^\w+:/},f=n.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),m=n.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[t,i,u,h,p,f,m,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[m]}]}}function nH(n){n.regex;const e=n.COMMENT(/\(;/,/;\)/);e.contains.push("self");const t=n.COMMENT(/;;/,/$/),i=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],r={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},a={className:"variable",begin:/\$[\w_]+/},l={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},o={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},u={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},h={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:i},contains:[t,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},a,l,r,n.QUOTE_STRING_MODE,u,h,o]}}function iH(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},a={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=n.inherit(a,{begin:/\(/,end:/\)/}),o=n.inherit(n.APOS_STRING_MODE,{className:"string"}),u=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[a,u,o,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[a,l,u,o]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[u]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function rH(n){const e="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},r={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},a={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},l={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,r]},o=n.inherit(l,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),m={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},y={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},x={begin:/\{/,end:/\}/,contains:[y],illegal:"\\n",relevance:0},w={begin:"\\[",end:"\\]",contains:[y],illegal:"\\n",relevance:0},S=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},m,{className:"number",begin:n.C_NUMBER_RE+"\\b",relevance:0},x,w,a,l],b=[...S];return b.pop(),b.push(o),y.contains=b,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:S}}const sH={arduino:UU,bash:jU,c:HU,cpp:qU,csharp:VU,css:QU,diff:ej,go:tj,graphql:nj,ini:ij,java:rj,javascript:cj,json:uj,kotlin:dj,less:vj,lua:xj,makefile:Sj,markdown:wj,objectivec:Ej,perl:Cj,php:Aj,"php-template":Tj,plaintext:kj,python:Mj,"python-repl":Rj,r:Oj,ruby:Nj,rust:Dj,scss:Hj,shell:qj,sql:Vj,swift:Jj,typescript:eH,vbnet:tH,wasm:nH,xml:iH,yaml:rH};var B_,YE;function aH(){if(YE)return B_;YE=1;function n(oe){return oe instanceof Map?oe.clear=oe.delete=oe.set=function(){throw new Error("map is read-only")}:oe instanceof Set&&(oe.add=oe.clear=oe.delete=function(){throw new Error("set is read-only")}),Object.freeze(oe),Object.getOwnPropertyNames(oe).forEach(Ie=>{const it=oe[Ie],Ot=typeof it;(Ot==="object"||Ot==="function")&&!Object.isFrozen(it)&&n(it)}),oe}class e{constructor(Ie){Ie.data===void 0&&(Ie.data={}),this.data=Ie.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(oe){return oe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function i(oe,...Ie){const it=Object.create(null);for(const Ot in oe)it[Ot]=oe[Ot];return Ie.forEach(function(Ot){for(const gn in Ot)it[gn]=Ot[gn]}),it}const r="</span>",a=oe=>!!oe.scope,l=(oe,{prefix:Ie})=>{if(oe.startsWith("language:"))return oe.replace("language:","language-");if(oe.includes(".")){const it=oe.split(".");return[`${Ie}${it.shift()}`,...it.map((Ot,gn)=>`${Ot}${"_".repeat(gn+1)}`)].join(" ")}return`${Ie}${oe}`};class o{constructor(Ie,it){this.buffer="",this.classPrefix=it.classPrefix,Ie.walk(this)}addText(Ie){this.buffer+=t(Ie)}openNode(Ie){if(!a(Ie))return;const it=l(Ie.scope,{prefix:this.classPrefix});this.span(it)}closeNode(Ie){a(Ie)&&(this.buffer+=r)}value(){return this.buffer}span(Ie){this.buffer+=`<span class="${Ie}">`}}const u=(oe={})=>{const Ie={children:[]};return Object.assign(Ie,oe),Ie};class h{constructor(){this.rootNode=u(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Ie){this.top.children.push(Ie)}openNode(Ie){const it=u({scope:Ie});this.add(it),this.stack.push(it)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Ie){return this.constructor._walk(Ie,this.rootNode)}static _walk(Ie,it){return typeof it=="string"?Ie.addText(it):it.children&&(Ie.openNode(it),it.children.forEach(Ot=>this._walk(Ie,Ot)),Ie.closeNode(it)),Ie}static _collapse(Ie){typeof Ie!="string"&&Ie.children&&(Ie.children.every(it=>typeof it=="string")?Ie.children=[Ie.children.join("")]:Ie.children.forEach(it=>{h._collapse(it)}))}}class p extends h{constructor(Ie){super(),this.options=Ie}addText(Ie){Ie!==""&&this.add(Ie)}startScope(Ie){this.openNode(Ie)}endScope(){this.closeNode()}__addSublanguage(Ie,it){const Ot=Ie.root;it&&(Ot.scope=`language:${it}`),this.add(Ot)}toHTML(){return new o(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function f(oe){return oe?typeof oe=="string"?oe:oe.source:null}function m(oe){return w("(?=",oe,")")}function y(oe){return w("(?:",oe,")*")}function x(oe){return w("(?:",oe,")?")}function w(...oe){return oe.map(it=>f(it)).join("")}function S(oe){const Ie=oe[oe.length-1];return typeof Ie=="object"&&Ie.constructor===Object?(oe.splice(oe.length-1,1),Ie):{}}function b(...oe){return"("+(S(oe).capture?"":"?:")+oe.map(Ot=>f(Ot)).join("|")+")"}function v(oe){return new RegExp(oe.toString()+"|").exec("").length-1}function _(oe,Ie){const it=oe&&oe.exec(Ie);return it&&it.index===0}const E=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function R(oe,{joinWith:Ie}){let it=0;return oe.map(Ot=>{it+=1;const gn=it;let hn=f(Ot),ft="";for(;hn.length>0;){const lt=E.exec(hn);if(!lt){ft+=hn;break}ft+=hn.substring(0,lt.index),hn=hn.substring(lt.index+lt[0].length),lt[0][0]==="\\"&&lt[1]?ft+="\\"+String(Number(lt[1])+gn):(ft+=lt[0],lt[0]==="("&&it++)}return ft}).map(Ot=>`(${Ot})`).join(Ie)}const M=/\b\B/,D="[a-zA-Z]\\w*",O="[a-zA-Z_]\\w*",L="\\b\\d+(\\.\\d+)?",j="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",X="\\b(0b[01]+)",G="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",H=(oe={})=>{const Ie=/^#![ ]*\//;return oe.binary&&(oe.begin=w(Ie,/.*\b/,oe.binary,/\b.*/)),i({scope:"meta",begin:Ie,end:/$/,relevance:0,"on:begin":(it,Ot)=>{it.index!==0&&Ot.ignoreMatch()}},oe)},$={begin:"\\\\[\\s\\S]",relevance:0},Q={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[$]},Y={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[$]},te={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},re=function(oe,Ie,it={}){const Ot=i({scope:"comment",begin:oe,end:Ie,contains:[]},it);Ot.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const gn=b("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Ot.contains.push({begin:w(/[ ]+/,"(",gn,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Ot},U=re("//","$"),B=re("/\\*","\\*/"),P=re("#","$"),Z={scope:"number",begin:L,relevance:0},V={scope:"number",begin:j,relevance:0},_e={scope:"number",begin:X,relevance:0},we={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[$,{begin:/\[/,end:/\]/,relevance:0,contains:[$]}]},De={scope:"title",begin:D,relevance:0},le={scope:"title",begin:O,relevance:0},ee={begin:"\\.\\s*"+O,relevance:0};var xe=Object.freeze({__proto__:null,APOS_STRING_MODE:Q,BACKSLASH_ESCAPE:$,BINARY_NUMBER_MODE:_e,BINARY_NUMBER_RE:X,COMMENT:re,C_BLOCK_COMMENT_MODE:B,C_LINE_COMMENT_MODE:U,C_NUMBER_MODE:V,C_NUMBER_RE:j,END_SAME_AS_BEGIN:function(oe){return Object.assign(oe,{"on:begin":(Ie,it)=>{it.data._beginMatch=Ie[1]},"on:end":(Ie,it)=>{it.data._beginMatch!==Ie[1]&&it.ignoreMatch()}})},HASH_COMMENT_MODE:P,IDENT_RE:D,MATCH_NOTHING_RE:M,METHOD_GUARD:ee,NUMBER_MODE:Z,NUMBER_RE:L,PHRASAL_WORDS_MODE:te,QUOTE_STRING_MODE:Y,REGEXP_MODE:we,RE_STARTERS_RE:G,SHEBANG:H,TITLE_MODE:De,UNDERSCORE_IDENT_RE:O,UNDERSCORE_TITLE_MODE:le});function Ze(oe,Ie){oe.input[oe.index-1]==="."&&Ie.ignoreMatch()}function Le(oe,Ie){oe.className!==void 0&&(oe.scope=oe.className,delete oe.className)}function _t(oe,Ie){Ie&&oe.beginKeywords&&(oe.begin="\\b("+oe.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",oe.__beforeBegin=Ze,oe.keywords=oe.keywords||oe.beginKeywords,delete oe.beginKeywords,oe.relevance===void 0&&(oe.relevance=0))}function Pe(oe,Ie){Array.isArray(oe.illegal)&&(oe.illegal=b(...oe.illegal))}function je(oe,Ie){if(oe.match){if(oe.begin||oe.end)throw new Error("begin & end are not supported with match");oe.begin=oe.match,delete oe.match}}function ze(oe,Ie){oe.relevance===void 0&&(oe.relevance=1)}const Ue=(oe,Ie)=>{if(!oe.beforeMatch)return;if(oe.starts)throw new Error("beforeMatch cannot be used with starts");const it=Object.assign({},oe);Object.keys(oe).forEach(Ot=>{delete oe[Ot]}),oe.keywords=it.keywords,oe.begin=w(it.beforeMatch,m(it.begin)),oe.starts={relevance:0,contains:[Object.assign(it,{endsParent:!0})]},oe.relevance=0,delete it.beforeMatch},st=["of","and","for","in","not","or","if","then","parent","list","value"],Rt="keyword";function bt(oe,Ie,it=Rt){const Ot=Object.create(null);return typeof oe=="string"?gn(it,oe.split(" ")):Array.isArray(oe)?gn(it,oe):Object.keys(oe).forEach(function(hn){Object.assign(Ot,bt(oe[hn],Ie,hn))}),Ot;function gn(hn,ft){Ie&&(ft=ft.map(lt=>lt.toLowerCase())),ft.forEach(function(lt){const at=lt.split("|");Ot[at[0]]=[hn,Dt(at[0],at[1])]})}}function Dt(oe,Ie){return Ie?Number(Ie):rn(oe)?0:1}function rn(oe){return st.includes(oe.toLowerCase())}const Ut={},Bt=oe=>{console.error(oe)},wn=(oe,...Ie)=>{console.log(`WARN: ${oe}`,...Ie)},Ee=(oe,Ie)=>{Ut[`${oe}/${Ie}`]||(console.log(`Deprecated as of ${oe}. ${Ie}`),Ut[`${oe}/${Ie}`]=!0)},He=new Error;function dt(oe,Ie,{key:it}){let Ot=0;const gn=oe[it],hn={},ft={};for(let lt=1;lt<=Ie.length;lt++)ft[lt+Ot]=gn[lt],hn[lt+Ot]=!0,Ot+=v(Ie[lt-1]);oe[it]=ft,oe[it]._emit=hn,oe[it]._multi=!0}function St(oe){if(Array.isArray(oe.begin)){if(oe.skip||oe.excludeBegin||oe.returnBegin)throw Bt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),He;if(typeof oe.beginScope!="object"||oe.beginScope===null)throw Bt("beginScope must be object"),He;dt(oe,oe.begin,{key:"beginScope"}),oe.begin=R(oe.begin,{joinWith:""})}}function It(oe){if(Array.isArray(oe.end)){if(oe.skip||oe.excludeEnd||oe.returnEnd)throw Bt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),He;if(typeof oe.endScope!="object"||oe.endScope===null)throw Bt("endScope must be object"),He;dt(oe,oe.end,{key:"endScope"}),oe.end=R(oe.end,{joinWith:""})}}function On(oe){oe.scope&&typeof oe.scope=="object"&&oe.scope!==null&&(oe.beginScope=oe.scope,delete oe.scope)}function zt(oe){On(oe),typeof oe.beginScope=="string"&&(oe.beginScope={_wrap:oe.beginScope}),typeof oe.endScope=="string"&&(oe.endScope={_wrap:oe.endScope}),St(oe),It(oe)}function zn(oe){function Ie(ft,lt){return new RegExp(f(ft),"m"+(oe.case_insensitive?"i":"")+(oe.unicodeRegex?"u":"")+(lt?"g":""))}class it{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(lt,at){at.position=this.position++,this.matchIndexes[this.matchAt]=at,this.regexes.push([at,lt]),this.matchAt+=v(lt)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const lt=this.regexes.map(at=>at[1]);this.matcherRe=Ie(R(lt,{joinWith:"|"}),!0),this.lastIndex=0}exec(lt){this.matcherRe.lastIndex=this.lastIndex;const at=this.matcherRe.exec(lt);if(!at)return null;const Qt=at.findIndex((ur,is)=>is>0&&ur!==void 0),jn=this.matchIndexes[Qt];return at.splice(0,Qt),Object.assign(at,jn)}}class Ot{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(lt){if(this.multiRegexes[lt])return this.multiRegexes[lt];const at=new it;return this.rules.slice(lt).forEach(([Qt,jn])=>at.addRule(Qt,jn)),at.compile(),this.multiRegexes[lt]=at,at}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(lt,at){this.rules.push([lt,at]),at.type==="begin"&&this.count++}exec(lt){const at=this.getMatcher(this.regexIndex);at.lastIndex=this.lastIndex;let Qt=at.exec(lt);if(this.resumingScanAtSamePosition()&&!(Qt&&Qt.index===this.lastIndex)){const jn=this.getMatcher(0);jn.lastIndex=this.lastIndex+1,Qt=jn.exec(lt)}return Qt&&(this.regexIndex+=Qt.position+1,this.regexIndex===this.count&&this.considerAll()),Qt}}function gn(ft){const lt=new Ot;return ft.contains.forEach(at=>lt.addRule(at.begin,{rule:at,type:"begin"})),ft.terminatorEnd&&lt.addRule(ft.terminatorEnd,{type:"end"}),ft.illegal&&lt.addRule(ft.illegal,{type:"illegal"}),lt}function hn(ft,lt){const at=ft;if(ft.isCompiled)return at;[Le,je,zt,Ue].forEach(jn=>jn(ft,lt)),oe.compilerExtensions.forEach(jn=>jn(ft,lt)),ft.__beforeBegin=null,[_t,Pe,ze].forEach(jn=>jn(ft,lt)),ft.isCompiled=!0;let Qt=null;return typeof ft.keywords=="object"&&ft.keywords.$pattern&&(ft.keywords=Object.assign({},ft.keywords),Qt=ft.keywords.$pattern,delete ft.keywords.$pattern),Qt=Qt||/\w+/,ft.keywords&&(ft.keywords=bt(ft.keywords,oe.case_insensitive)),at.keywordPatternRe=Ie(Qt,!0),lt&&(ft.begin||(ft.begin=/\B|\b/),at.beginRe=Ie(at.begin),!ft.end&&!ft.endsWithParent&&(ft.end=/\B|\b/),ft.end&&(at.endRe=Ie(at.end)),at.terminatorEnd=f(at.end)||"",ft.endsWithParent&&lt.terminatorEnd&&(at.terminatorEnd+=(ft.end?"|":"")+lt.terminatorEnd)),ft.illegal&&(at.illegalRe=Ie(ft.illegal)),ft.contains||(ft.contains=[]),ft.contains=[].concat(...ft.contains.map(function(jn){return qn(jn==="self"?ft:jn)})),ft.contains.forEach(function(jn){hn(jn,at)}),ft.starts&&hn(ft.starts,lt),at.matcher=gn(at),at}if(oe.compilerExtensions||(oe.compilerExtensions=[]),oe.contains&&oe.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return oe.classNameAliases=i(oe.classNameAliases||{}),hn(oe)}function Un(oe){return oe?oe.endsWithParent||Un(oe.starts):!1}function qn(oe){return oe.variants&&!oe.cachedVariants&&(oe.cachedVariants=oe.variants.map(function(Ie){return i(oe,{variants:null},Ie)})),oe.cachedVariants?oe.cachedVariants:Un(oe)?i(oe,{starts:oe.starts?i(oe.starts):null}):Object.isFrozen(oe)?i(oe):oe}var Je="11.11.1";class Fi extends Error{constructor(Ie,it){super(Ie),this.name="HTMLInjectionError",this.html=it}}const Zn=t,ta=i,nt=Symbol("nomatch"),Cs=7,As=function(oe){const Ie=Object.create(null),it=Object.create(null),Ot=[];let gn=!0;const hn="Could not find the language '{}', did you forget to load/include a language module?",ft={disableAutodetect:!0,name:"Plain text",contains:[]};let lt={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p};function at(Ge){return lt.noHighlightRe.test(Ge)}function Qt(Ge){let mt=Ge.className+" ";mt+=Ge.parentNode?Ge.parentNode.className:"";const Yt=lt.languageDetectRe.exec(mt);if(Yt){const dn=xi(Yt[1]);return dn||(wn(hn.replace("{}",Yt[1])),wn("Falling back to no-highlight mode for this block.",Ge)),dn?Yt[1]:"no-highlight"}return mt.split(/\s+/).find(dn=>at(dn)||xi(dn))}function jn(Ge,mt,Yt){let dn="",Kn="";typeof mt=="object"?(dn=Ge,Yt=mt.ignoreIllegals,Kn=mt.language):(Ee("10.7.0","highlight(lang, code, ...args) has been deprecated."),Ee("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Kn=Ge,dn=mt),Yt===void 0&&(Yt=!0);const At={code:dn,language:Kn};Ur("before:highlight",At);const ji=At.result?At.result:ur(At.language,At.code,Yt);return ji.code=At.code,Ur("after:highlight",ji),ji}function ur(Ge,mt,Yt,dn){const Kn=Object.create(null);function At(Qe,ht){return Qe.keywords[ht]}function ji(){if(!wt.keywords){Et.addText(yn);return}let Qe=0;wt.keywordPatternRe.lastIndex=0;let ht=wt.keywordPatternRe.exec(yn),Pt="";for(;ht;){Pt+=yn.substring(Qe,ht.index);const en=ii.case_insensitive?ht[0].toLowerCase():ht[0],$t=At(wt,en);if($t){const[ei,cs]=$t;if(Et.addText(Pt),Pt="",Kn[en]=(Kn[en]||0)+1,Kn[en]<=Cs&&(Ms+=cs),ei.startsWith("_"))Pt+=ht[0];else{const Rs=ii.classNameAliases[ei]||ei;Si(ht[0],Rs)}}else Pt+=ht[0];Qe=wt.keywordPatternRe.lastIndex,ht=wt.keywordPatternRe.exec(yn)}Pt+=yn.substring(Qe),Et.addText(Pt)}function Ii(){if(yn==="")return;let Qe=null;if(typeof wt.subLanguage=="string"){if(!Ie[wt.subLanguage]){Et.addText(yn);return}Qe=ur(wt.subLanguage,yn,!0,Il[wt.subLanguage]),Il[wt.subLanguage]=Qe._top}else Qe=rs(yn,wt.subLanguage.length?wt.subLanguage:null);wt.relevance>0&&(Ms+=Qe.relevance),Et.__addSublanguage(Qe._emitter,Qe.language)}function Cn(){wt.subLanguage!=null?Ii():ji(),yn=""}function Si(Qe,ht){Qe!==""&&(Et.startScope(ht),Et.addText(Qe),Et.endScope())}function jo(Qe,ht){let Pt=1;const en=ht.length-1;for(;Pt<=en;){if(!Qe._emit[Pt]){Pt++;continue}const $t=ii.classNameAliases[Qe[Pt]]||Qe[Pt],ei=ht[Pt];$t?Si(ei,$t):(yn=ei,ji(),yn=""),Pt++}}function na(Qe,ht){return Qe.scope&&typeof Qe.scope=="string"&&Et.openNode(ii.classNameAliases[Qe.scope]||Qe.scope),Qe.beginScope&&(Qe.beginScope._wrap?(Si(yn,ii.classNameAliases[Qe.beginScope._wrap]||Qe.beginScope._wrap),yn=""):Qe.beginScope._multi&&(jo(Qe.beginScope,ht),yn="")),wt=Object.create(Qe,{parent:{value:wt}}),wt}function qa(Qe,ht,Pt){let en=_(Qe.endRe,Pt);if(en){if(Qe["on:end"]){const $t=new e(Qe);Qe["on:end"](ht,$t),$t.isMatchIgnored&&(en=!1)}if(en){for(;Qe.endsParent&&Qe.parent;)Qe=Qe.parent;return Qe}}if(Qe.endsWithParent)return qa(Qe.parent,ht,Pt)}function pn(Qe){return wt.matcher.regexIndex===0?(yn+=Qe[0],1):(er=!0,0)}function ia(Qe){const ht=Qe[0],Pt=Qe.rule,en=new e(Pt),$t=[Pt.__beforeBegin,Pt["on:begin"]];for(const ei of $t)if(ei&&(ei(Qe,en),en.isMatchIgnored))return pn(ht);return Pt.skip?yn+=ht:(Pt.excludeBegin&&(yn+=ht),Cn(),!Pt.returnBegin&&!Pt.excludeBegin&&(yn=ht)),na(Pt,Qe),Pt.returnBegin?0:ht.length}function hi(Qe){const ht=Qe[0],Pt=mt.substring(Qe.index),en=qa(wt,Qe,Pt);if(!en)return nt;const $t=wt;wt.endScope&&wt.endScope._wrap?(Cn(),Si(ht,wt.endScope._wrap)):wt.endScope&&wt.endScope._multi?(Cn(),jo(wt.endScope,Qe)):$t.skip?yn+=ht:($t.returnEnd||$t.excludeEnd||(yn+=ht),Cn(),$t.excludeEnd&&(yn=ht));do wt.scope&&Et.closeNode(),!wt.skip&&!wt.subLanguage&&(Ms+=wt.relevance),wt=wt.parent;while(wt!==en.parent);return en.starts&&na(en.starts,Qe),$t.returnEnd?0:ht.length}function jr(){const Qe=[];for(let ht=wt;ht!==ii;ht=ht.parent)ht.scope&&Qe.unshift(ht.scope);Qe.forEach(ht=>Et.openNode(ht))}let as={};function ks(Qe,ht){const Pt=ht&&ht[0];if(yn+=Qe,Pt==null)return Cn(),0;if(as.type==="begin"&&ht.type==="end"&&as.index===ht.index&&Pt===""){if(yn+=mt.slice(ht.index,ht.index+1),!gn){const en=new Error(`0 width match regex (${Ge})`);throw en.languageName=Ge,en.badRule=as.rule,en}return 1}if(as=ht,ht.type==="begin")return ia(ht);if(ht.type==="illegal"&&!Yt){const en=new Error('Illegal lexeme "'+Pt+'" for mode "'+(wt.scope||"<unnamed>")+'"');throw en.mode=wt,en}else if(ht.type==="end"){const en=hi(ht);if(en!==nt)return en}if(ht.type==="illegal"&&Pt==="")return yn+=`
`,1;if(wi>1e5&&wi>ht.index*3)throw new Error("potential infinite loop, way more iterations than matches");return yn+=Pt,Pt.length}const ii=xi(Ge);if(!ii)throw Bt(hn.replace("{}",Ge)),new Error('Unknown language: "'+Ge+'"');const Ho=zn(ii);let os="",wt=dn||Ho;const Il={},Et=new lt.__emitter(lt);jr();let yn="",Ms=0,ls=0,wi=0,er=!1;try{if(ii.__emitTokens)ii.__emitTokens(mt,Et);else{for(wt.matcher.considerAll();;){wi++,er?er=!1:wt.matcher.considerAll(),wt.matcher.lastIndex=ls;const Qe=wt.matcher.exec(mt);if(!Qe)break;const ht=mt.substring(ls,Qe.index),Pt=ks(ht,Qe);ls=Qe.index+Pt}ks(mt.substring(ls))}return Et.finalize(),os=Et.toHTML(),{language:Ge,value:os,relevance:Ms,illegal:!1,_emitter:Et,_top:wt}}catch(Qe){if(Qe.message&&Qe.message.includes("Illegal"))return{language:Ge,value:Zn(mt),illegal:!0,relevance:0,_illegalBy:{message:Qe.message,index:ls,context:mt.slice(ls-100,ls+100),mode:Qe.mode,resultSoFar:os},_emitter:Et};if(gn)return{language:Ge,value:Zn(mt),illegal:!1,relevance:0,errorRaised:Qe,_emitter:Et,_top:wt};throw Qe}}function is(Ge){const mt={value:Zn(Ge),illegal:!1,relevance:0,_top:ft,_emitter:new lt.__emitter(lt)};return mt._emitter.addText(Ge),mt}function rs(Ge,mt){mt=mt||lt.languages||Object.keys(Ie);const Yt=is(Ge),dn=mt.filter(xi).filter(Ui).map(Cn=>ur(Cn,Ge,!1));dn.unshift(Yt);const Kn=dn.sort((Cn,Si)=>{if(Cn.relevance!==Si.relevance)return Si.relevance-Cn.relevance;if(Cn.language&&Si.language){if(xi(Cn.language).supersetOf===Si.language)return 1;if(xi(Si.language).supersetOf===Cn.language)return-1}return 0}),[At,ji]=Kn,Ii=At;return Ii.secondBest=ji,Ii}function Fr(Ge,mt,Yt){const dn=mt&&it[mt]||Yt;Ge.classList.add("hljs"),Ge.classList.add(`language-${dn}`)}function Tn(Ge){let mt=null;const Yt=Qt(Ge);if(at(Yt))return;if(Ur("before:highlightElement",{el:Ge,language:Yt}),Ge.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Ge);return}if(Ge.children.length>0&&(lt.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Ge)),lt.throwUnescapedHTML))throw new Fi("One of your code blocks includes unescaped HTML.",Ge.innerHTML);mt=Ge;const dn=mt.textContent,Kn=Yt?jn(dn,{language:Yt,ignoreIllegals:!0}):rs(dn);Ge.innerHTML=Kn.value,Ge.dataset.highlighted="yes",Fr(Ge,Yt,Kn.language),Ge.result={language:Kn.language,re:Kn.relevance,relevance:Kn.relevance},Kn.secondBest&&(Ge.secondBest={language:Kn.secondBest.language,relevance:Kn.secondBest.relevance}),Ur("after:highlightElement",{el:Ge,result:Kn,text:dn})}function Jn(Ge){lt=ta(lt,Ge)}const Di=()=>{Ji(),Ee("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Ts(){Ji(),Ee("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Dl=!1;function Ji(){function Ge(){Ji()}if(document.readyState==="loading"){Dl||window.addEventListener("DOMContentLoaded",Ge,!1),Dl=!0;return}document.querySelectorAll(lt.cssSelector).forEach(Tn)}function Uo(Ge,mt){let Yt=null;try{Yt=mt(oe)}catch(dn){if(Bt("Language definition for '{}' could not be registered.".replace("{}",Ge)),gn)Bt(dn);else throw dn;Yt=ft}Yt.name||(Yt.name=Ge),Ie[Ge]=Yt,Yt.rawDefinition=mt.bind(null,oe),Yt.aliases&&En(Yt.aliases,{languageName:Ge})}function Qi(Ge){delete Ie[Ge];for(const mt of Object.keys(it))it[mt]===Ge&&delete it[mt]}function Ha(){return Object.keys(Ie)}function xi(Ge){return Ge=(Ge||"").toLowerCase(),Ie[Ge]||Ie[it[Ge]]}function En(Ge,{languageName:mt}){typeof Ge=="string"&&(Ge=[Ge]),Ge.forEach(Yt=>{it[Yt.toLowerCase()]=mt})}function Ui(Ge){const mt=xi(Ge);return mt&&!mt.disableAutodetect}function Ti(Ge){Ge["before:highlightBlock"]&&!Ge["before:highlightElement"]&&(Ge["before:highlightElement"]=mt=>{Ge["before:highlightBlock"](Object.assign({block:mt.el},mt))}),Ge["after:highlightBlock"]&&!Ge["after:highlightElement"]&&(Ge["after:highlightElement"]=mt=>{Ge["after:highlightBlock"](Object.assign({block:mt.el},mt))})}function Qn(Ge){Ti(Ge),Ot.push(Ge)}function ss(Ge){const mt=Ot.indexOf(Ge);mt!==-1&&Ot.splice(mt,1)}function Ur(Ge,mt){const Yt=Ge;Ot.forEach(function(dn){dn[Yt]&&dn[Yt](mt)})}function vr(Ge){return Ee("10.7.0","highlightBlock will be removed entirely in v12.0"),Ee("10.7.0","Please use highlightElement now."),Tn(Ge)}Object.assign(oe,{highlight:jn,highlightAuto:rs,highlightAll:Ji,highlightElement:Tn,highlightBlock:vr,configure:Jn,initHighlighting:Di,initHighlightingOnLoad:Ts,registerLanguage:Uo,unregisterLanguage:Qi,listLanguages:Ha,getLanguage:xi,registerAliases:En,autoDetection:Ui,inherit:ta,addPlugin:Qn,removePlugin:ss}),oe.debugMode=function(){gn=!1},oe.safeMode=function(){gn=!0},oe.versionString=Je,oe.regex={concat:w,lookahead:m,either:b,optional:x,anyNumberOfTimes:y};for(const Ge in xe)typeof xe[Ge]=="object"&&n(xe[Ge]);return Object.assign(oe,xe),oe},Ai=As({});return Ai.newInstance=()=>As({}),B_=Ai,Ai.HighlightJS=Ai,Ai.default=Ai,B_}var oH=aH();const lH=nd(oH),XE={},cH="hljs-";function uH(n){const e=lH.newInstance();return n&&a(n),{highlight:t,highlightAuto:i,listLanguages:r,register:a,registerAlias:l,registered:o};function t(u,h,p){const f=p||XE,m=typeof f.prefix=="string"?f.prefix:cH;if(!e.getLanguage(u))throw new Error("Unknown language: `"+u+"` is not registered");e.configure({__emitter:hH,classPrefix:m});const y=e.highlight(h,{ignoreIllegals:!0,language:u});if(y.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:y.errorRaised});const x=y._emitter.root,w=x.data;return w.language=y.language,w.relevance=y.relevance,x}function i(u,h){const f=(h||XE).subset||r();let m=-1,y=0,x;for(;++m<f.length;){const w=f[m];if(!e.getLanguage(w))continue;const S=t(w,u,h);S.data&&S.data.relevance!==void 0&&S.data.relevance>y&&(y=S.data.relevance,x=S)}return x||{type:"root",children:[],data:{language:void 0,relevance:y}}}function r(){return e.listLanguages()}function a(u,h){if(typeof u=="string")e.registerLanguage(u,h);else{let p;for(p in u)Object.hasOwn(u,p)&&e.registerLanguage(p,u[p])}}function l(u,h){if(typeof u=="string")e.registerAliases(typeof h=="string"?h:[...h],{languageName:u});else{let p;for(p in u)if(Object.hasOwn(u,p)){const f=u[p];e.registerAliases(typeof f=="string"?f:[...f],{languageName:p})}}}function o(u){return!!e.getLanguage(u)}}class hH{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],i=t.children[t.children.length-1];i&&i.type==="text"?i.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const i=this.stack[this.stack.length-1],r=e.root.children;t?i.children.push({type:"element",tagName:"span",properties:{className:[t]},children:r}):i.children.push(...r)}openNode(e){const t=this,i=e.split(".").map(function(l,o){return o?l+"_".repeat(o):t.options.classPrefix+l}),r=this.stack[this.stack.length-1],a={type:"element",tagName:"span",properties:{className:i},children:[]};r.children.push(a),this.stack.push(a)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const dH={};function fH(n){const e=n||dH,t=e.aliases,i=e.detect||!1,r=e.languages||sH,a=e.plainText,l=e.prefix,o=e.subset;let u="hljs";const h=uH(r);if(t&&h.registerAlias(t),l){const p=l.indexOf("-");u=p===-1?l:l.slice(0,p)}return function(p,f){Sm(p,"element",function(m,y,x){if(m.tagName!=="code"||!x||x.type!=="element"||x.tagName!=="pre")return;const w=pH(m);if(w===!1||!w&&!i||w&&a&&a.includes(w))return;Array.isArray(m.properties.className)||(m.properties.className=[]),m.properties.className.includes(u)||m.properties.className.unshift(u);const S=NU(m,{whitespace:"pre"});let b;try{b=w?h.highlight(w,S,{prefix:l}):h.highlightAuto(S,{prefix:l,subset:o})}catch(v){const _=v;if(w&&/Unknown language/.test(_.message)){f.message("Cannot highlight as `"+w+"`, its not registered",{ancestors:[x,m],cause:_,place:m.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw _}!w&&b.data&&b.data.language&&m.properties.className.push("language-"+b.data.language),b.children.length>0&&(m.children=b.children)})}}function pH(n){const e=n.properties.className;let t=-1;if(!Array.isArray(e))return;let i;for(;++t<e.length;){const r=String(e[t]);if(r==="no-highlight"||r==="nohighlight")return!1;!i&&r.slice(0,5)==="lang-"&&(i=r.slice(5)),!i&&r.slice(0,9)==="language-"&&(i=r.slice(9))}return i}const mH="_projectTab_nt2l3_6",gH="_toolbar_nt2l3_15",yH="_backBtn_nt2l3_24",_H="_breadcrumb_nt2l3_49",bH="_breadSep_nt2l3_61",vH="_breadBtn_nt2l3_66",xH="_breadCurrent_nt2l3_81",SH="_content_nt2l3_88",wH="_empty_nt2l3_99",EH="_fileList_nt2l3_109",CH="_fileEntry_nt2l3_114",AH="_fileIcon_nt2l3_139",TH="_fileName_nt2l3_146",kH="_fileSize_nt2l3_154",MH="_fileChevron_nt2l3_161",RH="_fileViewer_nt2l3_170",OH="_markdown_nt2l3_176",NH="_codeBlock_nt2l3_408",oi={projectTab:mH,toolbar:gH,backBtn:yH,breadcrumb:_H,breadSep:bH,breadBtn:vH,breadCurrent:xH,content:SH,empty:wH,fileList:EH,fileEntry:CH,fileIcon:AH,fileName:TH,fileSize:kH,fileChevron:MH,fileViewer:RH,markdown:OH,codeBlock:NH};function ZE(n){return n==null?"":n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}function DH(n,e){if(e==="dir")return"";const t=n.split(".").pop()?.toLowerCase()??"";return{md:"",mdx:"",txt:"",ts:"",tsx:"",js:"",jsx:"",json:"",yaml:"",yml:"",toml:"",css:"",scss:"",html:"",py:"",go:"",rs:"",java:"",sh:"",bash:"",zsh:"",sql:"",graphql:"",svg:"",png:"",jpg:"",gif:"",env:"",lock:""}[t]||""}function JE(n){const e=n.split(".").pop()?.toLowerCase();return e?{ts:"typescript",tsx:"typescript",js:"javascript",jsx:"javascript",py:"python",go:"go",rs:"rust",java:"java",rb:"ruby",sh:"bash",bash:"bash",zsh:"bash",css:"css",scss:"scss",html:"html",json:"json",yaml:"yaml",yml:"yaml",toml:"toml",sql:"sql",graphql:"graphql",xml:"xml",swift:"swift",kt:"kotlin",c:"c",cpp:"cpp",h:"c",hpp:"cpp",cs:"csharp"}[e]:void 0}function IH({projectPath:n}){const[e,t]=K.useState("/"),[i,r]=K.useState([]),[a,l]=K.useState(null),[o,u]=K.useState(!1),[h,p]=K.useState(null),f=K.useCallback(async b=>{u(!0),p(null),l(null);try{const v=await fetch(`/api/files/list?root=${encodeURIComponent(n)}&path=${encodeURIComponent(b)}`);if(!v.ok){const E=await v.json().catch(()=>({error:v.statusText}));throw new Error(E.error||v.statusText)}const _=await v.json();r(_.items),t(b)}catch(v){const _=v instanceof Error?v.message:String(v);p(_),r([])}finally{u(!1)}},[n]),m=K.useCallback(async b=>{u(!0),p(null);try{const v=await fetch(`/api/files/read?root=${encodeURIComponent(n)}&path=${encodeURIComponent(b)}`);if(!v.ok){const E=await v.json().catch(()=>({error:v.statusText}));throw new Error(E.error||v.statusText)}const _=await v.json();l(_),t(b)}catch(v){const _=v instanceof Error?v.message:String(v);p(_)}finally{u(!1)}},[n]);K.useEffect(()=>{n&&f("/")},[n,f]);const y=K.useCallback(()=>{if(a){const v=e.split("/").filter(Boolean);v.pop(),f("/"+v.join("/"));return}if(e==="/")return;const b=e.split("/").filter(Boolean);b.pop(),f("/"+b.join("/"))},[e,a,f]),x=K.useCallback(b=>{const v=e==="/"?"/"+b.name:e+"/"+b.name;b.type==="dir"?f(v):m(v)},[e,f,m]),w=e.split("/").filter(Boolean),S=n.split("/").filter(Boolean).pop()||n;return N.jsxs("div",{className:oi.projectTab,children:[N.jsxs("div",{className:oi.toolbar,children:[N.jsx("button",{className:oi.backBtn,onClick:y,disabled:e==="/"&&!a,title:"Go up",children:""}),N.jsxs("div",{className:oi.breadcrumb,children:[N.jsx("button",{className:oi.breadBtn,onClick:()=>{l(null),f("/")},children:S}),w.map((b,v)=>{const _=v===w.length-1,E="/"+w.slice(0,v+1).join("/");return N.jsxs("span",{children:[N.jsx("span",{className:oi.breadSep,children:"/"}),_?N.jsx("span",{className:oi.breadCurrent,children:b}):N.jsx("button",{className:oi.breadBtn,onClick:()=>{l(null),f(E)},children:b})]},E)})]})]}),N.jsxs("div",{className:oi.content,children:[o&&N.jsx("div",{className:oi.empty,children:"Loading..."}),h&&N.jsx("div",{className:oi.empty,style:{color:"var(--accent-red)"},children:h}),!o&&!h&&!a&&i.length===0&&N.jsx("div",{className:oi.empty,children:"EMPTY DIRECTORY"}),!o&&!h&&!a&&i.length>0&&N.jsx("div",{className:oi.fileList,children:i.map(b=>N.jsxs("button",{className:oi.fileEntry,onClick:()=>x(b),children:[N.jsx("span",{className:oi.fileIcon,children:DH(b.name,b.type)}),N.jsx("span",{className:oi.fileName,children:b.name}),b.type==="file"&&b.size!=null&&N.jsx("span",{className:oi.fileSize,children:ZE(b.size)}),b.type==="dir"&&N.jsx("span",{className:oi.fileChevron,children:""})]},b.name))}),!o&&!h&&a&&N.jsx("div",{className:oi.fileViewer,children:a.binary?N.jsxs("div",{className:oi.empty,children:["Binary file (",ZE(a.size),")"]}):a.ext==="md"||a.ext==="mdx"?N.jsx("div",{className:oi.markdown,children:N.jsx(d9,{remarkPlugins:[CU],rehypePlugins:[fH],components:{a:({children:b,...v})=>N.jsx("a",{...v,target:"_blank",rel:"noopener noreferrer",children:b})},children:a.content||""})}):N.jsx("pre",{className:oi.codeBlock,children:N.jsx("code",{className:JE(a.path)?`language-${JE(a.path)}`:"",children:a.content})})})]})]})}const eT="session-rooms";function QE(){try{const n=localStorage.getItem(eT);if(n)return JSON.parse(n)}catch{}return[]}function Oo(n){try{localStorage.setItem(eT,JSON.stringify(n))}catch{}}const Gs=kl((n,e)=>({rooms:QE(),createRoom:t=>{const i=`room-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,r=e().rooms,a=new Set(r.map(u=>u.roomIndex).filter(u=>u!=null));let l=0;for(;a.has(l);)l++;const o={id:i,name:t,sessionIds:[],collapsed:!1,createdAt:Date.now(),roomIndex:l};return n(u=>{const h=[...u.rooms,o];return Oo(h),{rooms:h}}),i},renameRoom:(t,i)=>n(r=>{const a=r.rooms.map(l=>l.id===t?{...l,name:i}:l);return Oo(a),{rooms:a}}),deleteRoom:t=>n(i=>{const r=i.rooms.filter(a=>a.id!==t);return Oo(r),{rooms:r}}),addSession:(t,i)=>n(r=>{const a=r.rooms.map(l=>l.id!==t||l.sessionIds.includes(i)?l:{...l,sessionIds:[...l.sessionIds,i]});return Oo(a),{rooms:a}}),removeSession:(t,i)=>n(r=>{const a=r.rooms.map(l=>l.id!==t?l:{...l,sessionIds:l.sessionIds.filter(o=>o!==i)});return Oo(a),{rooms:a}}),moveSession:(t,i,r)=>n(a=>{if(i===r)return a;const l=a.rooms.map(o=>o.id===i?{...o,sessionIds:o.sessionIds.filter(u=>u!==t)}:o.id===r?o.sessionIds.includes(t)?o:{...o,sessionIds:[...o.sessionIds,t]}:o);return Oo(l),{rooms:l}}),toggleCollapse:t=>n(i=>{const r=i.rooms.map(a=>a.id===t?{...a,collapsed:!a.collapsed}:a);return Oo(r),{rooms:r}}),setRoomIndex:(t,i)=>n(r=>{const a=r.rooms.map(l=>l.id===t?{...l,roomIndex:i}:l);return Oo(a),{rooms:a}}),getRoomForSession:t=>e().rooms.find(i=>i.sessionIds.includes(t)),loadFromStorage:()=>{const t=QE();return n({rooms:t}),t}})),qb="kill-confirm";function LH(){const n=bi(m=>m.activeModal),e=bi(m=>m.closeModal),t=mn(m=>m.selectedSessionId),i=mn(m=>m.sessions),r=mn(m=>m.deselectSession),[a,l]=K.useState(!1);if(!(n===qb)||!t)return null;const u=i.get(t),h=u?.projectName||t.slice(0,8),p=()=>{e()},f=async()=>{if(!a){l(!0);try{const y=await(await fetch(`/api/sessions/${t}/kill`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})).json();if(y.ok){if(u?.terminalId)try{await fetch(`/api/terminals/${u.terminalId}`,{method:"DELETE"})}catch{Ct("Failed to close terminal","error")}Ct(`PID ${y.pid||"N/A"} terminated`,"success"),r()}else Ct(y.error||"Kill failed","error")}catch(m){Ct(m.message,"error")}finally{l(!1),e()}}};return N.jsx("div",{className:ot.overlay,onClick:p,children:N.jsxs("div",{className:ot.panel,onClick:m=>m.stopPropagation(),children:[N.jsx("h3",{children:"Kill Session"}),N.jsxs("p",{children:['Kill session for "',h,'"? This will terminate the Claude process (SIGTERM then SIGKILL).']}),N.jsxs("div",{className:ot.actions,children:[N.jsx("button",{className:ot.closeBtn,onClick:p,style:{fontSize:"12px",padding:"6px 14px"},children:"CANCEL"}),N.jsx("button",{onClick:f,disabled:a,style:{background:"rgba(255, 51, 85, 0.15)",border:"1px solid rgba(255, 51, 85, 0.3)",color:"var(--accent-red, #ff3355)",fontFamily:"var(--font-mono)",fontSize:"12px",fontWeight:700,letterSpacing:"1px",padding:"6px 14px",borderRadius:"4px",cursor:a?"not-allowed":"pointer"},children:a?"KILLING...":"KILL"})]})]})})}const Vb="alert-modal";function BH(){const n=bi(h=>h.activeModal),e=bi(h=>h.closeModal),t=mn(h=>h.selectedSessionId),[i,r]=K.useState(5);if(!(n===Vb)||!t)return null;const l=()=>{e()},o=Number.isFinite(i)&&i>=1&&i<=999,u=async()=>{if(o){e();try{const h=Date.now();await Wt.alerts.add({sessionId:t,type:"timer",message:`Alert after ${i} minutes`,createdAt:h}),Ct(`Alert set for ${i} minutes`,"success")}catch(h){Ct(h.message,"error")}}};return N.jsx("div",{className:ot.overlay,onClick:l,children:N.jsxs("div",{className:ot.panel,onClick:h=>h.stopPropagation(),children:[N.jsx("h3",{children:"Set Alert"}),N.jsx("p",{children:"Get notified after a duration of inactivity."}),N.jsxs("div",{className:ot.alertInputRow,children:[N.jsx("input",{type:"number",className:ot.alertInput,value:i,onChange:h=>r(parseInt(h.target.value,10)||0),min:1,max:999}),N.jsx("span",{children:"minutes"})]}),!o&&i!==0&&N.jsx("p",{style:{color:"#ff5555",fontSize:11,margin:"0 0 12px"},children:"Enter a value between 1 and 999"}),N.jsxs("div",{className:ot.actions,children:[N.jsx("button",{className:ot.closeBtn,onClick:l,style:{fontSize:"12px",padding:"6px 14px"},children:"CANCEL"}),N.jsx("button",{onClick:u,disabled:!o,style:{background:"rgba(255, 145, 0, 0.15)",border:"1px solid rgba(255, 145, 0, 0.3)",color:"var(--accent-orange, #ff9100)",fontFamily:"var(--font-mono)",fontSize:"12px",fontWeight:700,letterSpacing:"1px",padding:"6px 14px",borderRadius:"4px",cursor:i<1?"not-allowed":"pointer"},children:"SET ALERT"})]})]})})}const Wb="summarize-modal";function zH(){const n=bi(H=>H.activeModal),e=bi(H=>H.closeModal),t=mn(H=>H.selectedSessionId),i=mn(H=>H.sessions),[r,a]=K.useState([]),[l,o]=K.useState(null),[u,h]=K.useState(!1),[p,f]=K.useState(null),[m,y]=K.useState(""),[x,w]=K.useState(""),[S,b]=K.useState(!1),v=n===Wb;K.useEffect(()=>{v&&_()},[v]);const _=K.useCallback(async()=>{const H=await Wt.summaryPrompts.toArray();a(H);const $=H.find(Q=>Q.isDefault);$?.id!=null&&o($.id)},[]),E=()=>{e(),h(!1),f(null),y(""),w("")};if(!v||!t)return null;const R=i.get(t),M=()=>{if(!R)return"";let H=`Project: ${R.projectName||R.projectPath||"Unknown"}
`;H+=`Status: ${R.status}
`,H+=`Started: ${new Date(R.startedAt).toISOString()}
`,R.endedAt&&(H+=`Ended: ${new Date(R.endedAt).toISOString()}
`),H+=`
--- PROMPTS ---
`;for(const $ of R.promptHistory||[])H+=`[${new Date($.timestamp).toISOString()}] ${$.text}

`;H+=`
--- TOOL CALLS ---
`;for(const $ of R.toolLog||[])H+=`[${new Date($.timestamp).toISOString()}] ${$.tool}: ${$.input||""}
`;H+=`
--- RESPONSES ---
`;for(const $ of R.responseLog||[])H+=`[${new Date($.timestamp).toISOString()}] ${$.text||""}

`;return H},D=async(H,$)=>{if(S)return;const Q=t;b(!0),E();try{const Y=M();let te=$||"";if(!te&&H){const B=await Wt.summaryPrompts.get(H);B&&(te=B.prompt)}const U=await(await fetch(`/api/sessions/${Q}/summarize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:Y,promptTemplate:te})})).json();if(U.ok){const P=mn.getState().selectedSessionId===Q?"AI summary generated & session archived":`Summary generated for session ${Q?.slice(0,8)}`;Ct(P,"success")}else Ct(U.error||"Summarize failed","error")}catch(Y){Ct(Y.message,"error")}finally{b(!1)}},O=async H=>{const $=await Wt.summaryPrompts.toArray();for(const Q of $)Q.isDefault&&Q.id!==H&&await Wt.summaryPrompts.update(Q.id,{isDefault:0});await Wt.summaryPrompts.update(H,{isDefault:1}),await _(),Ct("Default prompt set","success")},L=H=>{f(H.id??null),y(H.name),w(H.prompt),h(!0)},j=async H=>{await Wt.summaryPrompts.delete(H),await _(),Ct("Prompt template removed","info")},X=async()=>{const H=m.trim(),$=x.trim();if(!H||!$){Ct("Name and prompt are required","warning");return}const Q=Date.now();p!=null?(await Wt.summaryPrompts.update(p,{name:H,prompt:$,updatedAt:Q}),Ct("Template updated","success")):(await Wt.summaryPrompts.add({name:H,prompt:$,isDefault:0,createdAt:Q,updatedAt:Q}),Ct("Template saved","success")),h(!1),f(null),y(""),w(""),await _()},G=()=>{const H=x.trim();if(!H){Ct("Write a prompt first","warning");return}D(null,H)};return N.jsx("div",{className:ot.overlay,onClick:E,children:N.jsxs("div",{className:ot.panel,style:{maxWidth:"520px"},onClick:H=>H.stopPropagation(),children:[N.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[N.jsx("h3",{children:"Summarize Session"}),N.jsx("button",{className:ot.closeBtn,onClick:E,children:""})]}),N.jsxs("div",{style:{maxHeight:"240px",overflowY:"auto",marginBottom:"12px"},children:[r.length===0&&N.jsx("p",{style:{textAlign:"center",color:"var(--text-dim)",fontSize:"11px"},children:"No prompt templates yet. Create one below."}),r.map(H=>N.jsxs("div",{onClick:()=>o(H.id??null),style:{padding:"10px 12px",marginBottom:"6px",border:`1px solid ${l===H.id?"var(--accent-cyan)":"var(--border-subtle)"}`,borderRadius:"6px",background:l===H.id?"rgba(0, 229, 255, 0.08)":"transparent",cursor:"pointer",transition:"all 0.15s"},children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[N.jsx("span",{style:{fontSize:"12px",fontWeight:600,color:"var(--text-primary)"},children:H.name}),H.isDefault?N.jsx("span",{style:{fontSize:"9px",fontWeight:700,letterSpacing:"1px",padding:"1px 6px",borderRadius:"3px",color:"var(--accent-cyan)",background:"rgba(0, 229, 255, 0.1)"},children:"DEFAULT"}):null,N.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"4px"},children:[N.jsx("button",{onClick:$=>{$.stopPropagation(),O(H.id)},title:"Set as default",style:{background:"none",border:"none",color:"var(--text-dim)",cursor:"pointer",fontSize:"14px",padding:"2px"},children:""}),N.jsx("button",{onClick:$=>{$.stopPropagation(),L(H)},title:"Edit",style:{background:"none",border:"none",color:"var(--text-dim)",cursor:"pointer",fontSize:"14px",padding:"2px"},children:""}),N.jsx("button",{onClick:$=>{$.stopPropagation(),j(H.id)},title:"Delete",style:{background:"none",border:"none",color:"var(--accent-red)",cursor:"pointer",fontSize:"14px",padding:"2px"},children:""})]})]}),N.jsxs("div",{style:{fontSize:"11px",color:"var(--text-dim)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[H.prompt.substring(0,150),H.prompt.length>150?"...":""]})]},H.id))]}),u&&N.jsxs("div",{style:{marginBottom:"12px",padding:"12px",border:"1px solid var(--border-subtle)",borderRadius:"6px"},children:[N.jsx("input",{type:"text",placeholder:"Template name",value:m,onChange:H=>y(H.target.value),style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--border-accent)",color:"var(--text-primary)",fontFamily:"var(--font-mono)",fontSize:"12px",padding:"6px 8px",borderRadius:"4px",marginBottom:"8px",outline:"none"}}),N.jsx("textarea",{placeholder:"Write your summary prompt...",value:x,onChange:H=>w(H.target.value),rows:4,style:{width:"100%",background:"var(--bg-card)",border:"1px solid var(--border-accent)",color:"var(--text-primary)",fontFamily:"var(--font-mono)",fontSize:"12px",padding:"8px",borderRadius:"4px",resize:"vertical",outline:"none"}}),N.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[N.jsx("button",{onClick:X,style:{background:"rgba(0, 229, 255, 0.12)",border:"1px solid rgba(0, 229, 255, 0.3)",color:"var(--accent-cyan)",fontFamily:"var(--font-mono)",fontSize:"10px",fontWeight:700,letterSpacing:"1px",padding:"4px 10px",borderRadius:"4px",cursor:"pointer"},children:p!=null?"UPDATE":"SAVE"}),N.jsx("button",{onClick:G,style:{background:"rgba(255, 204, 0, 0.12)",border:"1px solid rgba(255, 204, 0, 0.3)",color:"#ffcc00",fontFamily:"var(--font-mono)",fontSize:"10px",fontWeight:700,letterSpacing:"1px",padding:"4px 10px",borderRadius:"4px",cursor:"pointer"},children:"USE ONCE"})]})]}),N.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[N.jsx("button",{onClick:()=>{h(!u),u&&(f(null),y(""),w(""))},style:{background:"none",border:"1px solid var(--border-subtle)",color:"var(--text-secondary)",fontFamily:"var(--font-mono)",fontSize:"10px",fontWeight:600,letterSpacing:"0.5px",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"},children:u?"HIDE FORM":"CUSTOM PROMPT"}),N.jsx("button",{onClick:()=>D(l,null),disabled:!l||S,style:{background:l?"rgba(255, 204, 0, 0.15)":"transparent",border:"1px solid rgba(255, 204, 0, 0.3)",color:"#ffcc00",fontFamily:"var(--font-mono)",fontSize:"10px",fontWeight:700,letterSpacing:"1px",padding:"6px 14px",borderRadius:"4px",cursor:l&&!S?"pointer":"not-allowed",opacity:l?1:.5},children:S?"SUMMARIZING...":"SUMMARIZE"})]})]})})}const tT=["ONEOFF","HEAVY","IMPORTANT"],PH={ONEOFF:"#ff9100",HEAVY:"#ff3355",IMPORTANT:"#aa66ff"},E0="session-labels";function FH(){try{return JSON.parse(localStorage.getItem(E0)||"[]").filter(e=>!tT.includes(e)).slice(0,5)}catch{return[]}}function UH(n){try{const e=JSON.parse(localStorage.getItem(E0)||"[]"),t=e.indexOf(n);t!==-1&&e.splice(t,1),e.unshift(n),localStorage.setItem(E0,JSON.stringify(e.slice(0,30)))}catch{}}function jH({sessionId:n,currentLabel:e}){const t=mn(h=>h.updateSession),i=mn(h=>h.sessions),[r,a]=K.useState(e),l=FH(),o=[...tT,...l],u=K.useCallback(async h=>{const p=r===h?"":h;a(p);const f=i.get(n);f&&t({...f,label:p});try{if(!(await fetch(`/api/sessions/${n}/label`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:p})})).ok)throw new Error("Server error")}catch{a(r===h?h:r);const m=i.get(n);m&&t({...m,label:r===h?h:r}),Ct("Failed to save label","error")}p&&UH(p)},[n,r,i,t]);return N.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:o.map(h=>{const p=h===r,f=PH[h]||"var(--text-secondary)";return N.jsx("button",{onClick:()=>u(h),style:{display:"inline-flex",alignItems:"center",gap:"4px",background:p?`${f}1a`:"transparent",border:`1px solid ${p?f:"var(--border-subtle)"}`,color:p?f:"var(--text-dim)",fontFamily:"var(--font-mono)",fontSize:"10px",fontWeight:600,letterSpacing:"0.5px",padding:"3px 8px",borderRadius:"10px",cursor:"pointer",transition:"all 0.15s"},children:h},h)})})}function HH({session:n}){const e=mn(_=>_.deselectSession),t=mn(_=>_.removeSession);mn(_=>_.updateSession),mn(_=>_.selectSession);const i=bi(_=>_.openModal),r=Gs(_=>_.rooms),a=Gs(_=>_.addSession),l=Gs(_=>_.removeSession),[o,u]=K.useState(!1),h=K.useRef(null),p=n.status==="ended";K.useEffect(()=>()=>{h.current?.abort()},[n.sessionId]);const f=K.useCallback(async()=>{if(o||!p)return;h.current?.abort();const _=new AbortController;h.current=_,u(!0);try{const R=await(await fetch(`/api/sessions/${n.sessionId}/resume`,{method:"POST",headers:{"Content-Type":"application/json"},signal:_.signal})).json();R.ok?Ct("Resuming Claude session in terminal","success"):Ct(R.error||"Resume failed","error")}catch(E){if(E.name==="AbortError")return;Ct(E.message,"error")}finally{u(!1)}},[n.sessionId,o,p]),m=K.useCallback(()=>{i(qb)},[i]),y=K.useCallback(async()=>{try{const _=await Wt.sessions.get(n.sessionId);_&&await Wt.sessions.update(n.sessionId,{status:"ended",archived:1,endedAt:_.endedAt||Date.now()}),(await fetch(`/api/sessions/${n.sessionId}`,{method:"DELETE"})).ok||Ct("Server archive failed, archived locally","warning"),e(),t(n.sessionId),Ct("Session archived to history","success")}catch(_){Ct(_.message,"error")}},[n.sessionId,e,t]),x=K.useCallback(async()=>{const _=n.title||n.projectName||n.sessionId.slice(0,8);if(window.confirm(`Permanently delete session "${_}"?
This cannot be undone.`))try{await fetch(`/api/sessions/${n.sessionId}`,{method:"DELETE"}),await dO(n.sessionId),e(),t(n.sessionId),Ct(`Session "${_}" permanently removed`,"success")}catch(E){Ct(E.message,"error")}},[n.sessionId,n.title,n.projectName,e,t]),w=K.useCallback(()=>{i(Wb)},[i]),S=K.useCallback(()=>{i(Vb)},[i]),b=K.useCallback(_=>{const E=_.target.value;if(E==="__new__"){const R=window.prompt("New room name:");if(R?.trim()){const M=Gs.getState().createRoom(R.trim());Gs.getState().addSession(M,n.sessionId),Ct(`Created and assigned to "${R.trim()}"`,"success")}return}for(const R of r)R.sessionIds.includes(n.sessionId)&&l(R.id,n.sessionId);E?(a(E,n.sessionId),Ct("Moved to room","info")):Ct("Removed from room","info")},[n.sessionId,r,a,l]),v=r.find(_=>_.sessionIds.includes(n.sessionId))?.id||"";return N.jsxs("div",{children:[N.jsxs("div",{className:Ke.ctrlBar,children:[p&&N.jsx("button",{className:`${Ke.ctrlBtn} ${Ke.resume}`,onClick:f,disabled:o,children:o?"RESUMING...":"RESUME"}),N.jsx("button",{className:`${Ke.ctrlBtn} ${Ke.kill}`,onClick:m,children:"KILL"}),N.jsx("button",{className:`${Ke.ctrlBtn} ${Ke.archive}`,onClick:y,children:"ARCHIVE"}),N.jsx("button",{className:`${Ke.ctrlBtn} ${Ke.delete}`,onClick:x,children:"DELETE"}),N.jsx("button",{className:`${Ke.ctrlBtn} ${Ke.summarize}`,onClick:w,children:"SUMMARIZE"}),N.jsx("button",{className:`${Ke.ctrlBtn} ${Ke.alert}`,onClick:S,children:"ALERT"}),N.jsxs("select",{className:Ke.ctrlSelect,value:v,onChange:b,children:[N.jsx("option",{value:"",children:"No room"}),r.map(_=>N.jsx("option",{value:_.id,children:_.name},_.id)),N.jsx("option",{value:"__new__",children:"+ New Room"})]})]}),N.jsx("div",{style:{padding:"8px 20px",borderBottom:"1px solid var(--border-subtle)"},children:N.jsx(jH,{sessionId:n.sessionId,currentLabel:n.label||""})})]})}var qH=uC(),z_={exports:{}},eC;function VH(){return eC||(eC=1,(function(n,e){(function(t,i){n.exports=i()})(globalThis,(()=>(()=>{var t={4567:function(l,o,u){var h=this&&this.__decorate||function(v,_,E,R){var M,D=arguments.length,O=D<3?_:R===null?R=Object.getOwnPropertyDescriptor(_,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(v,_,E,R);else for(var L=v.length-1;L>=0;L--)(M=v[L])&&(O=(D<3?M(O):D>3?M(_,E,O):M(_,E))||O);return D>3&&O&&Object.defineProperty(_,E,O),O},p=this&&this.__param||function(v,_){return function(E,R){_(E,R,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const f=u(9042),m=u(9924),y=u(844),x=u(4725),w=u(2585),S=u(3656);let b=o.AccessibilityManager=class extends y.Disposable{constructor(v,_,E,R){super(),this._terminal=v,this._coreBrowserService=E,this._renderService=R,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let M=0;M<this._terminal.rows;M++)this._rowElements[M]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[M]);if(this._topBoundaryFocusListener=M=>this._handleBoundaryFocus(M,0),this._bottomBoundaryFocusListener=M=>this._handleBoundaryFocus(M,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((M=>this._handleResize(M.rows)))),this.register(this._terminal.onRender((M=>this._refreshRows(M.start,M.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((M=>this._handleChar(M)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((M=>this._handleTab(M)))),this.register(this._terminal.onKey((M=>this._handleKey(M.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,S.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,y.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(v){for(let _=0;_<v;_++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(v){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(v)||this._charsToConsume.push(v)}_refreshRows(v,_){this._liveRegionDebouncer.refresh(v,_,this._terminal.rows)}_renderRows(v,_){const E=this._terminal.buffer,R=E.lines.length.toString();for(let M=v;M<=_;M++){const D=E.lines.get(E.ydisp+M),O=[],L=D?.translateToString(!0,void 0,void 0,O)||"",j=(E.ydisp+M+1).toString(),X=this._rowElements[M];X&&(L.length===0?(X.innerText="",this._rowColumns.set(X,[0,1])):(X.textContent=L,this._rowColumns.set(X,O)),X.setAttribute("aria-posinset",j),X.setAttribute("aria-setsize",R))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,_){const E=v.target,R=this._rowElements[_===0?1:this._rowElements.length-2];if(E.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==R)return;let M,D;if(_===0?(M=E,D=this._rowElements.pop(),this._rowContainer.removeChild(D)):(M=this._rowElements.shift(),D=E,this._rowContainer.removeChild(M)),M.removeEventListener("focus",this._topBoundaryFocusListener),D.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const O=this._createAccessibilityTreeNode();this._rowElements.unshift(O),this._rowContainer.insertAdjacentElement("afterbegin",O)}else{const O=this._createAccessibilityTreeNode();this._rowElements.push(O),this._rowContainer.appendChild(O)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const v=document.getSelection();if(!v)return;if(v.isCollapsed)return void(this._rowContainer.contains(v.anchorNode)&&this._terminal.clearSelection());if(!v.anchorNode||!v.focusNode)return void console.error("anchorNode and/or focusNode are null");let _={node:v.anchorNode,offset:v.anchorOffset},E={node:v.focusNode,offset:v.focusOffset};if((_.node.compareDocumentPosition(E.node)&Node.DOCUMENT_POSITION_PRECEDING||_.node===E.node&&_.offset>E.offset)&&([_,E]=[E,_]),_.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(_={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(_.node))return;const R=this._rowElements.slice(-1)[0];if(E.node.compareDocumentPosition(R)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(E={node:R,offset:R.textContent?.length??0}),!this._rowContainer.contains(E.node))return;const M=({node:L,offset:j})=>{const X=L instanceof Text?L.parentNode:L;let G=parseInt(X?.getAttribute("aria-posinset"),10)-1;if(isNaN(G))return console.warn("row is invalid. Race condition?"),null;const H=this._rowColumns.get(X);if(!H)return console.warn("columns is null. Race condition?"),null;let $=j<H.length?H[j]:H.slice(-1)[0]+1;return $>=this._terminal.cols&&(++G,$=0),{row:G,column:$}},D=M(_),O=M(E);if(D&&O){if(D.row>O.row||D.row===O.row&&D.column>=O.column)throw new Error("invalid range");this._terminal.select(D.column,D.row,(O.row-D.row)*this._terminal.cols-D.column+O.column)}}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const v=this._coreBrowserService.mainDocument.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=b=h([p(1,w.IInstantiationService),p(2,x.ICoreBrowserService),p(3,x.IRenderService)],b)},3614:(l,o)=>{function u(m){return m.replace(/\r?\n/g,"\r")}function h(m,y){return y?"\x1B[200~"+m+"\x1B[201~":m}function p(m,y,x,w){m=h(m=u(m),x.decPrivateModes.bracketedPasteMode&&w.rawOptions.ignoreBracketedPasteMode!==!0),x.triggerDataEvent(m,!0),y.value=""}function f(m,y,x){const w=x.getBoundingClientRect(),S=m.clientX-w.left-10,b=m.clientY-w.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${S}px`,y.style.top=`${b}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=u,o.bracketTextForPaste=h,o.copyHandler=function(m,y){m.clipboardData&&m.clipboardData.setData("text/plain",y.selectionText),m.preventDefault()},o.handlePasteEvent=function(m,y,x,w){m.stopPropagation(),m.clipboardData&&p(m.clipboardData.getData("text/plain"),y,x,w)},o.paste=p,o.moveTextAreaUnderMouseCursor=f,o.rightClickHandler=function(m,y,x,w,S){f(m,y,x),S&&w.rightClickSelect(m),y.value=w.selectionText,y.select()}},7239:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const h=u(1505);o.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(p,f,m){this._css.set(p,f,m)}getCss(p,f){return this._css.get(p,f)}setColor(p,f,m){this._color.set(p,f,m)}getColor(p,f){return this._color.get(p,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(u,h,p,f){u.addEventListener(h,p,f);let m=!1;return{dispose:()=>{m||(m=!0,u.removeEventListener(h,p,f))}}}},3551:function(l,o,u){var h=this&&this.__decorate||function(b,v,_,E){var R,M=arguments.length,D=M<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,v,_,E);else for(var O=b.length-1;O>=0;O--)(R=b[O])&&(D=(M<3?R(D):M>3?R(v,_,D):R(v,_))||D);return M>3&&D&&Object.defineProperty(v,_,D),D},p=this&&this.__param||function(b,v){return function(_,E){v(_,E,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier=void 0;const f=u(3656),m=u(8460),y=u(844),x=u(2585),w=u(4725);let S=o.Linkifier=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(b,v,_,E,R){super(),this._element=b,this._mouseService=v,this._renderService=_,this._bufferService=E,this._linkProviderService=R,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(b){this._lastMouseEvent=b;const v=this._positionFromMouseEvent(b,this._element,this._mouseService);if(!v)return;this._isMouseOut=!1;const _=b.composedPath();for(let E=0;E<_.length;E++){const R=_[E];if(R.classList.contains("xterm"))break;if(R.classList.contains("xterm-hover"))return}this._lastBufferCell&&v.x===this._lastBufferCell.x&&v.y===this._lastBufferCell.y||(this._handleHover(v),this._lastBufferCell=v)}_handleHover(b){if(this._activeLine!==b.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(b,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,b)||(this._clearCurrentLink(),this._askForLink(b,!0))}_askForLink(b,v){this._activeProviderReplies&&v||(this._activeProviderReplies?.forEach((E=>{E?.forEach((R=>{R.link.dispose&&R.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=b.y);let _=!1;for(const[E,R]of this._linkProviderService.linkProviders.entries())v?this._activeProviderReplies?.get(E)&&(_=this._checkLinkProviderResult(E,b,_)):R.provideLinks(b.y,(M=>{if(this._isMouseOut)return;const D=M?.map((O=>({link:O})));this._activeProviderReplies?.set(E,D),_=this._checkLinkProviderResult(E,b,_),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(b.y,this._activeProviderReplies)}))}_removeIntersectingLinks(b,v){const _=new Set;for(let E=0;E<v.size;E++){const R=v.get(E);if(R)for(let M=0;M<R.length;M++){const D=R[M],O=D.link.range.start.y<b?0:D.link.range.start.x,L=D.link.range.end.y>b?this._bufferService.cols:D.link.range.end.x;for(let j=O;j<=L;j++){if(_.has(j)){R.splice(M--,1);break}_.add(j)}}}}_checkLinkProviderResult(b,v,_){if(!this._activeProviderReplies)return _;const E=this._activeProviderReplies.get(b);let R=!1;for(let M=0;M<b;M++)this._activeProviderReplies.has(M)&&!this._activeProviderReplies.get(M)||(R=!0);if(!R&&E){const M=E.find((D=>this._linkAtPosition(D.link,v)));M&&(_=!0,this._handleNewLink(M))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!_)for(let M=0;M<this._activeProviderReplies.size;M++){const D=this._activeProviderReplies.get(M)?.find((O=>this._linkAtPosition(O.link,v)));if(D){_=!0,this._handleNewLink(D);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(b){if(!this._currentLink)return;const v=this._positionFromMouseEvent(b,this._element,this._mouseService);v&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,v)&&this._currentLink.link.activate(b,this._currentLink.link.text)}_clearCurrentLink(b,v){this._currentLink&&this._lastMouseEvent&&(!b||!v||this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=v)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(b){if(!this._lastMouseEvent)return;const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._linkAtPosition(b.link,v)&&(this._currentLink=b,this._currentLink.state={decorations:{underline:b.link.decorations===void 0||b.link.decorations.underline,pointerCursor:b.link.decorations===void 0||b.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,b.link,this._lastMouseEvent),b.link.decorations={},Object.defineProperties(b.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:_=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",_))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:_=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(b.link,_))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((_=>{if(!this._currentLink)return;const E=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,R=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=E&&this._currentLink.link.range.end.y<=R&&(this._clearCurrentLink(E,R),this._lastMouseEvent)){const M=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);M&&this._askForLink(M,!1)}}))))}_linkHover(b,v,_){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!0),this._currentLink.state.decorations.pointerCursor&&b.classList.add("xterm-cursor-pointer")),v.hover&&v.hover(_,v.text)}_fireUnderlineEvent(b,v){const _=b.range,E=this._bufferService.buffer.ydisp,R=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-E-1,_.end.x,_.end.y-E-1,void 0);(v?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(R)}_linkLeave(b,v,_){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!1),this._currentLink.state.decorations.pointerCursor&&b.classList.remove("xterm-cursor-pointer")),v.leave&&v.leave(_,v.text)}_linkAtPosition(b,v){const _=b.range.start.y*this._bufferService.cols+b.range.start.x,E=b.range.end.y*this._bufferService.cols+b.range.end.x,R=v.y*this._bufferService.cols+v.x;return _<=R&&R<=E}_positionFromMouseEvent(b,v,_){const E=_.getCoords(b,v,this._bufferService.cols,this._bufferService.rows);if(E)return{x:E[0],y:E[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(b,v,_,E,R){return{x1:b,y1:v,x2:_,y2:E,cols:this._bufferService.cols,fg:R}}};o.Linkifier=S=h([p(1,w.IMouseService),p(2,w.IRenderService),p(3,x.IBufferService),p(4,w.ILinkProviderService)],S)},9042:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(l,o,u){var h=this&&this.__decorate||function(w,S,b,v){var _,E=arguments.length,R=E<3?S:v===null?v=Object.getOwnPropertyDescriptor(S,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,S,b,v);else for(var M=w.length-1;M>=0;M--)(_=w[M])&&(R=(E<3?_(R):E>3?_(S,b,R):_(S,b))||R);return E>3&&R&&Object.defineProperty(S,b,R),R},p=this&&this.__param||function(w,S){return function(b,v){S(b,v,w)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const f=u(511),m=u(2585);let y=o.OscLinkProvider=class{constructor(w,S,b){this._bufferService=w,this._optionsService=S,this._oscLinkService=b}provideLinks(w,S){const b=this._bufferService.buffer.lines.get(w-1);if(!b)return void S(void 0);const v=[],_=this._optionsService.rawOptions.linkHandler,E=new f.CellData,R=b.getTrimmedLength();let M=-1,D=-1,O=!1;for(let L=0;L<R;L++)if(D!==-1||b.hasContent(L)){if(b.loadCell(L,E),E.hasExtendedAttrs()&&E.extended.urlId){if(D===-1){D=L,M=E.extended.urlId;continue}O=E.extended.urlId!==M}else D!==-1&&(O=!0);if(O||D!==-1&&L===R-1){const j=this._oscLinkService.getLinkData(M)?.uri;if(j){const X={start:{x:D+1,y:w},end:{x:L+(O||L!==R-1?0:1),y:w}};let G=!1;if(!_?.allowNonHttpProtocols)try{const H=new URL(j);["http:","https:"].includes(H.protocol)||(G=!0)}catch{G=!0}G||v.push({text:j,range:X,activate:(H,$)=>_?_.activate(H,$,X):x(0,$),hover:(H,$)=>_?.hover?.(H,$,X),leave:(H,$)=>_?.leave?.(H,$,X)})}O=!1,E.hasExtendedAttrs()&&E.extended.urlId?(D=L,M=E.extended.urlId):(D=-1,M=-1)}}S(v)}};function x(w,S){if(confirm(`Do you want to navigate to ${S}?

WARNING: This link could potentially be dangerous`)){const b=window.open();if(b){try{b.opener=null}catch{}b.location.href=S}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=y=h([p(0,m.IBufferService),p(1,m.IOptionsService),p(2,m.IOscLinkService)],y)},6193:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(u,h){this._renderCallback=u,this._coreBrowserService=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(u,h,p){this._rowCount=p,u=u!==void 0?u:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},3236:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const h=u(3614),p=u(3656),f=u(3551),m=u(9042),y=u(3730),x=u(1680),w=u(3107),S=u(5744),b=u(2950),v=u(1296),_=u(428),E=u(4269),R=u(5114),M=u(8934),D=u(3230),O=u(9312),L=u(4725),j=u(6731),X=u(8055),G=u(8969),H=u(8460),$=u(844),Q=u(6114),Y=u(8437),te=u(2584),re=u(7399),U=u(5941),B=u(9074),P=u(2585),Z=u(5435),V=u(4567),_e=u(779);class we extends G.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(le={}){super(le),this.browser=Q,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new $.MutableDisposable),this._onCursorMove=this.register(new H.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new H.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new H.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new H.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new H.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new H.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new H.EventEmitter),this._onBlur=this.register(new H.EventEmitter),this._onA11yCharEmitter=this.register(new H.EventEmitter),this._onA11yTabEmitter=this.register(new H.EventEmitter),this._onWillOpen=this.register(new H.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(B.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(_e.LinkProviderService),this._instantiationService.setService(L.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((ee,Me)=>this.refresh(ee,Me)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((ee=>this._reportWindowsOptions(ee)))),this.register(this._inputHandler.onColor((ee=>this._handleColorEvent(ee)))),this.register((0,H.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,H.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,H.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,H.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((ee=>this._afterResize(ee.cols,ee.rows)))),this.register((0,$.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(le){if(this._themeService)for(const ee of le){let Me,xe="";switch(ee.index){case 256:Me="foreground",xe="10";break;case 257:Me="background",xe="11";break;case 258:Me="cursor",xe="12";break;default:Me="ansi",xe="4;"+ee.index}switch(ee.type){case 0:const Ze=X.color.toColorRGB(Me==="ansi"?this._themeService.colors.ansi[ee.index]:this._themeService.colors[Me]);this.coreService.triggerDataEvent(`${te.C0.ESC}]${xe};${(0,U.toRgbString)(Ze)}${te.C1_ESCAPED.ST}`);break;case 1:if(Me==="ansi")this._themeService.modifyColors((Le=>Le.ansi[ee.index]=X.channels.toColor(...ee.color)));else{const Le=Me;this._themeService.modifyColors((_t=>_t[Le]=X.channels.toColor(...ee.color)))}break;case 2:this._themeService.restoreColor(ee.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(le){le?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(le){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(te.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const le=this.buffer.ybase+this.buffer.y,ee=this.buffer.lines.get(le);if(!ee)return;const Me=Math.min(this.buffer.x,this.cols-1),xe=this._renderService.dimensions.css.cell.height,Ze=ee.getWidth(Me),Le=this._renderService.dimensions.css.cell.width*Ze,_t=this.buffer.y*this._renderService.dimensions.css.cell.height,Pe=Me*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Pe+"px",this.textarea.style.top=_t+"px",this.textarea.style.width=Le+"px",this.textarea.style.height=xe+"px",this.textarea.style.lineHeight=xe+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,p.addDisposableDomListener)(this.element,"copy",(ee=>{this.hasSelection()&&(0,h.copyHandler)(ee,this._selectionService)})));const le=ee=>(0,h.handlePasteEvent)(ee,this.textarea,this.coreService,this.optionsService);this.register((0,p.addDisposableDomListener)(this.textarea,"paste",le)),this.register((0,p.addDisposableDomListener)(this.element,"paste",le)),Q.isFirefox?this.register((0,p.addDisposableDomListener)(this.element,"mousedown",(ee=>{ee.button===2&&(0,h.rightClickHandler)(ee,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,p.addDisposableDomListener)(this.element,"contextmenu",(ee=>{(0,h.rightClickHandler)(ee,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),Q.isLinux&&this.register((0,p.addDisposableDomListener)(this.element,"auxclick",(ee=>{ee.button===1&&(0,h.moveTextAreaUnderMouseCursor)(ee,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,p.addDisposableDomListener)(this.textarea,"keyup",(le=>this._keyUp(le)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keydown",(le=>this._keyDown(le)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keypress",(le=>this._keyPress(le)),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionupdate",(le=>this._compositionHelper.compositionupdate(le)))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,p.addDisposableDomListener)(this.textarea,"input",(le=>this._inputEvent(le)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(le){if(!le)throw new Error("Terminal requires a parent element.");if(le.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=le.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),le.appendChild(this.element);const ee=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ee.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,p.addDisposableDomListener)(this.screenElement,"mousemove",(Me=>this.updateCursorStyle(Me)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ee.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),Q.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(R.CoreBrowserService,this.textarea,le.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,p.addDisposableDomListener)(this.textarea,"focus",(Me=>this._handleTextAreaFocus(Me)))),this.register((0,p.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(j.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(E.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((Me=>this._onRender.fire(Me)))),this.onResize((Me=>this._renderService.resize(Me.cols,Me.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(b.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(M.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(f.Linkifier,this.screenElement)),this.element.appendChild(ee);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(x.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((Me=>this.scrollLines(Me.amount,Me.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(O.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((Me=>this.scrollLines(Me.amount,Me.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((Me=>this._renderService.handleSelectionChanged(Me.start,Me.end,Me.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((Me=>{this.textarea.value=Me,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((Me=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(w.BufferDecorationRenderer,this.screenElement)),this.register((0,p.addDisposableDomListener)(this.element,"mousedown",(Me=>this._selectionService.handleMouseDown(Me)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(Me=>this._handleScreenReaderModeOptionChange(Me)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(S.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(Me=>{!this._overviewRulerRenderer&&Me&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(S.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const le=this,ee=this.element;function Me(Le){const _t=le._mouseService.getMouseReportCoords(Le,le.screenElement);if(!_t)return!1;let Pe,je;switch(Le.overrideType||Le.type){case"mousemove":je=32,Le.buttons===void 0?(Pe=3,Le.button!==void 0&&(Pe=Le.button<3?Le.button:3)):Pe=1&Le.buttons?0:4&Le.buttons?1:2&Le.buttons?2:3;break;case"mouseup":je=0,Pe=Le.button<3?Le.button:3;break;case"mousedown":je=1,Pe=Le.button<3?Le.button:3;break;case"wheel":if(le._customWheelEventHandler&&le._customWheelEventHandler(Le)===!1||le.viewport.getLinesScrolled(Le)===0)return!1;je=Le.deltaY<0?0:1,Pe=4;break;default:return!1}return!(je===void 0||Pe===void 0||Pe>4)&&le.coreMouseService.triggerMouseEvent({col:_t.col,row:_t.row,x:_t.x,y:_t.y,button:Pe,action:je,ctrl:Le.ctrlKey,alt:Le.altKey,shift:Le.shiftKey})}const xe={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Ze={mouseup:Le=>(Me(Le),Le.buttons||(this._document.removeEventListener("mouseup",xe.mouseup),xe.mousedrag&&this._document.removeEventListener("mousemove",xe.mousedrag)),this.cancel(Le)),wheel:Le=>(Me(Le),this.cancel(Le,!0)),mousedrag:Le=>{Le.buttons&&Me(Le)},mousemove:Le=>{Le.buttons||Me(Le)}};this.register(this.coreMouseService.onProtocolChange((Le=>{Le?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Le)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Le?xe.mousemove||(ee.addEventListener("mousemove",Ze.mousemove),xe.mousemove=Ze.mousemove):(ee.removeEventListener("mousemove",xe.mousemove),xe.mousemove=null),16&Le?xe.wheel||(ee.addEventListener("wheel",Ze.wheel,{passive:!1}),xe.wheel=Ze.wheel):(ee.removeEventListener("wheel",xe.wheel),xe.wheel=null),2&Le?xe.mouseup||(xe.mouseup=Ze.mouseup):(this._document.removeEventListener("mouseup",xe.mouseup),xe.mouseup=null),4&Le?xe.mousedrag||(xe.mousedrag=Ze.mousedrag):(this._document.removeEventListener("mousemove",xe.mousedrag),xe.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,p.addDisposableDomListener)(ee,"mousedown",(Le=>{if(Le.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Le))return Me(Le),xe.mouseup&&this._document.addEventListener("mouseup",xe.mouseup),xe.mousedrag&&this._document.addEventListener("mousemove",xe.mousedrag),this.cancel(Le)}))),this.register((0,p.addDisposableDomListener)(ee,"wheel",(Le=>{if(!xe.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Le)===!1)return!1;if(!this.buffer.hasScrollback){const _t=this.viewport.getLinesScrolled(Le);if(_t===0)return;const Pe=te.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Le.deltaY<0?"A":"B");let je="";for(let ze=0;ze<Math.abs(_t);ze++)je+=Pe;return this.coreService.triggerDataEvent(je,!0),this.cancel(Le,!0)}return this.viewport.handleWheel(Le)?this.cancel(Le):void 0}}),{passive:!1})),this.register((0,p.addDisposableDomListener)(ee,"touchstart",(Le=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Le),this.cancel(Le)}),{passive:!0})),this.register((0,p.addDisposableDomListener)(ee,"touchmove",(Le=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Le)?void 0:this.cancel(Le)}),{passive:!1}))}refresh(le,ee){this._renderService?.refreshRows(le,ee)}updateCursorStyle(le){this._selectionService?.shouldColumnSelect(le)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(le,ee,Me=0){Me===1?(super.scrollLines(le,ee,Me),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(le)}paste(le){(0,h.paste)(le,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(le){this._customKeyEventHandler=le}attachCustomWheelEventHandler(le){this._customWheelEventHandler=le}registerLinkProvider(le){return this._linkProviderService.registerLinkProvider(le)}registerCharacterJoiner(le){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const ee=this._characterJoinerService.register(le);return this.refresh(0,this.rows-1),ee}deregisterCharacterJoiner(le){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(le)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(le){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+le)}registerDecoration(le){return this._decorationService.registerDecoration(le)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(le,ee,Me){this._selectionService.setSelection(le,ee,Me)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(le,ee){this._selectionService?.selectLines(le,ee)}_keyDown(le){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(le)===!1)return!1;const ee=this.browser.isMac&&this.options.macOptionIsMeta&&le.altKey;if(!ee&&!this._compositionHelper.keydown(le))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;ee||le.key!=="Dead"&&le.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const Me=(0,re.evaluateKeyboardEvent)(le,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(le),Me.type===3||Me.type===2){const xe=this.rows-1;return this.scrollLines(Me.type===2?-xe:xe),this.cancel(le,!0)}return Me.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,le)||(Me.cancel&&this.cancel(le,!0),!Me.key||!!(le.key&&!le.ctrlKey&&!le.altKey&&!le.metaKey&&le.key.length===1&&le.key.charCodeAt(0)>=65&&le.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(Me.key!==te.C0.ETX&&Me.key!==te.C0.CR||(this.textarea.value=""),this._onKey.fire({key:Me.key,domEvent:le}),this._showCursor(),this.coreService.triggerDataEvent(Me.key,!0),!this.optionsService.rawOptions.screenReaderMode||le.altKey||le.ctrlKey?this.cancel(le,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(le,ee){const Me=le.isMac&&!this.options.macOptionIsMeta&&ee.altKey&&!ee.ctrlKey&&!ee.metaKey||le.isWindows&&ee.altKey&&ee.ctrlKey&&!ee.metaKey||le.isWindows&&ee.getModifierState("AltGraph");return ee.type==="keypress"?Me:Me&&(!ee.keyCode||ee.keyCode>47)}_keyUp(le){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(le)===!1||((function(ee){return ee.keyCode===16||ee.keyCode===17||ee.keyCode===18})(le)||this.focus(),this.updateCursorStyle(le),this._keyPressHandled=!1)}_keyPress(le){let ee;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(le)===!1)return!1;if(this.cancel(le),le.charCode)ee=le.charCode;else if(le.which===null||le.which===void 0)ee=le.keyCode;else{if(le.which===0||le.charCode===0)return!1;ee=le.which}return!(!ee||(le.altKey||le.ctrlKey||le.metaKey)&&!this._isThirdLevelShift(this.browser,le)||(ee=String.fromCharCode(ee),this._onKey.fire({key:ee,domEvent:le}),this._showCursor(),this.coreService.triggerDataEvent(ee,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(le){if(le.data&&le.inputType==="insertText"&&(!le.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const ee=le.data;return this.coreService.triggerDataEvent(ee,!0),this.cancel(le),!0}return!1}resize(le,ee){le!==this.cols||ee!==this.rows?super.resize(le,ee):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(le,ee){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let le=1;le<this.rows;le++)this.buffer.lines.push(this.buffer.getBlankLine(Y.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const le=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=le,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(te.C0.ESC+"[I"):this.coreService.triggerDataEvent(te.C0.ESC+"[O")}_reportWindowsOptions(le){if(this._renderService)switch(le){case Z.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const ee=this._renderService.dimensions.css.canvas.width.toFixed(0),Me=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[4;${Me};${ee}t`);break;case Z.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const xe=this._renderService.dimensions.css.cell.width.toFixed(0),Ze=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${te.C0.ESC}[6;${Ze};${xe}t`)}}cancel(le,ee){if(this.options.cancelEvents||ee)return le.preventDefault(),le.stopPropagation(),!1}}o.Terminal=we},9924:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(u,h=1e3){this._renderCallback=u,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,h,p){this._rowCount=p,u=u!==void 0?u:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=f-this._lastRefreshMs,y=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,h)}}},1680:function(l,o,u){var h=this&&this.__decorate||function(b,v,_,E){var R,M=arguments.length,D=M<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,v,_,E);else for(var O=b.length-1;O>=0;O--)(R=b[O])&&(D=(M<3?R(D):M>3?R(v,_,D):R(v,_))||D);return M>3&&D&&Object.defineProperty(v,_,D),D},p=this&&this.__param||function(b,v){return function(_,E){v(_,E,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const f=u(3656),m=u(4725),y=u(8460),x=u(844),w=u(2585);let S=o.Viewport=class extends x.Disposable{constructor(b,v,_,E,R,M,D,O){super(),this._viewportElement=b,this._scrollArea=v,this._bufferService=_,this._optionsService=E,this._charSizeService=R,this._renderService=M,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((L=>this._activeBuffer=L.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((L=>this._renderDimensions=L))),this._handleThemeChange(O.colors),this.register(O.onChangeColors((L=>this._handleThemeChange(L)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(b){this._viewportElement.style.backgroundColor=b.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(b){if(b)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const b=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==b&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=b),this._refreshAnimationFrame=null}syncScrollArea(b=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(b);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(b)}_handleScroll(b){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const b=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(b*(this._smoothScrollState.target-this._smoothScrollState.origin)),b<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(b,v){const _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&_<this._lastRecordedBufferHeight)||(b.cancelable&&b.preventDefault(),!1)}handleWheel(b){const v=this._getPixelsScrolled(b);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(b,v))}scrollLines(b){if(b!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const v=b*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!1})}_getPixelsScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let v=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(b,v){let _,E="";const R=[],M=v??this._bufferService.buffer.lines.length,D=this._bufferService.buffer.lines;for(let O=b;O<M;O++){const L=D.get(O);if(!L)continue;const j=D.get(O+1)?.isWrapped;if(E+=L.translateToString(!j),!j||O===D.length-1){const X=document.createElement("div");X.textContent=E,R.push(X),E.length>0&&(_=X),E=""}}return{bufferElements:R,cursorElement:_}}getLinesScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let v=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(b,v){const _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&v.altKey||_==="ctrl"&&v.ctrlKey||_==="shift"&&v.shiftKey?b*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:b*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(b){this._lastTouchY=b.touches[0].pageY}handleTouchMove(b){const v=this._lastTouchY-b.touches[0].pageY;return this._lastTouchY=b.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(b,v))}};o.Viewport=S=h([p(2,w.IBufferService),p(3,w.IOptionsService),p(4,m.ICharSizeService),p(5,m.IRenderService),p(6,m.ICoreBrowserService),p(7,m.IThemeService)],S)},3107:function(l,o,u){var h=this&&this.__decorate||function(w,S,b,v){var _,E=arguments.length,R=E<3?S:v===null?v=Object.getOwnPropertyDescriptor(S,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,S,b,v);else for(var M=w.length-1;M>=0;M--)(_=w[M])&&(R=(E<3?_(R):E>3?_(S,b,R):_(S,b))||R);return E>3&&R&&Object.defineProperty(S,b,R),R},p=this&&this.__param||function(w,S){return function(b,v){S(b,v,w)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const f=u(4725),m=u(844),y=u(2585);let x=o.BufferDecorationRenderer=class extends m.Disposable{constructor(w,S,b,v,_){super(),this._screenElement=w,this._bufferService=S,this._coreBrowserService=b,this._decorationService=v,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((E=>this._removeDecoration(E)))),this.register((0,m.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const w of this._decorationService.decorations)this._renderDecoration(w);this._dimensionsChanged=!1}_renderDecoration(w){this._refreshStyle(w),this._dimensionsChanged&&this._refreshXPosition(w)}_createElement(w){const S=this._coreBrowserService.mainDocument.createElement("div");S.classList.add("xterm-decoration"),S.classList.toggle("xterm-decoration-top-layer",w?.options?.layer==="top"),S.style.width=`${Math.round((w.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,S.style.height=(w.options.height||1)*this._renderService.dimensions.css.cell.height+"px",S.style.top=(w.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",S.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const b=w.options.x??0;return b&&b>this._bufferService.cols&&(S.style.display="none"),this._refreshXPosition(w,S),S}_refreshStyle(w){const S=w.marker.line-this._bufferService.buffers.active.ydisp;if(S<0||S>=this._bufferService.rows)w.element&&(w.element.style.display="none",w.onRenderEmitter.fire(w.element));else{let b=this._decorationElements.get(w);b||(b=this._createElement(w),w.element=b,this._decorationElements.set(w,b),this._container.appendChild(b),w.onDispose((()=>{this._decorationElements.delete(w),b.remove()}))),b.style.top=S*this._renderService.dimensions.css.cell.height+"px",b.style.display=this._altBufferIsActive?"none":"block",w.onRenderEmitter.fire(b)}}_refreshXPosition(w,S=w.element){if(!S)return;const b=w.options.x??0;(w.options.anchor||"left")==="right"?S.style.right=b?b*this._renderService.dimensions.css.cell.width+"px":"":S.style.left=b?b*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(w){this._decorationElements.get(w)?.remove(),this._decorationElements.delete(w),w.dispose()}};o.BufferDecorationRenderer=x=h([p(1,y.IBufferService),p(2,f.ICoreBrowserService),p(3,y.IDecorationService),p(4,f.IRenderService)],x)},5871:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const h of this._zones)if(h.color===u.options.overviewRulerOptions.color&&h.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,u.marker.line))return;if(this._lineAdjacentToZone(h,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(h,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,h){return h>=u.startBufferLine&&h<=u.endBufferLine}_lineAdjacentToZone(u,h,p){return h>=u.startBufferLine-this._linePadding[p||"full"]&&h<=u.endBufferLine+this._linePadding[p||"full"]}_addLineToZone(u,h){u.startBufferLine=Math.min(u.startBufferLine,h),u.endBufferLine=Math.max(u.endBufferLine,h)}}},5744:function(l,o,u){var h=this&&this.__decorate||function(_,E,R,M){var D,O=arguments.length,L=O<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,R):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(_,E,R,M);else for(var j=_.length-1;j>=0;j--)(D=_[j])&&(L=(O<3?D(L):O>3?D(E,R,L):D(E,R))||L);return O>3&&L&&Object.defineProperty(E,R,L),L},p=this&&this.__param||function(_,E){return function(R,M){E(R,M,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const f=u(5871),m=u(4725),y=u(844),x=u(2585),w={full:0,left:0,center:0,right:0},S={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0};let v=o.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,E,R,M,D,O,L){super(),this._viewportElement=_,this._screenElement=E,this._bufferService=R,this._decorationService=M,this._renderService=D,this._optionsService=O,this._coreBrowserService=L,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const j=this._canvas.getContext("2d");if(!j)throw new Error("Ctx cannot be null");this._ctx=j,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),E=Math.ceil(this._canvas.width/3);S.full=this._canvas.width,S.left=_,S.center=E,S.right=_,this._refreshDrawHeightConstants(),b.full=0,b.left=0,b.center=S.left,b.right=S.left+S.center}_refreshDrawHeightConstants(){w.full=Math.round(2*this._coreBrowserService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,E=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowserService.dpr);w.left=E,w.center=E,w.right=E}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*w.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const E of this._decorationService.decorations)this._colorZoneStore.addDecoration(E);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const E of _)E.position!=="full"&&this._renderColorZone(E);for(const E of _)E.position==="full"&&this._renderColorZone(E);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(b[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-w[_.position||"full"]/2),S[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+w[_.position||"full"]))}_queueRefresh(_,E){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=E||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};o.OverviewRulerRenderer=v=h([p(2,x.IBufferService),p(3,x.IDecorationService),p(4,m.IRenderService),p(5,x.IOptionsService),p(6,m.ICoreBrowserService)],v)},2950:function(l,o,u){var h=this&&this.__decorate||function(w,S,b,v){var _,E=arguments.length,R=E<3?S:v===null?v=Object.getOwnPropertyDescriptor(S,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,S,b,v);else for(var M=w.length-1;M>=0;M--)(_=w[M])&&(R=(E<3?_(R):E>3?_(S,b,R):_(S,b))||R);return E>3&&R&&Object.defineProperty(S,b,R),R},p=this&&this.__param||function(w,S){return function(b,v){S(b,v,w)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const f=u(4725),m=u(2585),y=u(2584);let x=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(w,S,b,v,_,E){this._textarea=w,this._compositionView=S,this._bufferService=b,this._optionsService=v,this._coreService=_,this._renderService=E,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(w){this._compositionView.textContent=w.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(w){if(this._isComposing||this._isSendingComposition){if(w.keyCode===229||w.keyCode===16||w.keyCode===17||w.keyCode===18)return!1;this._finalizeComposition(!1)}return w.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(w){if(this._compositionView.classList.remove("active"),this._isComposing=!1,w){const S={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let b;this._isSendingComposition=!1,S.start+=this._dataAlreadySent.length,b=this._isComposing?this._textarea.value.substring(S.start,S.end):this._textarea.value.substring(S.start),b.length>0&&this._coreService.triggerDataEvent(b,!0)}}),0)}else{this._isSendingComposition=!1;const S=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(S,!0)}}_handleAnyTextareaChanges(){const w=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const S=this._textarea.value,b=S.replace(w,"");this._dataAlreadySent=b,S.length>w.length?this._coreService.triggerDataEvent(b,!0):S.length<w.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):S.length===w.length&&S!==w&&this._coreService.triggerDataEvent(S,!0)}}),0)}updateCompositionElements(w){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const S=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),b=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=S*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=b+"px",this._compositionView.style.lineHeight=b+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const E=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(E.width,1)+"px",this._textarea.style.height=Math.max(E.height,1)+"px",this._textarea.style.lineHeight=E.height+"px"}w||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};o.CompositionHelper=x=h([p(2,m.IBufferService),p(3,m.IOptionsService),p(4,m.ICoreService),p(5,f.IRenderService)],x)},9806:(l,o)=>{function u(h,p,f){const m=f.getBoundingClientRect(),y=h.getComputedStyle(f),x=parseInt(y.getPropertyValue("padding-left")),w=parseInt(y.getPropertyValue("padding-top"));return[p.clientX-m.left-x,p.clientY-m.top-w]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=u,o.getCoords=function(h,p,f,m,y,x,w,S,b){if(!x)return;const v=u(h,p,f);return v?(v[0]=Math.ceil((v[0]+(b?w/2:0))/w),v[1]=Math.ceil(v[1]/S),v[0]=Math.min(Math.max(v[0],1),m+(b?1:0)),v[1]=Math.min(Math.max(v[1],1),y),v):void 0}},9504:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const h=u(2584);function p(S,b,v,_){const E=S-f(S,v),R=b-f(b,v),M=Math.abs(E-R)-(function(D,O,L){let j=0;const X=D-f(D,L),G=O-f(O,L);for(let H=0;H<Math.abs(X-G);H++){const $=m(D,O)==="A"?-1:1;L.buffer.lines.get(X+$*H)?.isWrapped&&j++}return j})(S,b,v);return w(M,x(m(S,b),_))}function f(S,b){let v=0,_=b.buffer.lines.get(S),E=_?.isWrapped;for(;E&&S>=0&&S<b.rows;)v++,_=b.buffer.lines.get(--S),E=_?.isWrapped;return v}function m(S,b){return S>b?"A":"B"}function y(S,b,v,_,E,R){let M=S,D=b,O="";for(;M!==v||D!==_;)M+=E?1:-1,E&&M>R.cols-1?(O+=R.buffer.translateBufferLineToString(D,!1,S,M),M=0,S=0,D++):!E&&M<0&&(O+=R.buffer.translateBufferLineToString(D,!1,0,S+1),M=R.cols-1,S=M,D--);return O+R.buffer.translateBufferLineToString(D,!1,S,M)}function x(S,b){const v=b?"O":"[";return h.C0.ESC+v+S}function w(S,b){S=Math.floor(S);let v="";for(let _=0;_<S;_++)v+=b;return v}o.moveToCellSequence=function(S,b,v,_){const E=v.buffer.x,R=v.buffer.y;if(!v.buffer.hasScrollback)return(function(O,L,j,X,G,H){return p(L,X,G,H).length===0?"":w(y(O,L,O,L-f(L,G),!1,G).length,x("D",H))})(E,R,0,b,v,_)+p(R,b,v,_)+(function(O,L,j,X,G,H){let $;$=p(L,X,G,H).length>0?X-f(X,G):L;const Q=X,Y=(function(te,re,U,B,P,Z){let V;return V=p(U,B,P,Z).length>0?B-f(B,P):re,te<U&&V<=B||te>=U&&V<B?"C":"D"})(O,L,j,X,G,H);return w(y(O,$,j,Q,Y==="C",G).length,x(Y,H))})(E,R,S,b,v,_);let M;if(R===b)return M=E>S?"D":"C",w(Math.abs(E-S),x(M,_));M=R>b?"D":"C";const D=Math.abs(R-b);return w((function(O,L){return L.cols-O})(R>b?S:E,v)+(D-1)*v.cols+1+((R>b?E:S)-1),x(M,_))}},1296:function(l,o,u){var h=this&&this.__decorate||function(H,$,Q,Y){var te,re=arguments.length,U=re<3?$:Y===null?Y=Object.getOwnPropertyDescriptor($,Q):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(H,$,Q,Y);else for(var B=H.length-1;B>=0;B--)(te=H[B])&&(U=(re<3?te(U):re>3?te($,Q,U):te($,Q))||U);return re>3&&U&&Object.defineProperty($,Q,U),U},p=this&&this.__param||function(H,$){return function(Q,Y){$(Q,Y,H)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const f=u(3787),m=u(2550),y=u(2223),x=u(6171),w=u(6052),S=u(4725),b=u(8055),v=u(8460),_=u(844),E=u(2585),R="xterm-dom-renderer-owner-",M="xterm-rows",D="xterm-fg-",O="xterm-bg-",L="xterm-focus",j="xterm-selection";let X=1,G=o.DomRenderer=class extends _.Disposable{constructor(H,$,Q,Y,te,re,U,B,P,Z,V,_e,we){super(),this._terminal=H,this._document=$,this._element=Q,this._screenElement=Y,this._viewportElement=te,this._helperContainer=re,this._linkifier2=U,this._charSizeService=P,this._optionsService=Z,this._bufferService=V,this._coreBrowserService=_e,this._themeService=we,this._terminalClass=X++,this._rowElements=[],this._selectionRenderModel=(0,w.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new v.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(M),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(j),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,x.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((De=>this._injectCss(De)))),this._injectCss(this._themeService.colors),this._rowFactory=B.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(R+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((De=>this._handleLinkHover(De)))),this.register(this._linkifier2.onHideLinkUnderline((De=>this._handleLinkLeave(De)))),this.register((0,_.toDisposable)((()=>{this._element.classList.remove(R+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new m.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const H=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*H,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*H),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/H),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/H),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Q of this._rowElements)Q.style.width=`${this.dimensions.css.canvas.width}px`,Q.style.height=`${this.dimensions.css.cell.height}px`,Q.style.lineHeight=`${this.dimensions.css.cell.height}px`,Q.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const $=`${this._terminalSelector} .${M} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=$,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(H){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let $=`${this._terminalSelector} .${M} { color: ${H.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;$+=`${this._terminalSelector} .${M} .xterm-dim { color: ${b.color.multiplyOpacity(H.foreground,.5).css};}`,$+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const Q=`blink_underline_${this._terminalClass}`,Y=`blink_bar_${this._terminalClass}`,te=`blink_block_${this._terminalClass}`;$+=`@keyframes ${Q} { 50% {  border-bottom-style: hidden; }}`,$+=`@keyframes ${Y} { 50% {  box-shadow: none; }}`,$+=`@keyframes ${te} { 0% {  background-color: ${H.cursor.css};  color: ${H.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${H.cursor.css}; }}`,$+=`${this._terminalSelector} .${M}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${M}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${M}.${L} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${te} 1s step-end infinite;}${this._terminalSelector} .${M} .xterm-cursor.xterm-cursor-block { background-color: ${H.cursor.css}; color: ${H.cursorAccent.css};}${this._terminalSelector} .${M} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${H.cursor.css} !important; color: ${H.cursorAccent.css} !important;}${this._terminalSelector} .${M} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${H.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${M} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${H.cursor.css} inset;}${this._terminalSelector} .${M} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${H.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,$+=`${this._terminalSelector} .${j} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${j} div { position: absolute; background-color: ${H.selectionBackgroundOpaque.css};}${this._terminalSelector} .${j} div { position: absolute; background-color: ${H.selectionInactiveBackgroundOpaque.css};}`;for(const[re,U]of H.ansi.entries())$+=`${this._terminalSelector} .${D}${re} { color: ${U.css}; }${this._terminalSelector} .${D}${re}.xterm-dim { color: ${b.color.multiplyOpacity(U,.5).css}; }${this._terminalSelector} .${O}${re} { background-color: ${U.css}; }`;$+=`${this._terminalSelector} .${D}${y.INVERTED_DEFAULT_COLOR} { color: ${b.color.opaque(H.background).css}; }${this._terminalSelector} .${D}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${b.color.multiplyOpacity(b.color.opaque(H.background),.5).css}; }${this._terminalSelector} .${O}${y.INVERTED_DEFAULT_COLOR} { background-color: ${H.foreground.css}; }`,this._themeStyleElement.textContent=$}_setDefaultSpacing(){const H=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${H}px`,this._rowFactory.defaultSpacing=H}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(H,$){for(let Q=this._rowElements.length;Q<=$;Q++){const Y=this._document.createElement("div");this._rowContainer.appendChild(Y),this._rowElements.push(Y)}for(;this._rowElements.length>$;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(H,$){this._refreshRowElements(H,$),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(L),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(L),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(H,$,Q){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(H,$,Q),this.renderRows(0,this._bufferService.rows-1),!H||!$)return;this._selectionRenderModel.update(this._terminal,H,$,Q);const Y=this._selectionRenderModel.viewportStartRow,te=this._selectionRenderModel.viewportEndRow,re=this._selectionRenderModel.viewportCappedStartRow,U=this._selectionRenderModel.viewportCappedEndRow;if(re>=this._bufferService.rows||U<0)return;const B=this._document.createDocumentFragment();if(Q){const P=H[0]>$[0];B.appendChild(this._createSelectionElement(re,P?$[0]:H[0],P?H[0]:$[0],U-re+1))}else{const P=Y===re?H[0]:0,Z=re===te?$[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(re,P,Z));const V=U-re-1;if(B.appendChild(this._createSelectionElement(re+1,0,this._bufferService.cols,V)),re!==U){const _e=te===U?$[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(U,0,_e))}}this._selectionContainer.appendChild(B)}_createSelectionElement(H,$,Q,Y=1){const te=this._document.createElement("div"),re=$*this.dimensions.css.cell.width;let U=this.dimensions.css.cell.width*(Q-$);return re+U>this.dimensions.css.canvas.width&&(U=this.dimensions.css.canvas.width-re),te.style.height=Y*this.dimensions.css.cell.height+"px",te.style.top=H*this.dimensions.css.cell.height+"px",te.style.left=`${re}px`,te.style.width=`${U}px`,te}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const H of this._rowElements)H.replaceChildren()}renderRows(H,$){const Q=this._bufferService.buffer,Y=Q.ybase+Q.y,te=Math.min(Q.x,this._bufferService.cols-1),re=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=H;P<=$;P++){const Z=P+Q.ydisp,V=this._rowElements[P],_e=Q.lines.get(Z);if(!V||!_e)break;V.replaceChildren(...this._rowFactory.createRow(_e,Z,Z===Y,U,B,te,re,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${R}${this._terminalClass}`}_handleLinkHover(H){this._setCellUnderline(H.x1,H.x2,H.y1,H.y2,H.cols,!0)}_handleLinkLeave(H){this._setCellUnderline(H.x1,H.x2,H.y1,H.y2,H.cols,!1)}_setCellUnderline(H,$,Q,Y,te,re){Q<0&&(H=0),Y<0&&($=0);const U=this._bufferService.rows-1;Q=Math.max(Math.min(Q,U),0),Y=Math.max(Math.min(Y,U),0),te=Math.min(te,this._bufferService.cols);const B=this._bufferService.buffer,P=B.ybase+B.y,Z=Math.min(B.x,te-1),V=this._optionsService.rawOptions.cursorBlink,_e=this._optionsService.rawOptions.cursorStyle,we=this._optionsService.rawOptions.cursorInactiveStyle;for(let De=Q;De<=Y;++De){const le=De+B.ydisp,ee=this._rowElements[De],Me=B.lines.get(le);if(!ee||!Me)break;ee.replaceChildren(...this._rowFactory.createRow(Me,le,le===P,_e,we,Z,V,this.dimensions.css.cell.width,this._widthCache,re?De===Q?H:0:-1,re?(De===Y?$:te)-1:-1))}}};o.DomRenderer=G=h([p(7,E.IInstantiationService),p(8,S.ICharSizeService),p(9,E.IOptionsService),p(10,E.IBufferService),p(11,S.ICoreBrowserService),p(12,S.IThemeService)],G)},3787:function(l,o,u){var h=this&&this.__decorate||function(M,D,O,L){var j,X=arguments.length,G=X<3?D:L===null?L=Object.getOwnPropertyDescriptor(D,O):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(M,D,O,L);else for(var H=M.length-1;H>=0;H--)(j=M[H])&&(G=(X<3?j(G):X>3?j(D,O,G):j(D,O))||G);return X>3&&G&&Object.defineProperty(D,O,G),G},p=this&&this.__param||function(M,D){return function(O,L){D(O,L,M)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const f=u(2223),m=u(643),y=u(511),x=u(2585),w=u(8055),S=u(4725),b=u(4269),v=u(6171),_=u(3734);let E=o.DomRendererRowFactory=class{constructor(M,D,O,L,j,X,G){this._document=M,this._characterJoinerService=D,this._optionsService=O,this._coreBrowserService=L,this._coreService=j,this._decorationService=X,this._themeService=G,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(M,D,O){this._selectionStart=M,this._selectionEnd=D,this._columnSelectMode=O}createRow(M,D,O,L,j,X,G,H,$,Q,Y){const te=[],re=this._characterJoinerService.getJoinedCharacters(D),U=this._themeService.colors;let B,P=M.getNoBgTrimmedLength();O&&P<X+1&&(P=X+1);let Z=0,V="",_e=0,we=0,De=0,le=!1,ee=0,Me=!1,xe=0;const Ze=[],Le=Q!==-1&&Y!==-1;for(let _t=0;_t<P;_t++){M.loadCell(_t,this._workCell);let Pe=this._workCell.getWidth();if(Pe===0)continue;let je=!1,ze=_t,Ue=this._workCell;if(re.length>0&&_t===re[0][0]){je=!0;const zt=re.shift();Ue=new b.JoinedCellData(this._workCell,M.translateToString(!0,zt[0],zt[1]),zt[1]-zt[0]),ze=zt[1]-1,Pe=Ue.getWidth()}const st=this._isCellInSelection(_t,D),Rt=O&&_t===X,bt=Le&&_t>=Q&&_t<=Y;let Dt=!1;this._decorationService.forEachDecorationAtCell(_t,D,void 0,(zt=>{Dt=!0}));let rn=Ue.getChars()||m.WHITESPACE_CELL_CHAR;if(rn===" "&&(Ue.isUnderline()||Ue.isOverline())&&(rn=""),xe=Pe*H-$.get(rn,Ue.isBold(),Ue.isItalic()),B){if(Z&&(st&&Me||!st&&!Me&&Ue.bg===_e)&&(st&&Me&&U.selectionForeground||Ue.fg===we)&&Ue.extended.ext===De&&bt===le&&xe===ee&&!Rt&&!je&&!Dt){Ue.isInvisible()?V+=m.WHITESPACE_CELL_CHAR:V+=rn,Z++;continue}Z&&(B.textContent=V),B=this._document.createElement("span"),Z=0,V=""}else B=this._document.createElement("span");if(_e=Ue.bg,we=Ue.fg,De=Ue.extended.ext,le=bt,ee=xe,Me=st,je&&X>=_t&&X<=ze&&(X=_t),!this._coreService.isCursorHidden&&Rt&&this._coreService.isCursorInitialized){if(Ze.push("xterm-cursor"),this._coreBrowserService.isFocused)G&&Ze.push("xterm-cursor-blink"),Ze.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(j)switch(j){case"outline":Ze.push("xterm-cursor-outline");break;case"block":Ze.push("xterm-cursor-block");break;case"bar":Ze.push("xterm-cursor-bar");break;case"underline":Ze.push("xterm-cursor-underline")}}if(Ue.isBold()&&Ze.push("xterm-bold"),Ue.isItalic()&&Ze.push("xterm-italic"),Ue.isDim()&&Ze.push("xterm-dim"),V=Ue.isInvisible()?m.WHITESPACE_CELL_CHAR:Ue.getChars()||m.WHITESPACE_CELL_CHAR,Ue.isUnderline()&&(Ze.push(`xterm-underline-${Ue.extended.underlineStyle}`),V===" "&&(V=""),!Ue.isUnderlineColorDefault()))if(Ue.isUnderlineColorRGB())B.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB(Ue.getUnderlineColor()).join(",")})`;else{let zt=Ue.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ue.isBold()&&zt<8&&(zt+=8),B.style.textDecorationColor=U.ansi[zt].css}Ue.isOverline()&&(Ze.push("xterm-overline"),V===" "&&(V="")),Ue.isStrikethrough()&&Ze.push("xterm-strikethrough"),bt&&(B.style.textDecoration="underline");let Ut=Ue.getFgColor(),Bt=Ue.getFgColorMode(),wn=Ue.getBgColor(),Ee=Ue.getBgColorMode();const He=!!Ue.isInverse();if(He){const zt=Ut;Ut=wn,wn=zt;const zn=Bt;Bt=Ee,Ee=zn}let dt,St,It,On=!1;switch(this._decorationService.forEachDecorationAtCell(_t,D,void 0,(zt=>{zt.options.layer!=="top"&&On||(zt.backgroundColorRGB&&(Ee=50331648,wn=zt.backgroundColorRGB.rgba>>8&16777215,dt=zt.backgroundColorRGB),zt.foregroundColorRGB&&(Bt=50331648,Ut=zt.foregroundColorRGB.rgba>>8&16777215,St=zt.foregroundColorRGB),On=zt.options.layer==="top")})),!On&&st&&(dt=this._coreBrowserService.isFocused?U.selectionBackgroundOpaque:U.selectionInactiveBackgroundOpaque,wn=dt.rgba>>8&16777215,Ee=50331648,On=!0,U.selectionForeground&&(Bt=50331648,Ut=U.selectionForeground.rgba>>8&16777215,St=U.selectionForeground)),On&&Ze.push("xterm-decoration-top"),Ee){case 16777216:case 33554432:It=U.ansi[wn],Ze.push(`xterm-bg-${wn}`);break;case 50331648:It=w.channels.toColor(wn>>16,wn>>8&255,255&wn),this._addStyle(B,`background-color:#${R((wn>>>0).toString(16),"0",6)}`);break;default:He?(It=U.foreground,Ze.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):It=U.background}switch(dt||Ue.isDim()&&(dt=w.color.multiplyOpacity(It,.5)),Bt){case 16777216:case 33554432:Ue.isBold()&&Ut<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ut+=8),this._applyMinimumContrast(B,It,U.ansi[Ut],Ue,dt,void 0)||Ze.push(`xterm-fg-${Ut}`);break;case 50331648:const zt=w.channels.toColor(Ut>>16&255,Ut>>8&255,255&Ut);this._applyMinimumContrast(B,It,zt,Ue,dt,St)||this._addStyle(B,`color:#${R(Ut.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(B,It,U.foreground,Ue,dt,St)||He&&Ze.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}Ze.length&&(B.className=Ze.join(" "),Ze.length=0),Rt||je||Dt?B.textContent=V:Z++,xe!==this.defaultSpacing&&(B.style.letterSpacing=`${xe}px`),te.push(B),_t=ze}return B&&Z&&(B.textContent=V),te}_applyMinimumContrast(M,D,O,L,j,X){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.treatGlyphAsBackgroundColor)(L.getCode()))return!1;const G=this._getContrastCache(L);let H;if(j||X||(H=G.getColor(D.rgba,O.rgba)),H===void 0){const $=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);H=w.color.ensureContrastRatio(j||D,X||O,$),G.setColor((j||D).rgba,(X||O).rgba,H??null)}return!!H&&(this._addStyle(M,`color:${H.css}`),!0)}_getContrastCache(M){return M.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(M,D){M.setAttribute("style",`${M.getAttribute("style")||""}${D};`)}_isCellInSelection(M,D){const O=this._selectionStart,L=this._selectionEnd;return!(!O||!L)&&(this._columnSelectMode?O[0]<=L[0]?M>=O[0]&&D>=O[1]&&M<L[0]&&D<=L[1]:M<O[0]&&D>=O[1]&&M>=L[0]&&D<=L[1]:D>O[1]&&D<L[1]||O[1]===L[1]&&D===O[1]&&M>=O[0]&&M<L[0]||O[1]<L[1]&&D===L[1]&&M<L[0]||O[1]<L[1]&&D===O[1]&&M>=O[0])}};function R(M,D,O){for(;M.length<O;)M=D+M;return M}o.DomRendererRowFactory=E=h([p(1,S.ICharacterJoinerService),p(2,x.IOptionsService),p(3,S.ICoreBrowserService),p(4,x.ICoreService),p(5,x.IDecorationService),p(6,S.IThemeService)],E)},2550:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(u,h){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const p=u.createElement("span");p.classList.add("xterm-char-measure-element");const f=u.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold";const m=u.createElement("span");m.classList.add("xterm-char-measure-element"),m.style.fontStyle="italic";const y=u.createElement("span");y.classList.add("xterm-char-measure-element"),y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[p,f,m,y],this._container.appendChild(p),this._container.appendChild(f),this._container.appendChild(m),this._container.appendChild(y),h.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,h,p,f){u===this._font&&h===this._fontSize&&p===this._weight&&f===this._weightBold||(this._font=u,this._fontSize=h,this._weight=p,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${p}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${p}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(u,h,p){let f=0;if(!h&&!p&&u.length===1&&(f=u.charCodeAt(0))<256){if(this._flat[f]!==-9999)return this._flat[f];const x=this._measure(u,0);return x>0&&(this._flat[f]=x),x}let m=u;h&&(m+="B"),p&&(m+="I");let y=this._holey.get(m);if(y===void 0){let x=0;h&&(x|=1),p&&(x|=2),y=this._measure(u,x),y>0&&this._holey.set(m,y)}return y}_measure(u,h){const p=this._measureElements[h];return p.textContent=u.repeat(32),p.offsetWidth/32}}},2223:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const h=u(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(l,o)=>{function u(p){return 57508<=p&&p<=57558}function h(p){return p>=128512&&p<=128591||p>=127744&&p<=128511||p>=128640&&p<=128767||p>=9728&&p<=9983||p>=9984&&p<=10175||p>=65024&&p<=65039||p>=129280&&p<=129535||p>=127462&&p<=127487}Object.defineProperty(o,"__esModule",{value:!0}),o.computeNextVariantOffset=o.createRenderDimensions=o.treatGlyphAsBackgroundColor=o.allowRescaling=o.isEmoji=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},o.isPowerlineGlyph=u,o.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},o.isEmoji=h,o.allowRescaling=function(p,f,m,y){return f===1&&m>Math.ceil(1.5*y)&&p!==void 0&&p>255&&!h(p)&&!u(p)&&!(function(x){return 57344<=x&&x<=63743})(p)},o.treatGlyphAsBackgroundColor=function(p){return u(p)||(function(f){return 9472<=f&&f<=9631})(p)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},o.computeNextVariantOffset=function(p,f,m=0){return(p-(2*Math.round(f)-m))%(2*Math.round(f))}},6052:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class u{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(p,f,m,y=!1){if(this.selectionStart=f,this.selectionEnd=m,!f||!m||f[0]===m[0]&&f[1]===m[1])return void this.clear();const x=p.buffers.active.ydisp,w=f[1]-x,S=m[1]-x,b=Math.max(w,0),v=Math.min(S,p.rows-1);b>=p.rows||v<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=y,this.viewportStartRow=w,this.viewportEndRow=S,this.viewportCappedStartRow=b,this.viewportCappedEndRow=v,this.startCol=f[0],this.endCol=m[0])}isCellSelected(p,f,m){return!!this.hasSelection&&(m-=p.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?f>=this.startCol&&m>=this.viewportCappedStartRow&&f<this.endCol&&m<=this.viewportCappedEndRow:f<this.startCol&&m>=this.viewportCappedStartRow&&f>=this.endCol&&m<=this.viewportCappedEndRow:m>this.viewportStartRow&&m<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&m===this.viewportStartRow&&f>=this.startCol&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportEndRow&&f<this.endCol||this.viewportStartRow<this.viewportEndRow&&m===this.viewportStartRow&&f>=this.startCol)}}o.createSelectionRenderModel=function(){return new u}},456:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,h=this.selectionEnd;return!(!u||!h)&&(u[1]>h[1]||u[1]===h[1]&&u[0]>h[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(l,o,u){var h=this&&this.__decorate||function(v,_,E,R){var M,D=arguments.length,O=D<3?_:R===null?R=Object.getOwnPropertyDescriptor(_,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(v,_,E,R);else for(var L=v.length-1;L>=0;L--)(M=v[L])&&(O=(D<3?M(O):D>3?M(_,E,O):M(_,E))||O);return D>3&&O&&Object.defineProperty(_,E,O),O},p=this&&this.__param||function(v,_){return function(E,R){_(E,R,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const f=u(2585),m=u(8460),y=u(844);let x=o.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(v,_,E){super(),this._optionsService=E,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new b(this._optionsService))}catch{this._measureStrategy=this.register(new S(v,_,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const v=this._measureStrategy.measure();v.width===this.width&&v.height===this.height||(this.width=v.width,this.height=v.height,this._onCharSizeChange.fire())}};o.CharSizeService=x=h([p(2,f.IOptionsService)],x);class w extends y.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(_,E){_!==void 0&&_>0&&E!==void 0&&E>0&&(this._result.width=_,this._result.height=E)}}class S extends w{constructor(_,E,R){super(),this._document=_,this._parentElement=E,this._optionsService=R,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class b extends w{constructor(_){super(),this._optionsService=_,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const E=this._ctx.measureText("W");if(!("width"in E&&"fontBoundingBoxAscent"in E&&"fontBoundingBoxDescent"in E))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const _=this._ctx.measureText("W");return this._validateAndSet(_.width,_.fontBoundingBoxAscent+_.fontBoundingBoxDescent),this._result}}},4269:function(l,o,u){var h=this&&this.__decorate||function(b,v,_,E){var R,M=arguments.length,D=M<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,v,_,E);else for(var O=b.length-1;O>=0;O--)(R=b[O])&&(D=(M<3?R(D):M>3?R(v,_,D):R(v,_))||D);return M>3&&D&&Object.defineProperty(v,_,D),D},p=this&&this.__param||function(b,v){return function(_,E){v(_,E,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const f=u(3734),m=u(643),y=u(511),x=u(2585);class w extends f.AttributeData{constructor(v,_,E){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=_,this._width=E}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=w;let S=o.CharacterJoinerService=class nT{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(v){const _={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(_),_.id}deregister(v){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===v)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];const _=this._bufferService.buffer.lines.get(v);if(!_||_.length===0)return[];const E=[],R=_.translateToString(!0);let M=0,D=0,O=0,L=_.getFg(0),j=_.getBg(0);for(let X=0;X<_.getTrimmedLength();X++)if(_.loadCell(X,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==j){if(X-M>1){const G=this._getJoinedRanges(R,O,D,_,M);for(let H=0;H<G.length;H++)E.push(G[H])}M=X,O=D,L=this._workCell.fg,j=this._workCell.bg}D+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-M>1){const X=this._getJoinedRanges(R,O,D,_,M);for(let G=0;G<X.length;G++)E.push(X[G])}return E}_getJoinedRanges(v,_,E,R,M){const D=v.substring(_,E);let O=[];try{O=this._characterJoiners[0].handler(D)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const j=this._characterJoiners[L].handler(D);for(let X=0;X<j.length;X++)nT._mergeRanges(O,j[X])}catch(j){console.error(j)}return this._stringRangesToCellRanges(O,R,M),O}_stringRangesToCellRanges(v,_,E){let R=0,M=!1,D=0,O=v[R];if(O){for(let L=E;L<this._bufferService.cols;L++){const j=_.getWidth(L),X=_.getString(L).length||m.WHITESPACE_CELL_CHAR.length;if(j!==0){if(!M&&O[0]<=D&&(O[0]=L,M=!0),O[1]<=D){if(O[1]=L,O=v[++R],!O)break;O[0]<=D?(O[0]=L,M=!0):M=!1}D+=X}}O&&(O[1]=this._bufferService.cols)}}static _mergeRanges(v,_){let E=!1;for(let R=0;R<v.length;R++){const M=v[R];if(E){if(_[1]<=M[0])return v[R-1][1]=_[1],v;if(_[1]<=M[1])return v[R-1][1]=Math.max(_[1],M[1]),v.splice(R,1),v;v.splice(R,1),R--}else{if(_[1]<=M[0])return v.splice(R,0,_),v;if(_[1]<=M[1])return M[0]=Math.min(_[0],M[0]),v;_[0]<M[1]&&(M[0]=Math.min(_[0],M[0]),E=!0)}}return E?v[v.length-1][1]=_[1]:v.push(_),v}};o.CharacterJoinerService=S=h([p(0,x.IBufferService)],S)},5114:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;const h=u(844),p=u(8460),f=u(3656);class m extends h.Disposable{constructor(w,S,b){super(),this._textarea=w,this._window=S,this.mainDocument=b,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new y(this._window),this._onDprChange=this.register(new p.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new p.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((v=>this._screenDprMonitor.setWindow(v)))),this.register((0,p.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(w){this._window!==w&&(this._window=w,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}o.CoreBrowserService=m;class y extends h.Disposable{constructor(w){super(),this._parentWindow=w,this._windowResizeListener=this.register(new h.MutableDisposable),this._onDprChange=this.register(new p.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,h.toDisposable)((()=>this.clearListener())))}setWindow(w){this._parentWindow=w,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,f.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkProviderService=void 0;const h=u(844);class p extends h.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,h.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(m){return this.linkProviders.push(m),{dispose:()=>{const y=this.linkProviders.indexOf(m);y!==-1&&this.linkProviders.splice(y,1)}}}}o.LinkProviderService=p},8934:function(l,o,u){var h=this&&this.__decorate||function(x,w,S,b){var v,_=arguments.length,E=_<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(x,w,S,b);else for(var R=x.length-1;R>=0;R--)(v=x[R])&&(E=(_<3?v(E):_>3?v(w,S,E):v(w,S))||E);return _>3&&E&&Object.defineProperty(w,S,E),E},p=this&&this.__param||function(x,w){return function(S,b){w(S,b,x)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const f=u(4725),m=u(9806);let y=o.MouseService=class{constructor(x,w){this._renderService=x,this._charSizeService=w}getCoords(x,w,S,b,v){return(0,m.getCoords)(window,x,w,S,b,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(x,w){const S=(0,m.getCoordsRelativeToElement)(window,x,w);if(this._charSizeService.hasValidSize)return S[0]=Math.min(Math.max(S[0],0),this._renderService.dimensions.css.canvas.width-1),S[1]=Math.min(Math.max(S[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(S[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(S[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(S[0]),y:Math.floor(S[1])}}};o.MouseService=y=h([p(0,f.IRenderService),p(1,f.ICharSizeService)],y)},3230:function(l,o,u){var h=this&&this.__decorate||function(v,_,E,R){var M,D=arguments.length,O=D<3?_:R===null?R=Object.getOwnPropertyDescriptor(_,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(v,_,E,R);else for(var L=v.length-1;L>=0;L--)(M=v[L])&&(O=(D<3?M(O):D>3?M(_,E,O):M(_,E))||O);return D>3&&O&&Object.defineProperty(_,E,O),O},p=this&&this.__param||function(v,_){return function(E,R){_(E,R,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const f=u(6193),m=u(4725),y=u(8460),x=u(844),w=u(7226),S=u(2585);let b=o.RenderService=class extends x.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,_,E,R,M,D,O,L){super(),this._rowCount=v,this._charSizeService=R,this._renderer=this.register(new x.MutableDisposable),this._pausedResizeTask=new w.DebouncedIdleTask,this._observerDisposable=this.register(new x.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new f.RenderDebouncer(((j,X)=>this._renderRows(j,X)),O),this.register(this._renderDebouncer),this.register(O.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(D.onResize((()=>this._fullRefresh()))),this.register(D.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(E.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(M.onDecorationRegistered((()=>this._fullRefresh()))),this.register(M.onDecorationRemoved((()=>this._fullRefresh()))),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(D.cols,D.rows),this._fullRefresh()}))),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(D.buffer.y,D.buffer.y,!0)))),this.register(L.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(O.window,_),this.register(O.onWindowChange((j=>this._registerIntersectionObserver(j,_))))}_registerIntersectionObserver(v,_){if("IntersectionObserver"in v){const E=new v.IntersectionObserver((R=>this._handleIntersectionChange(R[R.length-1])),{threshold:0});E.observe(_),this._observerDisposable.value=(0,x.toDisposable)((()=>E.disconnect()))}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,_,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,_,this._rowCount))}_renderRows(v,_){this._renderer.value&&(v=Math.min(v,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(v,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:_}),this._onRender.fire({start:v,end:_}),this._isNextRenderRedrawOnly=!0)}resize(v,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value&&(this._renderer.value.onRequestRedraw((_=>this.refreshRows(_.start,_.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(v,_))):this._renderer.value.handleResize(v,_),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(v,_,E){this._selectionState.start=v,this._selectionState.end=_,this._selectionState.columnSelectMode=E,this._renderer.value?.handleSelectionChanged(v,_,E)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};o.RenderService=b=h([p(2,S.IOptionsService),p(3,m.ICharSizeService),p(4,S.IDecorationService),p(5,S.IBufferService),p(6,m.ICoreBrowserService),p(7,m.IThemeService)],b)},9312:function(l,o,u){var h=this&&this.__decorate||function(O,L,j,X){var G,H=arguments.length,$=H<3?L:X===null?X=Object.getOwnPropertyDescriptor(L,j):X;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(O,L,j,X);else for(var Q=O.length-1;Q>=0;Q--)(G=O[Q])&&($=(H<3?G($):H>3?G(L,j,$):G(L,j))||$);return H>3&&$&&Object.defineProperty(L,j,$),$},p=this&&this.__param||function(O,L){return function(j,X){L(j,X,O)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const f=u(9806),m=u(9504),y=u(456),x=u(4725),w=u(8460),S=u(844),b=u(6114),v=u(4841),_=u(511),E=u(2585),R="",M=new RegExp(R,"g");let D=o.SelectionService=class extends S.Disposable{constructor(O,L,j,X,G,H,$,Q,Y){super(),this._element=O,this._screenElement=L,this._linkifier=j,this._bufferService=X,this._coreService=G,this._mouseService=H,this._optionsService=$,this._renderService=Q,this._coreBrowserService=Y,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new w.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new w.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=te=>this._handleMouseMove(te),this._mouseUpListener=te=>this._handleMouseUp(te),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((te=>this._handleTrim(te))),this.register(this._bufferService.buffers.onBufferActivate((te=>this._handleBufferActivate(te)))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,S.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const O=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!O||!L||O[0]===L[0]&&O[1]===L[1])}get selectionText(){const O=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!O||!L)return"";const j=this._bufferService.buffer,X=[];if(this._activeSelectionMode===3){if(O[0]===L[0])return"";const G=O[0]<L[0]?O[0]:L[0],H=O[0]<L[0]?L[0]:O[0];for(let $=O[1];$<=L[1];$++){const Q=j.translateBufferLineToString($,!0,G,H);X.push(Q)}}else{const G=O[1]===L[1]?L[0]:void 0;X.push(j.translateBufferLineToString(O[1],!0,O[0],G));for(let H=O[1]+1;H<=L[1]-1;H++){const $=j.lines.get(H),Q=j.translateBufferLineToString(H,!0);$?.isWrapped?X[X.length-1]+=Q:X.push(Q)}if(O[1]!==L[1]){const H=j.lines.get(L[1]),$=j.translateBufferLineToString(L[1],!0,0,L[0]);H&&H.isWrapped?X[X.length-1]+=$:X.push($)}}return X.map((G=>G.replace(M," "))).join(b.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(O){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),b.isLinux&&O&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(O){const L=this._getMouseBufferCoords(O),j=this._model.finalSelectionStart,X=this._model.finalSelectionEnd;return!!(j&&X&&L)&&this._areCoordsInSelection(L,j,X)}isCellInSelection(O,L){const j=this._model.finalSelectionStart,X=this._model.finalSelectionEnd;return!(!j||!X)&&this._areCoordsInSelection([O,L],j,X)}_areCoordsInSelection(O,L,j){return O[1]>L[1]&&O[1]<j[1]||L[1]===j[1]&&O[1]===L[1]&&O[0]>=L[0]&&O[0]<j[0]||L[1]<j[1]&&O[1]===j[1]&&O[0]<j[0]||L[1]<j[1]&&O[1]===L[1]&&O[0]>=L[0]}_selectWordAtCursor(O,L){const j=this._linkifier.currentLink?.link?.range;if(j)return this._model.selectionStart=[j.start.x-1,j.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(j,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const X=this._getMouseBufferCoords(O);return!!X&&(this._selectWordAt(X,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(O,L){this._model.clearSelection(),O=Math.max(O,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,O],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(O){this._model.handleTrim(O)&&this.refresh()}_getMouseBufferCoords(O){const L=this._mouseService.getCoords(O,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(O){let L=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,O,this._screenElement)[1];const j=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=j?0:(L>j&&(L-=j),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(O){return b.isMac?O.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:O.shiftKey}handleMouseDown(O){if(this._mouseDownTimeStamp=O.timeStamp,(O.button!==2||!this.hasSelection)&&O.button===0){if(!this._enabled){if(!this.shouldForceSelection(O))return;O.stopPropagation()}O.preventDefault(),this._dragScrollAmount=0,this._enabled&&O.shiftKey?this._handleIncrementalClick(O):O.detail===1?this._handleSingleClick(O):O.detail===2?this._handleDoubleClick(O):O.detail===3&&this._handleTripleClick(O),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(O){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(O))}_handleSingleClick(O){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(O)?3:0,this._model.selectionStart=this._getMouseBufferCoords(O),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(O){this._selectWordAtCursor(O,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(O){const L=this._getMouseBufferCoords(O);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(O){return O.altKey&&!(b.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(O){if(O.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(O),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(O),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const j=this._bufferService.buffer;if(this._model.selectionEnd[1]<j.lines.length){const X=j.lines.get(this._model.selectionEnd[1]);X&&X.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const O=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(O.ydisp+this._bufferService.rows,O.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=O.ydisp),this.refresh()}}_handleMouseUp(O){const L=O.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&O.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const j=this._mouseService.getCoords(O,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(j&&j[0]!==void 0&&j[1]!==void 0){const X=(0,m.moveToCellSequence)(j[0]-1,j[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(X,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const O=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,j=!(!O||!L||O[0]===L[0]&&O[1]===L[1]);j?O&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&O[0]===this._oldSelectionStart[0]&&O[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(O,L,j)):this._oldHasSelection&&this._fireOnSelectionChange(O,L,j)}_fireOnSelectionChange(O,L,j){this._oldSelectionStart=O,this._oldSelectionEnd=L,this._oldHasSelection=j,this._onSelectionChange.fire()}_handleBufferActivate(O){this.clearSelection(),this._trimListener.dispose(),this._trimListener=O.activeBuffer.lines.onTrim((L=>this._handleTrim(L)))}_convertViewportColToCharacterIndex(O,L){let j=L;for(let X=0;L>=X;X++){const G=O.loadCell(X,this._workCell).getChars().length;this._workCell.getWidth()===0?j--:G>1&&L!==X&&(j+=G-1)}return j}setSelection(O,L,j){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[O,L],this._model.selectionStartLength=j,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(O){this._isClickInSelection(O)||(this._selectWordAtCursor(O,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(O,L,j=!0,X=!0){if(O[0]>=this._bufferService.cols)return;const G=this._bufferService.buffer,H=G.lines.get(O[1]);if(!H)return;const $=G.translateBufferLineToString(O[1],!1);let Q=this._convertViewportColToCharacterIndex(H,O[0]),Y=Q;const te=O[0]-Q;let re=0,U=0,B=0,P=0;if($.charAt(Q)===" "){for(;Q>0&&$.charAt(Q-1)===" ";)Q--;for(;Y<$.length&&$.charAt(Y+1)===" ";)Y++}else{let _e=O[0],we=O[0];H.getWidth(_e)===0&&(re++,_e--),H.getWidth(we)===2&&(U++,we++);const De=H.getString(we).length;for(De>1&&(P+=De-1,Y+=De-1);_e>0&&Q>0&&!this._isCharWordSeparator(H.loadCell(_e-1,this._workCell));){H.loadCell(_e-1,this._workCell);const le=this._workCell.getChars().length;this._workCell.getWidth()===0?(re++,_e--):le>1&&(B+=le-1,Q-=le-1),Q--,_e--}for(;we<H.length&&Y+1<$.length&&!this._isCharWordSeparator(H.loadCell(we+1,this._workCell));){H.loadCell(we+1,this._workCell);const le=this._workCell.getChars().length;this._workCell.getWidth()===2?(U++,we++):le>1&&(P+=le-1,Y+=le-1),Y++,we++}}Y++;let Z=Q+te-re+B,V=Math.min(this._bufferService.cols,Y-Q+re+U-B-P);if(L||$.slice(Q,Y).trim()!==""){if(j&&Z===0&&H.getCodePoint(0)!==32){const _e=G.lines.get(O[1]-1);if(_e&&H.isWrapped&&_e.getCodePoint(this._bufferService.cols-1)!==32){const we=this._getWordAt([this._bufferService.cols-1,O[1]-1],!1,!0,!1);if(we){const De=this._bufferService.cols-we.start;Z-=De,V+=De}}}if(X&&Z+V===this._bufferService.cols&&H.getCodePoint(this._bufferService.cols-1)!==32){const _e=G.lines.get(O[1]+1);if(_e?.isWrapped&&_e.getCodePoint(0)!==32){const we=this._getWordAt([0,O[1]+1],!1,!1,!0);we&&(V+=we.length)}}return{start:Z,length:V}}}_selectWordAt(O,L){const j=this._getWordAt(O,L);if(j){for(;j.start<0;)j.start+=this._bufferService.cols,O[1]--;this._model.selectionStart=[j.start,O[1]],this._model.selectionStartLength=j.length}}_selectToWordAt(O){const L=this._getWordAt(O,!0);if(L){let j=O[1];for(;L.start<0;)L.start+=this._bufferService.cols,j--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,j++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,j]}}_isCharWordSeparator(O){return O.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(O.getChars())>=0}_selectLineAt(O){const L=this._bufferService.buffer.getWrappedRangeForLine(O),j={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(j,this._bufferService.cols)}};o.SelectionService=D=h([p(3,E.IBufferService),p(4,E.ICoreService),p(5,x.IMouseService),p(6,E.IOptionsService),p(7,x.IRenderService),p(8,x.ICoreBrowserService)],D)},4725:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ILinkProviderService=o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const h=u(8343);o.ICharSizeService=(0,h.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),o.IMouseService=(0,h.createDecorator)("MouseService"),o.IRenderService=(0,h.createDecorator)("RenderService"),o.ISelectionService=(0,h.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,h.createDecorator)("ThemeService"),o.ILinkProviderService=(0,h.createDecorator)("LinkProviderService")},6731:function(l,o,u){var h=this&&this.__decorate||function(D,O,L,j){var X,G=arguments.length,H=G<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,L):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(D,O,L,j);else for(var $=D.length-1;$>=0;$--)(X=D[$])&&(H=(G<3?X(H):G>3?X(O,L,H):X(O,L))||H);return G>3&&H&&Object.defineProperty(O,L,H),H},p=this&&this.__param||function(D,O){return function(L,j){O(L,j,D)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const f=u(7239),m=u(8055),y=u(8460),x=u(844),w=u(2585),S=m.css.toColor("#ffffff"),b=m.css.toColor("#000000"),v=m.css.toColor("#ffffff"),_=m.css.toColor("#000000"),E={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const D=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],O=[0,95,135,175,215,255];for(let L=0;L<216;L++){const j=O[L/36%6|0],X=O[L/6%6|0],G=O[L%6];D.push({css:m.channels.toCss(j,X,G),rgba:m.channels.toRgba(j,X,G)})}for(let L=0;L<24;L++){const j=8+10*L;D.push({css:m.channels.toCss(j,j,j),rgba:m.channels.toRgba(j,j,j)})}return D})());let R=o.ThemeService=class extends x.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:S,background:b,cursor:v,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:E,selectionBackgroundOpaque:m.color.blend(b,E),selectionInactiveBackgroundTransparent:E,selectionInactiveBackgroundOpaque:m.color.blend(b,E),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(D={}){const O=this._colors;if(O.foreground=M(D.foreground,S),O.background=M(D.background,b),O.cursor=M(D.cursor,v),O.cursorAccent=M(D.cursorAccent,_),O.selectionBackgroundTransparent=M(D.selectionBackground,E),O.selectionBackgroundOpaque=m.color.blend(O.background,O.selectionBackgroundTransparent),O.selectionInactiveBackgroundTransparent=M(D.selectionInactiveBackground,O.selectionBackgroundTransparent),O.selectionInactiveBackgroundOpaque=m.color.blend(O.background,O.selectionInactiveBackgroundTransparent),O.selectionForeground=D.selectionForeground?M(D.selectionForeground,m.NULL_COLOR):void 0,O.selectionForeground===m.NULL_COLOR&&(O.selectionForeground=void 0),m.color.isOpaque(O.selectionBackgroundTransparent)&&(O.selectionBackgroundTransparent=m.color.opacity(O.selectionBackgroundTransparent,.3)),m.color.isOpaque(O.selectionInactiveBackgroundTransparent)&&(O.selectionInactiveBackgroundTransparent=m.color.opacity(O.selectionInactiveBackgroundTransparent,.3)),O.ansi=o.DEFAULT_ANSI_COLORS.slice(),O.ansi[0]=M(D.black,o.DEFAULT_ANSI_COLORS[0]),O.ansi[1]=M(D.red,o.DEFAULT_ANSI_COLORS[1]),O.ansi[2]=M(D.green,o.DEFAULT_ANSI_COLORS[2]),O.ansi[3]=M(D.yellow,o.DEFAULT_ANSI_COLORS[3]),O.ansi[4]=M(D.blue,o.DEFAULT_ANSI_COLORS[4]),O.ansi[5]=M(D.magenta,o.DEFAULT_ANSI_COLORS[5]),O.ansi[6]=M(D.cyan,o.DEFAULT_ANSI_COLORS[6]),O.ansi[7]=M(D.white,o.DEFAULT_ANSI_COLORS[7]),O.ansi[8]=M(D.brightBlack,o.DEFAULT_ANSI_COLORS[8]),O.ansi[9]=M(D.brightRed,o.DEFAULT_ANSI_COLORS[9]),O.ansi[10]=M(D.brightGreen,o.DEFAULT_ANSI_COLORS[10]),O.ansi[11]=M(D.brightYellow,o.DEFAULT_ANSI_COLORS[11]),O.ansi[12]=M(D.brightBlue,o.DEFAULT_ANSI_COLORS[12]),O.ansi[13]=M(D.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),O.ansi[14]=M(D.brightCyan,o.DEFAULT_ANSI_COLORS[14]),O.ansi[15]=M(D.brightWhite,o.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){const L=Math.min(O.ansi.length-16,D.extendedAnsi.length);for(let j=0;j<L;j++)O.ansi[j+16]=M(D.extendedAnsi[j],o.DEFAULT_ANSI_COLORS[j+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let O=0;O<this._restoreColors.ansi.length;++O)this._colors.ansi[O]=this._restoreColors.ansi[O]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function M(D,O){if(D!==void 0)try{return m.css.toColor(D)}catch{}return O}o.ThemeService=R=h([p(0,w.IOptionsService)],R)},6349:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const h=u(8460),p=u(844);class f extends p.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const x=new Array(y);for(let w=0;w<Math.min(y,this.length);w++)x[w]=this._array[this._getCyclicIndex(w)];this._array=x,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let x=this._length;x<y;x++)this._array[x]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,x){this._array[this._getCyclicIndex(y)]=x}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,x,...w){if(x){for(let S=y;S<this._length-x;S++)this._array[this._getCyclicIndex(S)]=this._array[this._getCyclicIndex(S+x)];this._length-=x,this.onDeleteEmitter.fire({index:y,amount:x})}for(let S=this._length-1;S>=y;S--)this._array[this._getCyclicIndex(S+w.length)]=this._array[this._getCyclicIndex(S)];for(let S=0;S<w.length;S++)this._array[this._getCyclicIndex(y+S)]=w[S];if(w.length&&this.onInsertEmitter.fire({index:y,amount:w.length}),this._length+w.length>this._maxLength){const S=this._length+w.length-this._maxLength;this._startIndex+=S,this._length=this._maxLength,this.onTrimEmitter.fire(S)}else this._length+=w.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,x,w){if(!(x<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(let b=x-1;b>=0;b--)this.set(y+b+w,this.get(y+b));const S=y+x+w-this._length;if(S>0)for(this._length+=S;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let S=0;S<x;S++)this.set(y+S+w,this.get(y+S))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}o.CircularList=f},1439:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function u(h,p=5){if(typeof h!="object")return h;const f=Array.isArray(h)?[]:{};for(const m in h)f[m]=p<=1?h[m]:h[m]&&u(h[m],p-1);return f}},8055:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let u=0,h=0,p=0,f=0;var m,y,x,w,S;function b(_){const E=_.toString(16);return E.length<2?"0"+E:E}function v(_,E){return _<E?(E+.05)/(_+.05):(_+.05)/(E+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},(function(_){_.toCss=function(E,R,M,D){return D!==void 0?`#${b(E)}${b(R)}${b(M)}${b(D)}`:`#${b(E)}${b(R)}${b(M)}`},_.toRgba=function(E,R,M,D=255){return(E<<24|R<<16|M<<8|D)>>>0},_.toColor=function(E,R,M,D){return{css:_.toCss(E,R,M,D),rgba:_.toRgba(E,R,M,D)}}})(m||(o.channels=m={})),(function(_){function E(R,M){return f=Math.round(255*M),[u,h,p]=S.toChannels(R.rgba),{css:m.toCss(u,h,p,f),rgba:m.toRgba(u,h,p,f)}}_.blend=function(R,M){if(f=(255&M.rgba)/255,f===1)return{css:M.css,rgba:M.rgba};const D=M.rgba>>24&255,O=M.rgba>>16&255,L=M.rgba>>8&255,j=R.rgba>>24&255,X=R.rgba>>16&255,G=R.rgba>>8&255;return u=j+Math.round((D-j)*f),h=X+Math.round((O-X)*f),p=G+Math.round((L-G)*f),{css:m.toCss(u,h,p),rgba:m.toRgba(u,h,p)}},_.isOpaque=function(R){return(255&R.rgba)==255},_.ensureContrastRatio=function(R,M,D){const O=S.ensureContrastRatio(R.rgba,M.rgba,D);if(O)return m.toColor(O>>24&255,O>>16&255,O>>8&255)},_.opaque=function(R){const M=(255|R.rgba)>>>0;return[u,h,p]=S.toChannels(M),{css:m.toCss(u,h,p),rgba:M}},_.opacity=E,_.multiplyOpacity=function(R,M){return f=255&R.rgba,E(R,f*M/255)},_.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}})(y||(o.color=y={})),(function(_){let E,R;try{const M=document.createElement("canvas");M.width=1,M.height=1;const D=M.getContext("2d",{willReadFrequently:!0});D&&(E=D,E.globalCompositeOperation="copy",R=E.createLinearGradient(0,0,1,1))}catch{}_.toColor=function(M){if(M.match(/#[\da-f]{3,8}/i))switch(M.length){case 4:return u=parseInt(M.slice(1,2).repeat(2),16),h=parseInt(M.slice(2,3).repeat(2),16),p=parseInt(M.slice(3,4).repeat(2),16),m.toColor(u,h,p);case 5:return u=parseInt(M.slice(1,2).repeat(2),16),h=parseInt(M.slice(2,3).repeat(2),16),p=parseInt(M.slice(3,4).repeat(2),16),f=parseInt(M.slice(4,5).repeat(2),16),m.toColor(u,h,p,f);case 7:return{css:M,rgba:(parseInt(M.slice(1),16)<<8|255)>>>0};case 9:return{css:M,rgba:parseInt(M.slice(1),16)>>>0}}const D=M.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(D)return u=parseInt(D[1]),h=parseInt(D[2]),p=parseInt(D[3]),f=Math.round(255*(D[5]===void 0?1:parseFloat(D[5]))),m.toColor(u,h,p,f);if(!E||!R)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=R,E.fillStyle=M,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[u,h,p,f]=E.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:m.toRgba(u,h,p,f),css:M}}})(x||(o.css=x={})),(function(_){function E(R,M,D){const O=R/255,L=M/255,j=D/255;return .2126*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4))}_.relativeLuminance=function(R){return E(R>>16&255,R>>8&255,255&R)},_.relativeLuminance2=E})(w||(o.rgb=w={})),(function(_){function E(M,D,O){const L=M>>24&255,j=M>>16&255,X=M>>8&255;let G=D>>24&255,H=D>>16&255,$=D>>8&255,Q=v(w.relativeLuminance2(G,H,$),w.relativeLuminance2(L,j,X));for(;Q<O&&(G>0||H>0||$>0);)G-=Math.max(0,Math.ceil(.1*G)),H-=Math.max(0,Math.ceil(.1*H)),$-=Math.max(0,Math.ceil(.1*$)),Q=v(w.relativeLuminance2(G,H,$),w.relativeLuminance2(L,j,X));return(G<<24|H<<16|$<<8|255)>>>0}function R(M,D,O){const L=M>>24&255,j=M>>16&255,X=M>>8&255;let G=D>>24&255,H=D>>16&255,$=D>>8&255,Q=v(w.relativeLuminance2(G,H,$),w.relativeLuminance2(L,j,X));for(;Q<O&&(G<255||H<255||$<255);)G=Math.min(255,G+Math.ceil(.1*(255-G))),H=Math.min(255,H+Math.ceil(.1*(255-H))),$=Math.min(255,$+Math.ceil(.1*(255-$))),Q=v(w.relativeLuminance2(G,H,$),w.relativeLuminance2(L,j,X));return(G<<24|H<<16|$<<8|255)>>>0}_.blend=function(M,D){if(f=(255&D)/255,f===1)return D;const O=D>>24&255,L=D>>16&255,j=D>>8&255,X=M>>24&255,G=M>>16&255,H=M>>8&255;return u=X+Math.round((O-X)*f),h=G+Math.round((L-G)*f),p=H+Math.round((j-H)*f),m.toRgba(u,h,p)},_.ensureContrastRatio=function(M,D,O){const L=w.relativeLuminance(M>>8),j=w.relativeLuminance(D>>8);if(v(L,j)<O){if(j<L){const H=E(M,D,O),$=v(L,w.relativeLuminance(H>>8));if($<O){const Q=R(M,D,O);return $>v(L,w.relativeLuminance(Q>>8))?H:Q}return H}const X=R(M,D,O),G=v(L,w.relativeLuminance(X>>8));if(G<O){const H=E(M,D,O);return G>v(L,w.relativeLuminance(H>>8))?X:H}return X}},_.reduceLuminance=E,_.increaseLuminance=R,_.toChannels=function(M){return[M>>24&255,M>>16&255,M>>8&255,255&M]}})(S||(o.rgba=S={})),o.toPaddedHex=b,o.contrastRatio=v},8969:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const h=u(844),p=u(2585),f=u(4348),m=u(7866),y=u(744),x=u(7302),w=u(6975),S=u(8460),b=u(1753),v=u(1480),_=u(7994),E=u(9282),R=u(5435),M=u(5981),D=u(2660);let O=!1;class L extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new S.EventEmitter),this._onScroll.event((X=>{this._onScrollApi?.fire(X.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(X){for(const G in X)this.optionsService.options[G]=X[G]}constructor(X){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new S.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new S.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new S.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new S.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new S.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new S.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new x.OptionsService(X)),this._instantiationService.setService(p.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(p.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(p.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(w.CoreService)),this._instantiationService.setService(p.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(b.CoreMouseService)),this._instantiationService.setService(p.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(p.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(p.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(p.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new R.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,S.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,S.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,S.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,S.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((G=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((G=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new M.WriteBuffer(((G,H)=>this._inputHandler.parse(G,H)))),this.register((0,S.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(X,G){this._writeBuffer.write(X,G)}writeSync(X,G){this._logService.logLevel<=p.LogLevelEnum.WARN&&!O&&(this._logService.warn("writeSync is unreliable and will be removed soon."),O=!0),this._writeBuffer.writeSync(X,G)}input(X,G=!0){this.coreService.triggerDataEvent(X,G)}resize(X,G){isNaN(X)||isNaN(G)||(X=Math.max(X,y.MINIMUM_COLS),G=Math.max(G,y.MINIMUM_ROWS),this._bufferService.resize(X,G))}scroll(X,G=!1){this._bufferService.scroll(X,G)}scrollLines(X,G,H){this._bufferService.scrollLines(X,G,H)}scrollPages(X){this.scrollLines(X*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(X){const G=X-this._bufferService.buffer.ydisp;G!==0&&this.scrollLines(G)}registerEscHandler(X,G){return this._inputHandler.registerEscHandler(X,G)}registerDcsHandler(X,G){return this._inputHandler.registerDcsHandler(X,G)}registerCsiHandler(X,G){return this._inputHandler.registerCsiHandler(X,G)}registerOscHandler(X,G){return this._inputHandler.registerOscHandler(X,G)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let X=!1;const G=this.optionsService.rawOptions.windowsPty;G&&G.buildNumber!==void 0&&G.buildNumber!==void 0?X=G.backend==="conpty"&&G.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(X=!0),X?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const X=[];X.push(this.onLineFeed(E.updateWindowsModeWrappedState.bind(null,this._bufferService))),X.push(this.registerCsiHandler({final:"H"},(()=>((0,E.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)((()=>{for(const G of X)G.dispose()}))}}}o.CoreTerminal=L},8460:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.runAndSubscribe=o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===u)return void this._listeners.splice(h,1)}}})),this._event}fire(u,h){const p=[];for(let f=0;f<this._listeners.length;f++)p.push(this._listeners[f]);for(let f=0;f<p.length;f++)p[f].call(void 0,u,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(u,h){return u((p=>h.fire(p)))},o.runAndSubscribe=function(u,h){return h(void 0),u((p=>h(p)))}},5435:function(l,o,u){var h=this&&this.__decorate||function(re,U,B,P){var Z,V=arguments.length,_e=V<3?U:P===null?P=Object.getOwnPropertyDescriptor(U,B):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_e=Reflect.decorate(re,U,B,P);else for(var we=re.length-1;we>=0;we--)(Z=re[we])&&(_e=(V<3?Z(_e):V>3?Z(U,B,_e):Z(U,B))||_e);return V>3&&_e&&Object.defineProperty(U,B,_e),_e},p=this&&this.__param||function(re,U){return function(B,P){U(B,P,re)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const f=u(2584),m=u(7116),y=u(2015),x=u(844),w=u(482),S=u(8437),b=u(8460),v=u(643),_=u(511),E=u(3734),R=u(2585),M=u(1480),D=u(6242),O=u(6351),L=u(5941),j={"(":0,")":1,"*":2,"+":3,"-":1,".":2},X=131072;function G(re,U){if(re>24)return U.setWinLines||!1;switch(re){case 1:return!!U.restoreWin;case 2:return!!U.minimizeWin;case 3:return!!U.setWinPosition;case 4:return!!U.setWinSizePixels;case 5:return!!U.raiseWin;case 6:return!!U.lowerWin;case 7:return!!U.refreshWin;case 8:return!!U.setWinSizeChars;case 9:return!!U.maximizeWin;case 10:return!!U.fullscreenWin;case 11:return!!U.getWinState;case 13:return!!U.getWinPosition;case 14:return!!U.getWinSizePixels;case 15:return!!U.getScreenSizePixels;case 16:return!!U.getCellSizePixels;case 18:return!!U.getWinSizeChars;case 19:return!!U.getScreenSizeChars;case 20:return!!U.getIconTitle;case 21:return!!U.getWinTitle;case 22:return!!U.pushTitle;case 23:return!!U.popTitle;case 24:return!!U.setWinLines}return!1}var H;(function(re){re[re.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",re[re.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(H||(o.WindowsOptionsReportType=H={}));let $=0;class Q extends x.Disposable{getAttrData(){return this._curAttrData}constructor(U,B,P,Z,V,_e,we,De,le=new y.EscapeSequenceParser){super(),this._bufferService=U,this._charsetService=B,this._coreService=P,this._logService=Z,this._optionsService=V,this._oscLinkService=_e,this._coreMouseService=we,this._unicodeService=De,this._parser=le,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new w.StringToUtf32,this._utf8Decoder=new w.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=S.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=S.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new b.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new b.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new b.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new b.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new b.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new b.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new b.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new b.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new b.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new b.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new b.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new b.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new b.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new Y(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((ee=>this._activeBuffer=ee.activeBuffer))),this._parser.setCsiHandlerFallback(((ee,Me)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(ee),params:Me.toArray()})})),this._parser.setEscHandlerFallback((ee=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(ee)})})),this._parser.setExecuteHandlerFallback((ee=>{this._logService.debug("Unknown EXECUTE code: ",{code:ee})})),this._parser.setOscHandlerFallback(((ee,Me,xe)=>{this._logService.debug("Unknown OSC code: ",{identifier:ee,action:Me,data:xe})})),this._parser.setDcsHandlerFallback(((ee,Me,xe)=>{Me==="HOOK"&&(xe=xe.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(ee),action:Me,payload:xe})})),this._parser.setPrintHandler(((ee,Me,xe)=>this.print(ee,Me,xe))),this._parser.registerCsiHandler({final:"@"},(ee=>this.insertChars(ee))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(ee=>this.scrollLeft(ee))),this._parser.registerCsiHandler({final:"A"},(ee=>this.cursorUp(ee))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(ee=>this.scrollRight(ee))),this._parser.registerCsiHandler({final:"B"},(ee=>this.cursorDown(ee))),this._parser.registerCsiHandler({final:"C"},(ee=>this.cursorForward(ee))),this._parser.registerCsiHandler({final:"D"},(ee=>this.cursorBackward(ee))),this._parser.registerCsiHandler({final:"E"},(ee=>this.cursorNextLine(ee))),this._parser.registerCsiHandler({final:"F"},(ee=>this.cursorPrecedingLine(ee))),this._parser.registerCsiHandler({final:"G"},(ee=>this.cursorCharAbsolute(ee))),this._parser.registerCsiHandler({final:"H"},(ee=>this.cursorPosition(ee))),this._parser.registerCsiHandler({final:"I"},(ee=>this.cursorForwardTab(ee))),this._parser.registerCsiHandler({final:"J"},(ee=>this.eraseInDisplay(ee,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(ee=>this.eraseInDisplay(ee,!0))),this._parser.registerCsiHandler({final:"K"},(ee=>this.eraseInLine(ee,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(ee=>this.eraseInLine(ee,!0))),this._parser.registerCsiHandler({final:"L"},(ee=>this.insertLines(ee))),this._parser.registerCsiHandler({final:"M"},(ee=>this.deleteLines(ee))),this._parser.registerCsiHandler({final:"P"},(ee=>this.deleteChars(ee))),this._parser.registerCsiHandler({final:"S"},(ee=>this.scrollUp(ee))),this._parser.registerCsiHandler({final:"T"},(ee=>this.scrollDown(ee))),this._parser.registerCsiHandler({final:"X"},(ee=>this.eraseChars(ee))),this._parser.registerCsiHandler({final:"Z"},(ee=>this.cursorBackwardTab(ee))),this._parser.registerCsiHandler({final:"`"},(ee=>this.charPosAbsolute(ee))),this._parser.registerCsiHandler({final:"a"},(ee=>this.hPositionRelative(ee))),this._parser.registerCsiHandler({final:"b"},(ee=>this.repeatPrecedingCharacter(ee))),this._parser.registerCsiHandler({final:"c"},(ee=>this.sendDeviceAttributesPrimary(ee))),this._parser.registerCsiHandler({prefix:">",final:"c"},(ee=>this.sendDeviceAttributesSecondary(ee))),this._parser.registerCsiHandler({final:"d"},(ee=>this.linePosAbsolute(ee))),this._parser.registerCsiHandler({final:"e"},(ee=>this.vPositionRelative(ee))),this._parser.registerCsiHandler({final:"f"},(ee=>this.hVPosition(ee))),this._parser.registerCsiHandler({final:"g"},(ee=>this.tabClear(ee))),this._parser.registerCsiHandler({final:"h"},(ee=>this.setMode(ee))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(ee=>this.setModePrivate(ee))),this._parser.registerCsiHandler({final:"l"},(ee=>this.resetMode(ee))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(ee=>this.resetModePrivate(ee))),this._parser.registerCsiHandler({final:"m"},(ee=>this.charAttributes(ee))),this._parser.registerCsiHandler({final:"n"},(ee=>this.deviceStatus(ee))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(ee=>this.deviceStatusPrivate(ee))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(ee=>this.softReset(ee))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(ee=>this.setCursorStyle(ee))),this._parser.registerCsiHandler({final:"r"},(ee=>this.setScrollRegion(ee))),this._parser.registerCsiHandler({final:"s"},(ee=>this.saveCursor(ee))),this._parser.registerCsiHandler({final:"t"},(ee=>this.windowOptions(ee))),this._parser.registerCsiHandler({final:"u"},(ee=>this.restoreCursor(ee))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(ee=>this.insertColumns(ee))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(ee=>this.deleteColumns(ee))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(ee=>this.selectProtected(ee))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(ee=>this.requestMode(ee,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(ee=>this.requestMode(ee,!1))),this._parser.setExecuteHandler(f.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(f.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(f.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(f.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(f.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(f.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(f.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(f.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(f.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new D.OscHandler((ee=>(this.setTitle(ee),this.setIconName(ee),!0)))),this._parser.registerOscHandler(1,new D.OscHandler((ee=>this.setIconName(ee)))),this._parser.registerOscHandler(2,new D.OscHandler((ee=>this.setTitle(ee)))),this._parser.registerOscHandler(4,new D.OscHandler((ee=>this.setOrReportIndexedColor(ee)))),this._parser.registerOscHandler(8,new D.OscHandler((ee=>this.setHyperlink(ee)))),this._parser.registerOscHandler(10,new D.OscHandler((ee=>this.setOrReportFgColor(ee)))),this._parser.registerOscHandler(11,new D.OscHandler((ee=>this.setOrReportBgColor(ee)))),this._parser.registerOscHandler(12,new D.OscHandler((ee=>this.setOrReportCursorColor(ee)))),this._parser.registerOscHandler(104,new D.OscHandler((ee=>this.restoreIndexedColor(ee)))),this._parser.registerOscHandler(110,new D.OscHandler((ee=>this.restoreFgColor(ee)))),this._parser.registerOscHandler(111,new D.OscHandler((ee=>this.restoreBgColor(ee)))),this._parser.registerOscHandler(112,new D.OscHandler((ee=>this.restoreCursorColor(ee)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const ee in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:ee},(()=>this.selectCharset("("+ee))),this._parser.registerEscHandler({intermediates:")",final:ee},(()=>this.selectCharset(")"+ee))),this._parser.registerEscHandler({intermediates:"*",final:ee},(()=>this.selectCharset("*"+ee))),this._parser.registerEscHandler({intermediates:"+",final:ee},(()=>this.selectCharset("+"+ee))),this._parser.registerEscHandler({intermediates:"-",final:ee},(()=>this.selectCharset("-"+ee))),this._parser.registerEscHandler({intermediates:".",final:ee},(()=>this.selectCharset("."+ee))),this._parser.registerEscHandler({intermediates:"/",final:ee},(()=>this.selectCharset("/"+ee)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((ee=>(this._logService.error("Parsing error: ",ee),ee))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new O.DcsHandler(((ee,Me)=>this.requestStatusString(ee,Me))))}_preserveStack(U,B,P,Z){this._parseStack.paused=!0,this._parseStack.cursorStartX=U,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=P,this._parseStack.position=Z}_logSlowResolvingAsync(U){this._logService.logLevel<=R.LogLevelEnum.WARN&&Promise.race([U,new Promise(((B,P)=>setTimeout((()=>P("#SLOW_TIMEOUT")),5e3)))]).catch((B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(U,B){let P,Z=this._activeBuffer.x,V=this._activeBuffer.y,_e=0;const we=this._parseStack.paused;if(we){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(P),P;Z=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,U.length>X&&(_e=this._parseStack.position+X)}if(this._logService.logLevel<=R.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof U=="string"?` "${U}"`:` "${Array.prototype.map.call(U,(ee=>String.fromCharCode(ee))).join("")}"`),typeof U=="string"?U.split("").map((ee=>ee.charCodeAt(0))):U),this._parseBuffer.length<U.length&&this._parseBuffer.length<X&&(this._parseBuffer=new Uint32Array(Math.min(U.length,X))),we||this._dirtyRowTracker.clearRange(),U.length>X)for(let ee=_e;ee<U.length;ee+=X){const Me=ee+X<U.length?ee+X:U.length,xe=typeof U=="string"?this._stringDecoder.decode(U.substring(ee,Me),this._parseBuffer):this._utf8Decoder.decode(U.subarray(ee,Me),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,xe))return this._preserveStack(Z,V,xe,ee),this._logSlowResolvingAsync(P),P}else if(!we){const ee=typeof U=="string"?this._stringDecoder.decode(U,this._parseBuffer):this._utf8Decoder.decode(U,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,ee))return this._preserveStack(Z,V,ee,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===Z&&this._activeBuffer.y===V||this._onCursorMove.fire();const De=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),le=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);le<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(le,this._bufferService.rows-1),Math.min(De,this._bufferService.rows-1))}print(U,B,P){let Z,V;const _e=this._charsetService.charset,we=this._optionsService.rawOptions.screenReaderMode,De=this._bufferService.cols,le=this._coreService.decPrivateModes.wraparound,ee=this._coreService.modes.insertMode,Me=this._curAttrData;let xe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-B>0&&xe.getWidth(this._activeBuffer.x-1)===2&&xe.setCellFromCodepoint(this._activeBuffer.x-1,0,1,Me);let Ze=this._parser.precedingJoinState;for(let Le=B;Le<P;++Le){if(Z=U[Le],Z<127&&_e){const ze=_e[String.fromCharCode(Z)];ze&&(Z=ze.charCodeAt(0))}const _t=this._unicodeService.charProperties(Z,Ze);V=M.UnicodeService.extractWidth(_t);const Pe=M.UnicodeService.extractShouldJoin(_t),je=Pe?M.UnicodeService.extractWidth(Ze):0;if(Ze=_t,we&&this._onA11yChar.fire((0,w.stringFromCodePoint)(Z)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+V-je>De){if(le){const ze=xe;let Ue=this._activeBuffer.x-je;for(this._activeBuffer.x=je,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),xe=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),je>0&&xe instanceof S.BufferLine&&xe.copyCellsFrom(ze,Ue,0,je,!1);Ue<De;)ze.setCellFromCodepoint(Ue++,0,1,Me)}else if(this._activeBuffer.x=De-1,V===2)continue}if(Pe&&this._activeBuffer.x){const ze=xe.getWidth(this._activeBuffer.x-1)?1:2;xe.addCodepointToCell(this._activeBuffer.x-ze,Z,V);for(let Ue=V-je;--Ue>=0;)xe.setCellFromCodepoint(this._activeBuffer.x++,0,0,Me)}else if(ee&&(xe.insertCells(this._activeBuffer.x,V-je,this._activeBuffer.getNullCell(Me)),xe.getWidth(De-1)===2&&xe.setCellFromCodepoint(De-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,Me)),xe.setCellFromCodepoint(this._activeBuffer.x++,Z,V,Me),V>0)for(;--V;)xe.setCellFromCodepoint(this._activeBuffer.x++,0,0,Me)}this._parser.precedingJoinState=Ze,this._activeBuffer.x<De&&P-B>0&&xe.getWidth(this._activeBuffer.x)===0&&!xe.hasContent(this._activeBuffer.x)&&xe.setCellFromCodepoint(this._activeBuffer.x,0,1,Me),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(U,B){return U.final!=="t"||U.prefix||U.intermediates?this._parser.registerCsiHandler(U,B):this._parser.registerCsiHandler(U,(P=>!G(P.params[0],this._optionsService.rawOptions.windowOptions)||B(P)))}registerDcsHandler(U,B){return this._parser.registerDcsHandler(U,new O.DcsHandler(B))}registerEscHandler(U,B){return this._parser.registerEscHandler(U,B)}registerOscHandler(U,B){return this._parser.registerOscHandler(U,new D.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);U.hasWidth(this._activeBuffer.x)&&!U.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const U=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-U),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(U=this._bufferService.cols-1){this._activeBuffer.x=Math.min(U,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(U,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=U,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=U,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(U,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+U,this._activeBuffer.y+B)}cursorUp(U){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,U.params[0]||1)):this._moveCursor(0,-(U.params[0]||1)),!0}cursorDown(U){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,U.params[0]||1)):this._moveCursor(0,U.params[0]||1),!0}cursorForward(U){return this._moveCursor(U.params[0]||1,0),!0}cursorBackward(U){return this._moveCursor(-(U.params[0]||1),0),!0}cursorNextLine(U){return this.cursorDown(U),this._activeBuffer.x=0,!0}cursorPrecedingLine(U){return this.cursorUp(U),this._activeBuffer.x=0,!0}cursorCharAbsolute(U){return this._setCursor((U.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(U){return this._setCursor(U.length>=2?(U.params[1]||1)-1:0,(U.params[0]||1)-1),!0}charPosAbsolute(U){return this._setCursor((U.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(U){return this._moveCursor(U.params[0]||1,0),!0}linePosAbsolute(U){return this._setCursor(this._activeBuffer.x,(U.params[0]||1)-1),!0}vPositionRelative(U){return this._moveCursor(0,U.params[0]||1),!0}hVPosition(U){return this.cursorPosition(U),!0}tabClear(U){const B=U.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(U){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=U.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(U){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=U.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(U){const B=U.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(U,B,P,Z=!1,V=!1){const _e=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);_e.replaceCells(B,P,this._activeBuffer.getNullCell(this._eraseAttrData()),V),Z&&(_e.isWrapped=!1)}_resetBufferLine(U,B=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+U);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+U),P.isWrapped=!1)}eraseInDisplay(U,B=!1){let P;switch(this._restrictCursor(this._bufferService.cols),U.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);P<this._bufferService.rows;P++)this._resetBufferLine(P,B);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,B);this._dirtyRowTracker.markDirty(0);break;case 3:const Z=this._activeBuffer.lines.length-this._bufferService.rows;Z>0&&(this._activeBuffer.lines.trimStart(Z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-Z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-Z,0),this._onScroll.fire(0))}return!0}eraseInLine(U,B=!1){switch(this._restrictCursor(this._bufferService.cols),U.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(U){this._restrictCursor();let B=U.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,Z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-Z+1;for(;B--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(U){this._restrictCursor();let B=U.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let Z;for(Z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Z=this._bufferService.rows-1+this._activeBuffer.ybase-Z;B--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(Z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(U){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,U.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(U){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,U.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(U){let B=U.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(U){let B=U.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(S.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(U){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=U.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);Z.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),Z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(U){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=U.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);Z.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData())),Z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(U){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=U.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);Z.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),Z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(U){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=U.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);Z.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData())),Z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(U){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(U.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(U){const B=this._parser.precedingJoinState;if(!B)return!0;const P=U.params[0]||1,Z=M.UnicodeService.extractWidth(B),V=this._activeBuffer.x-Z,_e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(V),we=new Uint32Array(_e.length*P);let De=0;for(let ee=0;ee<_e.length;){const Me=_e.codePointAt(ee)||0;we[De++]=Me,ee+=Me>65535?2:1}let le=De;for(let ee=1;ee<P;++ee)we.copyWithin(le,0,De),le+=De;return this.print(we,0,le),!0}sendDeviceAttributesPrimary(U){return U.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(U){return U.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(U.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(U){return(this._optionsService.rawOptions.termName+"").indexOf(U)===0}setMode(U){for(let B=0;B<U.length;B++)switch(U.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(U){for(let B=0;B<U.length;B++)switch(U.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(U){for(let B=0;B<U.length;B++)switch(U.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(U){for(let B=0;B<U.length;B++)switch(U.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),U.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(U,B){const P=this._coreService.decPrivateModes,{activeProtocol:Z,activeEncoding:V}=this._coreMouseService,_e=this._coreService,{buffers:we,cols:De}=this._bufferService,{active:le,alt:ee}=we,Me=this._optionsService.rawOptions,xe=Pe=>Pe?1:2,Ze=U.params[0];return Le=Ze,_t=B?Ze===2?4:Ze===4?xe(_e.modes.insertMode):Ze===12?3:Ze===20?xe(Me.convertEol):0:Ze===1?xe(P.applicationCursorKeys):Ze===3?Me.windowOptions.setWinLines?De===80?2:De===132?1:0:0:Ze===6?xe(P.origin):Ze===7?xe(P.wraparound):Ze===8?3:Ze===9?xe(Z==="X10"):Ze===12?xe(Me.cursorBlink):Ze===25?xe(!_e.isCursorHidden):Ze===45?xe(P.reverseWraparound):Ze===66?xe(P.applicationKeypad):Ze===67?4:Ze===1e3?xe(Z==="VT200"):Ze===1002?xe(Z==="DRAG"):Ze===1003?xe(Z==="ANY"):Ze===1004?xe(P.sendFocus):Ze===1005?4:Ze===1006?xe(V==="SGR"):Ze===1015?4:Ze===1016?xe(V==="SGR_PIXELS"):Ze===1048?1:Ze===47||Ze===1047||Ze===1049?xe(le===ee):Ze===2004?xe(P.bracketedPasteMode):0,_e.triggerDataEvent(`${f.C0.ESC}[${B?"":"?"}${Le};${_t}$y`),!0;var Le,_t}_updateAttrColor(U,B,P,Z,V){return B===2?(U|=50331648,U&=-16777216,U|=E.AttributeData.fromColorRGB([P,Z,V])):B===5&&(U&=-50331904,U|=33554432|255&P),U}_extractColor(U,B,P){const Z=[0,0,-1,0,0,0];let V=0,_e=0;do{if(Z[_e+V]=U.params[B+_e],U.hasSubParams(B+_e)){const we=U.getSubParams(B+_e);let De=0;do Z[1]===5&&(V=1),Z[_e+De+1+V]=we[De];while(++De<we.length&&De+_e+1+V<Z.length);break}if(Z[1]===5&&_e+V>=2||Z[1]===2&&_e+V>=5)break;Z[1]&&(V=1)}while(++_e+B<U.length&&_e+V<Z.length);for(let we=2;we<Z.length;++we)Z[we]===-1&&(Z[we]=0);switch(Z[0]){case 38:P.fg=this._updateAttrColor(P.fg,Z[1],Z[3],Z[4],Z[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,Z[1],Z[3],Z[4],Z[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,Z[1],Z[3],Z[4],Z[5])}return _e}_processUnderline(U,B){B.extended=B.extended.clone(),(!~U||U>5)&&(U=1),B.extended.underlineStyle=U,B.fg|=268435456,U===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(U){U.fg=S.DEFAULT_ATTR_DATA.fg,U.bg=S.DEFAULT_ATTR_DATA.bg,U.extended=U.extended.clone(),U.extended.underlineStyle=0,U.extended.underlineColor&=-67108864,U.updateExtended()}charAttributes(U){if(U.length===1&&U.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=U.length;let P;const Z=this._curAttrData;for(let V=0;V<B;V++)P=U.params[V],P>=30&&P<=37?(Z.fg&=-50331904,Z.fg|=16777216|P-30):P>=40&&P<=47?(Z.bg&=-50331904,Z.bg|=16777216|P-40):P>=90&&P<=97?(Z.fg&=-50331904,Z.fg|=16777224|P-90):P>=100&&P<=107?(Z.bg&=-50331904,Z.bg|=16777224|P-100):P===0?this._processSGR0(Z):P===1?Z.fg|=134217728:P===3?Z.bg|=67108864:P===4?(Z.fg|=268435456,this._processUnderline(U.hasSubParams(V)?U.getSubParams(V)[0]:1,Z)):P===5?Z.fg|=536870912:P===7?Z.fg|=67108864:P===8?Z.fg|=1073741824:P===9?Z.fg|=2147483648:P===2?Z.bg|=134217728:P===21?this._processUnderline(2,Z):P===22?(Z.fg&=-134217729,Z.bg&=-134217729):P===23?Z.bg&=-67108865:P===24?(Z.fg&=-268435457,this._processUnderline(0,Z)):P===25?Z.fg&=-536870913:P===27?Z.fg&=-67108865:P===28?Z.fg&=-1073741825:P===29?Z.fg&=2147483647:P===39?(Z.fg&=-67108864,Z.fg|=16777215&S.DEFAULT_ATTR_DATA.fg):P===49?(Z.bg&=-67108864,Z.bg|=16777215&S.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?V+=this._extractColor(U,V,Z):P===53?Z.bg|=1073741824:P===55?Z.bg&=-1073741825:P===59?(Z.extended=Z.extended.clone(),Z.extended.underlineColor=-1,Z.updateExtended()):P===100?(Z.fg&=-67108864,Z.fg|=16777215&S.DEFAULT_ATTR_DATA.fg,Z.bg&=-67108864,Z.bg|=16777215&S.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(U){switch(U.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${B};${P}R`)}return!0}deviceStatusPrivate(U){if(U.params[0]===6){const B=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${B};${P}R`)}return!0}softReset(U){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=S.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(U){const B=U.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=B%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(U){const B=U.params[0]||1;let P;return(U.length<2||(P=U.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(U){if(!G(U.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=U.length>1?U.params[1]:0;switch(U.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(H.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(H.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(U){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(U){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(U){return this._windowTitle=U,this._onTitleChange.fire(U),!0}setIconName(U){return this._iconName=U,!0}setOrReportIndexedColor(U){const B=[],P=U.split(";");for(;P.length>1;){const Z=P.shift(),V=P.shift();if(/^\d+$/.exec(Z)){const _e=parseInt(Z);if(te(_e))if(V==="?")B.push({type:0,index:_e});else{const we=(0,L.parseColor)(V);we&&B.push({type:1,index:_e,color:we})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(U){const B=U.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(U,B){this._getCurrentLinkId()&&this._finishHyperlink();const P=U.split(":");let Z;const V=P.findIndex((_e=>_e.startsWith("id=")));return V!==-1&&(Z=P[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:Z,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(U,B){const P=U.split(";");for(let Z=0;Z<P.length&&!(B>=this._specialColors.length);++Z,++B)if(P[Z]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const V=(0,L.parseColor)(P[Z]);V&&this._onColor.fire([{type:1,index:this._specialColors[B],color:V}])}return!0}setOrReportFgColor(U){return this._setOrReportSpecialColor(U,0)}setOrReportBgColor(U){return this._setOrReportSpecialColor(U,1)}setOrReportCursorColor(U){return this._setOrReportSpecialColor(U,2)}restoreIndexedColor(U){if(!U)return this._onColor.fire([{type:2}]),!0;const B=[],P=U.split(";");for(let Z=0;Z<P.length;++Z)if(/^\d+$/.exec(P[Z])){const V=parseInt(P[Z]);te(V)&&B.push({type:2,index:V})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(U){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(U){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(U){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(U){return U.length!==2?(this.selectDefaultCharset(),!0):(U[0]==="/"||this._charsetService.setgCharset(j[U[0]],m.CHARSETS[U[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const U=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,U,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=S.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=S.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(U){return this._charsetService.setgLevel(U),!0}screenAlignmentPattern(){const U=new _.CellData;U.content=4194373,U.fg=this._curAttrData.fg,U.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const P=this._activeBuffer.ybase+this._activeBuffer.y+B,Z=this._activeBuffer.lines.get(P);Z&&(Z.fill(U),Z.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(U,B){const P=this._bufferService.buffer,Z=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${V}${f.C0.ESC}\\`),!0))(U==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:U==='"p'?'P1$r61;1"p':U==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:U==="m"?"P1$r0m":U===" q"?`P1$r${{block:2,underline:4,bar:6}[Z.cursorStyle]-(Z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(U,B){this._dirtyRowTracker.markRangeDirty(U,B)}}o.InputHandler=Q;let Y=class{constructor(re){this._bufferService=re,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(re){re<this.start?this.start=re:re>this.end&&(this.end=re)}markRangeDirty(re,U){re>U&&($=re,re=U,U=$),re<this.start&&(this.start=re),U>this.end&&(this.end=U)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function te(re){return 0<=re&&re<256}Y=h([p(0,R.IBufferService)],Y)},844:(l,o)=>{function u(h){for(const p of h)p.dispose();h.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const p=this._disposables.indexOf(h);p!==-1&&this._disposables.splice(p,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){this._isDisposed||h===this._value||(this._value?.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},o.toDisposable=function(h){return{dispose:h}},o.disposeArray=u,o.getDisposeArrayDisposable=function(h){return{dispose:()=>u(h)}}},1505:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(p,f,m){this._data[p]||(this._data[p]={}),this._data[p][f]=m}get(p,f){return this._data[p]?this._data[p][f]:void 0}clear(){this._data={}}}o.TwoKeyMap=u,o.FourKeyMap=class{constructor(){this._data=new u}set(h,p,f,m,y){this._data.get(h,p)||this._data.set(h,p,new u),this._data.get(h,p).set(f,m,y)}get(h,p,f,m){return this._data.get(h,p)?.get(f,m)}clear(){this._data.clear()}}},6114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof process<"u"&&"title"in process;const u=o.isNode?"node":navigator.userAgent,h=o.isNode?"node":navigator.platform;o.isFirefox=u.includes("Firefox"),o.isLegacyEdge=u.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(u),o.getSafariVersion=function(){if(!o.isSafari)return 0;const p=u.match(/Version\/(\d+)/);return p===null||p.length<2?0:parseInt(p[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),o.isIpad=h==="iPad",o.isIphone=h==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),o.isLinux=h.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(u)},6106:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let u=0;o.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(u=this._search(this._getKey(h)),this._array.splice(u,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const p=this._getKey(h);if(p===void 0||(u=this._search(p),u===-1)||this._getKey(this._array[u])!==p)return!1;do if(this._array[u]===h)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===p);return!1}*getKeyIterator(h){if(this._array.length!==0&&(u=this._search(h),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===h))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===h)}forEachByKey(h,p){if(this._array.length!==0&&(u=this._search(h),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===h))do p(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===h)}values(){return[...this._array].values()}_search(h){let p=0,f=this._array.length-1;for(;f>=p;){let m=p+f>>1;const y=this._getKey(this._array[m]);if(y>h)f=m-1;else{if(!(y<h)){for(;m>0&&this._getKey(this._array[m-1])===h;)m--;return m}p=m+1}}return p}}},7226:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const h=u(6114);class p{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let x=0,w=0,S=y.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(x=Date.now(),this._tasks[this._i]()||this._i++,x=Math.max(1,Date.now()-x),w=Math.max(x,w),b=y.timeRemaining(),1.5*w>b)return S-x<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(S-x))}ms`),void this._start();S=b}this.clear()}}class f extends p{_requestCallback(y){return setTimeout((()=>y(this._createDeadline(16))))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const x=Date.now()+y;return{timeRemaining:()=>Math.max(0,x-Date.now())}}}o.PriorityTaskQueue=f,o.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends p{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:f,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const h=u(643);o.updateWindowsModeWrappedState=function(p){const f=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),m=f?.get(p.cols-1),y=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);y&&m&&(y.isWrapped=m[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&m[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new u;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}o.AttributeData=u;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}get underlineVariantOffset(){const f=(3758096384&this._ext)>>29;return f<0?4294967288^f:f}set underlineVariantOffset(f){this._ext&=536870911,this._ext|=f<<29&3758096384}constructor(f=0,m=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=m}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=h},9092:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const h=u(6349),p=u(7226),f=u(3734),m=u(8437),y=u(4634),x=u(511),w=u(643),S=u(4863),b=u(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(v,_,E){this._hasScrollback=v,this._optionsService=_,this._bufferService=E,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=b.DEFAULT_CHARSET,this.markers=[],this._nullCell=x.CellData.fromCharData([0,w.NULL_CELL_CHAR,w.NULL_CELL_WIDTH,w.NULL_CELL_CODE]),this._whitespaceCell=x.CellData.fromCharData([0,w.WHITESPACE_CELL_CHAR,w.WHITESPACE_CELL_WIDTH,w.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new p.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,_){return new m.BufferLine(this._bufferService.cols,this.getNullCell(v),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;const _=v+this._optionsService.rawOptions.scrollback;return _>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:_}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=m.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,_){const E=this.getNullCell(m.DEFAULT_ATTR_DATA);let R=0;const M=this._getCorrectBufferLength(_);if(M>this.lines.maxLength&&(this.lines.maxLength=M),this.lines.length>0){if(this._cols<v)for(let O=0;O<this.lines.length;O++)R+=+this.lines.get(O).resize(v,E);let D=0;if(this._rows<_)for(let O=this._rows;O<_;O++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(v,E)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(v,E)));else for(let O=this._rows;O>_;O--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(M<this.lines.maxLength){const O=this.lines.length-M;O>0&&(this.lines.trimStart(O),this.ybase=Math.max(this.ybase-O,0),this.ydisp=Math.max(this.ydisp-O,0),this.savedY=Math.max(this.savedY-O,0)),this.lines.maxLength=M}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,_-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(v,_),this._cols>v))for(let D=0;D<this.lines.length;D++)R+=+this.lines.get(D).resize(v,E);this._cols=v,this._rows=_,this._memoryCleanupQueue.clear(),R>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return v}get _isReflowEnabled(){const v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,_){this._cols!==v&&(v>this._cols?this._reflowLarger(v,_):this._reflowSmaller(v,_))}_reflowLarger(v,_){const E=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(E.length>0){const R=(0,y.reflowLargerCreateNewLayout)(this.lines,E);(0,y.reflowLargerApplyNewLayout)(this.lines,R.layout),this._reflowLargerAdjustViewport(v,_,R.countRemoved)}}_reflowLargerAdjustViewport(v,_,E){const R=this.getNullCell(m.DEFAULT_ATTR_DATA);let M=E;for(;M-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new m.BufferLine(v,R))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-E,0)}_reflowSmaller(v,_){const E=this.getNullCell(m.DEFAULT_ATTR_DATA),R=[];let M=0;for(let D=this.lines.length-1;D>=0;D--){let O=this.lines.get(D);if(!O||!O.isWrapped&&O.getTrimmedLength()<=v)continue;const L=[O];for(;O.isWrapped&&D>0;)O=this.lines.get(--D),L.unshift(O);const j=this.ybase+this.y;if(j>=D&&j<D+L.length)continue;const X=L[L.length-1].getTrimmedLength(),G=(0,y.reflowSmallerGetNewLineLengths)(L,this._cols,v),H=G.length-L.length;let $;$=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+H):Math.max(0,this.lines.length-this.lines.maxLength+H);const Q=[];for(let P=0;P<H;P++){const Z=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);Q.push(Z)}Q.length>0&&(R.push({start:D+L.length+M,newLines:Q}),M+=Q.length),L.push(...Q);let Y=G.length-1,te=G[Y];te===0&&(Y--,te=G[Y]);let re=L.length-H-1,U=X;for(;re>=0;){const P=Math.min(U,te);if(L[Y]===void 0)break;if(L[Y].copyCellsFrom(L[re],U-P,te-P,P,!0),te-=P,te===0&&(Y--,te=G[Y]),U-=P,U===0){re--;const Z=Math.max(re,0);U=(0,y.getWrappedLineTrimmedLength)(L,Z,this._cols)}}for(let P=0;P<L.length;P++)G[P]<v&&L[P].setCell(G[P],E);let B=H-$;for(;B-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+M)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+H,this.ybase+_-1)}if(R.length>0){const D=[],O=[];for(let Y=0;Y<this.lines.length;Y++)O.push(this.lines.get(Y));const L=this.lines.length;let j=L-1,X=0,G=R[X];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+M);let H=0;for(let Y=Math.min(this.lines.maxLength-1,L+M-1);Y>=0;Y--)if(G&&G.start>j+H){for(let te=G.newLines.length-1;te>=0;te--)this.lines.set(Y--,G.newLines[te]);Y++,D.push({index:j+1,amount:G.newLines.length}),H+=G.newLines.length,G=R[++X]}else this.lines.set(Y,O[j--]);let $=0;for(let Y=D.length-1;Y>=0;Y--)D[Y].index+=$,this.lines.onInsertEmitter.fire(D[Y]),$+=D[Y].amount;const Q=Math.max(0,L+M-this.lines.maxLength);Q>0&&this.lines.onTrimEmitter.fire(Q)}}translateBufferLineToString(v,_,E=0,R){const M=this.lines.get(v);return M?M.translateToString(_,E,R):""}getWrappedRangeForLine(v){let _=v,E=v;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;E+1<this.lines.length&&this.lines.get(E+1).isWrapped;)E++;return{first:_,last:E}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===v&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){const _=new S.Marker(v);return this.markers.push(_),_.register(this.lines.onTrim((E=>{_.line-=E,_.line<0&&_.dispose()}))),_.register(this.lines.onInsert((E=>{_.line>=E.index&&(_.line+=E.amount)}))),_.register(this.lines.onDelete((E=>{_.line>=E.index&&_.line<E.index+E.amount&&_.dispose(),_.line>E.index&&(_.line-=E.amount)}))),_.register(_.onDispose((()=>this._removeMarker(_)))),_}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const h=u(3734),p=u(511),f=u(643),m=u(482);o.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let y=0;class x{constructor(S,b,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*S);const _=b||p.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let E=0;E<S;++E)this.setCell(E,_);this.length=S}get(S){const b=this._data[3*S+0],v=2097151&b;return[this._data[3*S+1],2097152&b?this._combined[S]:v?(0,m.stringFromCodePoint)(v):"",b>>22,2097152&b?this._combined[S].charCodeAt(this._combined[S].length-1):v]}set(S,b){this._data[3*S+1]=b[f.CHAR_DATA_ATTR_INDEX],b[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[S]=b[1],this._data[3*S+0]=2097152|S|b[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*S+0]=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(S){return this._data[3*S+0]>>22}hasWidth(S){return 12582912&this._data[3*S+0]}getFg(S){return this._data[3*S+1]}getBg(S){return this._data[3*S+2]}hasContent(S){return 4194303&this._data[3*S+0]}getCodePoint(S){const b=this._data[3*S+0];return 2097152&b?this._combined[S].charCodeAt(this._combined[S].length-1):2097151&b}isCombined(S){return 2097152&this._data[3*S+0]}getString(S){const b=this._data[3*S+0];return 2097152&b?this._combined[S]:2097151&b?(0,m.stringFromCodePoint)(2097151&b):""}isProtected(S){return 536870912&this._data[3*S+2]}loadCell(S,b){return y=3*S,b.content=this._data[y+0],b.fg=this._data[y+1],b.bg=this._data[y+2],2097152&b.content&&(b.combinedData=this._combined[S]),268435456&b.bg&&(b.extended=this._extendedAttrs[S]),b}setCell(S,b){2097152&b.content&&(this._combined[S]=b.combinedData),268435456&b.bg&&(this._extendedAttrs[S]=b.extended),this._data[3*S+0]=b.content,this._data[3*S+1]=b.fg,this._data[3*S+2]=b.bg}setCellFromCodepoint(S,b,v,_){268435456&_.bg&&(this._extendedAttrs[S]=_.extended),this._data[3*S+0]=b|v<<22,this._data[3*S+1]=_.fg,this._data[3*S+2]=_.bg}addCodepointToCell(S,b,v){let _=this._data[3*S+0];2097152&_?this._combined[S]+=(0,m.stringFromCodePoint)(b):2097151&_?(this._combined[S]=(0,m.stringFromCodePoint)(2097151&_)+(0,m.stringFromCodePoint)(b),_&=-2097152,_|=2097152):_=b|4194304,v&&(_&=-12582913,_|=v<<22),this._data[3*S+0]=_}insertCells(S,b,v){if((S%=this.length)&&this.getWidth(S-1)===2&&this.setCellFromCodepoint(S-1,0,1,v),b<this.length-S){const _=new p.CellData;for(let E=this.length-S-b-1;E>=0;--E)this.setCell(S+b+E,this.loadCell(S+E,_));for(let E=0;E<b;++E)this.setCell(S+E,v)}else for(let _=S;_<this.length;++_)this.setCell(_,v);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,v)}deleteCells(S,b,v){if(S%=this.length,b<this.length-S){const _=new p.CellData;for(let E=0;E<this.length-S-b;++E)this.setCell(S+E,this.loadCell(S+b+E,_));for(let E=this.length-b;E<this.length;++E)this.setCell(E,v)}else for(let _=S;_<this.length;++_)this.setCell(_,v);S&&this.getWidth(S-1)===2&&this.setCellFromCodepoint(S-1,0,1,v),this.getWidth(S)!==0||this.hasContent(S)||this.setCellFromCodepoint(S,0,1,v)}replaceCells(S,b,v,_=!1){if(_)for(S&&this.getWidth(S-1)===2&&!this.isProtected(S-1)&&this.setCellFromCodepoint(S-1,0,1,v),b<this.length&&this.getWidth(b-1)===2&&!this.isProtected(b)&&this.setCellFromCodepoint(b,0,1,v);S<b&&S<this.length;)this.isProtected(S)||this.setCell(S,v),S++;else for(S&&this.getWidth(S-1)===2&&this.setCellFromCodepoint(S-1,0,1,v),b<this.length&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b,0,1,v);S<b&&S<this.length;)this.setCell(S++,v)}resize(S,b){if(S===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const v=3*S;if(S>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{const _=new Uint32Array(v);_.set(this._data),this._data=_}for(let _=this.length;_<S;++_)this.setCell(_,b)}else{this._data=this._data.subarray(0,v);const _=Object.keys(this._combined);for(let R=0;R<_.length;R++){const M=parseInt(_[R],10);M>=S&&delete this._combined[M]}const E=Object.keys(this._extendedAttrs);for(let R=0;R<E.length;R++){const M=parseInt(E[R],10);M>=S&&delete this._extendedAttrs[M]}}return this.length=S,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const S=new Uint32Array(this._data.length);return S.set(this._data),this._data=S,1}return 0}fill(S,b=!1){if(b)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,S);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,S)}}copyFrom(S){this.length!==S.length?this._data=new Uint32Array(S._data):this._data.set(S._data),this.length=S.length,this._combined={};for(const b in S._combined)this._combined[b]=S._combined[b];this._extendedAttrs={};for(const b in S._extendedAttrs)this._extendedAttrs[b]=S._extendedAttrs[b];this.isWrapped=S.isWrapped}clone(){const S=new x(0);S._data=new Uint32Array(this._data),S.length=this.length;for(const b in this._combined)S._combined[b]=this._combined[b];for(const b in this._extendedAttrs)S._extendedAttrs[b]=this._extendedAttrs[b];return S.isWrapped=this.isWrapped,S}getTrimmedLength(){for(let S=this.length-1;S>=0;--S)if(4194303&this._data[3*S+0])return S+(this._data[3*S+0]>>22);return 0}getNoBgTrimmedLength(){for(let S=this.length-1;S>=0;--S)if(4194303&this._data[3*S+0]||50331648&this._data[3*S+2])return S+(this._data[3*S+0]>>22);return 0}copyCellsFrom(S,b,v,_,E){const R=S._data;if(E)for(let D=_-1;D>=0;D--){for(let O=0;O<3;O++)this._data[3*(v+D)+O]=R[3*(b+D)+O];268435456&R[3*(b+D)+2]&&(this._extendedAttrs[v+D]=S._extendedAttrs[b+D])}else for(let D=0;D<_;D++){for(let O=0;O<3;O++)this._data[3*(v+D)+O]=R[3*(b+D)+O];268435456&R[3*(b+D)+2]&&(this._extendedAttrs[v+D]=S._extendedAttrs[b+D])}const M=Object.keys(S._combined);for(let D=0;D<M.length;D++){const O=parseInt(M[D],10);O>=b&&(this._combined[O-b+v]=S._combined[O])}}translateToString(S,b,v,_){b=b??0,v=v??this.length,S&&(v=Math.min(v,this.getTrimmedLength())),_&&(_.length=0);let E="";for(;b<v;){const R=this._data[3*b+0],M=2097151&R,D=2097152&R?this._combined[b]:M?(0,m.stringFromCodePoint)(M):f.WHITESPACE_CELL_CHAR;if(E+=D,_)for(let O=0;O<D.length;++O)_.push(b);b+=R>>22||1}return _&&_.push(b),E}}o.BufferLine=x},4841:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(u,h){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return h*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(l,o)=>{function u(h,p,f){if(p===h.length-1)return h[p].getTrimmedLength();const m=!h[p].hasContent(f-1)&&h[p].getWidth(f-1)===1,y=h[p+1].getWidth(0)===2;return m&&y?f-1:f}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(h,p,f,m,y){const x=[];for(let w=0;w<h.length-1;w++){let S=w,b=h.get(++S);if(!b.isWrapped)continue;const v=[h.get(w)];for(;S<h.length&&b.isWrapped;)v.push(b),b=h.get(++S);if(m>=w&&m<S){w+=v.length-1;continue}let _=0,E=u(v,_,p),R=1,M=0;for(;R<v.length;){const O=u(v,R,p),L=O-M,j=f-E,X=Math.min(L,j);v[_].copyCellsFrom(v[R],M,E,X,!1),E+=X,E===f&&(_++,E=0),M+=X,M===O&&(R++,M=0),E===0&&_!==0&&v[_-1].getWidth(f-1)===2&&(v[_].copyCellsFrom(v[_-1],f-1,E++,1,!1),v[_-1].setCell(f-1,y))}v[_].replaceCells(E,f,y);let D=0;for(let O=v.length-1;O>0&&(O>_||v[O].getTrimmedLength()===0);O--)D++;D>0&&(x.push(w+v.length-D),x.push(D)),w+=v.length-1}return x},o.reflowLargerCreateNewLayout=function(h,p){const f=[];let m=0,y=p[m],x=0;for(let w=0;w<h.length;w++)if(y===w){const S=p[++m];h.onDeleteEmitter.fire({index:w-x,amount:S}),w+=S-1,x+=S,y=p[++m]}else f.push(w);return{layout:f,countRemoved:x}},o.reflowLargerApplyNewLayout=function(h,p){const f=[];for(let m=0;m<p.length;m++)f.push(h.get(p[m]));for(let m=0;m<f.length;m++)h.set(m,f[m]);h.length=p.length},o.reflowSmallerGetNewLineLengths=function(h,p,f){const m=[],y=h.map(((b,v)=>u(h,v,p))).reduce(((b,v)=>b+v));let x=0,w=0,S=0;for(;S<y;){if(y-S<f){m.push(y-S);break}x+=f;const b=u(h,w,p);x>b&&(x-=b,w++);const v=h[w].getWidth(x-1)===2;v&&x--;const _=v?f-1:f;m.push(_),S+=_}return m},o.getWrappedLineTrimmedLength=u},5295:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const h=u(8460),p=u(844),f=u(9092);class m extends p.Disposable{constructor(x,w){super(),this._optionsService=x,this._bufferService=w,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(x){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(x),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(x,w){this._normal.resize(x,w),this._alt.resize(x,w),this.setupTabStops(x)}setupTabStops(x){this._normal.setupTabStops(x),this._alt.setupTabStops(x)}}o.BufferSet=m},511:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const h=u(482),p=u(643),f=u(3734);class m extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(x){const w=new m;return w.setFromCharData(x),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(x){this.fg=x[p.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(x[p.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(x[p.CHAR_DATA_CHAR_INDEX].length===2){const S=x[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=S&&S<=56319){const b=x[p.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(S-55296)+b-56320+65536|x[p.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=x[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|x[p.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=x[p.CHAR_DATA_CHAR_INDEX],this.content=2097152|x[p.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=m},643:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const h=u(8460),p=u(844);class f{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,p.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}o.Marker=f,f._nextId=1},7116:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},o.CHARSETS.A={"#":""},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},o.CHARSETS.C=o.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.E=o.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},o.CHARSETS.H=o.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(l,o)=>{var u,h,p;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,(function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""})(u||(o.C0=u={})),(function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""})(h||(o.C1=h={})),(function(f){f.ST=`${u.ESC}\\`})(p||(o.C1_ESCAPED=p={}))},7399:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const h=u(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(f,m,y,x){const w={type:0,cancel:!1,key:void 0},S=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?w.key=m?h.C0.ESC+"OA":h.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?w.key=m?h.C0.ESC+"OD":h.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?w.key=m?h.C0.ESC+"OC":h.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(w.key=m?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:w.key=f.ctrlKey?"\b":h.C0.DEL,f.altKey&&(w.key=h.C0.ESC+w.key);break;case 9:if(f.shiftKey){w.key=h.C0.ESC+"[Z";break}w.key=h.C0.HT,w.cancel=!0;break;case 13:w.key=f.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,w.cancel=!0;break;case 27:w.key=h.C0.ESC,f.altKey&&(w.key=h.C0.ESC+h.C0.ESC),w.cancel=!0;break;case 37:if(f.metaKey)break;S?(w.key=h.C0.ESC+"[1;"+(S+1)+"D",w.key===h.C0.ESC+"[1;3D"&&(w.key=h.C0.ESC+(y?"b":"[1;5D"))):w.key=m?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(f.metaKey)break;S?(w.key=h.C0.ESC+"[1;"+(S+1)+"C",w.key===h.C0.ESC+"[1;3C"&&(w.key=h.C0.ESC+(y?"f":"[1;5C"))):w.key=m?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(f.metaKey)break;S?(w.key=h.C0.ESC+"[1;"+(S+1)+"A",y||w.key!==h.C0.ESC+"[1;3A"||(w.key=h.C0.ESC+"[1;5A")):w.key=m?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(f.metaKey)break;S?(w.key=h.C0.ESC+"[1;"+(S+1)+"B",y||w.key!==h.C0.ESC+"[1;3B"||(w.key=h.C0.ESC+"[1;5B")):w.key=m?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(w.key=h.C0.ESC+"[2~");break;case 46:w.key=S?h.C0.ESC+"[3;"+(S+1)+"~":h.C0.ESC+"[3~";break;case 36:w.key=S?h.C0.ESC+"[1;"+(S+1)+"H":m?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:w.key=S?h.C0.ESC+"[1;"+(S+1)+"F":m?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:f.shiftKey?w.type=2:f.ctrlKey?w.key=h.C0.ESC+"[5;"+(S+1)+"~":w.key=h.C0.ESC+"[5~";break;case 34:f.shiftKey?w.type=3:f.ctrlKey?w.key=h.C0.ESC+"[6;"+(S+1)+"~":w.key=h.C0.ESC+"[6~";break;case 112:w.key=S?h.C0.ESC+"[1;"+(S+1)+"P":h.C0.ESC+"OP";break;case 113:w.key=S?h.C0.ESC+"[1;"+(S+1)+"Q":h.C0.ESC+"OQ";break;case 114:w.key=S?h.C0.ESC+"[1;"+(S+1)+"R":h.C0.ESC+"OR";break;case 115:w.key=S?h.C0.ESC+"[1;"+(S+1)+"S":h.C0.ESC+"OS";break;case 116:w.key=S?h.C0.ESC+"[15;"+(S+1)+"~":h.C0.ESC+"[15~";break;case 117:w.key=S?h.C0.ESC+"[17;"+(S+1)+"~":h.C0.ESC+"[17~";break;case 118:w.key=S?h.C0.ESC+"[18;"+(S+1)+"~":h.C0.ESC+"[18~";break;case 119:w.key=S?h.C0.ESC+"[19;"+(S+1)+"~":h.C0.ESC+"[19~";break;case 120:w.key=S?h.C0.ESC+"[20;"+(S+1)+"~":h.C0.ESC+"[20~";break;case 121:w.key=S?h.C0.ESC+"[21;"+(S+1)+"~":h.C0.ESC+"[21~";break;case 122:w.key=S?h.C0.ESC+"[23;"+(S+1)+"~":h.C0.ESC+"[23~";break;case 123:w.key=S?h.C0.ESC+"[24;"+(S+1)+"~":h.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(y&&!x||!f.altKey||f.metaKey)!y||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?w.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(w.key=h.C0.US),f.key==="@"&&(w.key=h.C0.NUL)):f.keyCode===65&&(w.type=1);else{const b=p[f.keyCode],v=b?.[f.shiftKey?1:0];if(v)w.key=h.C0.ESC+v;else if(f.keyCode>=65&&f.keyCode<=90){const _=f.ctrlKey?f.keyCode-64:f.keyCode+32;let E=String.fromCharCode(_);f.shiftKey&&(E=E.toUpperCase()),w.key=h.C0.ESC+E}else if(f.keyCode===32)w.key=h.C0.ESC+(f.ctrlKey?h.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let _=f.code.slice(3,4);f.shiftKey||(_=_.toLowerCase()),w.key=h.C0.ESC+_,w.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?w.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?w.key=h.C0.NUL:f.keyCode>=51&&f.keyCode<=55?w.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?w.key=h.C0.DEL:f.keyCode===219?w.key=h.C0.ESC:f.keyCode===220?w.key=h.C0.FS:f.keyCode===221&&(w.key=h.C0.GS)}return w}},482:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},o.utf32ToString=function(u,h=0,p=u.length){let f="";for(let m=h;m<p;++m){let y=u[m];y>65535?(y-=65536,f+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):f+=String.fromCharCode(y)}return f},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,h){const p=u.length;if(!p)return 0;let f=0,m=0;if(this._interim){const y=u.charCodeAt(m++);56320<=y&&y<=57343?h[f++]=1024*(this._interim-55296)+y-56320+65536:(h[f++]=this._interim,h[f++]=y),this._interim=0}for(let y=m;y<p;++y){const x=u.charCodeAt(y);if(55296<=x&&x<=56319){if(++y>=p)return this._interim=x,f;const w=u.charCodeAt(y);56320<=w&&w<=57343?h[f++]=1024*(x-55296)+w-56320+65536:(h[f++]=x,h[f++]=w)}else x!==65279&&(h[f++]=x)}return f}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,h){const p=u.length;if(!p)return 0;let f,m,y,x,w=0,S=0,b=0;if(this.interim[0]){let E=!1,R=this.interim[0];R&=(224&R)==192?31:(240&R)==224?15:7;let M,D=0;for(;(M=63&this.interim[++D])&&D<4;)R<<=6,R|=M;const O=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=O-D;for(;b<L;){if(b>=p)return 0;if(M=u[b++],(192&M)!=128){b--,E=!0;break}this.interim[D++]=M,R<<=6,R|=63&M}E||(O===2?R<128?b--:h[w++]=R:O===3?R<2048||R>=55296&&R<=57343||R===65279||(h[w++]=R):R<65536||R>1114111||(h[w++]=R)),this.interim.fill(0)}const v=p-4;let _=b;for(;_<p;){for(;!(!(_<v)||128&(f=u[_])||128&(m=u[_+1])||128&(y=u[_+2])||128&(x=u[_+3]));)h[w++]=f,h[w++]=m,h[w++]=y,h[w++]=x,_+=4;if(f=u[_++],f<128)h[w++]=f;else if((224&f)==192){if(_>=p)return this.interim[0]=f,w;if(m=u[_++],(192&m)!=128){_--;continue}if(S=(31&f)<<6|63&m,S<128){_--;continue}h[w++]=S}else if((240&f)==224){if(_>=p)return this.interim[0]=f,w;if(m=u[_++],(192&m)!=128){_--;continue}if(_>=p)return this.interim[0]=f,this.interim[1]=m,w;if(y=u[_++],(192&y)!=128){_--;continue}if(S=(15&f)<<12|(63&m)<<6|63&y,S<2048||S>=55296&&S<=57343||S===65279)continue;h[w++]=S}else if((248&f)==240){if(_>=p)return this.interim[0]=f,w;if(m=u[_++],(192&m)!=128){_--;continue}if(_>=p)return this.interim[0]=f,this.interim[1]=m,w;if(y=u[_++],(192&y)!=128){_--;continue}if(_>=p)return this.interim[0]=f,this.interim[1]=m,this.interim[2]=y,w;if(x=u[_++],(192&x)!=128){_--;continue}if(S=(7&f)<<18|(63&m)<<12|(63&y)<<6|63&x,S<65536||S>1114111)continue;h[w++]=S}}return w}}},225:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const h=u(1480),p=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;o.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let y=0;y<p.length;++y)m.fill(0,p[y][0],p[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?m[y]:(function(x,w){let S,b=0,v=w.length-1;if(x<w[0][0]||x>w[v][1])return!1;for(;v>=b;)if(S=b+v>>1,x>w[S][1])b=S+1;else{if(!(x<w[S][0]))return!0;v=S-1}return!1})(y,f)?0:y>=131072&&y<=196605||y>=196608&&y<=262141?2:1}charProperties(y,x){let w=this.wcwidth(y),S=w===0&&x!==0;if(S){const b=h.UnicodeService.extractWidth(x);b===0?S=!1:b>w&&(w=b)}return h.UnicodeService.createPropertyValue(0,w,S)}}},5981:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const h=u(8460),p=u(844);class f extends p.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,x){if(x!==void 0&&this._syncCalls>x)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let w;for(this._isSyncWriting=!0;w=this._writeBuffer.shift();){this._action(w);const S=this._callbacks.shift();S&&S()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,x){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(x),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(x)}_innerWrite(y=0,x=!0){const w=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const S=this._writeBuffer[this._bufferOffset],b=this._action(S,x);if(b){const _=E=>Date.now()-w>=12?setTimeout((()=>this._innerWrite(0,E))):this._innerWrite(w,E);return void b.catch((E=>(queueMicrotask((()=>{throw E})),Promise.resolve(!1)))).then(_)}const v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=S.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=f},5941:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function p(f,m){const y=f.toString(16),x=y.length<2?"0"+y:y;switch(m){case 4:return y[0];case 8:return x;case 12:return(x+x).slice(0,3);default:return x+x}}o.parseColor=function(f){if(!f)return;let m=f.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const y=u.exec(m);if(y){const x=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/x*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/x*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/x*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),h.exec(m)&&[3,6,9,12].includes(m.length))){const y=m.length/3,x=[0,0,0];for(let w=0;w<3;++w){const S=parseInt(m.slice(y*w,y*w+y),16);x[w]=y===1?S<<4:y===2?S:y===3?S>>4:S>>8}return x}},o.toRgbString=function(f,m=16){const[y,x,w]=f;return`rgb:${p(y,m)}/${p(x,m)}/${p(w,m)}`}},5770:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const h=u(482),p=u(8742),f=u(5770),m=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(x,w){this._handlers[x]===void 0&&(this._handlers[x]=[]);const S=this._handlers[x];return S.push(w),{dispose:()=>{const b=S.indexOf(w);b!==-1&&S.splice(b,1)}}}clearHandler(x){this._handlers[x]&&delete this._handlers[x]}setHandlerFallback(x){this._handlerFb=x}reset(){if(this._active.length)for(let x=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;x>=0;--x)this._active[x].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(x,w){if(this.reset(),this._ident=x,this._active=this._handlers[x]||m,this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].hook(w);else this._handlerFb(this._ident,"HOOK",w)}put(x,w,S){if(this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].put(x,w,S);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(x,w,S))}unhook(x,w=!0){if(this._active.length){let S=!1,b=this._active.length-1,v=!1;if(this._stack.paused&&(b=this._stack.loopPosition-1,S=w,v=this._stack.fallThrough,this._stack.paused=!1),!v&&S===!1){for(;b>=0&&(S=this._active[b].unhook(x),S!==!0);b--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!1,S;b--}for(;b>=0;b--)if(S=this._active[b].unhook(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!0,S}else this._handlerFb(this._ident,"UNHOOK",x);this._active=m,this._ident=0}};const y=new p.Params;y.addParam(0),o.DcsHandler=class{constructor(x){this._handler=x,this._data="",this._params=y,this._hitLimit=!1}hook(x){this._params=x.length>1||x.params[0]?x.clone():y,this._data="",this._hitLimit=!1}put(x,w,S){this._hitLimit||(this._data+=(0,h.utf32ToString)(x,w,S),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(x){let w=!1;if(this._hitLimit)w=!1;else if(x&&(w=this._handler(this._data,this._params),w instanceof Promise))return w.then((S=>(this._params=y,this._data="",this._hitLimit=!1,S)));return this._params=y,this._data="",this._hitLimit=!1,w}}},2015:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const h=u(844),p=u(8742),f=u(6242),m=u(6351);class y{constructor(b){this.table=new Uint8Array(b)}setDefault(b,v){this.table.fill(b<<4|v)}add(b,v,_,E){this.table[v<<8|b]=_<<4|E}addMany(b,v,_,E){for(let R=0;R<b.length;R++)this.table[v<<8|b[R]]=_<<4|E}}o.TransitionTable=y;const x=160;o.VT500_TRANSITION_TABLE=(function(){const S=new y(4095),b=Array.apply(null,Array(256)).map(((D,O)=>O)),v=(D,O)=>b.slice(D,O),_=v(32,127),E=v(0,24);E.push(25),E.push.apply(E,v(28,32));const R=v(0,14);let M;for(M in S.setDefault(1,0),S.addMany(_,0,2,0),R)S.addMany([24,26,153,154],M,3,0),S.addMany(v(128,144),M,3,0),S.addMany(v(144,152),M,3,0),S.add(156,M,0,0),S.add(27,M,11,1),S.add(157,M,4,8),S.addMany([152,158,159],M,0,7),S.add(155,M,11,3),S.add(144,M,11,9);return S.addMany(E,0,3,0),S.addMany(E,1,3,1),S.add(127,1,0,1),S.addMany(E,8,0,8),S.addMany(E,3,3,3),S.add(127,3,0,3),S.addMany(E,4,3,4),S.add(127,4,0,4),S.addMany(E,6,3,6),S.addMany(E,5,3,5),S.add(127,5,0,5),S.addMany(E,2,3,2),S.add(127,2,0,2),S.add(93,1,4,8),S.addMany(_,8,5,8),S.add(127,8,5,8),S.addMany([156,27,24,26,7],8,6,0),S.addMany(v(28,32),8,0,8),S.addMany([88,94,95],1,0,7),S.addMany(_,7,0,7),S.addMany(E,7,0,7),S.add(156,7,0,0),S.add(127,7,0,7),S.add(91,1,11,3),S.addMany(v(64,127),3,7,0),S.addMany(v(48,60),3,8,4),S.addMany([60,61,62,63],3,9,4),S.addMany(v(48,60),4,8,4),S.addMany(v(64,127),4,7,0),S.addMany([60,61,62,63],4,0,6),S.addMany(v(32,64),6,0,6),S.add(127,6,0,6),S.addMany(v(64,127),6,0,0),S.addMany(v(32,48),3,9,5),S.addMany(v(32,48),5,9,5),S.addMany(v(48,64),5,0,6),S.addMany(v(64,127),5,7,0),S.addMany(v(32,48),4,9,5),S.addMany(v(32,48),1,9,2),S.addMany(v(32,48),2,9,2),S.addMany(v(48,127),2,10,0),S.addMany(v(48,80),1,10,0),S.addMany(v(81,88),1,10,0),S.addMany([89,90,92],1,10,0),S.addMany(v(96,127),1,10,0),S.add(80,1,11,9),S.addMany(E,9,0,9),S.add(127,9,0,9),S.addMany(v(28,32),9,0,9),S.addMany(v(32,48),9,9,12),S.addMany(v(48,60),9,8,10),S.addMany([60,61,62,63],9,9,10),S.addMany(E,11,0,11),S.addMany(v(32,128),11,0,11),S.addMany(v(28,32),11,0,11),S.addMany(E,10,0,10),S.add(127,10,0,10),S.addMany(v(28,32),10,0,10),S.addMany(v(48,60),10,8,10),S.addMany([60,61,62,63],10,0,11),S.addMany(v(32,48),10,9,12),S.addMany(E,12,0,12),S.add(127,12,0,12),S.addMany(v(28,32),12,0,12),S.addMany(v(32,48),12,9,12),S.addMany(v(48,64),12,0,11),S.addMany(v(64,127),12,12,13),S.addMany(v(64,127),10,12,13),S.addMany(v(64,127),9,12,13),S.addMany(E,13,13,13),S.addMany(_,13,13,13),S.add(127,13,0,13),S.addMany([27,156,24,26],13,14,0),S.add(x,0,2,0),S.add(x,8,5,8),S.add(x,6,0,6),S.add(x,11,0,11),S.add(x,13,13,13),S})();class w extends h.Disposable{constructor(b=o.VT500_TRANSITION_TABLE){super(),this._transitions=b,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new p.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(v,_,E)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,_)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(b,v=[64,126]){let _=0;if(b.prefix){if(b.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=b.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(b.intermediates){if(b.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let R=0;R<b.intermediates.length;++R){const M=b.intermediates.charCodeAt(R);if(32>M||M>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=M}}if(b.final.length!==1)throw new Error("final must be a single byte");const E=b.final.charCodeAt(0);if(v[0]>E||E>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return _<<=8,_|=E,_}identToString(b){const v=[];for(;b;)v.push(String.fromCharCode(255&b)),b>>=8;return v.reverse().join("")}setPrintHandler(b){this._printHandler=b}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(b,v){const _=this._identifier(b,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);const E=this._escHandlers[_];return E.push(v),{dispose:()=>{const R=E.indexOf(v);R!==-1&&E.splice(R,1)}}}clearEscHandler(b){this._escHandlers[this._identifier(b,[48,126])]&&delete this._escHandlers[this._identifier(b,[48,126])]}setEscHandlerFallback(b){this._escHandlerFb=b}setExecuteHandler(b,v){this._executeHandlers[b.charCodeAt(0)]=v}clearExecuteHandler(b){this._executeHandlers[b.charCodeAt(0)]&&delete this._executeHandlers[b.charCodeAt(0)]}setExecuteHandlerFallback(b){this._executeHandlerFb=b}registerCsiHandler(b,v){const _=this._identifier(b);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);const E=this._csiHandlers[_];return E.push(v),{dispose:()=>{const R=E.indexOf(v);R!==-1&&E.splice(R,1)}}}clearCsiHandler(b){this._csiHandlers[this._identifier(b)]&&delete this._csiHandlers[this._identifier(b)]}setCsiHandlerFallback(b){this._csiHandlerFb=b}registerDcsHandler(b,v){return this._dcsParser.registerHandler(this._identifier(b),v)}clearDcsHandler(b){this._dcsParser.clearHandler(this._identifier(b))}setDcsHandlerFallback(b){this._dcsParser.setHandlerFallback(b)}registerOscHandler(b,v){return this._oscParser.registerHandler(b,v)}clearOscHandler(b){this._oscParser.clearHandler(b)}setOscHandlerFallback(b){this._oscParser.setHandlerFallback(b)}setErrorHandler(b){this._errorHandler=b}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(b,v,_,E,R){this._parseStack.state=b,this._parseStack.handlers=v,this._parseStack.handlerPos=_,this._parseStack.transition=E,this._parseStack.chunkPos=R}parse(b,v,_){let E,R=0,M=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const O=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&L>-1){for(;L>=0&&(E=O[L](this._params),E!==!0);L--)if(E instanceof Promise)return this._parseStack.handlerPos=L,E}this._parseStack.handlers=[];break;case 4:if(_===!1&&L>-1){for(;L>=0&&(E=O[L](),E!==!0);L--)if(E instanceof Promise)return this._parseStack.handlerPos=L,E}this._parseStack.handlers=[];break;case 6:if(R=b[this._parseStack.chunkPos],E=this._dcsParser.unhook(R!==24&&R!==26,_),E)return E;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(R=b[this._parseStack.chunkPos],E=this._oscParser.end(R!==24&&R!==26,_),E)return E;R===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let O=D;O<v;++O){switch(R=b[O],M=this._transitions.table[this.currentState<<8|(R<160?R:x)],M>>4){case 2:for(let H=O+1;;++H){if(H>=v||(R=b[H])<32||R>126&&R<x){this._printHandler(b,O,H),O=H-1;break}if(++H>=v||(R=b[H])<32||R>126&&R<x){this._printHandler(b,O,H),O=H-1;break}if(++H>=v||(R=b[H])<32||R>126&&R<x){this._printHandler(b,O,H),O=H-1;break}if(++H>=v||(R=b[H])<32||R>126&&R<x){this._printHandler(b,O,H),O=H-1;break}}break;case 3:this._executeHandlers[R]?this._executeHandlers[R]():this._executeHandlerFb(R),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:O,code:R,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|R];let j=L?L.length-1:-1;for(;j>=0&&(E=L[j](this._params),E!==!0);j--)if(E instanceof Promise)return this._preserveStack(3,L,j,M,O),E;j<0&&this._csiHandlerFb(this._collect<<8|R,this._params),this.precedingJoinState=0;break;case 8:do switch(R){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(R-48)}while(++O<v&&(R=b[O])>47&&R<60);O--;break;case 9:this._collect<<=8,this._collect|=R;break;case 10:const X=this._escHandlers[this._collect<<8|R];let G=X?X.length-1:-1;for(;G>=0&&(E=X[G](),E!==!0);G--)if(E instanceof Promise)return this._preserveStack(4,X,G,M,O),E;G<0&&this._escHandlerFb(this._collect<<8|R),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|R,this._params);break;case 13:for(let H=O+1;;++H)if(H>=v||(R=b[H])===24||R===26||R===27||R>127&&R<x){this._dcsParser.put(b,O,H),O=H-1;break}break;case 14:if(E=this._dcsParser.unhook(R!==24&&R!==26),E)return this._preserveStack(6,[],0,M,O),E;R===27&&(M|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let H=O+1;;H++)if(H>=v||(R=b[H])<32||R>127&&R<x){this._oscParser.put(b,O,H),O=H-1;break}break;case 6:if(E=this._oscParser.end(R!==24&&R!==26),E)return this._preserveStack(5,[],0,M,O),E;R===27&&(M|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&M}}}o.EscapeSequenceParser=w},6242:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const h=u(5770),p=u(482),f=[];o.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,y){this._handlers[m]===void 0&&(this._handlers[m]=[]);const x=this._handlers[m];return x.push(y),{dispose:()=>{const w=x.indexOf(y);w!==-1&&x.splice(w,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,y,x){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(m,y,x);else this._handlerFb(this._id,"PUT",(0,p.utf32ToString)(m,y,x))}start(){this.reset(),this._state=1}put(m,y,x){if(this._state!==3){if(this._state===1)for(;y<x;){const w=m[y++];if(w===59){this._state=2,this._start();break}if(w<48||57<w)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+w-48}this._state===2&&x-y>0&&this._put(m,y,x)}}end(m,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let x=!1,w=this._active.length-1,S=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,x=y,S=this._stack.fallThrough,this._stack.paused=!1),!S&&x===!1){for(;w>=0&&(x=this._active[w].end(m),x!==!0);w--)if(x instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,x;w--}for(;w>=0;w--)if(x=this._active[w].end(!1),x instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,x}else this._handlerFb(this._id,"END",m);this._active=f,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,y,x){this._hitLimit||(this._data+=(0,p.utf32ToString)(m,y,x),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let y=!1;if(this._hitLimit)y=!1;else if(m&&(y=this._handler(this._data),y instanceof Promise))return y.then((x=>(this._data="",this._hitLimit=!1,x)));return this._data="",this._hitLimit=!1,y}}},8742:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const u=2147483647;class h{static fromArray(f){const m=new h;if(!f.length)return m;for(let y=Array.isArray(f[0])?1:0;y<f.length;++y){const x=f[y];if(Array.isArray(x))for(let w=0;w<x.length;++w)m.addSubParam(x[w]);else m.addParam(x)}return m}constructor(f=32,m=32){if(this.maxLength=f,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new h(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let m=0;m<this.length;++m){f.push(this.params[m]);const y=this._subParamsIdx[m]>>8,x=255&this._subParamsIdx[m];x-y>0&&f.push(Array.prototype.slice.call(this._subParams,y,x))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>u?u:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>u?u:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const m=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];return y-m>0?this._subParams.subarray(m,y):null}getSubParamsAll(){const f={};for(let m=0;m<this.length;++m){const y=this._subParamsIdx[m]>>8,x=255&this._subParamsIdx[m];x-y>0&&(f[m]=this._subParams.slice(y,x))}return f}addDigit(f){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,x=y[m-1];y[m-1]=~x?Math.min(10*x+f,u):f}}o.Params=h},5741:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,h){const p={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(p),h.dispose=()=>this._wrappedAddonDispose(p),h.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let h=-1;for(let p=0;p<this._addons.length;p++)if(this._addons[p]===u){h=p;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(h,1)}}},8771:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const h=u(3785),p=u(511);o.BufferApiView=class{constructor(f,m){this._buffer=f,this.type=m}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const m=this._buffer.lines.get(f);if(m)return new h.BufferLineApiView(m)}getNullCell(){return new p.CellData}}},3785:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const h=u(511);o.BufferLineApiView=class{constructor(p){this._line=p}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(p,f){if(!(p<0||p>=this._line.length))return f?(this._line.loadCell(p,f),f):this._line.loadCell(p,new h.CellData)}translateToString(p,f,m){return this._line.translateToString(p,f,m)}}},8285:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const h=u(8771),p=u(8460),f=u(844);class m extends f.Disposable{constructor(x){super(),this._core=x,this._onBufferChange=this.register(new p.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=m},7975:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,h){return this._core.registerCsiHandler(u,(p=>h(p.toArray())))}addCsiHandler(u,h){return this.registerCsiHandler(u,h)}registerDcsHandler(u,h){return this._core.registerDcsHandler(u,((p,f)=>h(p,f.toArray())))}addDcsHandler(u,h){return this.registerDcsHandler(u,h)}registerEscHandler(u,h){return this._core.registerEscHandler(u,h)}addEscHandler(u,h){return this.registerEscHandler(u,h)}registerOscHandler(u,h){return this._core.registerOscHandler(u,h)}addOscHandler(u,h){return this.registerOscHandler(u,h)}}},7090:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(l,o,u){var h=this&&this.__decorate||function(S,b,v,_){var E,R=arguments.length,M=R<3?b:_===null?_=Object.getOwnPropertyDescriptor(b,v):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,b,v,_);else for(var D=S.length-1;D>=0;D--)(E=S[D])&&(M=(R<3?E(M):R>3?E(b,v,M):E(b,v))||M);return R>3&&M&&Object.defineProperty(b,v,M),M},p=this&&this.__param||function(S,b){return function(v,_){b(v,_,S)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const f=u(8460),m=u(844),y=u(5295),x=u(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let w=o.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(S){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(S.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(S.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(S,this))}resize(S,b){this.cols=S,this.rows=b,this.buffers.resize(S,b),this._onResize.fire({cols:S,rows:b})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(S,b=!1){const v=this.buffer;let _;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===S.fg&&_.getBg(0)===S.bg||(_=v.getBlankLine(S,b),this._cachedBlankLine=_),_.isWrapped=b;const E=v.ybase+v.scrollTop,R=v.ybase+v.scrollBottom;if(v.scrollTop===0){const M=v.lines.isFull;R===v.lines.length-1?M?v.lines.recycle().copyFrom(_):v.lines.push(_.clone()):v.lines.splice(R+1,0,_.clone()),M?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{const M=R-E+1;v.lines.shiftElements(E+1,M-1,-1),v.lines.set(R,_.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(S,b,v){const _=this.buffer;if(S<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else S+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);const E=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+S,_.ybase),0),E!==_.ydisp&&(b||this._onScroll.fire(_.ydisp))}};o.BufferService=w=h([p(0,x.IOptionsService)],w)},7994:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,h){this._charsets[u]=h,this.glevel===u&&(this.charset=h)}}},1753:function(l,o,u){var h=this&&this.__decorate||function(_,E,R,M){var D,O=arguments.length,L=O<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,R):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(_,E,R,M);else for(var j=_.length-1;j>=0;j--)(D=_[j])&&(L=(O<3?D(L):O>3?D(E,R,L):D(E,R))||L);return O>3&&L&&Object.defineProperty(E,R,L),L},p=this&&this.__param||function(_,E){return function(R,M){E(R,M,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const f=u(2585),m=u(8460),y=u(844),x={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function w(_,E){let R=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(R|=64,R|=_.action):(R|=3&_.button,4&_.button&&(R|=64),8&_.button&&(R|=128),_.action===32?R|=32:_.action!==0||E||(R|=3)),R}const S=String.fromCharCode,b={DEFAULT:_=>{const E=[w(_,!1)+32,_.col+32,_.row+32];return E[0]>255||E[1]>255||E[2]>255?"":`\x1B[M${S(E[0])}${S(E[1])}${S(E[2])}`},SGR:_=>{const E=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${w(_,!0)};${_.col};${_.row}${E}`},SGR_PIXELS:_=>{const E=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${w(_,!0)};${_.x};${_.y}${E}`}};let v=o.CoreMouseService=class extends y.Disposable{constructor(_,E){super(),this._bufferService=_,this._coreService=E,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const R of Object.keys(x))this.addProtocol(R,x[R]);for(const R of Object.keys(b))this.addEncoding(R,b[R]);this.reset()}addProtocol(_,E){this._protocols[_]=E}addEncoding(_,E){this._encodings[_]=E}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;const E=this._encodings[this._activeEncoding](_);return E&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(E):this._coreService.triggerDataEvent(E,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,E,R){if(R){if(_.x!==E.x||_.y!==E.y)return!1}else if(_.col!==E.col||_.row!==E.row)return!1;return _.button===E.button&&_.action===E.action&&_.ctrl===E.ctrl&&_.alt===E.alt&&_.shift===E.shift}};o.CoreMouseService=v=h([p(0,f.IBufferService),p(1,f.ICoreService)],v)},6975:function(l,o,u){var h=this&&this.__decorate||function(v,_,E,R){var M,D=arguments.length,O=D<3?_:R===null?R=Object.getOwnPropertyDescriptor(_,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(v,_,E,R);else for(var L=v.length-1;L>=0;L--)(M=v[L])&&(O=(D<3?M(O):D>3?M(_,E,O):M(_,E))||O);return D>3&&O&&Object.defineProperty(_,E,O),O},p=this&&this.__param||function(v,_){return function(E,R){_(E,R,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const f=u(1439),m=u(8460),y=u(844),x=u(2585),w=Object.freeze({insertMode:!1}),S=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let b=o.CoreService=class extends y.Disposable{constructor(v,_,E){super(),this._bufferService=v,this._logService=_,this._optionsService=E,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(w),this.decPrivateModes=(0,f.clone)(S)}reset(){this.modes=(0,f.clone)(w),this.decPrivateModes=(0,f.clone)(S)}triggerDataEvent(v,_=!1){if(this._optionsService.rawOptions.disableStdin)return;const E=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&E.ybase!==E.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,(()=>v.split("").map((R=>R.charCodeAt(0))))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,(()=>v.split("").map((_=>_.charCodeAt(0))))),this._onBinary.fire(v))}};o.CoreService=b=h([p(0,x.IBufferService),p(1,x.ILogService),p(2,x.IOptionsService)],b)},9074:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const h=u(8055),p=u(8460),f=u(844),m=u(6106);let y=0,x=0;class w extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList((v=>v?.marker.line)),this._onDecorationRegistered=this.register(new p.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new p.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)((()=>this.reset())))}registerDecoration(v){if(v.marker.isDisposed)return;const _=new S(v);if(_){const E=_.marker.onDispose((()=>_.dispose()));_.onDispose((()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),E.dispose())})),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(const v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,_,E){let R=0,M=0;for(const D of this._decorations.getKeyIterator(_))R=D.options.x??0,M=R+(D.options.width??1),v>=R&&v<M&&(!E||(D.options.layer??"bottom")===E)&&(yield D)}forEachDecorationAtCell(v,_,E,R){this._decorations.forEachByKey(_,(M=>{y=M.options.x??0,x=y+(M.options.width??1),v>=y&&v<x&&(!E||(M.options.layer??"bottom")===E)&&R(M)}))}}o.DecorationService=w;class S extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new p.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const h=u(2585),p=u(8343);class f{constructor(...y){this._entries=new Map;for(const[x,w]of y)this.set(x,w)}set(y,x){const w=this._entries.get(y);return this._entries.set(y,x),w}forEach(y){for(const[x,w]of this._entries.entries())y(x,w)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}o.ServiceCollection=f,o.InstantiationService=class{constructor(){this._services=new f,this._services.set(h.IInstantiationService,this)}setService(m,y){this._services.set(m,y)}getService(m){return this._services.get(m)}createInstance(m,...y){const x=(0,p.getServiceDependencies)(m).sort(((b,v)=>b.index-v.index)),w=[];for(const b of x){const v=this._services.get(b.id);if(!v)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${b.id}.`);w.push(v)}const S=x.length>0?x[0].index:y.length;if(y.length!==S)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${S+1} conflicts with ${y.length} static arguments`);return new m(...y,...w)}}},7866:function(l,o,u){var h=this&&this.__decorate||function(S,b,v,_){var E,R=arguments.length,M=R<3?b:_===null?_=Object.getOwnPropertyDescriptor(b,v):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,b,v,_);else for(var D=S.length-1;D>=0;D--)(E=S[D])&&(M=(R<3?E(M):R>3?E(b,v,M):E(b,v))||M);return R>3&&M&&Object.defineProperty(b,v,M),M},p=this&&this.__param||function(S,b){return function(v,_){b(v,_,S)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const f=u(844),m=u(2585),y={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let x,w=o.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(S){super(),this._optionsService=S,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),x=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(S){for(let b=0;b<S.length;b++)typeof S[b]=="function"&&(S[b]=S[b]())}_log(S,b,v){this._evalLazyOptionalParams(v),S.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...v)}trace(S,...b){this._logLevel<=m.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,S,b)}debug(S,...b){this._logLevel<=m.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,S,b)}info(S,...b){this._logLevel<=m.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,S,b)}warn(S,...b){this._logLevel<=m.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,S,b)}error(S,...b){this._logLevel<=m.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,S,b)}};o.LogService=w=h([p(0,m.IOptionsService)],w),o.setTraceLogger=function(S){x=S},o.traceCall=function(S,b,v){if(typeof v.value!="function")throw new Error("not supported");const _=v.value;v.value=function(...E){if(x.logLevel!==m.LogLevelEnum.TRACE)return _.apply(this,E);x.trace(`GlyphRenderer#${_.name}(${E.map((M=>JSON.stringify(M))).join(", ")})`);const R=_.apply(this,E);return x.trace(`GlyphRenderer#${_.name} return`,R),R}}},7302:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const h=u(8460),p=u(844),f=u(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends p.Disposable{constructor(w){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const S={...o.DEFAULT_OPTIONS};for(const b in w)if(b in S)try{const v=w[b];S[b]=this._sanitizeAndValidateOption(b,v)}catch(v){console.error(v)}this.rawOptions=S,this.options={...S},this._setupOptions(),this.register((0,p.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(w,S){return this.onOptionChange((b=>{b===w&&S(this.rawOptions[w])}))}onMultipleOptionChange(w,S){return this.onOptionChange((b=>{w.indexOf(b)!==-1&&S()}))}_setupOptions(){const w=b=>{if(!(b in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);return this.rawOptions[b]},S=(b,v)=>{if(!(b in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);v=this._sanitizeAndValidateOption(b,v),this.rawOptions[b]!==v&&(this.rawOptions[b]=v,this._onOptionChange.fire(b))};for(const b in this.rawOptions){const v={get:w.bind(this,b),set:S.bind(this,b)};Object.defineProperty(this.options,b,v)}}_sanitizeAndValidateOption(w,S){switch(w){case"cursorStyle":if(S||(S=o.DEFAULT_OPTIONS[w]),!(function(b){return b==="block"||b==="underline"||b==="bar"})(S))throw new Error(`"${S}" is not a valid value for ${w}`);break;case"wordSeparator":S||(S=o.DEFAULT_OPTIONS[w]);break;case"fontWeight":case"fontWeightBold":if(typeof S=="number"&&1<=S&&S<=1e3)break;S=m.includes(S)?S:o.DEFAULT_OPTIONS[w];break;case"cursorWidth":S=Math.floor(S);case"lineHeight":case"tabStopWidth":if(S<1)throw new Error(`${w} cannot be less than 1, value: ${S}`);break;case"minimumContrastRatio":S=Math.max(1,Math.min(21,Math.round(10*S)/10));break;case"scrollback":if((S=Math.min(S,4294967295))<0)throw new Error(`${w} cannot be less than 0, value: ${S}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(S<=0)throw new Error(`${w} cannot be less than or equal to 0, value: ${S}`);break;case"rows":case"cols":if(!S&&S!==0)throw new Error(`${w} must be numeric, value: ${S}`);break;case"windowsPty":S=S??{}}return S}}o.OptionsService=y},2660:function(l,o,u){var h=this&&this.__decorate||function(y,x,w,S){var b,v=arguments.length,_=v<3?x:S===null?S=Object.getOwnPropertyDescriptor(x,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(y,x,w,S);else for(var E=y.length-1;E>=0;E--)(b=y[E])&&(_=(v<3?b(_):v>3?b(x,w,_):b(x,w))||_);return v>3&&_&&Object.defineProperty(x,w,_),_},p=this&&this.__param||function(y,x){return function(w,S){x(w,S,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const f=u(2585);let m=o.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const x=this._bufferService.buffer;if(y.id===void 0){const E=x.addMarker(x.ybase+x.y),R={data:y,id:this._nextId++,lines:[E]};return E.onDispose((()=>this._removeMarkerFromLink(R,E))),this._dataByLinkId.set(R.id,R),R.id}const w=y,S=this._getEntryIdKey(w),b=this._entriesWithId.get(S);if(b)return this.addLineToLink(b.id,x.ybase+x.y),b.id;const v=x.addMarker(x.ybase+x.y),_={id:this._nextId++,key:this._getEntryIdKey(w),data:w,lines:[v]};return v.onDispose((()=>this._removeMarkerFromLink(_,v))),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(y,x){const w=this._dataByLinkId.get(y);if(w&&w.lines.every((S=>S.line!==x))){const S=this._bufferService.buffer.addMarker(x);w.lines.push(S),S.onDispose((()=>this._removeMarkerFromLink(w,S)))}}getLinkData(y){return this._dataByLinkId.get(y)?.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,x){const w=y.lines.indexOf(x);w!==-1&&(y.lines.splice(w,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};o.OscLinkService=m=h([p(0,f.IBufferService)],m)},8343:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const u="di$target",h="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(p){return p[h]||[]},o.createDecorator=function(p){if(o.serviceRegistry.has(p))return o.serviceRegistry.get(p);const f=function(m,y,x){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,S,b){S[u]===S?S[h].push({id:w,index:b}):(S[h]=[{id:w,index:b}],S[u]=S)})(f,m,x)};return f.toString=()=>p,o.serviceRegistry.set(p,f),f}},2585:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const h=u(8343);var p;o.IBufferService=(0,h.createDecorator)("BufferService"),o.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),o.ICoreService=(0,h.createDecorator)("CoreService"),o.ICharsetService=(0,h.createDecorator)("CharsetService"),o.IInstantiationService=(0,h.createDecorator)("InstantiationService"),(function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"})(p||(o.LogLevelEnum=p={})),o.ILogService=(0,h.createDecorator)("LogService"),o.IOptionsService=(0,h.createDecorator)("OptionsService"),o.IOscLinkService=(0,h.createDecorator)("OscLinkService"),o.IUnicodeService=(0,h.createDecorator)("UnicodeService"),o.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(l,o,u)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const h=u(8460),p=u(225);class f{static extractShouldJoin(y){return(1&y)!=0}static extractWidth(y){return y>>1&3}static extractCharKind(y){return y>>3}static createPropertyValue(y,x,w=!1){return(16777215&y)<<3|(3&x)<<1|(w?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const y=new p.UnicodeV6;this.register(y),this._active=y.version,this._activeProvider=y}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(y){if(!this._providers[y])throw new Error(`unknown Unicode version "${y}"`);this._active=y,this._activeProvider=this._providers[y],this._onChange.fire(y)}register(y){this._providers[y.version]=y}wcwidth(y){return this._activeProvider.wcwidth(y)}getStringCellWidth(y){let x=0,w=0;const S=y.length;for(let b=0;b<S;++b){let v=y.charCodeAt(b);if(55296<=v&&v<=56319){if(++b>=S)return x+this.wcwidth(v);const R=y.charCodeAt(b);56320<=R&&R<=57343?v=1024*(v-55296)+R-56320+65536:x+=this.wcwidth(R)}const _=this.charProperties(v,w);let E=f.extractWidth(_);f.extractShouldJoin(_)&&(E-=f.extractWidth(w)),x+=E,w=_}return x}charProperties(y,x){return this._activeProvider.charProperties(y,x)}}o.UnicodeService=f}},i={};function r(l){var o=i[l];if(o!==void 0)return o.exports;var u=i[l]={exports:{}};return t[l].call(u.exports,u,u.exports,r),u.exports}var a={};return(()=>{var l=a;Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const o=r(9042),u=r(3236),h=r(844),p=r(5741),f=r(8285),m=r(7975),y=r(7090),x=["cols","rows"];class w extends h.Disposable{constructor(b){super(),this._core=this.register(new u.Terminal(b)),this._addonManager=this.register(new p.AddonManager),this._publicOptions={...this._core.options};const v=E=>this._core.options[E],_=(E,R)=>{this._checkReadonlyOptions(E),this._core.options[E]=R};for(const E in this._core.options){const R={get:v.bind(this,E),set:_.bind(this,E)};Object.defineProperty(this._publicOptions,E,R)}}_checkReadonlyOptions(b){if(x.includes(b))throw new Error(`Option "${b}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const b=this._core.coreService.decPrivateModes;let v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:b.applicationCursorKeys,applicationKeypadMode:b.applicationKeypad,bracketedPasteMode:b.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:b.origin,reverseWraparoundMode:b.reverseWraparound,sendFocusMode:b.sendFocus,wraparoundMode:b.wraparound}}get options(){return this._publicOptions}set options(b){for(const v in b)this._publicOptions[v]=b[v]}blur(){this._core.blur()}focus(){this._core.focus()}input(b,v=!0){this._core.input(b,v)}resize(b,v){this._verifyIntegers(b,v),this._core.resize(b,v)}open(b){this._core.open(b)}attachCustomKeyEventHandler(b){this._core.attachCustomKeyEventHandler(b)}attachCustomWheelEventHandler(b){this._core.attachCustomWheelEventHandler(b)}registerLinkProvider(b){return this._core.registerLinkProvider(b)}registerCharacterJoiner(b){return this._checkProposedApi(),this._core.registerCharacterJoiner(b)}deregisterCharacterJoiner(b){this._checkProposedApi(),this._core.deregisterCharacterJoiner(b)}registerMarker(b=0){return this._verifyIntegers(b),this._core.registerMarker(b)}registerDecoration(b){return this._checkProposedApi(),this._verifyPositiveIntegers(b.x??0,b.width??0,b.height??0),this._core.registerDecoration(b)}hasSelection(){return this._core.hasSelection()}select(b,v,_){this._verifyIntegers(b,v,_),this._core.select(b,v,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(b,v){this._verifyIntegers(b,v),this._core.selectLines(b,v)}dispose(){super.dispose()}scrollLines(b){this._verifyIntegers(b),this._core.scrollLines(b)}scrollPages(b){this._verifyIntegers(b),this._core.scrollPages(b)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(b){this._verifyIntegers(b),this._core.scrollToLine(b)}clear(){this._core.clear()}write(b,v){this._core.write(b,v)}writeln(b,v){this._core.write(b),this._core.write(`\r
`,v)}paste(b){this._core.paste(b)}refresh(b,v){this._verifyIntegers(b,v),this._core.refresh(b,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(b){this._addonManager.loadAddon(this,b)}static get strings(){return o}_verifyIntegers(...b){for(const v of b)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...b){for(const v of b)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}l.Terminal=w})(),a})()))})(z_)),z_.exports}var WH=VH();var $H=2,GH=1,KH=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let e=this._terminal._core;(this._terminal.rows!==n.rows||this._terminal.cols!==n.cols)&&(e._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core._renderService.dimensions;if(n.css.cell.width===0||n.css.cell.height===0)return;let e=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,t=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(t.getPropertyValue("height")),r=Math.max(0,parseInt(t.getPropertyValue("width"))),a=window.getComputedStyle(this._terminal.element),l={top:parseInt(a.getPropertyValue("padding-top")),bottom:parseInt(a.getPropertyValue("padding-bottom")),right:parseInt(a.getPropertyValue("padding-right")),left:parseInt(a.getPropertyValue("padding-left"))},o=l.top+l.bottom,u=l.right+l.left,h=i-o,p=r-u-e;return{cols:Math.max($H,Math.floor(p/n.css.cell.width)),rows:Math.max(GH,Math.floor(h/n.css.cell.height))}}};var P_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],YH=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],Ci;function XH(n,e){let t=0,i=e.length-1,r;if(n<e[0][0]||n>e[i][1])return!1;for(;i>=t;)if(r=t+i>>1,n>e[r][1])t=r+1;else if(n<e[r][0])i=r-1;else return!0;return!1}var ZH=class{constructor(){if(this.version="6",!Ci){Ci=new Uint8Array(65536),Ci.fill(1),Ci[0]=0,Ci.fill(0,1,32),Ci.fill(0,127,160),Ci.fill(2,4352,4448),Ci[9001]=2,Ci[9002]=2,Ci.fill(2,11904,42192),Ci[12351]=1,Ci.fill(2,44032,55204),Ci.fill(2,63744,64256),Ci.fill(2,65040,65050),Ci.fill(2,65072,65136),Ci.fill(2,65280,65377),Ci.fill(2,65504,65511);for(let n=0;n<P_.length;++n)Ci.fill(0,P_[n][0],P_[n][1]+1)}}wcwidth(n){return n<32?0:n<127?1:n<65536?Ci[n]:XH(n,YH)?0:n>=131072&&n<=196605||n>=196608&&n<=262141?2:1}charProperties(n,e){let t=this.wcwidth(n),i=t===0&&e!==0;if(i){let r=im.extractWidth(e);r===0?i=!1:r>t&&(t=r)}return im.createPropertyValue(0,t,i)}},JH=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(n){setTimeout(()=>{throw n.stack?tC.isErrorNoTelemetry(n)?new tC(n.message+`

`+n.stack):new Error(n.message+`

`+n.stack):n},0)}}addListener(n){return this.listeners.push(n),()=>{this._removeListener(n)}}emit(n){this.listeners.forEach(e=>{e(n)})}_removeListener(n){this.listeners.splice(this.listeners.indexOf(n),1)}setUnexpectedErrorHandler(n){this.unexpectedErrorHandler=n}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(n){this.unexpectedErrorHandler(n),this.emit(n)}onUnexpectedExternalError(n){this.unexpectedErrorHandler(n)}},QH=new JH;function F_(n){eq(n)||QH.onUnexpectedError(n)}var C0="Canceled";function eq(n){return n instanceof tq?!0:n instanceof Error&&n.name===C0&&n.message===C0}var tq=class extends Error{constructor(){super(C0),this.name=this.message}},tC=class A0 extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof A0)return e;let t=new A0;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}};function nq(n,e){let t=this,i=!1,r;return function(){return i||(i=!0,e||(r=n.apply(t,arguments))),r}}var iq;(n=>{function e(a){return a<0}n.isLessThan=e;function t(a){return a<=0}n.isLessThanOrEqual=t;function i(a){return a>0}n.isGreaterThan=i;function r(a){return a===0}n.isNeitherLessOrGreaterThan=r,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(iq||={});var iT;(n=>{function e(E){return E&&typeof E=="object"&&typeof E[Symbol.iterator]=="function"}n.is=e;let t=Object.freeze([]);function i(){return t}n.empty=i;function*r(E){yield E}n.single=r;function a(E){return e(E)?E:r(E)}n.wrap=a;function l(E){return E||t}n.from=l;function*o(E){for(let R=E.length-1;R>=0;R--)yield E[R]}n.reverse=o;function u(E){return!E||E[Symbol.iterator]().next().done===!0}n.isEmpty=u;function h(E){return E[Symbol.iterator]().next().value}n.first=h;function p(E,R){let M=0;for(let D of E)if(R(D,M++))return!0;return!1}n.some=p;function f(E,R){for(let M of E)if(R(M))return M}n.find=f;function*m(E,R){for(let M of E)R(M)&&(yield M)}n.filter=m;function*y(E,R){let M=0;for(let D of E)yield R(D,M++)}n.map=y;function*x(E,R){let M=0;for(let D of E)yield*R(D,M++)}n.flatMap=x;function*w(...E){for(let R of E)yield*R}n.concat=w;function S(E,R,M){let D=M;for(let O of E)D=R(D,O);return D}n.reduce=S;function*b(E,R,M=E.length){for(R<0&&(R+=E.length),M<0?M+=E.length:M>E.length&&(M=E.length);R<M;R++)yield E[R]}n.slice=b;function v(E,R=Number.POSITIVE_INFINITY){let M=[];if(R===0)return[M,E];let D=E[Symbol.iterator]();for(let O=0;O<R;O++){let L=D.next();if(L.done)return[M,n.empty()];M.push(L.value)}return[M,{[Symbol.iterator](){return D}}]}n.consume=v;async function _(E){let R=[];for await(let M of E)R.push(M);return Promise.resolve(R)}n.asyncToArray=_})(iT||={});function rT(n){if(iT.is(n)){let e=[];for(let t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function rq(...n){return sT(()=>rT(n))}function sT(n){return{dispose:nq(()=>{n()})}}var aT=class oT{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{rT(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?oT.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),void 0)}};aT.DISABLE_DISPOSED_WARNING=!1;var $b=aT,nm=class{constructor(){this._store=new $b,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};nm.None=Object.freeze({dispose(){}});var sq=globalThis.performance&&typeof globalThis.performance.now=="function",aq=class lT{static create(e){return new lT(e)}constructor(e){this._now=sq&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},oq;(n=>{n.None=()=>nm.None;function e(G,H){return f(G,()=>{},0,void 0,!0,void 0,H)}n.defer=e;function t(G){return(H,$=null,Q)=>{let Y=!1,te;return te=G(re=>{if(!Y)return te?te.dispose():Y=!0,H.call($,re)},null,Q),Y&&te.dispose(),te}}n.once=t;function i(G,H,$){return h((Q,Y=null,te)=>G(re=>Q.call(Y,H(re)),null,te),$)}n.map=i;function r(G,H,$){return h((Q,Y=null,te)=>G(re=>{H(re),Q.call(Y,re)},null,te),$)}n.forEach=r;function a(G,H,$){return h((Q,Y=null,te)=>G(re=>H(re)&&Q.call(Y,re),null,te),$)}n.filter=a;function l(G){return G}n.signal=l;function o(...G){return(H,$=null,Q)=>{let Y=rq(...G.map(te=>te(re=>H.call($,re))));return p(Y,Q)}}n.any=o;function u(G,H,$,Q){let Y=$;return i(G,te=>(Y=H(Y,te),Y),Q)}n.reduce=u;function h(G,H){let $,Q={onWillAddFirstListener(){$=G(Y.fire,Y)},onDidRemoveLastListener(){$?.dispose()}},Y=new Do(Q);return H?.add(Y),Y.event}function p(G,H){return H instanceof Array?H.push(G):H&&H.add(G),G}function f(G,H,$=100,Q=!1,Y=!1,te,re){let U,B,P,Z=0,V,_e={leakWarningThreshold:te,onWillAddFirstListener(){U=G(De=>{Z++,B=H(B,De),Q&&!P&&(we.fire(B),B=void 0),V=()=>{let le=B;B=void 0,P=void 0,(!Q||Z>1)&&we.fire(le),Z=0},typeof $=="number"?(clearTimeout(P),P=setTimeout(V,$)):P===void 0&&(P=0,queueMicrotask(V))})},onWillRemoveListener(){Y&&Z>0&&V?.()},onDidRemoveLastListener(){V=void 0,U.dispose()}},we=new Do(_e);return re?.add(we),we.event}n.debounce=f;function m(G,H=0,$){return n.debounce(G,(Q,Y)=>Q?(Q.push(Y),Q):[Y],H,void 0,!0,void 0,$)}n.accumulate=m;function y(G,H=(Q,Y)=>Q===Y,$){let Q=!0,Y;return a(G,te=>{let re=Q||!H(te,Y);return Q=!1,Y=te,re},$)}n.latch=y;function x(G,H,$){return[n.filter(G,H,$),n.filter(G,Q=>!H(Q),$)]}n.split=x;function w(G,H=!1,$=[],Q){let Y=$.slice(),te=G(B=>{Y?Y.push(B):U.fire(B)});Q&&Q.add(te);let re=()=>{Y?.forEach(B=>U.fire(B)),Y=null},U=new Do({onWillAddFirstListener(){te||(te=G(B=>U.fire(B)),Q&&Q.add(te))},onDidAddFirstListener(){Y&&(H?setTimeout(re):re())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return Q&&Q.add(U),U.event}n.buffer=w;function S(G,H){return($,Q,Y)=>{let te=H(new v);return G(function(re){let U=te.evaluate(re);U!==b&&$.call(Q,U)},void 0,Y)}}n.chain=S;let b=Symbol("HaltChainable");class v{constructor(){this.steps=[]}map(H){return this.steps.push(H),this}forEach(H){return this.steps.push($=>(H($),$)),this}filter(H){return this.steps.push($=>H($)?$:b),this}reduce(H,$){let Q=$;return this.steps.push(Y=>(Q=H(Q,Y),Q)),this}latch(H=($,Q)=>$===Q){let $=!0,Q;return this.steps.push(Y=>{let te=$||!H(Y,Q);return $=!1,Q=Y,te?Y:b}),this}evaluate(H){for(let $ of this.steps)if(H=$(H),H===b)break;return H}}function _(G,H,$=Q=>Q){let Q=(...U)=>re.fire($(...U)),Y=()=>G.on(H,Q),te=()=>G.removeListener(H,Q),re=new Do({onWillAddFirstListener:Y,onDidRemoveLastListener:te});return re.event}n.fromNodeEventEmitter=_;function E(G,H,$=Q=>Q){let Q=(...U)=>re.fire($(...U)),Y=()=>G.addEventListener(H,Q),te=()=>G.removeEventListener(H,Q),re=new Do({onWillAddFirstListener:Y,onDidRemoveLastListener:te});return re.event}n.fromDOMEventEmitter=E;function R(G){return new Promise(H=>t(G)(H))}n.toPromise=R;function M(G){let H=new Do;return G.then($=>{H.fire($)},()=>{H.fire(void 0)}).finally(()=>{H.dispose()}),H.event}n.fromPromise=M;function D(G,H){return G($=>H.fire($))}n.forward=D;function O(G,H,$){return H($),G(Q=>H(Q))}n.runAndSubscribe=O;class L{constructor(H,$){this._observable=H,this._counter=0,this._hasChanged=!1;let Q={onWillAddFirstListener:()=>{H.addObserver(this)},onDidRemoveLastListener:()=>{H.removeObserver(this)}};this.emitter=new Do(Q),$&&$.add(this.emitter)}beginUpdate(H){this._counter++}handlePossibleChange(H){}handleChange(H,$){this._hasChanged=!0}endUpdate(H){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function j(G,H){return new L(G,H).emitter.event}n.fromObservable=j;function X(G){return(H,$,Q)=>{let Y=0,te=!1,re={beginUpdate(){Y++},endUpdate(){Y--,Y===0&&(G.reportChanges(),te&&(te=!1,H.call($)))},handlePossibleChange(){},handleChange(){te=!0}};G.addObserver(re),G.reportChanges();let U={dispose(){G.removeObserver(re)}};return Q instanceof $b?Q.add(U):Array.isArray(Q)&&Q.push(U),U}}n.fromObservableLight=X})(oq||={});var T0=class k0{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${k0._idPool++}`,k0.all.add(this)}start(e){this._stopWatch=new aq,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};T0.all=new Set,T0._idPool=0;var lq=T0,cq=-1,cT=class uT{constructor(e,t,i=(uT._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){let i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);let r=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,r+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;let[a,l]=this.getMostFrequentStack(),o=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${l}):`;console.warn(o),console.warn(a);let u=new dq(o,a);this._errorHandler(u)}return()=>{let a=this._stacks.get(e.value)||0;this._stacks.set(e.value,a-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[i,r]of this._stacks)(!e||t<r)&&(e=[i,r],t=r);return e}};cT._idPool=1;var uq=cT,hq=class hT{constructor(e){this.value=e}static create(){let e=new Error;return new hT(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},dq=class extends Error{constructor(n,e){super(n),this.name="ListenerLeakError",this.stack=e}},fq=class extends Error{constructor(n,e){super(n),this.name="ListenerRefusalError",this.stack=e}},pq=0,U_=class{constructor(n){this.value=n,this.id=pq++}},mq=2,gq,Do=class{constructor(n){this._size=0,this._options=n,this._leakageMon=this._options?.leakWarningThreshold?new uq(n?.onListenerError??F_,this._options?.leakWarningThreshold??cq):void 0,this._perfMon=this._options?._profName?new lq(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(n,e,t)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let o=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],u=new fq(`${l}. HINT: Stack shows most frequent listener (${o[1]}-times)`,o[0]);return(this._options?.onListenerError||F_)(u),nm.None}if(this._disposed)return nm.None;e&&(n=n.bind(e));let i=new U_(n),r;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=hq.create(),r=this._leakageMon.check(i.stack,this._size+1)),this._listeners?this._listeners instanceof U_?(this._deliveryQueue??=new yq,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=sT(()=>{r?.(),this._removeListener(i)});return t instanceof $b?t.add(a):Array.isArray(t)&&t.push(a),a},this._event}_removeListener(n){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let e=this._listeners,t=e.indexOf(n);if(t===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,e[t]=void 0;let i=this._deliveryQueue.current===this;if(this._size*mq<=e.length){let r=0;for(let a=0;a<e.length;a++)e[a]?e[r++]=e[a]:i&&(this._deliveryQueue.end--,r<this._deliveryQueue.i&&this._deliveryQueue.i--);e.length=r}}_deliver(n,e){if(!n)return;let t=this._options?.onListenerError||F_;if(!t){n.value(e);return}try{n.value(e)}catch(i){t(i)}}_deliverQueue(n){let e=n.current._listeners;for(;n.i<n.end;)this._deliver(e[n.i++],n.value);n.reset()}fire(n){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof U_)this._deliver(this._listeners,n);else{let e=this._deliveryQueue;e.enqueue(this,n,this._listeners.length),this._deliverQueue(e)}this._perfMon?.stop()}hasListeners(){return this._size>0}},yq=class{constructor(){this.i=-1,this.end=0}enqueue(n,e,t){this.i=0,this.end=t,this.current=n,this.value=e}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},im=class Dp{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new Do,this.onChange=this._onChange.event;let e=new ZH;this.register(e),this._active=e.version,this._activeProvider=e}static extractShouldJoin(e){return(e&1)!==0}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,t,i=!1){return(e&16777215)<<3|(t&3)<<1|(i?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0,i=0,r=e.length;for(let a=0;a<r;++a){let l=e.charCodeAt(a);if(55296<=l&&l<=56319){if(++a>=r)return t+this.wcwidth(l);let h=e.charCodeAt(a);56320<=h&&h<=57343?l=(l-55296)*1024+h-56320+65536:t+=this.wcwidth(h)}let o=this.charProperties(l,i),u=Dp.extractWidth(o);Dp.extractShouldJoin(o)&&(u-=Dp.extractWidth(i)),t+=u,i=o}return t}charProperties(e,t){return this._activeProvider.charProperties(e,t)}},j_=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],_q=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],H_=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],bq=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],Na;function nC(n,e){let t=0,i=e.length-1,r;if(n<e[0][0]||n>e[i][1])return!1;for(;i>=t;)if(r=t+i>>1,n>e[r][1])t=r+1;else if(n<e[r][0])i=r-1;else return!0;return!1}var vq=class{constructor(){if(this.version="11",!Na){Na=new Uint8Array(65536),Na.fill(1),Na[0]=0,Na.fill(0,1,32),Na.fill(0,127,160);for(let n=0;n<j_.length;++n)Na.fill(0,j_[n][0],j_[n][1]+1);for(let n=0;n<H_.length;++n)Na.fill(2,H_[n][0],H_[n][1]+1)}}wcwidth(n){return n<32?0:n<127?1:n<65536?Na[n]:nC(n,_q)?0:nC(n,bq)?2:1}charProperties(n,e){let t=this.wcwidth(n),i=t===0&&e!==0;if(i){let r=im.extractWidth(e);r===0?i=!1:r>t&&(t=r)}return im.createPropertyValue(0,t,i)}},xq=class{activate(n){n.unicode.register(new vq)}dispose(){}};var Sq=class{constructor(n,e,t,i={}){this._terminal=n,this._regex=e,this._handler=t,this._options=i}provideLinks(n,e){let t=Eq.computeLink(n,this._regex,this._terminal,this._handler);e(this._addCallbacks(t))}_addCallbacks(n){return n.map(e=>(e.leave=this._options.leave,e.hover=(t,i)=>{if(this._options.hover){let{range:r}=e;this._options.hover(t,i,r)}},e))}};function wq(n){try{let e=new URL(n),t=e.password&&e.username?`${e.protocol}//${e.username}:${e.password}@${e.host}`:e.username?`${e.protocol}//${e.username}@${e.host}`:`${e.protocol}//${e.host}`;return n.toLocaleLowerCase().startsWith(t.toLocaleLowerCase())}catch{return!1}}var Eq=class Ip{static computeLink(e,t,i,r){let a=new RegExp(t.source,(t.flags||"")+"g"),[l,o]=Ip._getWindowedLineStrings(e-1,i),u=l.join(""),h,p=[];for(;h=a.exec(u);){let f=h[0];if(!wq(f))continue;let[m,y]=Ip._mapStrIdx(i,o,0,h.index),[x,w]=Ip._mapStrIdx(i,m,y,f.length);if(m===-1||y===-1||x===-1||w===-1)continue;let S={start:{x:y+1,y:m+1},end:{x:w,y:x+1}};p.push({range:S,text:f,activate:r})}return p}static _getWindowedLineStrings(e,t){let i,r=e,a=e,l=0,o="",u=[];if(i=t.buffer.active.getLine(e)){let h=i.translateToString(!0);if(i.isWrapped&&h[0]!==" "){for(l=0;(i=t.buffer.active.getLine(--r))&&l<2048&&(o=i.translateToString(!0),l+=o.length,u.push(o),!(!i.isWrapped||o.indexOf(" ")!==-1)););u.reverse()}for(u.push(h),l=0;(i=t.buffer.active.getLine(++a))&&i.isWrapped&&l<2048&&(o=i.translateToString(!0),l+=o.length,u.push(o),o.indexOf(" ")===-1););}return[u,r]}static _mapStrIdx(e,t,i,r){let a=e.buffer.active,l=a.getNullCell(),o=i;for(;r;){let u=a.getLine(t);if(!u)return[-1,-1];for(let h=o;h<u.length;++h){u.getCell(h,l);let p=l.getChars();if(l.getWidth()&&(r-=p.length||1,h===u.length-1&&p==="")){let f=a.getLine(t+1);f&&f.isWrapped&&(f.getCell(0,l),l.getWidth()===2&&(r+=1))}if(r<0)return[t,h]}t++,o=0}return[t,o]}},Cq=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function Aq(n,e){let t=window.open();if(t){try{t.opener=null}catch{}t.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}var Tq=class{constructor(n=Aq,e={}){this._handler=n,this._options=e}activate(n){this._terminal=n;let e=this._options,t=e.urlRegex||Cq;this._linkProvider=this._terminal.registerLinkProvider(new Sq(this._terminal,t,this._handler,e))}dispose(){this._linkProvider?.dispose()}};const Ni={default:{background:"#0a0a1a",foreground:"#e0e0e0",cursor:"#e0e0e0",cursorAccent:"#0a0a1a",selectionBackground:"rgba(0,229,255,0.3)",selectionForeground:"#ffffff",black:"#0a0a1a",red:"#ff5555",green:"#50fa7b",yellow:"#f1fa8c",blue:"#6272a4",magenta:"#ff79c6",cyan:"#00e5ff",white:"#e0e0e0",brightBlack:"#555555",brightRed:"#ff6e6e",brightGreen:"#69ff94",brightYellow:"#ffffa5",brightBlue:"#d6acff",brightMagenta:"#ff92df",brightCyan:"#a4ffff",brightWhite:"#ffffff"},dark:{background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#d4d4d4",cursorAccent:"#1e1e1e",selectionBackground:"rgba(255,255,255,0.15)",selectionForeground:"#ffffff",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#2472c8",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#e5e5e5",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",brightWhite:"#ffffff"},monokai:{background:"#272822",foreground:"#f8f8f2",cursor:"#f8f8f2",cursorAccent:"#272822",selectionBackground:"rgba(73,72,62,0.6)",selectionForeground:"#ffffff",black:"#272822",red:"#f92672",green:"#a6e22e",yellow:"#f4bf75",blue:"#66d9ef",magenta:"#ae81ff",cyan:"#a1efe4",white:"#f8f8f2",brightBlack:"#75715e",brightRed:"#f92672",brightGreen:"#a6e22e",brightYellow:"#f4bf75",brightBlue:"#66d9ef",brightMagenta:"#ae81ff",brightCyan:"#a1efe4",brightWhite:"#f9f8f5"},dracula:{background:"#282a36",foreground:"#f8f8f2",cursor:"#f8f8f2",cursorAccent:"#282a36",selectionBackground:"rgba(68,71,90,0.6)",selectionForeground:"#ffffff",black:"#21222c",red:"#ff5555",green:"#50fa7b",yellow:"#f1fa8c",blue:"#bd93f9",magenta:"#ff79c6",cyan:"#8be9fd",white:"#f8f8f2",brightBlack:"#6272a4",brightRed:"#ff6e6e",brightGreen:"#69ff94",brightYellow:"#ffffa5",brightBlue:"#d6acff",brightMagenta:"#ff92df",brightCyan:"#a4ffff",brightWhite:"#ffffff"},"solarized-dark":{background:"#002b36",foreground:"#839496",cursor:"#839496",cursorAccent:"#002b36",selectionBackground:"rgba(7,54,66,0.6)",selectionForeground:"#93a1a1",black:"#073642",red:"#dc322f",green:"#859900",yellow:"#b58900",blue:"#268bd2",magenta:"#d33682",cyan:"#2aa198",white:"#eee8d5",brightBlack:"#586e75",brightRed:"#cb4b16",brightGreen:"#586e75",brightYellow:"#657b83",brightBlue:"#839496",brightMagenta:"#6c71c4",brightCyan:"#93a1a1",brightWhite:"#fdf6e3"},nord:{background:"#2e3440",foreground:"#d8dee9",cursor:"#d8dee9",cursorAccent:"#2e3440",selectionBackground:"rgba(67,76,94,0.6)",selectionForeground:"#eceff4",black:"#3b4252",red:"#bf616a",green:"#a3be8c",yellow:"#ebcb8b",blue:"#81a1c1",magenta:"#b48ead",cyan:"#88c0d0",white:"#e5e9f0",brightBlack:"#4c566a",brightRed:"#bf616a",brightGreen:"#a3be8c",brightYellow:"#ebcb8b",brightBlue:"#81a1c1",brightMagenta:"#b48ead",brightCyan:"#8fbcbb",brightWhite:"#eceff4"},"github-dark":{background:"#0d1117",foreground:"#c9d1d9",cursor:"#c9d1d9",cursorAccent:"#0d1117",selectionBackground:"rgba(56,139,253,0.25)",selectionForeground:"#ffffff",black:"#484f58",red:"#ff7b72",green:"#3fb950",yellow:"#d29922",blue:"#58a6ff",magenta:"#bc8cff",cyan:"#39c5cf",white:"#b1bac4",brightBlack:"#6e7681",brightRed:"#ffa198",brightGreen:"#56d364",brightYellow:"#e3b341",brightBlue:"#79c0ff",brightMagenta:"#d2a8ff",brightCyan:"#56d4dd",brightWhite:"#f0f6fc"}};function kq(){const n=getComputedStyle(document.body),e=r=>n.getPropertyValue(r).trim(),t=e("--bg-primary")||Ni.default.background,i=e("--text-primary")||Ni.default.foreground;return{background:t,foreground:i,cursor:i,cursorAccent:t,selectionBackground:"rgba(255,255,255,0.18)",selectionForeground:"#ffffff",black:t,red:e("--accent-red")||Ni.default.red,green:e("--accent-green")||Ni.default.green,yellow:e("--accent-orange")||Ni.default.yellow,blue:e("--accent-cyan")||Ni.default.blue,magenta:e("--accent-purple")||Ni.default.magenta,cyan:e("--accent-cyan")||Ni.default.cyan,white:i,brightBlack:e("--text-dim")||Ni.default.brightBlack,brightRed:e("--accent-red")||Ni.default.brightRed,brightGreen:e("--accent-green")||Ni.default.brightGreen,brightYellow:e("--accent-orange")||Ni.default.brightYellow,brightBlue:e("--accent-cyan")||Ni.default.brightBlue,brightMagenta:e("--accent-purple")||Ni.default.brightMagenta,brightCyan:e("--accent-cyan")||Ni.default.brightCyan,brightWhite:"#ffffff"}}function Mq(){return Object.keys(Ni)}function q_(n){return n==="auto"?kq():Ni[n]||Ni.default}function Rq(n){const e=n.buffer.active;return e.viewportY>=e.baseY}function Oq(){const n=window.innerWidth;return n<=480?11:n<=640?12:14}function Xc(n,e,t,i){n&&n.readyState===1&&t>0&&i>0&&n.send(JSON.stringify({type:"terminal_resize",terminalId:e,cols:t,rows:i}))}function iC(n,e,t,i,r){requestAnimationFrame(()=>{!r.current||r.current.terminalId!==e||(i.fit(),Xc(n,e,t.cols,t.rows),t.refresh(0,t.rows-1),r.current&&(r.current.layoutReady=!0))})}function Nq({ws:n,themeName:e="auto"}){const t=K.useRef(null),i=K.useRef(null),r=K.useRef(new Map),a=K.useRef(new Map),l=K.useRef(e),o=K.useRef(n),u=K.useRef(null),h=K.useRef(null),[p,f]=K.useState(!1),[m,y]=K.useState(null),[x,w]=K.useState(!1);K.useEffect(()=>{l.current=e},[e]),K.useEffect(()=>{if(o.current=n,i.current&&n&&n.readyState===1){const{terminalId:$}=i.current;u.current&&u.current!==$&&n.send(JSON.stringify({type:"terminal_disconnect",terminalId:u.current})),n.send(JSON.stringify({type:"terminal_subscribe",terminalId:$})),u.current=$}},[n]);const S=K.useCallback(()=>{if(h.current!==null&&(cancelAnimationFrame(h.current),h.current=null),i.current){const{terminalId:$}=i.current;r.current.delete(`__active__${$}`),i.current.resizeObserver.disconnect(),i.current.term.dispose(),i.current=null}t.current&&(t.current.innerHTML=""),f(!1),y(null),w(!1),document.body.classList.remove("terminal-focused")},[]),b=K.useCallback($=>{S();const Q=t.current;if(!Q)return;const Y=Q;Y.innerHTML="";const te=(()=>{try{return localStorage.getItem("terminal-theme")||"auto"}catch{return"auto"}})();l.current=te;const re=q_(te);Y.style.background=re.background||"",r.current.delete($),a.current.delete($),o.current&&o.current.readyState===1&&(u.current&&u.current!==$&&o.current.send(JSON.stringify({type:"terminal_disconnect",terminalId:u.current})),o.current.send(JSON.stringify({type:"terminal_subscribe",terminalId:$})),u.current=$);function U(P){Y.offsetWidth>0&&Y.offsetHeight>0?B():P>0&&requestAnimationFrame(()=>setTimeout(()=>U(P-1),50))}function B(){const P=new WH.Terminal({cursorBlink:!1,cursorStyle:"bar",fontSize:Oq(),fontFamily:"'JetBrains Mono', 'Cascadia Code', 'Fira Code', 'Menlo', monospace",fontWeight:"400",fontWeightBold:"700",lineHeight:1.15,letterSpacing:0,theme:q_(l.current),allowProposedApi:!0,scrollback:5e3,convertEol:!1,drawBoldTextInBrightColors:!0,minimumContrastRatio:1}),Z=new KH;P.loadAddon(Z);try{const we=new xq;P.loadAddon(we),P.unicode.activeVersion="11"}catch{}try{const we=new Tq;P.loadAddon(we)}catch{}P.open(Y),P.attachCustomKeyEventHandler(we=>we.key==="Escape"?(we.preventDefault(),we.type==="keydown"&&o.current&&o.current.readyState===1&&o.current.send(JSON.stringify({type:"terminal_input",terminalId:$,data:"\x1B"})),!1):!0),Z.fit(),Xc(o.current,$,P.cols,P.rows),P.onData(we=>{o.current&&o.current.readyState===1&&o.current.send(JSON.stringify({type:"terminal_input",terminalId:$,data:we}))}),P.onBinary(we=>{o.current&&o.current.readyState===1&&o.current.send(JSON.stringify({type:"terminal_input",terminalId:$,data:we}))});let V=null;const _e=new ResizeObserver(()=>{V&&clearTimeout(V),V=setTimeout(()=>{Z.fit(),Xc(o.current,$,P.cols,P.rows)},200)});_e.observe(Y),i.current={terminalId:$,term:P,fitAddon:Z,resizeObserver:_e,layoutReady:!1},f(!0),y($),P.focus(),document.body.classList.add("terminal-focused"),iC(o.current,$,P,Z,i),requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!i.current||i.current.terminalId!==$)return;const we=r.current.get($);if(we&&we.length>0){for(const De of we){const le=Uint8Array.from(atob(De),ee=>ee.charCodeAt(0));P.write(le)}r.current.delete($),a.current.delete($)}})})}U(60)},[S]),v=K.useCallback(($,Q)=>{if(i.current&&i.current.terminalId===$){const Y=r.current.get(`__active__${$}`)||[];Y.push(Q),r.current.set(`__active__${$}`,Y),h.current===null&&(h.current=requestAnimationFrame(()=>{if(h.current=null,!i.current)return;const te=i.current.terminalId,re=r.current.get(`__active__${te}`);if(!re||re.length===0)return;r.current.delete(`__active__${te}`);const{term:U}=i.current,B=Rq(U);for(const P of re){const Z=Uint8Array.from(atob(P),V=>V.charCodeAt(0));U.write(Z)}B&&U.scrollToBottom()}))}else{const Y=Date.now();a.current.set($,Y);for(const[re,U]of a.current)Y-U>6e4&&(r.current.delete(re),a.current.delete(re));const te=r.current.get($)||[];te.push(Q),te.length>500&&te.shift(),r.current.set($,te)}},[]),_=K.useCallback($=>{i.current&&i.current.terminalId===$&&requestAnimationFrame(()=>{if(!i.current||!i.current.fitAddon)return;const Q=i.current.term.cols,Y=i.current.term.rows;i.current.fitAddon.fit();const te=i.current.term.cols,re=i.current.term.rows;(te!==Q||re!==Y)&&Xc(o.current,$,te,re)})},[]),E=K.useCallback(($,Q)=>{i.current&&i.current.terminalId===$&&i.current.term.write(`\r
\x1B[31m--- Terminal ${Q||"closed"} ---\x1B[0m\r
`)},[]),R=K.useCallback(()=>{!i.current||!o.current||o.current.readyState!==1||(o.current.send(JSON.stringify({type:"terminal_input",terminalId:i.current.terminalId,data:"\x1B"})),i.current.term.focus())},[]),M=K.useCallback(()=>{!i.current||!o.current||o.current.readyState!==1||(o.current.send(JSON.stringify({type:"terminal_input",terminalId:i.current.terminalId,data:"\x1B[A"})),i.current.term.focus())},[]),D=K.useCallback(()=>{!i.current||!o.current||o.current.readyState!==1||(o.current.send(JSON.stringify({type:"terminal_input",terminalId:i.current.terminalId,data:"\x1B[B"})),i.current.term.focus())},[]),O=K.useCallback(async()=>{if(!i.current||!o.current||o.current.readyState!==1)return;const{terminalId:$}=i.current;let Q=null;if(navigator.clipboard?.readText)try{Q=await navigator.clipboard.readText()}catch{}if(!Q)try{const Y=document.createElement("textarea");Y.style.position="fixed",Y.style.left="-9999px",Y.style.opacity="0",document.body.appendChild(Y),Y.focus(),document.execCommand("paste"),Q=Y.value,document.body.removeChild(Y)}catch{}Q||(Q=window.prompt("Paste text to send to terminal:")),Q&&(o.current.send(JSON.stringify({type:"terminal_input",terminalId:$,data:Q})),i.current?.term.focus())},[]),L=K.useCallback(()=>{if(!i.current)return;const{terminalId:$,term:Q,fitAddon:Y}=i.current;requestAnimationFrame(()=>{!i.current||i.current.terminalId!==$||(Y.fit(),Xc(o.current,$,Q.cols,Q.rows),Q.refresh(0,Q.rows-1),Q.scrollToBottom())})},[]),j=K.useCallback(()=>{w($=>!$)},[]),X=K.useCallback($=>{if(!i.current)return;const{terminalId:Q,term:Y,fitAddon:te,resizeObserver:re}=i.current,U=Y.element;if(!U||U.parentElement===$)return;$.appendChild(U),re.disconnect();let B=null;const P=new ResizeObserver(()=>{B&&clearTimeout(B),B=setTimeout(()=>{i.current&&(i.current.fitAddon.fit(),Xc(o.current,i.current.terminalId,i.current.term.cols,i.current.term.rows))},200)});P.observe($),i.current.resizeObserver=P,requestAnimationFrame(()=>{!i.current||i.current.terminalId!==Q||(iC(o.current,Q,Y,te,i),Y.focus())})},[]),G=K.useCallback(()=>{i.current&&i.current.term.scrollToBottom()},[]),H=K.useCallback($=>{l.current=$;try{localStorage.setItem("terminal-theme",$)}catch{}if(i.current){const Q=q_($);i.current.term.options.theme=Q}},[]);return K.useEffect(()=>()=>{h.current!==null&&(cancelAnimationFrame(h.current),h.current=null),i.current&&(i.current.resizeObserver.disconnect(),i.current.term.dispose(),i.current=null)},[]),K.useEffect(()=>{const $=Q=>{Q.key==="F11"&&Q.altKey&&i.current&&(Q.preventDefault(),w(Y=>!Y))};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[]),{containerRef:t,attach:b,detach:S,isAttached:p,activeTerminalId:m,toggleFullscreen:j,isFullscreen:x,sendEscape:R,sendArrowUp:M,sendArrowDown:D,pasteToTerminal:O,refitTerminal:L,setTheme:H,handleTerminalOutput:v,handleTerminalReady:_,handleTerminalClosed:E,reparent:X,scrollToBottom:G}}function Dq(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),N.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"})]})}function Iq(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),N.jsx("polyline",{points:"5 12 12 5 19 12"})]})}function Lq(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),N.jsx("polyline",{points:"19 12 12 19 5 12"})]})}function Bq(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("polyline",{points:"15 3 21 3 21 9"}),N.jsx("polyline",{points:"9 21 3 21 3 15"}),N.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),N.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]})}function zq(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("polyline",{points:"4 14 10 14 10 20"}),N.jsx("polyline",{points:"20 10 14 10 14 4"}),N.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),N.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]})}function Pq(){return N.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),N.jsx("text",{x:"12",y:"15",textAnchor:"middle",fill:"currentColor",stroke:"none",fontSize:"8",fontWeight:"700",fontFamily:"sans-serif",children:"ESC"})]})}function rC({themeName:n,onThemeChange:e,onFullscreen:t,onSendEscape:i,onSendArrowUp:r,onSendArrowDown:a,onPaste:l,onReconnect:o,isFullscreen:u,showReconnect:h=!1}){const p=Mq(),f=K.useCallback(m=>{e(m.target.value)},[e]);return N.jsxs("div",{className:Ft.toolbar,children:[N.jsxs("select",{className:Ft.themeSelect,value:n,onChange:f,title:"Terminal theme",children:[N.jsx("option",{value:"auto",children:"Auto"}),p.map(m=>N.jsx("option",{value:m,children:m.charAt(0).toUpperCase()+m.slice(1)},m))]}),N.jsx("button",{className:Ft.toolbarBtn,onClick:i,title:"Send Escape key to terminal",children:N.jsx(Pq,{})}),N.jsx("button",{className:Ft.toolbarBtn,onClick:l,title:"Paste clipboard to terminal",children:N.jsx(Dq,{})}),N.jsx("button",{className:Ft.toolbarBtn,onClick:r,title:"Send Up arrow key to terminal",children:N.jsx(Iq,{})}),N.jsx("button",{className:Ft.toolbarBtn,onClick:a,title:"Send Down arrow key to terminal",children:N.jsx(Lq,{})}),N.jsx("button",{className:Ft.toolbarBtn,onClick:t,title:u?"Exit fullscreen (Alt+F11)":"Fullscreen (Alt+F11)",children:u?N.jsx(zq,{}):N.jsx(Bq,{})}),h&&o&&N.jsx("button",{className:`${Ft.toolbarBtn} ${Ft.reconnectBtn}`,onClick:o,title:"Reconnect terminal",children:"RECONNECT"})]})}const Fq="200px";function Uq({terminalId:n,ws:e,showReconnect:t=!1,onReconnect:i}){const[r,a]=K.useState(()=>{try{return localStorage.getItem("terminal-theme")||"auto"}catch{return"auto"}}),l=K.useRef(null),{containerRef:o,attach:u,detach:h,isFullscreen:p,toggleFullscreen:f,sendEscape:m,sendArrowUp:y,sendArrowDown:x,pasteToTerminal:w,refitTerminal:S,setTheme:b,handleTerminalOutput:v,handleTerminalReady:_,handleTerminalClosed:E,reparent:R}=Nq({ws:e,themeName:r});K.useEffect(()=>{n?u(n):h()},[n,u,h]),K.useEffect(()=>{requestAnimationFrame(()=>{p&&l.current?R(l.current):!p&&o.current&&R(o.current)})},[p,R,o]),K.useEffect(()=>{if(!e)return;const D=O=>{try{const L=JSON.parse(O.data);L.type==="terminal_output"&&L.terminalId?v(L.terminalId,L.data):L.type==="terminal_ready"&&L.terminalId?_(L.terminalId):L.type==="terminal_closed"&&L.terminalId&&E(L.terminalId,L.reason)}catch{}};return e.addEventListener("message",D),()=>e.removeEventListener("message",D)},[e,v,_,E]),K.useEffect(()=>{const D=()=>{document.visibilityState==="visible"&&S()};return document.addEventListener("visibilitychange",D),()=>document.removeEventListener("visibilitychange",D)},[S]);const M=K.useCallback(D=>{a(D),b(D)},[b]);return n?N.jsxs("div",{className:Ft.wrapper,children:[N.jsx(rC,{themeName:r,onThemeChange:M,onFullscreen:f,onSendEscape:m,onSendArrowUp:y,onSendArrowDown:x,onPaste:w,onReconnect:i,isFullscreen:p,showReconnect:t}),N.jsx("div",{ref:o,className:Ft.container,style:{minHeight:Fq}}),qH.createPortal(N.jsxs("div",{className:Ft.fullscreenOverlay,style:{display:p?"flex":"none"},children:[N.jsxs("div",{className:Ft.fullscreenTopbar,children:[N.jsx("span",{className:Ft.fullscreenTitle,children:"Terminal"}),N.jsx(rC,{themeName:r,onThemeChange:M,onFullscreen:f,onSendEscape:m,onSendArrowUp:y,onSendArrowDown:x,onPaste:w,onReconnect:i,isFullscreen:p,showReconnect:t})]}),N.jsx("div",{ref:l,className:Ft.fullscreenContainer})]}),document.body)]}):N.jsx("div",{className:Ft.placeholder,children:N.jsxs("div",{children:["No terminal attached. Create an SSH session or select a session with a terminal.",i&&N.jsx("button",{className:Ft.reconnectPlaceholderBtn,onClick:i,children:"Reconnect Terminal"})]})})}const rm=["#00f0ff","#ff00aa","#a855f7","#00ff88","#ff4444","#ffaa00","#00aaff","#ff66ff","#44ff44","#ff8800","#8855ff","#00ffcc","#ff0066","#ccff00","#ff5577","#33ddff"],Cp={head:new Gn(.28,.24,.26),visor:new Gn(.24,.065,.02),antenna:new od(.007,.007,.14,4),aTip:new bs(.02,6,6),torso:new Gn(.32,.38,.2),core:new bs(.032,8,8),joint:new bs(.035,8,8),arm:new Gn(.08,.26,.08),leg:new Gn(.09,.28,.09),foot:new Gn(.1,.045,.12)};new Dh(Cp.head),new Dh(Cp.torso),new Dh(Cp.arm),new Dh(Cp.leg);const tK=new ld({color:"#2a2a3e",roughness:.3,metalness:.85}),nK=new ld({color:"#1c1c2c",roughness:.4,metalness:.7});function jq(n){const e=new jt(n);return new ld({color:e,emissive:e,emissiveIntensity:2,roughness:.2,metalness:.3})}function Hq(n){return new cr({color:n,transparent:!0,opacity:.3})}const iK=rm.map(n=>jq(n)),rK=rm.map(n=>Hq(n));function qq(n){if(!n||isNaN(n)||n<0)return"";const e=Math.floor(n/1e3),t=Math.floor(e/60),i=Math.floor(t/60);return i>0?`${i}h ${t%60}m`:t>0?`${t}m ${e%60}s`:`${e}s`}function Vq(n){return n==="ended"?"DISCONNECTED":n==="approval"?"APPROVAL NEEDED":n==="input"?"WAITING FOR INPUT":n==="waiting"?"WAITING":n.toUpperCase()}function V_({modalId:n,children:e}){return bi(i=>i.activeModal)!==n?null:N.jsx(N.Fragment,{children:e})}function Wq({session:n}){const e=Z_(l=>l.client),t=K.useMemo(()=>e?.getRawSocket()??null,[e]),i=n.source==="ssh",r=i&&n.status==="ended",a=K.useCallback(()=>{fetch(`/api/sessions/${n.sessionId}/reconnect-terminal`,{method:"POST"}).catch(()=>{})},[n.sessionId]);return N.jsxs("div",{className:Ke.terminalWithQueue,children:[N.jsx("div",{className:Ke.terminalSection,children:N.jsx(Uq,{terminalId:n.terminalId,ws:t,showReconnect:r,onReconnect:i?a:void 0})}),N.jsx(k2,{sessionId:n.sessionId,sessionStatus:n.status,terminalId:n.terminalId})]})}function $q(){const n=mn(m=>m.selectedSessionId),e=mn(m=>m.sessions),t=mn(m=>m.deselectSession),i=n?e.get(n):void 0;K.useEffect(()=>{if(!n)return;const m=y=>{y.key==="Escape"&&!y.target?.closest?.(".xterm")&&t()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[n,t]),K.useEffect(()=>{if(n)try{localStorage.setItem("selected-session",n)}catch{}else try{localStorage.removeItem("selected-session")}catch{}},[n]);const r=K.useCallback(m=>{m.target===m.currentTarget&&t()},[t]);if(!i)return null;const a=qq(Date.now()-i.startedAt),l=Vq(i.status),o=i.status==="ended",u=(i.characterModel||"robot").toLowerCase(),h=i.accentColor||rm[(i.colorIndex??0)%rm.length],p=v2(u),f={idle:"#00ff88",prompting:"#00e5ff",working:"#ff9100",waiting:"#00e5ff",approval:"#ffdd00",input:"#aa66ff",ended:"#ff4444",connecting:"#666"};return N.jsx("div",{className:Ke.overlay,onClick:r,children:N.jsxs(r6,{initialWidth:480,minWidth:320,maxWidth:Math.round(window.innerWidth*.95),side:"right",children:[N.jsx("button",{className:Ke.closeBtn,onClick:t,title:"Close",children:""}),N.jsxs("div",{className:Ke.header,children:[N.jsxs("div",{className:Ke.charPreview,style:{width:64,height:80,borderRadius:6,border:`1px solid ${f[i.status]??"#666"}40`,background:`${f[i.status]??"#666"}10`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4},children:[N.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:`${h}30`,border:`2px solid ${h}`,boxShadow:`0 0 8px ${h}40`}}),N.jsx("span",{style:{fontFamily:"var(--font-mono)",fontSize:8,fontWeight:700,letterSpacing:.5,color:h,textTransform:"uppercase",opacity:.8},children:p})]}),N.jsxs("div",{className:Ke.headerText,children:[N.jsx("div",{className:Ke.headerTop,children:N.jsxs("div",{className:Ke.headerTitles,children:[N.jsx("h3",{children:i.projectName}),i.title&&N.jsx("div",{className:Ke.titleRow,children:N.jsx("span",{style:{fontSize:"11px",color:"var(--text-dim)",fontStyle:"italic"},children:i.title})})]})}),N.jsxs("div",{className:Ke.meta,children:[N.jsx("span",{className:`${Ke.detailStatusBadge} ${o?"disconnected":i.status}`,children:l}),i.model&&N.jsx("span",{className:Ke.detailModel,children:i.model}),a&&N.jsx("span",{className:Ke.detailDuration,children:a})]})]})]}),N.jsx(HH,{session:i}),N.jsx(c6,{terminalContent:N.jsx(Wq,{session:i}),promptsContent:N.jsx(d6,{prompts:i.promptHistory||[],previousSessions:i.previousSessions}),notesContent:N.jsx(m6,{sessionId:i.sessionId}),activityContent:N.jsx(f6,{events:i.events||[],toolLog:i.toolLog||[],responseLog:i.responseLog||[]}),summaryContent:N.jsx(g6,{summary:i.summary}),queueContent:N.jsx(k2,{sessionId:i.sessionId,sessionStatus:i.status,terminalId:i.terminalId}),projectContent:i.projectPath?N.jsx(IH,{projectPath:i.projectPath}):N.jsx("div",{className:Ke.tabEmpty,children:"No project path detected for this session"})}),N.jsx(V_,{modalId:qb,children:N.jsx(LH,{})}),N.jsx(V_,{modalId:Vb,children:N.jsx(BH,{})}),N.jsx(V_,{modalId:Wb,children:N.jsx(zH,{})})]})})}function Gq(n){const e=n.target?.tagName;return!!(e==="INPUT"||e==="TEXTAREA"||e==="SELECT"||n.target?.isContentEditable)}let Ap=!1;const Kq=new Set;function Yq(){Ap=!Ap;for(const n of Kq)n(Ap);return Ap}function Xq(){const n=bi(i=>i.openModal),e=bi(i=>i.closeModal),t=bi(i=>i.activeModal);K.useEffect(()=>{function i(r){const a=bi.getState().activeModal,l=mn.getState().selectedSessionId;if(r.key==="Escape"){if(a)e();else{if(r.target?.closest?.(".xterm"))return;l&&mn.getState().deselectSession()}return}if(!Gq(r)){if(r.key==="F11"&&r.altKey){r.preventDefault(),document.fullscreenElement?document.exitFullscreen().catch(()=>{}):document.documentElement.requestFullscreen().catch(()=>{});return}if(!(r.ctrlKey||r.metaKey||r.altKey))switch(r.key){case"/":{r.preventDefault(),document.querySelector("[data-search-input]")?.focus();break}case"?":r.preventDefault(),a==="shortcuts"?e():n("shortcuts");break;case"S":case"s":r.preventDefault(),a==="settings"?e():n("settings");break;case"T":case"t":r.preventDefault(),n("new-session");break;case"K":case"k":l&&(r.preventDefault(),Zq(l));break;case"A":case"a":l&&(r.preventDefault(),Jq(l));break;case"M":case"m":{r.preventDefault();const o=Yq();Ct(o?"Sound muted":"Sound unmuted","info",1500);break}}}}return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[n,e,t])}async function Zq(n){try{const t=await(await fetch(`/api/sessions/${n}/kill`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})).json();t.ok?Ct("Session killed","info"):Ct(t.error||"Failed to kill session","error")}catch{Ct("Network error","error")}}async function Jq(n){try{const t=await(await fetch(`/api/sessions/${n}/archive`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();t.ok?Ct("Session archived","info"):Ct(t.error||"Failed to archive session","error")}catch{Ct("Network error","error")}}function Qq(){const n=K.useRef(!1);K.useEffect(()=>{n.current||(n.current=!0,(async()=>{try{const t=await Wt.settings.toArray();if(t.length===0)return;const i={};for(const r of t){const{key:a,value:l}=r;if(typeof l=="string")try{const o=JSON.parse(l);if(typeof o=="object"&&o!==null){i[a]=o;continue}}catch{}i[a]=l}Vt.getState().loadFromDb(i)}catch{}})())},[]);const e=Vt(t=>t.soundSettings.volume);K.useEffect(()=>{_s.setVolume(e)},[e]),K.useEffect(()=>{if(_s.isUnlocked())return;function t(){_s.unlock(),document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}return document.addEventListener("click",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}},[])}const eV={idle:"#00ff88",prompting:"#00e5ff",working:"#ff9100",waiting:"#00e5ff",approval:"#ffdd00",input:"#aa66ff",ended:"#ff4444",connecting:"#666"},sC={working:0,prompting:1,approval:2,input:2,waiting:3,idle:4,connecting:5,ended:6};function aC(n){return[...n].sort((e,t)=>{const i=sC[e.status]??5,r=sC[t.status]??5;return i!==r?i-r:(e.title||"Unnamed").localeCompare(t.title||"Unnamed")})}function tV({session:n,isSelected:e,onSelect:t,onClose:i,onTitleSave:r}){const a=eV[n.status]??"#888",l=n.title||"Unnamed",o=n.label,[u,h]=K.useState(!1),[p,f]=K.useState(l),m=K.useRef(null);K.useEffect(()=>{u&&(m.current?.focus(),m.current?.select())},[u]);const y=()=>{h(!1);const x=p.trim();x&&x!==l?r(n.sessionId,x):f(l)};return N.jsxs("button",{"data-session-id":n.sessionId,"data-status":n.status,onClick:()=>{u||t(n.sessionId)},style:{display:"flex",alignItems:"center",gap:8,width:"100%",padding:"8px 10px",border:e?`1px solid ${a}`:"1px solid rgba(255,255,255,0.06)",borderRadius:3,background:e?`rgba(${iV(a)},0.12)`:"rgba(255,255,255,0.02)",cursor:u?"default":"pointer",textAlign:"left",fontFamily:"'JetBrains Mono', monospace",transition:"all 0.15s ease"},onMouseEnter:x=>{e||(x.currentTarget.style.background="rgba(255,255,255,0.06)",x.currentTarget.style.borderColor="rgba(255,255,255,0.15)")},onMouseLeave:x=>{e||(x.currentTarget.style.background="rgba(255,255,255,0.02)",x.currentTarget.style.borderColor="rgba(255,255,255,0.06)")},children:[N.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:a,boxShadow:`0 0 6px ${a}`,flexShrink:0,alignSelf:"flex-start",marginTop:4}}),N.jsxs("div",{style:{flex:1,minWidth:0},children:[o&&N.jsx("span",{style:{display:"inline-block",fontSize:9,letterSpacing:.5,color:"rgba(0,240,255,0.9)",background:"rgba(0,240,255,0.1)",border:"1px solid rgba(0,240,255,0.2)",borderRadius:2,padding:"0px 4px",marginBottom:2,lineHeight:1.5,textTransform:"uppercase"},children:o}),u?N.jsx("input",{ref:m,value:p,onChange:x=>f(x.target.value),onBlur:y,onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),y()),x.key==="Escape"&&(f(l),h(!1))},onClick:x=>x.stopPropagation(),style:{width:"100%",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(0,240,255,0.4)",borderRadius:2,color:"#fff",fontSize:12,fontFamily:"inherit",padding:"1px 4px",outline:"none",lineHeight:1.3}}):N.jsx("div",{style:{fontSize:12,color:e?"#fff":"rgba(255,255,255,0.75)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:1.3},children:l}),N.jsx("div",{style:{fontSize:10,color:a,letterSpacing:1,textTransform:"uppercase",lineHeight:1.3},children:n.status})]}),!u&&N.jsx("span",{role:"button",tabIndex:-1,onClick:x=>{x.stopPropagation(),f(l),h(!0)},onKeyDown:x=>{x.key==="Enter"&&(x.stopPropagation(),f(l),h(!0))},style:{flexShrink:0,width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2,color:"rgba(255,255,255,0.2)",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:x=>{x.currentTarget.style.color="rgba(0,240,255,0.8)"},onMouseLeave:x=>{x.currentTarget.style.color="rgba(255,255,255,0.2)"},children:N.jsxs("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("path",{d:"M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),N.jsx("path",{d:"m15 5 4 4"})]})}),N.jsx("span",{role:"button",tabIndex:-1,onClick:x=>{x.stopPropagation(),i(n.sessionId)},onKeyDown:x=>{x.key==="Enter"&&(x.stopPropagation(),i(n.sessionId))},style:{flexShrink:0,width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2,fontSize:10,lineHeight:1,color:"rgba(255,255,255,0.25)",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:x=>{x.currentTarget.style.color="#ff4444",x.currentTarget.style.background="rgba(255,68,68,0.15)"},onMouseLeave:x=>{x.currentTarget.style.color="rgba(255,255,255,0.25)",x.currentTarget.style.background="transparent"},children:""})]})}function nV({name:n,count:e,collapsed:t,onToggle:i}){return N.jsxs("div",{onClick:i,style:{display:"flex",alignItems:"center",gap:6,padding:"6px 4px 4px",cursor:"pointer",userSelect:"none"},children:[N.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.35)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",style:{transition:"transform 0.15s ease",transform:t?"rotate(-90deg)":"rotate(0deg)",flexShrink:0},children:N.jsx("polyline",{points:"6 9 12 15 18 9"})}),N.jsx("span",{style:{fontSize:11,letterSpacing:1.5,color:"rgba(255,255,255,0.4)",textTransform:"uppercase",fontFamily:"'Share Tech Mono', 'JetBrains Mono', monospace",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n}),N.jsx("span",{style:{fontSize:10,color:"rgba(255,255,255,0.25)",fontFamily:"'JetBrains Mono', monospace"},children:e})]})}function iV(n){const e=n.replace("#",""),t=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16);return`${t},${i},${r}`}const dT="sidebar-filter-mode";function rV(){try{const n=localStorage.getItem(dT);return n==="all"||n==="ssh"||n==="others"?n:"all"}catch{return"all"}}function sV(n){try{localStorage.setItem(dT,n)}catch{}}function aV(){const n=mn(E=>E.sessions),e=mn(E=>E.selectedSessionId),t=mn(E=>E.removeSession),i=mn(E=>E.updateSession),r=Gs(E=>E.rooms),[a,l]=K.useState(!1),[o,u]=K.useState(new Set),[h,p]=K.useState(rV),f=K.useCallback(E=>{u(R=>{const M=new Set(R);return M.has(E)?M.delete(E):M.add(E),M})},[]),m=K.useCallback(E=>{p(E),sV(E)},[]),y=K.useMemo(()=>{const E=[...n.values()].filter(L=>!(L.status==="ended"||h==="ssh"&&L.source!=="ssh"||h==="others"&&L.source==="ssh")),R=new Set,M=[],D=[...r].filter(L=>L.roomIndex!=null).sort((L,j)=>(L.roomIndex??0)-(j.roomIndex??0));for(const L of D){const j=E.filter(X=>L.sessionIds.includes(X.sessionId));if(j.length>0){for(const X of j)R.add(X.sessionId);M.push({id:L.id,name:L.name,sessions:aC(j)})}}const O=E.filter(L=>!R.has(L.sessionId));return O.length>0&&M.push({id:"__common__",name:"Common Area",sessions:aC(O)}),M},[n,r,h]),x=K.useMemo(()=>y.reduce((E,R)=>E+R.sessions.length,0),[y]),w=mn(E=>E.selectSession),S=K.useCallback(E=>{w(E),window.dispatchEvent(new CustomEvent("robot-select",{detail:{sessionId:E}}))},[w]),b=K.useCallback(E=>{t(E),fetch(`/api/sessions/${E}`,{method:"DELETE"}).catch(()=>{})},[t]),v=K.useCallback((E,R)=>{const M=n.get(E);M&&i({...M,title:R}),fetch(`/api/sessions/${E}/title`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:R})}).catch(()=>{})},[n,i]);return K.useMemo(()=>[...n.values()].some(E=>E.status!=="ended"),[n])?N.jsxs("div",{style:{position:"absolute",top:16,left:20,width:a?"auto":280,maxHeight:"calc(100vh - 100px)",overflowY:a?"hidden":"auto",background:"color-mix(in srgb, var(--bg-panel) 85%, transparent)",backdropFilter:"blur(20px)",border:"1px solid var(--border-accent)",borderRadius:4,padding:a?"10px 12px":"14px 12px",pointerEvents:"all",zIndex:11,boxShadow:"0 0 12px var(--glow-accent), inset 0 0 24px var(--glow-accent)",transition:"width 0.2s ease, padding 0.2s ease"},children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",marginBottom:a?0:4,paddingLeft:2,userSelect:"none"},onClick:()=>l(E=>!E),children:[N.jsxs("span",{style:{fontSize:12,letterSpacing:2,color:"rgba(0,240,255,0.4)",textTransform:"uppercase",fontFamily:"'Share Tech Mono', 'JetBrains Mono', monospace",flex:1},children:["Agents (",x,")"]}),N.jsx("div",{onClick:E=>E.stopPropagation(),style:{display:"flex",borderRadius:3,overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",marginRight:6},children:["all","ssh","others"].map(E=>{const R=h===E,M=E==="all"?"ALL":E==="ssh"?"SSH":"OTHERS";return N.jsx("button",{onClick:()=>m(E),style:{fontSize:9,letterSpacing:.5,padding:"2px 6px",fontFamily:"'JetBrains Mono', monospace",cursor:"pointer",transition:"all 0.15s ease",background:R?"rgba(0,240,255,0.15)":"transparent",color:R?"rgba(0,240,255,0.9)":"rgba(255,255,255,0.3)",border:"none",borderRight:E!=="others"?"1px solid rgba(255,255,255,0.08)":"none",lineHeight:1.4},children:M},E)})}),N.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(0,240,255,0.4)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{transition:"transform 0.2s ease",transform:a?"rotate(-90deg)":"rotate(0deg)"},children:N.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),!a&&N.jsx("div",{style:{display:"flex",flexDirection:"column",gap:2},children:x===0?N.jsxs("div",{style:{padding:"16px 8px",textAlign:"center",fontSize:11,color:"rgba(255,255,255,0.25)",fontFamily:"'JetBrains Mono', monospace",letterSpacing:.5},children:["No ",h==="ssh"?"SSH":h==="others"?"other":""," sessions"]}):y.map(E=>{const R=o.has(E.id);return N.jsxs("div",{children:[N.jsx(nV,{name:E.name,count:E.sessions.length,collapsed:R,onToggle:()=>f(E.id)}),!R&&N.jsx("div",{style:{display:"flex",flexDirection:"column",gap:3,paddingLeft:4},children:E.sessions.map(M=>N.jsx(tV,{session:M,isSelected:e===M.sessionId,onSelect:S,onClose:b,onTitleSave:v},M.sessionId))})]},E.id)})})]}):null}const oV=[18,16,18],lV=[0,1,0];let cV=1;const uV=kl(n=>({pendingTarget:null,isAnimating:!1,flyTo:(e,t)=>n({pendingTarget:{position:e,lookAt:t,requestId:cV++},isAnimating:!0}),completeAnimation:()=>n({pendingTarget:null,isAnimating:!1})})),fT=8,td=2,oC=fT+td,Io=fT/2,Nr=4,sK=2,aK=.08,oK=1.5;function lK(n){const e=[];for(const t of n){const[i]=t.center;e.push({roomIndex:t.index,side:"south",outside:new se(i,0,t.bounds.maxZ+1),inside:new se(i,0,t.bounds.maxZ-1)}),e.push({roomIndex:t.index,side:"north",outside:new se(i,0,t.bounds.minZ-1),inside:new se(i,0,t.bounds.minZ+1)})}return e}function cK(n,e,t,i,r,a){if(i===r)return[t];if(i<0&&r<0)return[t];const l=[];function o(u,h,p){const f=a.filter(x=>x.roomIndex===u);if(f.length===0)return;let m=f[0],y=(m.outside.x-h)**2+(m.outside.z-p)**2;for(let x=1;x<f.length;x++){const w=(f[x].outside.x-h)**2+(f[x].outside.z-p)**2;w<y&&(m=f[x],y=w)}return m}if(i>=0){const u=o(i,t.x,t.z);u&&(l.push(u.inside.clone()),l.push(u.outside.clone()))}if(r>=0){const u=o(r,n,e);u&&(l.push(u.outside.clone()),l.push(u.inside.clone()))}return l.push(t),l}function Pa(n){const e=n%Nr,t=Math.floor(n/Nr),i=(e-(Nr-1)/2)*oC,r=t*oC;return[i,0,r]}function pT(n){const[e,,t]=Pa(n);return{minX:e-Io,maxX:e+Io,minZ:t-Io,maxZ:t+Io}}const lC=14,hV=10,cC=Math.PI/4;function dV(n){const[e,,t]=Pa(n);return{lookAt:[e,1,t],position:[e+Math.sin(cC)*lC,hV,t+Math.cos(cC)*lC]}}function uK(n){return n.filter(e=>e.roomIndex!=null).map(e=>({index:e.roomIndex,roomId:e.id,name:e.name,center:Pa(e.roomIndex),bounds:pT(e.roomIndex),stripColor:e.roomIndex%2===0?0:1}))}function fV(n){const e=[];for(const t of n){const[i,,r]=t.center,a=5,l=1.2,o=r-(a-1)*l/2;for(let u=0;u<a;u++){const h=o+u*l;e.push({x:i-3,z:h,rotation:Math.PI/2,zone:t.index}),e.push({x:i+3,z:h,rotation:-Math.PI/2,zone:t.index})}}return e}function hK(n){return fV(n).map((t,i)=>{const r=t.x+.65*Math.sin(t.rotation),a=t.z+.65*Math.cos(t.rotation);return{idx:i,zone:t.zone,seatPos:new se(r,0,a),faceRot:t.rotation+Math.PI,occupantId:null}})}function dK(n,e){const t=[];if(n.length===0)for(let i=0;i<5;i++)for(let r=0;r<2;r++)t.push({x:(r-.5)*3,z:3+i*1.5,rotation:r===0?Math.PI/2:-Math.PI/2});else{const i=Math.max(...n.map(f=>Math.floor(f.index/Nr))),r=Math.min(Nr-1,Math.max(...n.map(f=>f.index%Nr))),a=Math.min(...n.map(f=>f.index%Nr)),o=Pa(i*Nr)[2]+Io+td+3,u=Pa(a),h=Pa(r),p=(u[0]+h[0])/2;for(let f=0;f<5;f++)for(let m=0;m<2;m++)t.push({x:p+(m-.5)*3,z:o+f*1.5,rotation:m===0?Math.PI/2:-Math.PI/2})}return t.map((i,r)=>{const a=i.x+.65*Math.sin(i.rotation),l=i.z+.65*Math.cos(i.rotation);return{idx:e+r,zone:-1,seatPos:new se(a,0,l),faceRot:i.rotation+Math.PI,occupantId:null}})}function fK(n,e,t){for(const i of t)if(n+.25>i.minX&&n-.25<i.maxX&&e+.25>i.minZ&&e-.25<i.maxZ)return!0;return!1}function pV(n){if(n.length===0)return 15;let e=10;for(const t of n){const[i,,r]=t.center;e=Math.max(e,Math.abs(i)+Io+2,Math.abs(r)+Io+2)}if(n.length>0){const t=Math.max(...n.map(a=>Math.floor(a.index/Nr))),i=Pa(t*Nr);e=Math.max(e,Math.abs(i[2])+Io+td+8);const r=Math.min(...n.map(a=>a.bounds.minZ));e=Math.max(e,Math.abs(r)+td+8)}return e}function pK(n,e,t){for(const i of t){const r=i.bounds;if(n>=r.minX&&n<=r.maxX&&e>=r.minZ&&e<=r.maxZ)return i.index}return-1}function mK(n){const e=pT(n),t=new se;return t.set(e.minX+.8+Math.random()*(e.maxX-e.minX-1.6),0,e.minZ+.8+Math.random()*(e.maxZ-e.minZ-1.6)),t}function gK(n){const e=new se,t=Math.min(n,5);return e.set((Math.random()-.5)*t*2,0,(Math.random()-.5)*t*2),e}const mV=10,Mh=mV/2;function yK(n){let e,t;if(n.length===0)e=-8,t=0;else{e=Math.min(...n.map(p=>p.bounds.minZ))-td-Mh-1;const l=Math.min(...n.map(p=>p.index%Nr)),o=Math.min(Nr-1,Math.max(...n.map(p=>p.index%Nr))),u=Pa(l),h=Pa(o);t=(u[0]+h[0])/2}const i=[],r=3;for(let a=0;a<2;a++)for(let l=0;l<2;l++){const o=t+(l-.5)*r,u=e+(a-.5)*r;i.push({pos:new se(o-.8,0,u),faceRot:Math.PI/2}),i.push({pos:new se(o+.8,0,u),faceRot:-Math.PI/2})}return[{type:"coffee",center:[t,0,e],bounds:{minX:t-Mh,maxX:t+Mh,minZ:e-Mh,maxZ:e+Mh},stations:i}]}function _K(n,e){const t=[];let i=e;for(const r of n)for(const l of r.stations)t.push({idx:i,zone:-2,seatPos:l.pos.clone(),faceRot:l.faceRot,occupantId:null}),i++;return t}function bK(n){const e=pV(n);return Math.max(20,e*2+6)}const Hh={fontFamily:"'Share Tech Mono', 'JetBrains Mono', monospace",fontSize:10,letterSpacing:1.5,textTransform:"uppercase",padding:"7px 12px",borderRadius:2,cursor:"pointer",transition:"all 0.15s ease"};function gV(){const n=Gs(v=>v.rooms),e=Gs(v=>v.createRoom),t=Gs(v=>v.renameRoom),i=Gs(v=>v.deleteRoom),r=mn(v=>v.sessions),a=uV(v=>v.flyTo),[l,o]=K.useState(!1),[u,h]=K.useState(null),[p,f]=K.useState(""),m=K.useCallback(()=>{const v=n.length+1;e(`Room ${v}`)},[n.length,e]),y=K.useCallback(v=>{h(v.id),f(v.name)},[]),x=K.useCallback(()=>{u&&p.trim()&&t(u,p.trim()),h(null),f("")},[u,p,t]),w=K.useCallback(v=>{const _=dV(v);a(_.position,_.lookAt)},[a]),S=K.useCallback(()=>{a(oV,lV)},[a]),b=K.useMemo(()=>[...n].sort((v,_)=>(v.roomIndex??999)-(_.roomIndex??999)),[n]);return N.jsxs("div",{style:{marginTop:10,borderTop:"1px solid rgba(0,240,255,0.1)",paddingTop:8},children:[N.jsxs("button",{onClick:()=>o(!l),style:{...Hh,display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"4px 0",border:"none",background:"none",color:"rgba(0,240,255,0.5)",fontSize:9,letterSpacing:2},children:[N.jsxs("span",{children:["Rooms (",n.length,")"]}),N.jsx("span",{style:{fontSize:10},children:l?"":""})]}),l&&N.jsxs("div",{style:{marginTop:6,display:"flex",flexDirection:"column",gap:6},children:[N.jsx("button",{onClick:S,style:{...Hh,width:"100%",border:"1px solid rgba(0,240,255,0.28)",background:"rgba(0,240,255,0.06)",color:"#00f0ff",display:"flex",alignItems:"center",justifyContent:"center",gap:6},onMouseEnter:v=>{v.currentTarget.style.background="rgba(0,240,255,0.16)",v.currentTarget.style.borderColor="rgba(0,240,255,0.5)"},onMouseLeave:v=>{v.currentTarget.style.background="rgba(0,240,255,0.06)",v.currentTarget.style.borderColor="rgba(0,240,255,0.28)"},children:"Overview"}),b.map(v=>{const _=v.sessionIds.filter(E=>{const R=r.get(E);return R&&R.status!=="ended"}).length;return N.jsxs("div",{onClick:()=>{u!==v.id&&v.roomIndex!=null&&w(v.roomIndex)},style:{padding:"6px 8px",borderRadius:3,border:"1px solid rgba(0,240,255,0.2)",background:"rgba(0,240,255,0.04)",cursor:u===v.id?"default":"pointer"},onMouseEnter:E=>{u!==v.id&&(E.currentTarget.style.background="rgba(0,240,255,0.1)",E.currentTarget.style.borderColor="rgba(0,240,255,0.4)")},onMouseLeave:E=>{E.currentTarget.style.background="rgba(0,240,255,0.04)",E.currentTarget.style.borderColor="rgba(0,240,255,0.2)"},children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:4},children:[u===v.id?N.jsx("input",{value:p,onChange:E=>f(E.target.value),onBlur:x,onKeyDown:E=>{E.key==="Enter"&&x()},onClick:E=>E.stopPropagation(),autoFocus:!0,style:{flex:1,background:"rgba(0,0,0,0.3)",border:"1px solid rgba(0,240,255,0.3)",color:"#fff",fontSize:10,fontFamily:"'JetBrains Mono', monospace",padding:"2px 4px",borderRadius:2,outline:"none"}}):N.jsx("span",{style:{fontSize:10,fontFamily:"'JetBrains Mono', monospace",color:"#ddd",flex:1},children:v.name}),u!==v.id&&N.jsxs("div",{style:{display:"flex",gap:2},children:[N.jsx("button",{onClick:E=>{E.stopPropagation(),y(v)},style:{background:"none",border:"none",color:"rgba(0,240,255,0.4)",cursor:"pointer",fontSize:10,minWidth:44,minHeight:44,display:"flex",alignItems:"center",justifyContent:"center"},title:"Rename",children:""}),N.jsx("button",{onClick:E=>{E.stopPropagation(),i(v.id)},style:{background:"none",border:"none",color:"rgba(255,68,68,0.5)",cursor:"pointer",fontSize:10,minWidth:44,minHeight:44,display:"flex",alignItems:"center",justifyContent:"center"},title:"Delete room",children:""})]})]}),_>0&&N.jsxs("div",{style:{marginTop:4,fontSize:9,fontFamily:"'JetBrains Mono', monospace",color:"rgba(255,255,255,0.35)",padding:"1px 4px"},children:[_," session",_!==1?"s":""]})]},v.id)}),n.length===0&&N.jsx("div",{style:{fontSize:9,color:"rgba(255,255,255,0.2)",textAlign:"center",padding:"6px 0",fontFamily:"'Share Tech Mono', monospace"},children:"No rooms yet"}),N.jsx("button",{onClick:m,style:{...Hh,width:"100%",border:"1px dashed rgba(0,255,136,0.3)",background:"rgba(0,255,136,0.04)",color:"#00ff88"},onMouseEnter:v=>{v.currentTarget.style.background="rgba(0,255,136,0.12)",v.currentTarget.style.borderColor="rgba(0,255,136,0.5)"},onMouseLeave:v=>{v.currentTarget.style.background="rgba(0,255,136,0.04)",v.currentTarget.style.borderColor="rgba(0,255,136,0.3)"},children:"+ New Room"})]})]})}function yV({sessionCount:n}){const e=Vt(l=>l.soundSettings.enabled),t=Vt(l=>l.updateSoundSettings),i=Vt(l=>l.scene3dEnabled),r=Vt(l=>l.setScene3dEnabled),a=()=>{const l=!e;t({enabled:l}),l&&_s.unlock()};return N.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:10},children:N.jsxs("div",{style:{position:"absolute",bottom:16,right:20,background:"color-mix(in srgb, var(--bg-panel) 85%, transparent)",backdropFilter:"blur(20px)",border:"1px solid var(--border-accent)",borderRadius:4,padding:"14px 18px",pointerEvents:"all",minWidth:200,maxWidth:260,maxHeight:"calc(100vh - 80px)",overflowY:"auto",boxShadow:"0 0 12px var(--glow-accent), inset 0 0 24px var(--glow-accent)"},children:[N.jsx("div",{style:{fontSize:9,letterSpacing:2,color:"rgba(0,240,255,0.4)",textTransform:"uppercase",fontFamily:"'Share Tech Mono', 'JetBrains Mono', monospace"},children:"Units Online"}),N.jsx("div",{style:{fontFamily:"'Orbitron', 'JetBrains Mono', sans-serif",fontSize:28,fontWeight:700,color:"#fff",margin:"2px 0 10px",lineHeight:1},children:n}),N.jsx("button",{onClick:a,style:{...Hh,width:"100%",border:`1px solid ${e?"rgba(0,240,255,0.28)":"rgba(255,68,68,0.4)"}`,background:e?"rgba(0,240,255,0.08)":"rgba(255,68,68,0.12)",color:e?"#00f0ff":"#ff4444"},onMouseEnter:l=>{l.currentTarget.style.background=e?"rgba(0,240,255,0.16)":"rgba(255,68,68,0.2)"},onMouseLeave:l=>{l.currentTarget.style.background=e?"rgba(0,240,255,0.08)":"rgba(255,68,68,0.12)"},children:e?"Sound On":"Muted"}),N.jsx("button",{onClick:()=>r(!i),title:i?"Disable 3D scene to save CPU/GPU":"Enable 3D scene",style:{...Hh,width:"100%",marginTop:6,border:`1px solid ${i?"rgba(0,240,255,0.28)":"rgba(255,145,0,0.4)"}`,background:i?"rgba(0,240,255,0.08)":"rgba(255,145,0,0.12)",color:i?"#00f0ff":"#ff9100"},onMouseEnter:l=>{l.currentTarget.style.background=i?"rgba(0,240,255,0.16)":"rgba(255,145,0,0.2)"},onMouseLeave:l=>{l.currentTarget.style.background=i?"rgba(0,240,255,0.08)":"rgba(255,145,0,0.12)"},children:i?"3D On":"3D Off"}),N.jsx(gV,{}),N.jsx("div",{style:{fontSize:8,color:"rgba(255,255,255,0.16)",marginTop:10,lineHeight:1.6,textAlign:"center",fontFamily:"'Share Tech Mono', 'JetBrains Mono', monospace"},children:"Drag to orbit  Scroll to zoom"})]})})}const _V=K.lazy(()=>id(()=>import("./CyberdromeScene-BQrFv4Qf.js"),__vite__mapDeps([0,1])));class bV extends K.Component{state={hasError:!1,error:""};static getDerivedStateFromError(e){return{hasError:!0,error:e.message}}componentDidCatch(e,t){console.error("3D Scene crashed:",e,t.componentStack)}render(){return this.state.hasError?N.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",background:"#0e0c1a",color:"#ff4444",fontFamily:"'JetBrains Mono', monospace",fontSize:12,letterSpacing:1,gap:16},children:[N.jsx("div",{children:"3D SCENE ERROR"}),N.jsx("div",{style:{color:"#888",maxWidth:400,textAlign:"center"},children:this.state.error}),N.jsx("button",{onClick:()=>this.setState({hasError:!1,error:""}),style:{background:"#1a1a2e",border:"1px solid #00f0ff",color:"#00f0ff",padding:"8px 16px",cursor:"pointer",fontFamily:"inherit",fontSize:11},children:"RETRY"})]}):this.props.children}}function vV(){const n=mn(t=>t.sessions),e=Array.from(n.values()).filter(t=>t.status!=="ended").length;return N.jsxs("div",{style:{position:"absolute",inset:0,background:"var(--bg-primary, #0a0a1a)"},children:[N.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255,255,255,0.06)",fontFamily:"'Share Tech Mono', 'JetBrains Mono', monospace",fontSize:14,letterSpacing:4,textTransform:"uppercase",userSelect:"none"},children:"3D Scene Paused"}),N.jsx(yV,{sessionCount:e}),N.jsx(aV,{})]})}function xV(){return Vt(e=>e.scene3dEnabled)?N.jsx("div",{style:{position:"absolute",inset:0},children:N.jsx(bV,{children:N.jsx(K.Suspense,{fallback:N.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",background:"#0e0c1a",color:"#00f0ff",fontFamily:"'JetBrains Mono', monospace",fontSize:12,letterSpacing:2},children:"INITIALIZING CYBERDROME..."}),children:N.jsx(_V,{})})})}):N.jsx("div",{style:{position:"absolute",inset:0},children:N.jsx(vV,{})})}const SV=K.lazy(()=>id(()=>import("./HistoryView-BYWyb74U.js"),__vite__mapDeps([2,3,4]))),wV=K.lazy(()=>id(()=>import("./TimelineView-MiOUD8Sn.js"),__vite__mapDeps([5,3,6,1,7]))),EV=K.lazy(()=>id(()=>import("./AnalyticsView-DF_oyewB.js"),__vite__mapDeps([8,3,6,1,7]))),CV=K.lazy(()=>id(()=>import("./QueueView-B2w77nDK.js"),__vite__mapDeps([9,10]))),AV=new ZR({defaultOptions:{queries:{staleTime:3e4,retry:1}}});function TV(){return Xq(),N.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[N.jsx(CL,{}),N.jsx(s4,{}),N.jsx("main",{style:{flex:1,minHeight:0,overflow:"hidden",position:"relative"},children:N.jsx(K.Suspense,{fallback:N.jsx("div",{style:{padding:"2rem",color:"#8888aa",textAlign:"center"},children:"Loading..."}),children:N.jsx(VM,{})})}),N.jsx(m4,{}),N.jsx(ML,{}),N.jsx(bL,{}),N.jsx(I4,{}),N.jsx(U4,{}),N.jsx(H4,{}),N.jsx($q,{})]})}function kV({token:n}){return Qq(),SO(n),N.jsx(gR,{children:N.jsx($M,{children:N.jsxs(No,{element:N.jsx(TV,{}),children:[N.jsx(No,{path:"/",element:N.jsx(xV,{})}),N.jsx(No,{path:"/history",element:N.jsx(SV,{})}),N.jsx(No,{path:"/timeline",element:N.jsx(wV,{})}),N.jsx(No,{path:"/analytics",element:N.jsx(EV,{})}),N.jsx(No,{path:"/queue",element:N.jsx(CV,{})}),N.jsx(No,{path:"*",element:N.jsx(qM,{to:"/",replace:!0})})]})})})}function MV(){const{token:n,loading:e,needsLogin:t,login:i}=tO();return e?N.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#0a0a1a",color:"#8888aa",fontFamily:"'JetBrains Mono', monospace"},children:"Connecting..."}):t?N.jsx(kO,{onLogin:i}):N.jsx(kV,{token:n})}function RV(){return N.jsx(JR,{client:AV,children:N.jsx(MV,{})})}$s.getState().loadFromDb();const mT=document.getElementById("root");if(!mT)throw new Error("Root element not found");qk.createRoot(mT).render(N.jsx(K.StrictMode,{children:N.jsx(RV,{})}));export{gI as $,Jr as A,se as B,jt as C,UC as D,xn as E,eb as F,Mt as G,LS as H,BS as I,$0 as J,Rr as K,hm as L,Jt as M,IW as N,A3 as O,iW as P,jC as Q,OV as R,om as S,Q_ as T,q0 as U,ns as V,Ys as W,OS as X,H$ as Y,nn as Z,gt as _,LV as a,iu as a$,ws as a0,p2 as a1,My as a2,Po as a3,Xe as a4,Qr as a5,xG as a6,nG as a7,$h as a8,D3 as a9,pW as aA,fW as aB,dW as aC,t0 as aD,e0 as aE,x3 as aF,v3 as aG,b3 as aH,Br as aI,w$ as aJ,S$ as aK,E$ as aL,v$ as aM,x$ as aN,b$ as aO,C$ as aP,_$ as aQ,jc as aR,Js as aS,SI as aT,wI as aU,G0 as aV,ni as aW,eW as aX,tW as aY,f3 as aZ,nW as a_,n0 as aa,$W as ab,dm as ac,ID as ad,Kh as ae,za as af,I3 as ag,ts as ah,Ks as ai,WC as aj,MS as ak,cW as al,lW as am,AS as an,EW as ao,wW as ap,SW as aq,xW as ar,yW as as,bW as at,kS as au,mW as av,gW as aw,_W as ax,vW as ay,TS as az,qH as b,ZV as b$,tG as b0,lG as b1,B3 as b2,L3 as b3,qC as b4,E3 as b5,T3 as b6,k3 as b7,cG as b8,hb as b9,tN as bA,nN as bB,iN as bC,rN as bD,sN as bE,aN as bF,oN as bG,lN as bH,cN as bI,uN as bJ,hN as bK,dN as bL,fN as bM,pN as bN,mN as bO,gN as bP,yN as bQ,_N as bR,OW as bS,RW as bT,MW as bU,kW as bV,TW as bW,AW as bX,CW as bY,YV as bZ,XV as b_,M3 as ba,R3 as bb,S3 as bc,w3 as bd,C3 as be,O3 as bf,N3 as bg,HC as bh,z3 as bi,P3 as bj,F3 as bk,U3 as bl,j3 as bm,H3 as bn,q3 as bo,V3 as bp,W3 as bq,$3 as br,G3 as bs,K3 as bt,Y3 as bu,X3 as bv,Z3 as bw,J3 as bx,Q3 as by,eN as bz,M0 as c,RD as c$,CS as c0,oW as c1,aW as c2,sW as c3,rW as c4,g3 as c5,y3 as c6,WN as c7,eG as c8,_3 as c9,jp as cA,DW as cB,NW as cC,j0 as cD,vi as cE,uW as cF,hW as cG,VC as cH,DS as cI,HI as cJ,l5 as cK,Gp as cL,hG as cM,AG as cN,CG as cO,uG as cP,LD as cQ,KG as cR,RS as cS,XI as cT,EG as cU,g2 as cV,SG as cW,bG as cX,YG as cY,SN as cZ,QV as c_,uu as ca,e$ as cb,Q$ as cc,Gn as cd,fm as ce,Zs as cf,FW as cg,jW as ch,UW as ci,PW as cj,zW as ck,BW as cl,LW as cm,_5 as cn,NS as co,um as cp,m3 as cq,hu as cr,iD as cs,nD as ct,wN as cu,L$ as cv,aD as cw,YC as cx,Y0 as cy,KC as cz,OR as d,UG as d$,QC as d0,du as d1,LG as d2,or as d3,$G as d4,WG as d5,$I as d6,Ia as d7,K0 as d8,VG as d9,c$ as dA,DI as dB,p3 as dC,jI as dD,qG as dE,MI as dF,sb as dG,N$ as dH,A$ as dI,M$ as dJ,Dh as dK,ab as dL,f$ as dM,lb as dN,Bo as dO,J$ as dP,Z0 as dQ,X0 as dR,rG as dS,tb as dT,RG as dU,I$ as dV,y$ as dW,m$ as dX,jG as dY,Nh as dZ,LI as d_,oG as da,ib as db,BD as dc,rb as dd,KI as de,d2 as df,sG as dg,aG as dh,nb as di,dG as dj,pm as dk,ZG as dl,uD as dm,fG as dn,t2 as dp,VD as dq,kI as dr,JV as ds,Qs as dt,$D as du,od as dv,IG as dw,pG as dx,$$ as dy,o$ as dz,K_ as e,V0 as e$,cb as e0,yG as e1,Kp as e2,HN as e3,a$ as e4,l$ as e5,Yh as e6,WI as e7,MG as e8,bD as e9,OD as eA,Ua as eB,h2 as eC,WW as eD,VW as eE,Pr as eF,Tw as eG,f2 as eH,bN as eI,xN as eJ,vN as eK,GV as eL,lr as eM,vb as eN,q$ as eO,_2 as eP,xI as eQ,EI as eR,vI as eS,_I as eT,yI as eU,ld as eV,bI as eW,qW as eX,HW as eY,h$ as eZ,t$ as e_,X$ as ea,Z$ as eb,G$ as ec,J0 as ed,ru as ee,gm as ef,Pp as eg,i0 as eh,ky as ei,P$ as ej,z$ as ek,u$ as el,wc as em,Es as en,pD as eo,ub as ep,p$ as eq,d$ as er,Rl as es,VI as et,Cl as eu,BG as ev,cr as ew,n2 as ex,WD as ey,CI as ez,MR as f,mG as f$,i$ as f0,n$ as f1,g$ as f2,Wp as f3,Sn as f4,gG as f5,mm as f6,s0 as f7,GG as f8,FI as f9,tu as fA,fb as fB,XG as fC,Xs as fD,Q0 as fE,PG as fF,gD as fG,Sl as fH,Xi as fI,bs as fJ,DG as fK,m2 as fL,s2 as fM,zI as fN,zG as fO,fD as fP,ZC as fQ,O$ as fR,Up as fS,k$ as fT,vG as fU,D$ as fV,T$ as fW,R$ as fX,fu as fY,KV as fZ,pb as f_,FG as fa,ND as fb,e2 as fc,HG as fd,Ml as fe,wG as ff,vn as fg,JI as fh,i2 as fi,r2 as fj,Ir as fk,ym as fl,RI as fm,ZW as fn,JW as fo,GW as fp,QW as fq,ad as fr,OG as fs,qI as ft,GC as fu,TG as fv,s$ as fw,db as fx,dD as fy,mI as fz,nd as g,yV as g$,JG as g0,NG as g1,B$ as g2,mb as g3,gb as g4,Or as g5,XW as g6,YW as g7,KW as g8,yb as g9,Io as gA,aK as gB,oK as gC,QG as gD,rK as gE,iK as gF,Hq as gG,jq as gH,tK as gI,Vt as gJ,Cp as gK,nK as gL,mK as gM,pK as gN,fK as gO,cK as gP,gK as gQ,_O as gR,Pa as gS,uV as gT,Gs as gU,uK as gV,yK as gW,hK as gX,_K as gY,lK as gZ,pV as g_,H0 as ga,K$ as gb,Y$ as gc,y2 as gd,kG as ge,$p as gf,iG as gg,DD as gh,W$ as gi,V$ as gj,Gh as gk,pI as gl,Fp as gm,Zc as gn,Jc as go,r$ as gp,j$ as gq,U$ as gr,rO as gs,Rh as gt,Fk as gu,bK as gv,fV as gw,rm as gx,sK as gy,dK as gz,G_ as h,aV as h0,lm as i,N as j,DC as k,WR as l,IR as m,ys as n,rr as o,FR as p,DV as q,K as r,NV as s,RR as t,IV as u,$s as v,mn as w,Ct as x,Ft as y,F$ as z};
