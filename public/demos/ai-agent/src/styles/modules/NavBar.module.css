/* ============================================================
   NavBar CSS Module
   Main navigation, nav actions, quick action buttons,
   keyboard shortcuts button, view panels
   ============================================================ */

/* #70: Apply safe area insets for iPhone notch/Dynamic Island */
.nav {
  grid-area: nav;
  display: flex;
  flex-direction: row;
  background: linear-gradient(180deg, var(--bg-header) 0%, var(--bg-primary) 100%);
  border-bottom: 1px solid var(--border-accent);
  padding: var(--safe-top, 0px) calc(24px + var(--safe-right, 0px)) 0 calc(24px + var(--safe-left, 0px));
  z-index: 10;
  position: relative;
  gap: 0;
}

.navBtn {
  background: none; border: none; color: var(--text-dim);
  font-family: var(--font-mono); font-size: 11px; font-weight: 500;
  letter-spacing: 1.5px; padding: 10px 20px; cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: color 0.2s, border-color 0.2s;
}
.navBtn:hover { color: var(--text-secondary); }
.navBtn.active { color: var(--accent-cyan); border-bottom-color: var(--accent-cyan); }

.spacer { flex: 1; }

/* ---- Nav Actions ---- */

.actions { display: flex; align-items: center; gap: 8px; }
.actionsItems { display: flex; align-items: center; gap: 8px; transition: opacity 0.2s, max-width 0.3s; overflow: visible; max-width: 600px; }
.actions.collapsed .actionsItems { max-width: 0; opacity: 0; padding: 0; gap: 0; }

.actionsToggle {
  background: none; border: none; color: var(--text-secondary);
  font-size: 14px; cursor: pointer; padding: 4px 6px;
  border-radius: 4px; transition: all 0.2s; flex-shrink: 0;
}
.actionsToggle:hover { color: var(--accent-cyan); background: var(--bg-subtle); }

.qaBtn {
  background: none; border: 1px solid var(--border-subtle);
  color: var(--text-secondary); font-family: var(--font-mono);
  font-size: 10px; font-weight: 700; letter-spacing: 1px;
  padding: 5px 12px; border-radius: 4px; cursor: pointer;
  transition: all 0.2s; white-space: nowrap;
}
.qaBtn:hover { background: var(--bg-subtle); color: var(--accent-cyan); border-color: var(--border-accent); }
.qaBtn.active { background: rgba(255, 51, 85, 0.15); color: var(--accent-red); border-color: var(--accent-red); }
.qaBtn.terminal { color: #4caf50 !important; }
.qaBtn.terminal:hover { background: rgba(76, 175, 80, 0.15) !important; }
.qaBtn.quick { color: var(--accent-cyan) !important; border-color: var(--accent-cyan) !important; }
.qaBtn.quick:hover { background: rgba(0, 229, 255, 0.12) !important; }

/* ---- Keyboard Shortcuts Button ---- */

.shortcutsBtn {
  background: none; border: 1px solid var(--border-subtle);
  color: var(--text-secondary); font-family: var(--font-mono);
  font-size: 13px; font-weight: 700; width: 30px; height: 30px;
  border-radius: 6px; cursor: pointer; transition: all 0.2s;
  display: inline-flex; align-items: center; justify-content: center;
  flex-shrink: 0; margin-left: 4px; vertical-align: middle;
}
.shortcutsBtn:hover { color: var(--accent-cyan); border-color: var(--accent-cyan); background: var(--bg-accent); box-shadow: 0 0 8px var(--glow-accent); }

/* ---- View Panels ---- */

.viewPanel { display: none; }
.viewPanel.active { display: block; grid-area: main; position: relative; overflow-y: auto; overflow-x: hidden; }
.viewPanel::-webkit-scrollbar { width: 8px; }
.viewPanel::-webkit-scrollbar-track { background: var(--bg-primary); }
.viewPanel::-webkit-scrollbar-thumb { background: var(--border-accent); border-radius: 4px; }
.viewPanel::-webkit-scrollbar-thumb:hover { background: var(--text-dim); }

/* ---- Responsive (Mobile) ---- */

/* #61 — NavBar nav links: horizontal scroll on mobile instead of overflow-hidden */
@media (max-width: 640px) {
  .nav {
    padding: 0 8px;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .nav::-webkit-scrollbar { display: none; }

  .navBtn {
    padding: 10px 12px;
    font-size: 10px;
    letter-spacing: 1px;
    white-space: nowrap;
    flex-shrink: 0;
  }

  /* #59 — Ensure action buttons stay visible and don't overflow */
  .actions {
    flex-shrink: 0;
    margin-left: 8px;
  }

  .actionsItems {
    gap: 4px;
    overflow: visible;
    max-width: none;
  }

  .qaBtn {
    padding: 5px 8px;
    font-size: 9px;
    white-space: nowrap;
  }

  .shortcutsBtn {
    width: 28px;
    height: 28px;
    font-size: 12px;
    margin-left: 2px;
  }
}

/* #59 — Touch targets for nav/action buttons on coarse pointer devices */
@media (pointer: coarse) {
  .navBtn {
    min-height: 44px;
    padding: 0 14px;
    display: inline-flex;
    align-items: center;
  }

  .qaBtn {
    min-height: 44px;
    padding: 0 12px;
    display: inline-flex;
    align-items: center;
  }

  .shortcutsBtn {
    min-width: 44px;
    min-height: 44px;
  }
}
