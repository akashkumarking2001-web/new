import{bM as tt,bN as et,bO as nt,bP as st,bQ as Z,bR as it,bS as at,bT as rt,bU as ot,bV as lt,bW as ut,bX as ct,bY as ft,bZ as mt,b_ as ht,b$ as pt,c0 as gt,c1 as j,c2 as dt,c3 as yt,c4 as At}from"./index-CKqfvLoB.js";const bt=(t,e,n)=>{const s=e-t;return((n-t)%s+s)%s+t};function $(t,e){return tt(t)?t[bt(0,t.length,e)]:t}class St{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e){const n=this.animations.map(s=>s.attachTimeline(e));return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return Q(this.animations,"duration")}get iterationDuration(){return Q(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Q(t,e){let n=0;for(let s=0;s<t.length;s++){const i=t[s][e];i!==null&&i>n&&(n=i)}return n}class Et extends St{then(e,n){return this.finished.finally(e).then(()=>{})}}function L(t){return typeof t=="object"&&!Array.isArray(t)}function J(t,e,n,s){return typeof t=="string"&&L(e)?et(t,n,s):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function Vt(t,e,n){return t*(e+1)}function U(t,e,n,s){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:e.startsWith("<")?Math.max(0,n+parseFloat(e.slice(1))):s.get(e)??t}function vt(t,e,n){for(let s=0;s<t.length;s++){const i=t[s];i.at>e&&i.at<n&&(st(t,i),s--)}}function Tt(t,e,n,s,i,o){vt(t,i,o);for(let a=0;a<e.length;a++)t.push({value:e[a],at:nt(i,o,s[a]),easing:$(n,a)})}function Dt(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function Mt(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const Ot="easeInOut";function xt(t,{defaultTransition:e={},...n}={},s,i){const o=e.duration||.3,a=new Map,l=new Map,p={},b=new Map;let D=0,u=0,I=0;for(let v=0;v<t.length;v++){const m=t[v];if(typeof m=="string"){b.set(m,u);continue}else if(!Array.isArray(m)){b.set(m.name,U(u,m.at,D,b));continue}let[V,h,c={}]=m;c.at!==void 0&&(u=U(u,c.at,D,b));let f=0;const T=(g,d,S,M=0,O=0)=>{const r=wt(g),{delay:B=0,times:y=it(r),type:C="keyframes",repeat:F,repeatType:Rt,repeatDelay:_t=0,...q}=d;let{ease:E=e.ease||"easeOut",duration:A}=d;const W=typeof B=="function"?B(M,O):B,P=r.length,R=ot(C)?C:i==null?void 0:i[C||"keyframes"];if(P<=2&&R){let x=100;if(P===2&&Ft(r)){const w=r[1]-r[0];x=Math.abs(w)}const K={...q};A!==void 0&&(K.duration=lt(A));const N=at(K,x,R);E=N.ease,A=N.duration}A??(A=o);const _=u+W;y.length===1&&y[0]===0&&(y[1]=1);const z=y.length-r.length;if(z>0&&rt(y,z),r.length===1&&r.unshift(null),F){A=Vt(A,F);const x=[...r],K=[...y];E=Array.isArray(E)?[...E]:[E];const N=[...E];for(let w=0;w<F;w++){r.push(...x);for(let G=0;G<x.length;G++)y.push(K[G]+(w+1)),E.push(G===0?"linear":$(N,G-1))}Dt(y,F)}const H=_+A;Tt(S,r,E,y,_,H),f=Math.max(W+A,f),I=Math.max(H,I)};if(Z(V)){const g=X(V,l);T(h,c,Y("default",g))}else{const g=J(V,h,s,p),d=g.length;for(let S=0;S<d;S++){h=h,c=c;const M=g[S],O=X(M,l);for(const r in h)T(h[r],Gt(c,r),Y(r,O),S,d)}}D=u,u+=f}return l.forEach((v,m)=>{for(const V in v){const h=v[V];h.sort(Mt);const c=[],f=[],T=[];for(let d=0;d<h.length;d++){const{at:S,value:M,easing:O}=h[d];c.push(M),f.push(ut(0,I,S)),T.push(O||"easeOut")}f[0]!==0&&(f.unshift(0),c.unshift(c[0]),T.unshift(Ot)),f[f.length-1]!==1&&(f.push(1),c.push(null)),a.has(m)||a.set(m,{keyframes:{},transition:{}});const g=a.get(m);g.keyframes[V]=c,g.transition[V]={...e,duration:I,ease:T,times:f,...n}}}),a}function X(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function Y(t,e){return e[t]||(e[t]=[]),e[t]}function wt(t){return Array.isArray(t)?t:[t]}function Gt(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const It=t=>typeof t=="number",Ft=t=>t.every(It);function Kt(t,e){return t in e}class Nt extends ct{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(Kt(n,e)){const s=e[n];if(typeof s=="string"||typeof s=="number")return s}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return ft()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function jt(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=mt(t)&&!ht(t)?new pt(e):new gt(e);n.mount(t),j.set(t,n)}function Bt(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Nt(e);n.mount(t),j.set(t,n)}function Ct(t,e){return Z(t)||typeof t=="number"||typeof t=="string"&&!L(e)}function k(t,e,n,s){const i=[];if(Ct(t,e))i.push(dt(t,L(e)&&e.default||e,n&&(n.default||n)));else{const o=J(t,e,s),a=o.length;for(let l=0;l<a;l++){const p=o[l],b=p instanceof Element?jt:Bt;j.has(p)||b(p);const D=j.get(p),u={...n};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(l,a)),i.push(...yt(D,{...e,transition:u},{}))}}return i}function Lt(t,e,n){const s=[];return xt(t,e,n,{spring:At}).forEach(({keyframes:o,transition:a},l)=>{s.push(...k(l,o,a))}),s}function Wt(t){return Array.isArray(t)&&t.some(Array.isArray)}function Pt(t){function e(n,s,i){let o=[],a;if(Wt(n))o=Lt(n,s,t);else{const{onComplete:p,...b}=i||{};typeof p=="function"&&(a=p),o=k(n,s,b,t)}const l=new Et(o);return a&&l.finished.then(a),l}return e}const Ht=Pt();export{Ht as a};
