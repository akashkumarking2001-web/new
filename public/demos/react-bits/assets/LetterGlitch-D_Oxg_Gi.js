import{r as s,j as h}from"./index-CKqfvLoB.js";const W=({glitchColors:b=["#2b4539","#61dca3","#61b3dc"],className:T="",glitchSpeed:R=50,centerVignette:$=!1,outerVignette:L=!0,smooth:d=!0,characters:S="ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$&*()-_+=/[]{};:<>.,0123456789"})=>{const l=s.useRef(null),g=s.useRef(null),o=s.useRef([]),f=s.useRef({columns:0,rows:0}),i=s.useRef(null),x=s.useRef(Date.now()),v=Array.from(S),z=16,y=10,M=20,C=()=>v[Math.floor(Math.random()*v.length)],m=()=>b[Math.floor(Math.random()*b.length)],E=t=>{const r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(r,(n,c,a,u)=>c+c+a+a+u+u);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},A=(t,r,e)=>{const n={r:Math.round(t.r+(r.r-t.r)*e),g:Math.round(t.g+(r.g-t.g)*e),b:Math.round(t.b+(r.b-t.b)*e)};return`rgb(${n.r}, ${n.g}, ${n.b})`},j=(t,r)=>{const e=Math.ceil(t/y),n=Math.ceil(r/M);return{columns:e,rows:n}},k=(t,r)=>{f.current={columns:t,rows:r};const e=t*r;o.current=Array.from({length:e},()=>({char:C(),color:m(),targetColor:m(),colorProgress:1}))},P=()=>{const t=l.current;if(!t)return;const r=t.parentElement;if(!r)return;const e=window.devicePixelRatio||1,n=r.getBoundingClientRect();t.width=n.width*e,t.height=n.height*e,t.style.width=`${n.width}px`,t.style.height=`${n.height}px`,i.current&&i.current.setTransform(e,0,0,e,0,0);const{columns:c,rows:a}=j(n.width,n.height);k(c,a),p()},p=()=>{if(!i.current||o.current.length===0)return;const t=i.current,{width:r,height:e}=l.current.getBoundingClientRect();t.clearRect(0,0,r,e),t.font=`${z}px monospace`,t.textBaseline="top",o.current.forEach((n,c)=>{const a=c%f.current.columns*y,u=Math.floor(c/f.current.columns)*M;t.fillStyle=n.color,t.fillText(n.char,a,u)})},B=()=>{if(!o.current||o.current.length===0)return;const t=Math.max(1,Math.floor(o.current.length*.05));for(let r=0;r<t;r++){const e=Math.floor(Math.random()*o.current.length);o.current[e]&&(o.current[e].char=C(),o.current[e].targetColor=m(),d?o.current[e].colorProgress=0:(o.current[e].color=o.current[e].targetColor,o.current[e].colorProgress=1))}},F=()=>{let t=!1;o.current.forEach(r=>{if(r.colorProgress<1){r.colorProgress+=.05,r.colorProgress>1&&(r.colorProgress=1);const e=E(r.color),n=E(r.targetColor);e&&n&&(r.color=A(e,n,r.colorProgress),t=!0)}}),t&&p()},w=()=>{const t=Date.now();t-x.current>=R&&(B(),p(),x.current=t),d&&F(),g.current=requestAnimationFrame(w)};s.useEffect(()=>{const t=l.current;if(!t)return;i.current=t.getContext("2d"),P(),w();let r;const e=()=>{clearTimeout(r),r=setTimeout(()=>{cancelAnimationFrame(g.current),P(),w()},100)};return window.addEventListener("resize",e),()=>{cancelAnimationFrame(g.current),window.removeEventListener("resize",e)}},[R,d]);const G={position:"relative",width:"100%",height:"100%",backgroundColor:"#000000",overflow:"hidden"},I={display:"block",width:"100%",height:"100%"},D={position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",background:"radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,1) 100%)"},V={position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",background:"radial-gradient(circle, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 60%)"};return h.jsxs("div",{style:G,className:T,children:[h.jsx("canvas",{ref:l,style:I}),L&&h.jsx("div",{style:D}),$&&h.jsx("div",{style:V})]})};export{W as default};
