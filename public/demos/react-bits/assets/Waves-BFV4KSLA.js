import{r as h,j as O}from"./index-CKqfvLoB.js";class u{constructor(s,n,c){this.x=s,this.y=n,this.z=c}dot2(s,n){return this.x*s+this.y*n}}class nt{constructor(s=0){this.grad3=[new u(1,1,0),new u(-1,1,0),new u(1,-1,0),new u(-1,-1,0),new u(1,0,1),new u(-1,0,1),new u(1,0,-1),new u(-1,0,-1),new u(0,1,1),new u(0,-1,1),new u(0,1,-1),new u(0,-1,-1)],this.p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.perm=new Array(512),this.gradP=new Array(512),this.seed(s)}seed(s){s>0&&s<1&&(s*=65536),s=Math.floor(s),s<256&&(s|=s<<8);for(let n=0;n<256;n++){let c=n&1?this.p[n]^s&255:this.p[n]^s>>8&255;this.perm[n]=this.perm[n+256]=c,this.gradP[n]=this.gradP[n+256]=this.grad3[c%12]}}fade(s){return s*s*s*(s*(s*6-15)+10)}lerp(s,n,c){return(1-c)*s+c*n}perlin2(s,n){let c=Math.floor(s),l=Math.floor(n);s-=c,n-=l,c&=255,l&=255;const M=this.gradP[c+this.perm[l]].dot2(s,n),R=this.gradP[c+this.perm[l+1]].dot2(s,n-1),E=this.gradP[c+1+this.perm[l]].dot2(s-1,n),P=this.gradP[c+1+this.perm[l+1]].dot2(s-1,n-1),m=this.fade(s);return this.lerp(this.lerp(M,E,m),this.lerp(R,P,m),this.fade(n))}}const ot=({lineColor:g="black",backgroundColor:s="transparent",waveSpeedX:n=.0125,waveSpeedY:c=.005,waveAmpX:l=32,waveAmpY:M=16,xGap:R=10,yGap:E=32,friction:P=.925,tension:m=.005,maxCursorMove:A=100,style:Q={},className:U=""})=>{const X=h.useRef(null),Y=h.useRef(null),$=h.useRef(null),w=h.useRef({width:0,height:0,left:0,top:0}),V=h.useRef(new nt(Math.random())),L=h.useRef([]),k=h.useRef({x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1}),p=h.useRef({lineColor:g,waveSpeedX:n,waveSpeedY:c,waveAmpX:l,waveAmpY:M,friction:P,tension:m,maxCursorMove:A,xGap:R,yGap:E}),S=h.useRef(null);return h.useEffect(()=>{p.current={lineColor:g,waveSpeedX:n,waveSpeedY:c,waveAmpX:l,waveAmpY:M,friction:P,tension:m,maxCursorMove:A,xGap:R,yGap:E}},[g,n,c,l,M,P,m,A,R,E]),h.useEffect(()=>{console.log("Waves mounted");const T=Y.current,F=X.current;$.current=T.getContext("2d");function q(){w.current=F.getBoundingClientRect(),T.width=w.current.width,T.height=w.current.height}function B(){const{width:o,height:t}=w.current;L.current=[];const e=o+200,i=t+30,{xGap:a,yGap:d}=p.current,x=Math.ceil(e/a),f=Math.ceil(i/d),y=(o-a*x)/2,b=(t-d*f)/2;for(let v=0;v<=x;v++){const j=[];for(let r=0;r<=f;r++)j.push({x:y+a*v,y:b+d*r,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}});L.current.push(j)}}function Z(o){const t=L.current,e=k.current,i=V.current,{waveSpeedX:a,waveSpeedY:d,waveAmpX:x,waveAmpY:f,friction:y,tension:b,maxCursorMove:v}=p.current;t.forEach(j=>{j.forEach(r=>{const J=i.perlin2((r.x+o*a)*.002,(r.y+o*d)*.0015)*12;r.wave.x=Math.cos(J)*x,r.wave.y=Math.sin(J)*f;const tt=r.x-e.sx,et=r.y-e.sy,W=Math.hypot(tt,et),z=Math.max(175,e.vs);if(W<z){const st=1-W/z,K=Math.cos(W*.001)*st;r.cursor.vx+=Math.cos(e.a)*K*z*e.vs*65e-5,r.cursor.vy+=Math.sin(e.a)*K*z*e.vs*65e-5}r.cursor.vx+=(0-r.cursor.x)*b,r.cursor.vy+=(0-r.cursor.y)*b,r.cursor.vx*=y,r.cursor.vy*=y,r.cursor.x+=r.cursor.vx*2,r.cursor.y+=r.cursor.vy*2,r.cursor.x=Math.min(v,Math.max(-v,r.cursor.x)),r.cursor.y=Math.min(v,Math.max(-v,r.cursor.y))})})}function N(o,t=!0){const e=o.x+o.wave.x+(t?o.cursor.x:0),i=o.y+o.wave.y+(t?o.cursor.y:0);return{x:Math.round(e*10)/10,y:Math.round(i*10)/10}}function _(){const{width:o,height:t}=w.current,e=$.current;e.clearRect(0,0,o,t),e.beginPath(),e.strokeStyle=p.current.lineColor,L.current.forEach(i=>{let a=N(i[0],!1);e.moveTo(a.x,a.y),i.forEach((d,x)=>{const f=x===i.length-1;a=N(d,!f);const y=N(i[x+1]||i[i.length-1],!f);e.lineTo(a.x,a.y),f&&e.moveTo(y.x,y.y)})}),e.stroke()}function G(o){const t=k.current;t.sx+=(t.x-t.sx)*.1,t.sy+=(t.y-t.sy)*.1;const e=t.x-t.lx,i=t.y-t.ly,a=Math.hypot(e,i);t.v=a,t.vs+=(a-t.vs)*.1,t.vs=Math.min(100,t.vs),t.lx=t.x,t.ly=t.y,t.a=Math.atan2(i,e),F.style.setProperty("--x",`${t.sx}px`),F.style.setProperty("--y",`${t.sy}px`),Z(o),_(),S.current=requestAnimationFrame(G)}function H(){q(),B()}function I(o){D(o.clientX,o.clientY)}function C(o){const t=o.touches[0];D(t.clientX,t.clientY)}function D(o,t){const e=k.current,i=w.current;e.x=o-i.left,e.y=t-i.top,e.set||(e.sx=e.x,e.sy=e.y,e.lx=e.x,e.ly=e.y,e.set=!0)}return q(),B(),S.current=requestAnimationFrame(G),window.addEventListener("resize",H),window.addEventListener("mousemove",I),window.addEventListener("touchmove",C,{passive:!1}),()=>{window.removeEventListener("resize",H),window.removeEventListener("mousemove",I),window.removeEventListener("touchmove",C),cancelAnimationFrame(S.current)}},[]),O.jsx("div",{ref:X,className:`waves ${U}`,style:{position:"absolute",top:0,left:0,margin:0,padding:0,width:"100%",height:"100%",overflow:"hidden",backgroundColor:s,...Q},children:O.jsx("canvas",{ref:Y,className:"waves-canvas"})})};export{ot as default};
