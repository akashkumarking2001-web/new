import{j as o,r as i}from"./index-CKqfvLoB.js";import{C as nt,a as rt,u as at}from"./react-three-fiber.esm-DFK4OWio.js";import{D as ct}from"./three.module-DbwSNGae.js";const ht=({count:m=300,magnetRadius:U=10,ringRadius:X=10,waveSpeed:H=.4,waveAmplitude:k=1,particleSize:J=2,lerpSpeed:z=.1,color:K="#FF9FFC",autoAnimate:L=!1,particleVariance:N=1,rotationSpeed:Q=0,depthFactor:l=1,pulseSpeed:V=3,particleShape:x="capsule",fieldStrength:W=10})=>{const q=i.useRef(null),{viewport:M}=rt(),e=i.useMemo(()=>new ct,[]),R=i.useRef({x:0,y:0}),A=i.useRef(0),n=i.useRef({x:0,y:0}),Z=i.useMemo(()=>{const r=[],u=M.width||100,a=M.height||100;for(let s=0;s<m;s++){const C=Math.random()*100,d=20+Math.random()*100,y=.01+Math.random()/200,f=-50+Math.random()*100,F=-50+Math.random()*100,D=-50+Math.random()*100,g=(Math.random()-.5)*u,t=(Math.random()-.5)*a,v=(Math.random()-.5)*20,c=(Math.random()-.5)*2;r.push({t:C,factor:d,speed:y,xFactor:f,yFactor:F,zFactor:D,mx:g,my:t,mz:v,cx:g,cy:t,cz:v,vx:0,vy:0,vz:0,randomRadiusOffset:c})}return r},[m,M.width,M.height]);return at(r=>{const u=q.current;if(!u)return;const{viewport:a,pointer:s}=r;Math.sqrt(Math.pow(s.x-R.current.x,2)+Math.pow(s.y-R.current.y,2))>.001&&(A.current=Date.now(),R.current={x:s.x,y:s.y});let d=s.x*a.width/2,y=s.y*a.height/2;if(L&&Date.now()-A.current>2e3){const t=r.clock.getElapsedTime();d=Math.sin(t*.5)*(a.width/4),y=Math.cos(t*.5*2)*(a.height/4)}const f=.05;n.current.x+=(d-n.current.x)*f,n.current.y+=(y-n.current.y)*f;const F=n.current.x,D=n.current.y,g=r.clock.getElapsedTime()*Q;Z.forEach((t,v)=>{let{t:c,speed:_,mx:O,my:P,mz:Y,cz:$,randomRadiusOffset:S}=t;c=t.t+=_/2;const I=1-$/50,j=F*I,w=D*I,T=O-j,p=P-w,tt=Math.sqrt(T*T+p*p);let h={x:O,y:P,z:Y*l};if(tt<U){const G=Math.atan2(p,T)+g,ot=Math.sin(c*H+G)*(.5*k),et=S*(5/(W+.1)),B=X+ot+et;h.x=j+B*Math.cos(G),h.y=w+B*Math.sin(G),h.z=Y*l+Math.sin(c)*(1*k*l)}t.cx+=(h.x-t.cx)*z,t.cy+=(h.y-t.cy)*z,t.cz+=(h.z-t.cz)*z,e.position.set(t.cx,t.cy,t.cz),e.lookAt(j,w,t.cz),e.rotateX(Math.PI/2);const st=Math.sqrt(Math.pow(t.cx-j,2)+Math.pow(t.cy-w,2));let b=1-Math.abs(st-X)/10;b=Math.max(0,Math.min(1,b));const E=b*(.8+Math.sin(c*V)*.2*N)*J;e.scale.set(E,E,E),e.updateMatrix(),u.setMatrixAt(v,e.matrix)}),u.instanceMatrix.needsUpdate=!0}),o.jsxs("instancedMesh",{ref:q,args:[void 0,void 0,m],children:[x==="capsule"&&o.jsx("capsuleGeometry",{args:[.1,.4,4,8]}),x==="sphere"&&o.jsx("sphereGeometry",{args:[.2,16,16]}),x==="box"&&o.jsx("boxGeometry",{args:[.3,.3,.3]}),x==="tetrahedron"&&o.jsx("tetrahedronGeometry",{args:[.3]}),o.jsx("meshBasicMaterial",{color:K})]})},Mt=m=>o.jsx(nt,{camera:{position:[0,0,50],fov:35},children:o.jsx(ht,{...m})});export{Mt as default};
